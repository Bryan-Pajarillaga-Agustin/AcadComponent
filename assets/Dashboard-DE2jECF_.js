import{f as he,r as n,u as xe,j as e,B as S,l as _e,h as L,i as V,k as M,m as oe,n as fe,o as je,b as le,d as ie,a as ue,c as me}from"./index-DlXNYuRd.js";he();const ve="_dashboardWrapper_1091z_1",ge="_navBar_1091z_14",Se="_Account_Information_Box_1091z_31",be="_left_1091z_48",Ne="_right_1091z_60",U={dashboardWrapper:ve,navBar:ge,Account_Information_Box:Se,left:be,right:Ne},Be="_dashboardNavbarWrapper_z7rvu_1",Ce="_editButt_z7rvu_7",Pe="_Hide_Prompt_Button_z7rvu_30",R={dashboardNavbarWrapper:Be,editButt:Ce,Hide_Prompt_Button:Pe},We=()=>{const{editAccount:s,setEditAccount:l,saveAccountChanges:p,setShowPersonalInformation:i,setShowChanges:x}=n.useContext(de);xe();function v(){s?x(!0):(i(!1),l(!1))}const f=()=>s?e.jsx(e.Fragment,{children:e.jsx(S,{icon:e.jsx("i",{className:"fa fa-save"}),content:"SaveChanges",className:R.editButt,func:()=>{p(),l(!1)}})}):e.jsx(e.Fragment,{children:e.jsx(S,{icon:e.jsx("i",{className:"fa fa-edit"}),content:"Edit Information",className:R.editButt,func:()=>{l(!0)}})});return e.jsxs("div",{className:R.dashboardNavbarWrapper,children:[e.jsx(f,{}),e.jsx(S,{icon:e.jsx("i",{className:"fa fa-close"}),className:R.Hide_Prompt_Button,func:()=>{v()}})]})},ye="_Profile_Img_Wrapper_19wly_1",we="_profPic_19wly_9",Ie="_uploadPictureWrapper_19wly_20",Ee="_showUploadedPictures_19wly_45",Ue="_hideUploadedPictures_19wly_45",ke="_uploadedPicBox_19wly_64",Ae="_bottom_19wly_95",Fe="_clearButt_19wly_104",ze="_hidePromptButt_19wly_148",$e="_Picture_Wrapper_19wly_168",Oe="_Picture_Box_19wly_181",N={Profile_Img_Wrapper:ye,profPic:we,uploadPictureWrapper:Ie,showUploadedPictures:Ee,hideUploadedPictures:Ue,uploadedPicBox:ke,bottom:Ae,clearButt:Fe,hidePromptButt:ze,Picture_Wrapper:$e,Picture_Box:Oe},Me=({accInformation:s,editAccount:l,user:p,setLoading:i})=>{const x=n.useRef(),[v,f]=n.useState(null),[j,h]=n.useState(!1),[u,d]=n.useState([]),[_,m]=n.useState([]),g=async()=>{var a;i(!0);try{let r=[];const o=await _e(L(V,(a=M.currentUser)==null?void 0:a.uid));for(let C in o.items){const y=await oe(o.items[C]);r.unshift({img:y,id:Math.random()*1,fileName:o.items[C].name})}d([...r])}catch(r){console.log(r)}i(!1)},b=async a=>{i(!0);const r=a;if(r){let o="qwertyuiopasdfghjklzxcvbnm",C="";for(let w=0;w<15;w++){let k=Math.floor(Math.random()*o.length);C=C.concat(o[k])}const y=L(V,M.currentUser.uid+`/${r.name+"_"+C}`);await fe(y,r),oe(y).then(w=>{d(k=>[{img:w,id:Math.random()*1,fileName:r.name+"_"+C},...k])})}else console.log("No file selected.");i(!1)},E=async a=>{var r;i(!0);try{await le(ie(ue,"Users",(r=M.currentUser)==null?void 0:r.uid),{profPic:a}),x.current.style.backgroundImage=`url(${a})`}catch(o){console.log(o)}i(!1)},P=async a=>{var r;i(!0);try{await je(L(V,`/${(r=M.currentUser)==null?void 0:r.uid}/${a}`)),g()}catch(o){console.log(o)}i(!1)};n.useEffect(()=>{g()},[p]);const c=()=>{if(v)return e.jsx("div",{className:N.Picture_Wrapper,children:e.jsxs("div",{className:N.Picture_Box,children:[e.jsx(S,{icon:e.jsx("i",{className:"fa fa-close"}),className:N.hidePromptButt,func:()=>{f(!1)}}),e.jsx("img",{src:v})]})})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:N.Profile_Img_Wrapper,children:[e.jsx("div",{ref:x,className:N.profPic,style:s!=null&&s.profPic?{backgroundImage:`url(${s.profPic})`}:{backgroundImage:"url(./blue-circle-with-white-user.png)"},onClick:()=>{f(s.profPic)}}),e.jsxs("div",{className:N.uploadPictureWrapper,children:[l?e.jsx(S,{content:"Change Profile",func:()=>{h(!j)}}):e.jsx("h2",{children:"Profile Picture"}),e.jsx("div",{className:j?N.showUploadedPictures:N.hideUploadedPictures,children:e.jsxs("div",{className:N.uploadedPicBox,children:[e.jsx(S,{icon:e.jsx("i",{className:"fa fa-close"}),className:N.hidePromptButt,func:()=>{h(!1)}}),e.jsx("h2",{children:"Upload Task"}),e.jsxs("div",{className:N.bottom,children:[e.jsx("label",{htmlFor:"imgInput",children:e.jsx("i",{className:"fa fa-plus"})}),e.jsx("input",{type:"file",accept:"image/*",id:"imgInput",onChange:a=>{b(a.target.files[0])},style:{display:"none"}}),u==null?void 0:u.map(a=>e.jsxs("div",{children:[e.jsx(S,{icon:e.jsx("i",{className:"fa fa-close"}),className:N.clearButt,func:()=>P(a==null?void 0:a.fileName)}),e.jsx("div",{style:{backgroundImage:`url(${a.img})`},onClick:()=>{E(a==null?void 0:a.img)}})]},a==null?void 0:a.id))]})]})})]})]}),e.jsx(c,{})]})},Re="_Contacts_Wrapper_nq09d_1",He="_Contacts_Box_nq09d_14",ce={Contacts_Wrapper:Re,Contacts_Box:He},qe=({contacts:s,setContacts:l,editAccount:p})=>{const[i,x]=n.useState(null),[v,f]=n.useState(null),[j,h]=n.useState(s);function u(d,_){_.key!="Enter"?(x(d),f(_.target.value),h(m=>m.map((g,b)=>b==d?{...g,content:_.target.value}:{...g}))):(x(null),l([...j]))}return n.useEffect(()=>{h(s),console.log(s)},[s]),e.jsxs("div",{className:ce.Contacts_Wrapper,children:[e.jsx("h3",{children:"Contacts:"}),e.jsx("div",{className:ce.Contacts_Box,children:s==null?void 0:s.map((d,_)=>e.jsxs("li",{children:[e.jsx("i",{className:"material-icons",children:d.icon}),e.jsx("input",{rows:1,type:"text",value:_==i?v:d.content,style:p?{borderBottom:".2rem solid #EAAE2C"}:{borderBottom:"none"},contentEditable:!!p,onFocus:m=>{f(m.target.value),x(_),l([...j])},onChange:m=>{p&&u(_,m)},onBlur:m=>{f(m.target.value),x(_),l([...j])}},d.content)]},d.content))})]})},Te="_Skills_Wrapper_1c0i8_1",Ge="_Add_Skills_Wrapper_1c0i8_10",De="_Skills_Box_1c0i8_28",Ke="_hideInput_1c0i8_68",Ye="_showInput_1c0i8_72",A={Skills_Wrapper:Te,Add_Skills_Wrapper:Ge,Skills_Box:De,hideInput:Ke,showInput:Ye},Le=({skills:s,addSkill:l,editAccount:p,setSkills:i,skillRef:x})=>{const[v,f]=n.useState(!1);function j(){var u;((u=s==null?void 0:s.current)==null?void 0:u.value)==""||l(),f(!1),x.current.value=""}function h(u){let d=s;for(let _ in d)u==_&&d.splice(_,1);i([...d])}return e.jsxs("form",{className:A.Skills_Wrapper,onSubmit:u=>{u.preventDefault()},children:[e.jsxs("div",{className:A.Add_Skills_Wrapper,children:[e.jsx("h3",{children:"Skills:"}),e.jsx("label",{htmlFor:"blankSkill",style:p?{display:"flex"}:{display:"none"},onClick:()=>f(!0),children:e.jsx("i",{className:"fa fa-plus"})})]}),e.jsxs("div",{className:A.Skills_Box,children:[s==null?void 0:s.map((u,d)=>e.jsxs("li",{children:[e.jsx("span",{children:e.jsx("input",{type:"text",value:u,readOnly:!0})}),p?e.jsx(S,{icon:e.jsx("i",{className:"fa fa-close"}),className:A.Hide_Prompt_Button,func:()=>{h(d)}}):null]},u)),e.jsxs("div",{className:v?A.showInput:A.hideInput,children:[e.jsx("input",{type:"text",id:"blankSkill",ref:x}),e.jsx(S,{content:"Submit",func:()=>{j()}})]})]})]})},Ve="_Forms_Wrapper_1xpdn_1",Je="_accountInfoWrapper_1xpdn_8",Qe="_inputWrapper_1xpdn_15",B={Forms_Wrapper:Ve,accountInfoWrapper:Je,inputWrapper:Qe},Xe=({editAccount:s,accInformation:l,uName:p,setUName:i,school:x,setSchool:v,pBirth:f,setPBirth:j,age:h,setAge:u,bDay:d,setBDay:_,gender:m,setGender:g,hobbies:b,setHobbies:E,grSec:P,setGrSec:c,usingAs:a,setUsingAs:r})=>e.jsxs("div",{className:B.Forms_Wrapper,children:[e.jsxs("div",{className:B.accountInfoWrapper,children:[e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Username:"}),e.jsx("input",{onChange:o=>{s&&i(o.target.value)},type:"text",placeholder:"Ex. Peter M. Dela Cruz",value:p||""})]}),e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"School:"}),e.jsx("input",{onChange:o=>{s&&v(o.target.value)},type:"text",placeholder:"Ex. Lolomboy National High School",value:x||""})]}),e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Gr/Section:"}),e.jsx("input",{onChange:o=>{s&&c(o.target.value)},type:"text",placeholder:"Ex. 10-Rizal",value:P||""})]})]}),e.jsxs("div",{className:B.accountInfoWrapper,children:[e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Place of Birth:"}),e.jsx("input",{onChange:o=>{s&&j(o.target.value)},type:"text",placeholder:"Ex. Marilao, Bulacan",value:f||""})]}),e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Age:"}),e.jsx("input",{onChange:o=>{s&&u(o.target.value)},type:"text",placeholder:"Ex. 26",value:h||""})]}),e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Birthday:"}),e.jsx("input",{onChange:o=>{s&&_(o.target.value)},type:"text",placeholder:"Ex. December 31, 2007",value:d||""})]})]}),e.jsxs("div",{className:B.accountInfoWrapper,children:[e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Gender:"}),e.jsx("input",{onChange:o=>{s&&g(o.target.value)},type:"text",placeholder:"Ex. Male",value:m||""})]}),e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Hobbies:"}),e.jsx("input",{onChange:o=>{s&&E(o.target.value)},type:"text",placeholder:"Ex. Eating, Coding",value:b||""})]})]})]}),Ze="_Selections_Wrapper_1xl4a_1",es="_top_1xl4a_7",ss="_Subjects_Wrapper_1xl4a_41",ts="_makeSubjectButt_1xl4a_48",as="_IndicatedButt_1xl4a_62",ns="_notIndicatedButt_1xl4a_67",rs="_hideMakeSubjectButt_1xl4a_72",os="_bottom_1xl4a_86",W={Selections_Wrapper:Ze,top:es,Subjects_Wrapper:ss,makeSubjectButt:ts,IndicatedButt:as,notIndicatedButt:ns,hideMakeSubjectButt:rs,bottom:os},cs=({accInformation:s,editAccount:l,setFavSubjects:p,purpose:i,setPurpose:x,usingAs:v,setUsingAs:f})=>{const j=n.useRef(),[h,u]=n.useState(null),[d,_]=n.useState(!1),[m,g]=n.useState(0);function b(c){const a=c==null?void 0:c.target;(a==null?void 0:a.value)!=""&&(c==null?void 0:c.key)=="Enter"&&m==0?(g(r=>r+1),_(!1),u(r=>{var o;return[{content:(o=j.current)==null?void 0:o.value,testClass:!0},...r]})):(a==null?void 0:a.value)==""&&(c==null?void 0:c.key)=="Enter"&&(a.value="",_(!1))}function E(c){u(a=>a.map((r,o)=>o==c?{...r,testClass:r.testClass!=!0}:{...r}))}function P(){let c=h,a=[];for(let r in h)c[r].testClass==!0&&a.push(c[r]);u([...a])}return n.useEffect(()=>{h&&p([...h])},[h]),n.useEffect(()=>{s!=null&&s.favSubjects&&u([...s.favSubjects])},[s]),e.jsxs("div",{className:W.Selections_Wrapper,children:[e.jsxs("div",{className:W.top,children:[e.jsxs("h3",{children:[e.jsx("span",{children:"Favourite Subjects"}),e.jsxs("label",{htmlFor:d?"makesubject":"",style:l?{display:"flex"}:{display:"none"},children:[e.jsx("i",{className:"fa fa-plus",onClick:()=>{_(!0),g(0),j.current.value=""}}),e.jsx("i",{className:"fa fa-trash",onClick:()=>{P()}})]})]}),e.jsxs("div",{className:W.Subjects_Wrapper,children:[e.jsx(S,{element:e.jsx("input",{type:"text",id:"makesubject",ref:j,onKeyDown:c=>{b(c)},onBlur:c=>{j.current.value!=""&&(console.log(j.current.value),u(a=>a.filter(r=>r.content.toLowerCase()!==j.current.value.toLowerCase())),u(a=>{var r;return[{content:(r=j.current)==null?void 0:r.value,testClass:!0},...a]}),g(a=>a+1)),_(!1)}}),className:d?W.makeSubjectButt:W.hideMakeSubjectButt}),h==null?void 0:h.map((c,a)=>e.jsx(S,{func:()=>{l&&E(a)},className:c.testClass==!0?W.IndicatedButt:W.notIndicatedButt,content:h[a].content},c+a.toString()))]})]}),e.jsxs("div",{className:W.bottom,children:[e.jsxs("div",{className:W.Purpose_Wrapper,children:[e.jsx("h3",{children:e.jsx("span",{children:"Using As:"})}),l?e.jsx("textarea",{type:"text",contentEditable:!!l,onChange:c=>{f(c.target.value)},rows:"1",value:v}):e.jsx("p",{children:v})]}),e.jsxs("div",{className:W.Using_As_Wrapper,children:[e.jsx("h3",{children:e.jsx("span",{children:"Purpose"})}),l?e.jsx("textarea",{type:"text",contentEditable:!!l,onChange:c=>{x(c.target.value)},value:i}):e.jsx("p",{children:i})]})]})]})},ls="_bioWrapper_q9y6o_1",is={bioWrapper:ls},us=({editAccount:s,desc:l,setDesc:p})=>e.jsxs("div",{className:is.bioWrapper,children:[e.jsx("h3",{children:e.jsx("span",{children:"Bio"})}),s?e.jsx("textarea",{rows:4,contentEditable:!!s,onChange:i=>{p(i.target.value)},value:l}):e.jsx("p",{children:l})]}),ds="_Changes_Wrapper_weq0z_1",ps="_Changes_Box_weq0z_15",hs="_Top_weq0z_29",xs="_Options_weq0z_55",H={Changes_Wrapper:ds,Changes_Box:ps,Top:hs,Options:xs},_s=({showChanges:s,setShowChanges:l,setShowPersonalInfo:p,saveAccountChanges:i,setEditAccount:x})=>{if(s)return e.jsx("div",{className:H.Changes_Wrapper,children:e.jsxs("div",{className:H.Changes_Box,children:[e.jsxs("div",{className:H.Top,children:[e.jsx("i",{className:"fa fa-warning"}),e.jsx("h3",{children:"Would You Save Your Previous Changes?"})]}),e.jsxs("div",{className:H.Options,children:[e.jsx(S,{content:"No",func:()=>{window.location.reload()}}),e.jsx(S,{content:"Yes",func:()=>{l(!1),i(),p(!1),x(!1)}})]})]})})},de=n.createContext(),js=()=>{const{userData:s,user:l,setLoading:p}=n.useContext(me),i=n.useRef(),[x,v]=n.useState(),[f,j]=n.useState(),[h,u]=n.useState(),[d,_]=n.useState(),[m,g]=n.useState(),[b,E]=n.useState(),[P,c]=n.useState(),[a,r]=n.useState(),[o,C]=n.useState(),[y,w]=n.useState(),[k,q]=n.useState(),[I,F]=n.useState(!1),[J,T]=n.useState(!1),[G,$]=n.useState([]),[D,K]=n.useState([]),[Q,X]=n.useState([]);function Z(){var t;((t=i.current)==null?void 0:t.value)!=""&&$(O=>{var z;return[...O,(z=i.current)==null?void 0:z.value]})}const Y=async()=>{p(!0);try{await le(ie(ue,"Users",l==null?void 0:l.uid),{perInfo:{school:f,name:x,grSec:a,age:d,bDay:m,gender:b,hobbies:P,placeOfBirth:h,purpose:o},usingAs:y,favSubjects:Q,description:k,contacts:D,skills:G})}catch(t){console.log(t)}p(!1)},pe={userData:s,user:l,setLoading:p,uName:x,school:f,pBirth:h,age:d,bDay:m,gender:b,hobbies:P,grSec:a,purpose:o,setPurpose:C,usingAs:y,setUsingAs:w,desc:k,setDesc:q,editAccount:I,setEditAccount:F,showChanges:J,setShowChanges:T,skills:G,setSkills:$,contacts:D,setContacts:K,favSubjects:Q,setFavSubjects:X,addSkill:Z,saveAccountChanges:Y};return n.useEffect(()=>{var t,O,z,ee,se,te,ae,ne,re;s&&(v((t=s.perInfo)==null?void 0:t.name),j((O=s.perInfo)==null?void 0:O.school),u((z=s.perInfo)==null?void 0:z.placeOfBirth),_((ee=s.perInfo)==null?void 0:ee.age),g((se=s.perInfo)==null?void 0:se.bDay),E((te=s.perInfo)==null?void 0:te.gender),c((ae=s.perInfo)==null?void 0:ae.hobbies),r((ne=s.perInfo)==null?void 0:ne.grSec),w(s==null?void 0:s.usingAs),C((re=s==null?void 0:s.perInfo)==null?void 0:re.purpose),q(s==null?void 0:s.description),K(s!=null&&s.contacts?s==null?void 0:s.contacts:[]),$(s!=null&&s.skills?s==null?void 0:s.skills:[]))},[s]),e.jsx(e.Fragment,{children:e.jsxs(de.Provider,{value:pe,children:[e.jsxs("div",{className:U.dashboardWrapper,children:[e.jsxs("nav",{className:U.navBar,children:[e.jsx("h1",{children:"PERSONAL INFORMATIONS"}),e.jsx(We,{editAccount:I,setEditAccount:t=>F(t),saveAccountChanges:()=>Y(),setShowPersonalInformation:t=>setShowPersonalInformation(t),setShowChanges:t=>T(t)})]}),e.jsxs("div",{className:U.Account_Information_Box,children:[e.jsxs("div",{className:U.left,children:[e.jsx(Me,{editAccount:I,setEditAccount:t=>{F(t)},user:l,setLoading:t=>p(t)}),e.jsx(Le,{skills:G,setSkills:t=>{$(t)},addSkill:()=>{Z()},skillRef:i,editAccount:I,setEditAccount:t=>{F(t)},setLoading:t=>p(t)}),e.jsx(qe,{contacts:D,setContacts:t=>K(t),editAccount:I})]}),e.jsxs("div",{className:U.right,children:[e.jsx("div",{className:U.top,children:e.jsx(Xe,{editAccount:I,uName:x,setUName:t=>{v(t)},school:f,setSchool:t=>{j(t)},pBirth:h,setPBirth:t=>{u(t)},age:d,setAge:t=>{_(t)},bDay:m,setBDay:t=>{g(t)},gender:b,setGender:t=>{E(t)},hobbies:P,setHobbies:t=>{c(t)},grSec:a,setGrSec:t=>{r(t)},usingAs:y,setUsingAs:t=>{w(t)}})}),e.jsx("div",{className:U.mid,children:e.jsx(cs,{editAccount:I,setFavSubjects:t=>{X(t)},usingAs:y,setUsingAs:t=>{w(t)},purpose:o,setPurpose:t=>{C(t)}})}),e.jsx("div",{className:U.bottom,children:e.jsx(us,{editAccount:I,desc:k,setDesc:t=>{q(t)}})})]})]})]}),e.jsx(_s,{editAccount:I,setEditAccount:t=>F(t),setShowPersonalInfo:t=>setShowPersonalInformation(t),saveAccountChanges:()=>Y(),showChanges:J,setShowChanges:t=>T(t)})]})})};export{de as dashboardContext,js as default};
