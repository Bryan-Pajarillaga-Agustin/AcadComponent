import{n as xe,r as a,c as ce,u as fe,j as e,B as b,o as je,f as q,i as T,h as $,l as re,k as me,m as _e,b as le,d as ie,a as ue}from"./index-D4iUY_VG.js";xe();const ge="_dashboardWrapper_xgkre_1",ve="_navBar_xgkre_14",be="_dashboardBox_xgkre_31",Se="_left_xgkre_48",Ne="_right_xgkre_60",I={dashboardWrapper:ge,navBar:ve,dashboardBox:be,left:Se,right:Ne},Be="_dashboardNavbarWrapper_z7rvu_1",Ce="_editButt_z7rvu_7",We="_Hide_Prompt_Button_z7rvu_30",O={dashboardNavbarWrapper:Be,editButt:Ce,Hide_Prompt_Button:We},Pe=()=>{const{editAccount:s,setEditAccount:r,saveAccountChanges:x,setShowChanges:c}=a.useContext(y),{prevPage:f}=a.useContext(ce),_=fe();function j(){s?c(!0):(_(f),r(!1))}const p=()=>s?e.jsx(e.Fragment,{children:e.jsx(b,{icon:e.jsx("i",{className:"fa fa-save"}),content:"SaveChanges",className:O.editButt,func:()=>{x(),r(!1)}})}):e.jsx(e.Fragment,{children:e.jsx(b,{icon:e.jsx("i",{className:"fa fa-edit"}),content:"Edit Information",className:O.editButt,func:()=>{r(!0)}})});return e.jsxs("div",{className:O.dashboardNavbarWrapper,children:[e.jsx(p,{}),e.jsx(b,{icon:e.jsx("i",{className:"fa fa-close"}),className:O.Hide_Prompt_Button,func:()=>{j()}})]})},Ie="_profileImgWrapper_rep40_1",ye="_profPic_rep40_9",we="_uploadPictureWrapper_rep40_20",ke="_showUploadedPictures_rep40_45",Ee="_hideUploadedPictures_rep40_45",Ae="_uploadedPicBox_rep40_64",Ue="_bottom_rep40_95",$e="_clearButt_rep40_104",Oe="_hidePromptButt_rep40_148",Re="_pictureWrapper_rep40_168",Fe="_pictureBox_rep40_181",N={profileImgWrapper:Ie,profPic:ye,uploadPictureWrapper:we,showUploadedPictures:ke,hideUploadedPictures:Ee,uploadedPicBox:Ae,bottom:Ue,clearButt:$e,hidePromptButt:Oe,pictureWrapper:Re,pictureBox:Fe},Me=()=>{const{userData:s,editAccount:r,user:x,setLoading:c}=a.useContext(y),f=a.useRef(),[_,j]=a.useState(null),[p,h]=a.useState(!1),[l,d]=a.useState([]),i=async()=>{var o;c(!0);try{let t=[];const n=await je(q(T,`${(o=$.currentUser)==null?void 0:o.uid}/Uploaded_Profile_Pictures`));for(let u in n.items){const S=await re(n.items[u]);t.unshift({img:S,id:Math.random()*1,fileName:n.items[u].name})}d([...t])}catch(t){console.log(t)}c(!1)},g=async o=>{c(!0);const t=o;if(t){let n="qwertyuiopasdfghjklzxcvbnm",u="";for(let w=0;w<15;w++){let k=Math.floor(Math.random()*n.length);u=u.concat(n[k])}const S=q(T,$.currentUser.uid+`/Uploaded_Profile_Pictures/${t.name+"_"+u}`);await me(S,t),re(S).then(w=>{d(k=>[{img:w,id:Math.random()*1,fileName:t.name+"_"+u},...k])})}else console.log("No file selected.");c(!1)},v=async o=>{var t;c(!0);try{await le(ie(ue,"Users",(t=$.currentUser)==null?void 0:t.uid),{profPic:o}),f.current.style.backgroundImage=`url(${o})`}catch(n){console.log(n)}c(!1)},C=async o=>{var t;c(!0);try{await _e(q(T,`/${(t=$.currentUser)==null?void 0:t.uid}/Uploaded_Profile_Pictures/${o}`)),i()}catch(n){console.log(n)}c(!1)};a.useEffect(()=>{i()},[x]);const P=()=>{if(_)return e.jsx("div",{className:N.pictureWrapper,children:e.jsxs("div",{className:N.pictureBox,children:[e.jsx(b,{icon:e.jsx("i",{className:"fa fa-close"}),className:N.hidePromptButt,func:()=>{j(!1)}}),e.jsx("img",{src:_})]})})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:N.profileImgWrapper,children:[e.jsx("div",{ref:f,className:N.profPic,style:s!=null&&s.profPic?{backgroundImage:`url(${s.profPic})`}:{backgroundImage:"url(./blue-circle-with-white-user.png)"},onClick:()=>{j(s.profPic)}}),e.jsxs("div",{className:N.uploadPictureWrapper,children:[r?e.jsx(b,{content:"Change Profile",func:()=>{h(!p)}}):e.jsx("h2",{children:"Profile Picture"}),e.jsx("div",{className:p?N.showUploadedPictures:N.hideUploadedPictures,children:e.jsxs("div",{className:N.uploadedPicBox,children:[e.jsx(b,{icon:e.jsx("i",{className:"fa fa-close"}),className:N.hidePromptButt,func:()=>{h(!1)}}),e.jsx("h2",{children:"Upload Task"}),e.jsxs("div",{className:N.bottom,children:[e.jsx("label",{htmlFor:"imgInput",children:e.jsx("i",{className:"fa fa-plus"})}),e.jsx("input",{type:"file",accept:"image/*",id:"imgInput",onChange:o=>{g(o.target.files[0])},style:{display:"none"}}),l==null?void 0:l.map(o=>e.jsxs("div",{children:[e.jsx(b,{icon:e.jsx("i",{className:"fa fa-close"}),className:N.clearButt,func:()=>C(o==null?void 0:o.fileName)}),e.jsx("div",{style:{backgroundImage:`url(${o.img})`},onClick:()=>{v(o==null?void 0:o.img)}})]},o==null?void 0:o.id))]})]})})]})]}),e.jsx(P,{})]})},ze="_contactsWrapper_18k80_1",He="_contactsBox_18k80_14",oe={contactsWrapper:ze,contactsBox:He},Le=()=>{const{contacts:s,setContacts:r,editAccount:x}=a.useContext(y),[c,f]=a.useState(null),[_,j]=a.useState(null),[p,h]=a.useState(s);function l(d,i){i.key!="Enter"?(f(d),j(i.target.value),h(g=>g.map((v,C)=>C==d?{...v,content:i.target.value}:{...v}))):(f(null),r([...p]))}return a.useEffect(()=>{h(s),console.log(s)},[s]),e.jsxs("div",{className:oe.contactsWrapper,children:[e.jsx("h3",{children:"Contacts:"}),e.jsx("div",{className:oe.contactsBox,children:s==null?void 0:s.map((d,i)=>e.jsxs("li",{children:[e.jsx("i",{className:"material-icons",children:d.icon}),e.jsx("input",{rows:1,type:"text",value:i==c?_:d.content,style:x?{borderBottom:".2rem solid #EAAE2C"}:{borderBottom:"none"},contentEditable:!!x,onFocus:g=>{j(g.target.value),f(i),r([...p])},onChange:g=>{x&&l(i,g)},onBlur:g=>{j(g.target.value),f(i),r([...p])}},d.content)]},d.content))})]})},qe="_skillsWrapper_8ovn6_1",Te="_addSkillsWrapper_8ovn6_10",Ge="_skillsBox_8ovn6_28",De="_hideInput_8ovn6_68",Ke="_showInput_8ovn6_72",E={skillsWrapper:qe,addSkillsWrapper:Te,skillsBox:Ge,hideInput:De,showInput:Ke},Ye=()=>{const{skills:s,addSkill:r,editAccount:x,setSkills:c,skillRef:f}=a.useContext(y),[_,j]=a.useState(!1);function p(){var l;((l=s==null?void 0:s.current)==null?void 0:l.value)==""||r(),j(!1),f.current.value=""}function h(l){let d=s;for(let i in d)l==i&&d.splice(i,1);c([...d])}return e.jsxs("form",{className:E.skillsWrapper,onSubmit:l=>{l.preventDefault()},children:[e.jsxs("div",{className:E.addSkillsWrapper,children:[e.jsx("h3",{children:"Skills:"}),e.jsx("label",{htmlFor:"blankSkill",style:x?{display:"flex"}:{display:"none"},onClick:()=>j(!0),children:e.jsx("i",{className:"fa fa-plus"})})]}),e.jsxs("div",{className:E.skillsBox,children:[s==null?void 0:s.map((l,d)=>e.jsxs("li",{children:[e.jsx("span",{children:e.jsx("input",{type:"text",value:l,readOnly:!0})}),x?e.jsx(b,{icon:e.jsx("i",{className:"fa fa-close"}),className:E.hidePromptButton,func:()=>{h(d)}}):null]},l)),e.jsxs("div",{className:_?E.showInput:E.hideInput,children:[e.jsx("input",{type:"text",id:"blankSkill",ref:f}),e.jsx(b,{content:"Submit",func:()=>{p()}})]})]})]})},Ve="_formsWrapper_ok147_1",Je="_accountInfoWrapper_ok147_8",Qe="_inputWrapper_ok147_15",B={formsWrapper:Ve,accountInfoWrapper:Je,inputWrapper:Qe},Xe=()=>{const{editAccount:s,uName:r,setUName:x,school:c,setSchool:f,pBirth:_,setPBirth:j,age:p,setAge:h,bDay:l,setBDay:d,gender:i,setGender:g,hobbies:v,setHobbies:C,grSec:P,setGrSec:o}=a.useContext(y);return e.jsxs("div",{className:B.formsWrapper,children:[e.jsxs("div",{className:B.accountInfoWrapper,children:[e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Username:"}),e.jsx("input",{onChange:t=>{s&&x(t.target.value)},type:"text",placeholder:"Ex. Peter M. Dela Cruz",value:r||""})]}),e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"School:"}),e.jsx("input",{onChange:t=>{s&&f(t.target.value)},type:"text",placeholder:"Ex. Lolomboy National High School",value:c||""})]}),e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Gr/Section:"}),e.jsx("input",{onChange:t=>{s&&o(t.target.value)},type:"text",placeholder:"Ex. 10-Rizal",value:P||""})]})]}),e.jsxs("div",{className:B.accountInfoWrapper,children:[e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Place of Birth:"}),e.jsx("input",{onChange:t=>{s&&j(t.target.value)},type:"text",placeholder:"Ex. Marilao, Bulacan",value:_||""})]}),e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Age:"}),e.jsx("input",{onChange:t=>{s&&h(t.target.value)},type:"text",placeholder:"Ex. 26",value:p||""})]}),e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Birthday:"}),e.jsx("input",{onChange:t=>{s&&d(t.target.value)},type:"text",placeholder:"Ex. December 31, 2007",value:l||""})]})]}),e.jsxs("div",{className:B.accountInfoWrapper,children:[e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Gender:"}),e.jsx("input",{onChange:t=>{s&&g(t.target.value)},type:"text",placeholder:"Ex. Male",value:i||""})]}),e.jsxs("div",{className:B.inputWrapper,children:[e.jsx("h4",{children:"Hobbies:"}),e.jsx("input",{onChange:t=>{s&&C(t.target.value)},type:"text",placeholder:"Ex. Eating, Coding",value:v||""})]})]})]})},Ze="_Selections_Wrapper_1xl4a_1",es="_top_1xl4a_7",ss="_Subjects_Wrapper_1xl4a_41",ts="_makeSubjectButt_1xl4a_48",as="_IndicatedButt_1xl4a_62",ns="_notIndicatedButt_1xl4a_67",rs="_hideMakeSubjectButt_1xl4a_72",os="_bottom_1xl4a_86",W={Selections_Wrapper:Ze,top:es,Subjects_Wrapper:ss,makeSubjectButt:ts,IndicatedButt:as,notIndicatedButt:ns,hideMakeSubjectButt:rs,bottom:os},cs=()=>{const{userData:s,editAccount:r,setFavSubjects:x,purpose:c,setPurpose:f,usingAs:_,setUsingAs:j}=a.useContext(y),p=a.useRef(),[h,l]=a.useState(null),[d,i]=a.useState(!1),[g,v]=a.useState(0);function C(t){const n=t==null?void 0:t.target;(n==null?void 0:n.value)!=""&&(t==null?void 0:t.key)=="Enter"&&g==0?(v(u=>u+1),i(!1),l(u=>{var S;return[{content:(S=p.current)==null?void 0:S.value,testClass:!0},...u]})):(n==null?void 0:n.value)==""&&(t==null?void 0:t.key)=="Enter"&&(n.value="",i(!1))}function P(t){l(n=>n.map((u,S)=>S==t?{...u,testClass:u.testClass!=!0}:{...u}))}function o(){let t=h,n=[];for(let u in h)t[u].testClass==!0&&n.push(t[u]);l([...n])}return a.useEffect(()=>{h&&x([...h])},[h]),a.useEffect(()=>{s!=null&&s.favSubjects&&l([...s.favSubjects])},[s]),e.jsxs("div",{className:W.Selections_Wrapper,children:[e.jsxs("div",{className:W.top,children:[e.jsxs("h3",{children:[e.jsx("span",{children:"Favourite Subjects"}),e.jsxs("label",{htmlFor:d?"makesubject":"",style:r?{display:"flex"}:{display:"none"},children:[e.jsx("i",{className:"fa fa-plus",onClick:()=>{i(!0),v(0),p.current.value=""}}),e.jsx("i",{className:"fa fa-trash",onClick:()=>{o()}})]})]}),e.jsxs("div",{className:W.Subjects_Wrapper,children:[e.jsx(b,{element:e.jsx("input",{type:"text",id:"makesubject",ref:p,onKeyDown:t=>{C(t)},onBlur:t=>{p.current.value!=""&&(console.log(p.current.value),l(n=>n.filter(u=>u.content.toLowerCase()!==p.current.value.toLowerCase())),l(n=>{var u;return[{content:(u=p.current)==null?void 0:u.value,testClass:!0},...n]}),v(n=>n+1)),i(!1)}}),className:d?W.makeSubjectButt:W.hideMakeSubjectButt}),h==null?void 0:h.map((t,n)=>e.jsx(b,{func:()=>{r&&P(n)},className:t.testClass==!0?W.IndicatedButt:W.notIndicatedButt,content:h[n].content},t+n.toString()))]})]}),e.jsxs("div",{className:W.bottom,children:[e.jsxs("div",{className:W.Purpose_Wrapper,children:[e.jsx("h3",{children:e.jsx("span",{children:"Using As:"})}),r?e.jsx("textarea",{type:"text",contentEditable:!!r,onChange:t=>{j(t.target.value)},rows:"1",value:_}):e.jsx("p",{children:_})]}),e.jsxs("div",{className:W.Using_As_Wrapper,children:[e.jsx("h3",{children:e.jsx("span",{children:"Purpose"})}),r?e.jsx("textarea",{type:"text",contentEditable:!!r,onChange:t=>{f(t.target.value)},value:c}):e.jsx("p",{children:c})]})]})]})},ls="_bioWrapper_q9y6o_1",is={bioWrapper:ls},us=()=>{const{editAccount:s,desc:r,setDesc:x}=a.useContext(y);return e.jsxs("div",{className:is.bioWrapper,children:[e.jsx("h3",{children:e.jsx("span",{children:"Bio"})}),s?e.jsx("textarea",{rows:4,contentEditable:!!s,onChange:c=>{x(c.target.value)},value:r}):e.jsx("p",{children:r})]})},ds="_Changes_Wrapper_weq0z_1",ps="_Changes_Box_weq0z_15",hs="_Top_weq0z_29",xs="_Options_weq0z_55",R={Changes_Wrapper:ds,Changes_Box:ps,Top:hs,Options:xs},fs=({showChanges:s,setShowChanges:r,setShowPersonalInfo:x,saveAccountChanges:c,setEditAccount:f})=>{if(s)return e.jsx("div",{className:R.Changes_Wrapper,children:e.jsxs("div",{className:R.Changes_Box,children:[e.jsxs("div",{className:R.Top,children:[e.jsx("i",{className:"fa fa-warning"}),e.jsx("h3",{children:"Would You Save Your Previous Changes?"})]}),e.jsxs("div",{className:R.Options,children:[e.jsx(b,{content:"No",func:()=>{window.location.reload()}}),e.jsx(b,{content:"Yes",func:()=>{r(!1),c(),x(!1),f(!1)}})]})]})})},y=a.createContext(),ms=()=>{const{userData:s,user:r,setLoading:x}=a.useContext(ce),c=a.useRef(),[f,_]=a.useState(),[j,p]=a.useState(),[h,l]=a.useState(),[d,i]=a.useState(),[g,v]=a.useState(),[C,P]=a.useState(),[o,t]=a.useState(),[n,u]=a.useState(),[S,w]=a.useState(),[k,G]=a.useState(),[D,K]=a.useState(),[F,M]=a.useState(!1),[Y,z]=a.useState(!1),[V,H]=a.useState([]),[J,Q]=a.useState([]),[X,de]=a.useState([]);function pe(){var m;((m=c.current)==null?void 0:m.value)!=""&&H(U=>{var A;return[...U,(A=c.current)==null?void 0:A.value]})}const L=async()=>{x(!0);try{await le(ie(ue,"Users",r==null?void 0:r.uid),{perInfo:{school:j,name:f,grSec:n,age:d,bDay:g,gender:C,hobbies:o,placeOfBirth:h,purpose:S},usingAs:k,favSubjects:X,description:D,contacts:J,skills:V})}catch(m){console.log(m)}x(!1)},he={userData:s,user:r,setLoading:x,uName:f,school:j,pBirth:h,age:d,bDay:g,gender:C,hobbies:o,grSec:n,purpose:S,setPurpose:w,usingAs:k,setUsingAs:G,desc:D,setDesc:K,editAccount:F,setEditAccount:M,showChanges:Y,setShowChanges:z,skills:V,setSkills:H,contacts:J,setContacts:Q,favSubjects:X,setFavSubjects:de,addSkill:pe,saveAccountChanges:L};return a.useEffect(()=>{var m,U,A,Z,ee,se,te,ae,ne;s&&(_((m=s.perInfo)==null?void 0:m.name),p((U=s.perInfo)==null?void 0:U.school),l((A=s.perInfo)==null?void 0:A.placeOfBirth),i((Z=s.perInfo)==null?void 0:Z.age),v((ee=s.perInfo)==null?void 0:ee.bDay),P((se=s.perInfo)==null?void 0:se.gender),t((te=s.perInfo)==null?void 0:te.hobbies),u((ae=s.perInfo)==null?void 0:ae.grSec),G(s==null?void 0:s.usingAs),w((ne=s==null?void 0:s.perInfo)==null?void 0:ne.purpose),K(s==null?void 0:s.description),Q(s!=null&&s.contacts?s==null?void 0:s.contacts:[]),H(s!=null&&s.skills?s==null?void 0:s.skills:[]))},[s]),e.jsx(e.Fragment,{children:e.jsxs(y.Provider,{value:he,children:[e.jsxs("div",{className:I.dashboardWrapper,children:[e.jsxs("nav",{className:I.navBar,children:[e.jsx("h1",{children:"PERSONAL INFORMATIONS"}),e.jsx(Pe,{editAccount:F,setEditAccount:m=>M(m),saveAccountChanges:()=>L(),setShowPersonalInformation:m=>setShowPersonalInformation(m),setShowChanges:m=>z(m)})]}),e.jsxs("div",{className:I.dashboardBox,children:[e.jsxs("div",{className:I.left,children:[e.jsx(Me,{}),e.jsx(Ye,{}),e.jsx(Le,{})]}),e.jsxs("div",{className:I.right,children:[e.jsx("div",{className:I.top,children:e.jsx(Xe,{})}),e.jsx("div",{className:I.mid,children:e.jsx(cs,{})}),e.jsx("div",{className:I.bottom,children:e.jsx(us,{})})]})]})]}),e.jsx(fs,{editAccount:F,setEditAccount:m=>M(m),setShowPersonalInfo:m=>setShowPersonalInformation(m),saveAccountChanges:()=>L(),showChanges:Y,setShowChanges:m=>z(m)})]})})};export{y as dashboardContext,ms as default};
