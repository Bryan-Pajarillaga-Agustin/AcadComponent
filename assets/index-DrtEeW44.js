(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var Cg={exports:{}},oc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PS;function ox(){if(PS)return oc;PS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:c,ref:a!==void 0?a:null,props:l}}return oc.Fragment=e,oc.jsx=t,oc.jsxs=t,oc}var MS;function lx(){return MS||(MS=1,Cg.exports=ox()),Cg.exports}var y=lx(),Ag={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LS;function ux(){if(LS)return Le;LS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function E(U){return U===null||typeof U!="object"?null:(U=T&&U[T]||U["@@iterator"],typeof U=="function"?U:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,j={};function D(U,te,B){this.props=U,this.context=te,this.refs=j,this.updater=B||R}D.prototype.isReactComponent={},D.prototype.setState=function(U,te){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,te,"setState")},D.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function M(){}M.prototype=D.prototype;function z(U,te,B){this.props=U,this.context=te,this.refs=j,this.updater=B||R}var q=z.prototype=new M;q.constructor=z,A(q,D.prototype),q.isPureReactComponent=!0;var ne=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},ee=Object.prototype.hasOwnProperty;function O(U,te,B,$,X,ie){return B=ie.ref,{$$typeof:n,type:U,key:te,ref:B!==void 0?B:null,props:ie}}function I(U,te){return O(U.type,te,void 0,void 0,void 0,U.props)}function N(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function V(U){var te={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(B){return te[B]})}var L=/\/+/g;function F(U,te){return typeof U=="object"&&U!==null&&U.key!=null?V(""+U.key):te.toString(36)}function k(){}function Pe(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(k,k):(U.status="pending",U.then(function(te){U.status==="pending"&&(U.status="fulfilled",U.value=te)},function(te){U.status==="pending"&&(U.status="rejected",U.reason=te)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function De(U,te,B,$,X){var ie=typeof U;(ie==="undefined"||ie==="boolean")&&(U=null);var fe=!1;if(U===null)fe=!0;else switch(ie){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(U.$$typeof){case n:case e:fe=!0;break;case v:return fe=U._init,De(fe(U._payload),te,B,$,X)}}if(fe)return X=X(U),fe=$===""?"."+F(U,0):$,ne(X)?(B="",fe!=null&&(B=fe.replace(L,"$&/")+"/"),De(X,te,B,"",function(wt){return wt})):X!=null&&(N(X)&&(X=I(X,B+(X.key==null||U&&U.key===X.key?"":(""+X.key).replace(L,"$&/")+"/")+fe)),te.push(X)),1;fe=0;var Ee=$===""?".":$+":";if(ne(U))for(var ge=0;ge<U.length;ge++)$=U[ge],ie=Ee+F($,ge),fe+=De($,te,B,ie,X);else if(ge=E(U),typeof ge=="function")for(U=ge.call(U),ge=0;!($=U.next()).done;)$=$.value,ie=Ee+F($,ge++),fe+=De($,te,B,ie,X);else if(ie==="object"){if(typeof U.then=="function")return De(Pe(U),te,B,$,X);throw te=String(U),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return fe}function J(U,te,B){if(U==null)return U;var $=[],X=0;return De(U,$,"","",function(ie){return te.call(B,ie,X++)}),$}function ce(U){if(U._status===-1){var te=U._result;te=te(),te.then(function(B){(U._status===0||U._status===-1)&&(U._status=1,U._result=B)},function(B){(U._status===0||U._status===-1)&&(U._status=2,U._result=B)}),U._status===-1&&(U._status=0,U._result=te)}if(U._status===1)return U._result.default;throw U._result}var pe=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function ve(){}return Le.Children={map:J,forEach:function(U,te,B){J(U,function(){te.apply(this,arguments)},B)},count:function(U){var te=0;return J(U,function(){te++}),te},toArray:function(U){return J(U,function(te){return te})||[]},only:function(U){if(!N(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Le.Component=D,Le.Fragment=t,Le.Profiler=a,Le.PureComponent=z,Le.StrictMode=s,Le.Suspense=p,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,Le.__COMPILER_RUNTIME={__proto__:null,c:function(U){return ue.H.useMemoCache(U)}},Le.cache=function(U){return function(){return U.apply(null,arguments)}},Le.cloneElement=function(U,te,B){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var $=A({},U.props),X=U.key,ie=void 0;if(te!=null)for(fe in te.ref!==void 0&&(ie=void 0),te.key!==void 0&&(X=""+te.key),te)!ee.call(te,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&te.ref===void 0||($[fe]=te[fe]);var fe=arguments.length-2;if(fe===1)$.children=B;else if(1<fe){for(var Ee=Array(fe),ge=0;ge<fe;ge++)Ee[ge]=arguments[ge+2];$.children=Ee}return O(U.type,X,void 0,void 0,ie,$)},Le.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},Le.createElement=function(U,te,B){var $,X={},ie=null;if(te!=null)for($ in te.key!==void 0&&(ie=""+te.key),te)ee.call(te,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(X[$]=te[$]);var fe=arguments.length-2;if(fe===1)X.children=B;else if(1<fe){for(var Ee=Array(fe),ge=0;ge<fe;ge++)Ee[ge]=arguments[ge+2];X.children=Ee}if(U&&U.defaultProps)for($ in fe=U.defaultProps,fe)X[$]===void 0&&(X[$]=fe[$]);return O(U,ie,void 0,void 0,null,X)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(U){return{$$typeof:d,render:U}},Le.isValidElement=N,Le.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:ce}},Le.memo=function(U,te){return{$$typeof:m,type:U,compare:te===void 0?null:te}},Le.startTransition=function(U){var te=ue.T,B={};ue.T=B;try{var $=U(),X=ue.S;X!==null&&X(B,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(ve,pe)}catch(ie){pe(ie)}finally{ue.T=te}},Le.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},Le.use=function(U){return ue.H.use(U)},Le.useActionState=function(U,te,B){return ue.H.useActionState(U,te,B)},Le.useCallback=function(U,te){return ue.H.useCallback(U,te)},Le.useContext=function(U){return ue.H.useContext(U)},Le.useDebugValue=function(){},Le.useDeferredValue=function(U,te){return ue.H.useDeferredValue(U,te)},Le.useEffect=function(U,te,B){var $=ue.H;if(typeof B=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(U,te)},Le.useId=function(){return ue.H.useId()},Le.useImperativeHandle=function(U,te,B){return ue.H.useImperativeHandle(U,te,B)},Le.useInsertionEffect=function(U,te){return ue.H.useInsertionEffect(U,te)},Le.useLayoutEffect=function(U,te){return ue.H.useLayoutEffect(U,te)},Le.useMemo=function(U,te){return ue.H.useMemo(U,te)},Le.useOptimistic=function(U,te){return ue.H.useOptimistic(U,te)},Le.useReducer=function(U,te,B){return ue.H.useReducer(U,te,B)},Le.useRef=function(U){return ue.H.useRef(U)},Le.useState=function(U){return ue.H.useState(U)},Le.useSyncExternalStore=function(U,te,B){return ue.H.useSyncExternalStore(U,te,B)},Le.useTransition=function(){return ue.H.useTransition()},Le.version="19.1.0",Le}var US;function G_(){return US||(US=1,Ag.exports=ux()),Ag.exports}var x=G_(),Rg={exports:{}},lc={},Ig={exports:{}},xg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VS;function cx(){return VS||(VS=1,function(n){function e(J,ce){var pe=J.length;J.push(ce);e:for(;0<pe;){var ve=pe-1>>>1,U=J[ve];if(0<a(U,ce))J[ve]=ce,J[pe]=U,pe=ve;else break e}}function t(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ce=J[0],pe=J.pop();if(pe!==ce){J[0]=pe;e:for(var ve=0,U=J.length,te=U>>>1;ve<te;){var B=2*(ve+1)-1,$=J[B],X=B+1,ie=J[X];if(0>a($,pe))X<U&&0>a(ie,$)?(J[ve]=ie,J[X]=pe,ve=X):(J[ve]=$,J[B]=pe,ve=B);else if(X<U&&0>a(ie,pe))J[ve]=ie,J[X]=pe,ve=X;else break e}}return ce}function a(J,ce){var pe=J.sortIndex-ce.sortIndex;return pe!==0?pe:J.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],m=[],v=1,T=null,E=3,R=!1,A=!1,j=!1,D=!1,M=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function ne(J){for(var ce=t(m);ce!==null;){if(ce.callback===null)s(m);else if(ce.startTime<=J)s(m),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=t(m)}}function ue(J){if(j=!1,ne(J),!A)if(t(p)!==null)A=!0,ee||(ee=!0,F());else{var ce=t(m);ce!==null&&De(ue,ce.startTime-J)}}var ee=!1,O=-1,I=5,N=-1;function V(){return D?!0:!(n.unstable_now()-N<I)}function L(){if(D=!1,ee){var J=n.unstable_now();N=J;var ce=!0;try{e:{A=!1,j&&(j=!1,z(O),O=-1),R=!0;var pe=E;try{t:{for(ne(J),T=t(p);T!==null&&!(T.expirationTime>J&&V());){var ve=T.callback;if(typeof ve=="function"){T.callback=null,E=T.priorityLevel;var U=ve(T.expirationTime<=J);if(J=n.unstable_now(),typeof U=="function"){T.callback=U,ne(J),ce=!0;break t}T===t(p)&&s(p),ne(J)}else s(p);T=t(p)}if(T!==null)ce=!0;else{var te=t(m);te!==null&&De(ue,te.startTime-J),ce=!1}}break e}finally{T=null,E=pe,R=!1}ce=void 0}}finally{ce?F():ee=!1}}}var F;if(typeof q=="function")F=function(){q(L)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,Pe=k.port2;k.port1.onmessage=L,F=function(){Pe.postMessage(null)}}else F=function(){M(L,0)};function De(J,ce){O=M(function(){J(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(J){switch(E){case 1:case 2:case 3:var ce=3;break;default:ce=E}var pe=E;E=ce;try{return J()}finally{E=pe}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(J,ce){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var pe=E;E=J;try{return ce()}finally{E=pe}},n.unstable_scheduleCallback=function(J,ce,pe){var ve=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?ve+pe:ve):pe=ve,J){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=pe+U,J={id:v++,callback:ce,priorityLevel:J,startTime:pe,expirationTime:U,sortIndex:-1},pe>ve?(J.sortIndex=pe,e(m,J),t(p)===null&&J===t(m)&&(j?(z(O),O=-1):j=!0,De(ue,pe-ve))):(J.sortIndex=U,e(p,J),A||R||(A=!0,ee||(ee=!0,F()))),J},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(J){var ce=E;return function(){var pe=E;E=ce;try{return J.apply(this,arguments)}finally{E=pe}}}}(xg)),xg}var jS;function hx(){return jS||(jS=1,Ig.exports=cx()),Ig.exports}var Ng={exports:{}},En={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS;function fx(){if(BS)return En;BS=1;var n=G_();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:p,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return En.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,En.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,v)},En.flushSync=function(p){var m=c.T,v=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=m,s.p=v,s.d.f()}},En.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},En.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},En.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,R=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:E,fetchPriority:R}):v==="script"&&s.d.X(p,{crossOrigin:T,integrity:E,fetchPriority:R,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},En.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},En.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},En.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=d(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},En.requestFormReset=function(p){s.d.r(p)},En.unstable_batchedUpdates=function(p,m){return p(m)},En.useFormState=function(p,m,v){return c.H.useFormState(p,m,v)},En.useFormStatus=function(){return c.H.useHostTransitionStatus()},En.version="19.1.0",En}var FS;function dx(){if(FS)return Ng.exports;FS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ng.exports=fx(),Ng.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zS;function px(){if(zS)return lc;zS=1;var n=hx(),e=G_(),t=dx();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,o=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(o=r.return),i=r.return;while(i)}return r.tag===3?o:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(s(188))}function p(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var o=i,u=r;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return d(f),i;if(g===u)return d(f),r;g=g.sibling}throw Error(s(188))}if(o.return!==u.return)o=f,u=g;else{for(var b=!1,w=f.child;w;){if(w===o){b=!0,o=f,u=g;break}if(w===u){b=!0,u=f,o=g;break}w=w.sibling}if(!b){for(w=g.child;w;){if(w===o){b=!0,o=g,u=f;break}if(w===u){b=!0,u=g,o=f;break}w=w.sibling}if(!b)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?i:r}function m(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=m(i),r!==null)return r;i=i.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),q=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function F(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var k=Symbol.for("react.client.reference");function Pe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===k?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case D:return"Profiler";case j:return"StrictMode";case ue:return"Suspense";case ee:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case R:return"Portal";case q:return(i.displayName||"Context")+".Provider";case z:return(i._context.displayName||"Context")+".Consumer";case ne:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return r=i.displayName||null,r!==null?r:Pe(i.type)||"Memo";case I:r=i._payload,i=i._init;try{return Pe(i(r))}catch{}}return null}var De=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},ve=[],U=-1;function te(i){return{current:i}}function B(i){0>U||(i.current=ve[U],ve[U]=null,U--)}function $(i,r){U++,ve[U]=i.current,i.current=r}var X=te(null),ie=te(null),fe=te(null),Ee=te(null);function ge(i,r){switch($(fe,r),$(ie,i),$(X,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?lS(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=lS(r),i=uS(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}B(X),$(X,i)}function wt(){B(X),B(ie),B(fe)}function Nn(i){i.memoizedState!==null&&$(Ee,i);var r=X.current,o=uS(r,i.type);r!==o&&($(ie,i),$(X,o))}function vn(i){ie.current===i&&(B(X),B(ie)),Ee.current===i&&(B(Ee),nc._currentValue=pe)}var kn=Object.prototype.hasOwnProperty,Qn=n.unstable_scheduleCallback,Ds=n.unstable_cancelCallback,bi=n.unstable_shouldYield,Ta=n.unstable_requestPaint,un=n.unstable_now,dr=n.unstable_getCurrentPriorityLevel,Ws=n.unstable_ImmediatePriority,He=n.unstable_UserBlockingPriority,Me=n.unstable_NormalPriority,dt=n.unstable_LowPriority,Tt=n.unstable_IdlePriority,cs=n.log,hs=n.unstable_setDisableYieldValue,rt=null,Je=null;function Yt(i){if(typeof cs=="function"&&hs(i),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(rt,i)}catch{}}var Qt=Math.clz32?Math.clz32:Ea,Eh=Math.log,Rp=Math.LN2;function Ea(i){return i>>>=0,i===0?32:31-(Eh(i)/Rp|0)|0}var Sa=256,ba=4194304;function Ps(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ao(i,r,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,g=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var w=u&134217727;return w!==0?(u=w&~g,u!==0?f=Ps(u):(b&=w,b!==0?f=Ps(b):o||(o=w&~i,o!==0&&(f=Ps(o))))):(w=u&~g,w!==0?f=Ps(w):b!==0?f=Ps(b):o||(o=u&~i,o!==0&&(f=Ps(o)))),f===0?0:r!==0&&r!==f&&(r&g)===0&&(g=f&-f,o=r&-r,g>=o||g===32&&(o&4194048)!==0)?r:f}function wa(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function nu(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function su(){var i=Sa;return Sa<<=1,(Sa&4194048)===0&&(Sa=256),i}function iu(){var i=ba;return ba<<=1,(ba&62914560)===0&&(ba=4194304),i}function wi(i){for(var r=[],o=0;31>o;o++)r.push(i);return r}function Ci(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ru(i,r,o,u,f,g){var b=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var w=i.entanglements,P=i.expirationTimes,Y=i.hiddenUpdates;for(o=b&~o;0<o;){var re=31-Qt(o),oe=1<<re;w[re]=0,P[re]=-1;var Q=Y[re];if(Q!==null)for(Y[re]=null,re=0;re<Q.length;re++){var Z=Q[re];Z!==null&&(Z.lane&=-536870913)}o&=~oe}u!==0&&$s(i,u,0),g!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=g&~(b&~r))}function $s(i,r,o){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-Qt(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|o&4194090}function au(i,r){var o=i.entangledLanes|=r;for(i=i.entanglements;o;){var u=31-Qt(o),f=1<<u;f&r|i[u]&r&&(i[u]|=r),o&=~f}}function pr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ro(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function mr(){var i=ce.p;return i!==0?i:(i=window.event,i===void 0?32:IS(i.type))}function Sh(i,r){var o=ce.p;try{return ce.p=i,r()}finally{ce.p=o}}var Et=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Et,Lt="__reactProps$"+Et,fs="__reactContainer$"+Et,ou="__reactEvents$"+Et,Ip="__reactListeners$"+Et,gr="__reactHandles$"+Et,bh="__reactResources$"+Et,Ca="__reactMarker$"+Et;function _r(i){delete i[Ft],delete i[Lt],delete i[ou],delete i[Ip],delete i[gr]}function Ai(i){var r=i[Ft];if(r)return r;for(var o=i.parentNode;o;){if(r=o[fs]||o[Ft]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(i=dS(i);i!==null;){if(o=i[Ft])return o;i=dS(i)}return r}i=o,o=i.parentNode}return null}function Ks(i){if(i=i[Ft]||i[fs]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function Ys(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function On(i){var r=i[bh];return r||(r=i[bh]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ot(i){i[Ca]=!0}var lu=new Set,Io={};function Ms(i,r){Ri(i,r),Ri(i+"Capture",r)}function Ri(i,r){for(Io[i]=r,i=0;i<r.length;i++)lu.add(r[i])}var wh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ch={},Aa={};function Ah(i){return kn.call(Aa,i)?!0:kn.call(Ch,i)?!1:wh.test(i)?Aa[i]=!0:(Ch[i]=!0,!1)}function yr(i,r,o){if(Ah(r))if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+o)}}function Qs(i,r,o){if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+o)}}function cn(i,r,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(r,o,""+u)}}var Ra,Rh;function Ii(i){if(Ra===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Ra=r&&r[1]||"",Rh=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ra+i+Rh}var xo=!1;function No(i,r){if(!i||xo)return"";xo=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Z){var Q=Z}Reflect.construct(i,[],oe)}else{try{oe.call()}catch(Z){Q=Z}i.call(oe.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(oe=i())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),b=g[0],w=g[1];if(b&&w){var P=b.split(`
`),Y=w.split(`
`);for(f=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(u===P.length||f===Y.length)for(u=P.length-1,f=Y.length-1;1<=u&&0<=f&&P[u]!==Y[f];)f--;for(;1<=u&&0<=f;u--,f--)if(P[u]!==Y[f]){if(u!==1||f!==1)do if(u--,f--,0>f||P[u]!==Y[f]){var re=`
`+P[u].replace(" at new "," at ");return i.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",i.displayName)),re}while(1<=u&&0<=f);break}}}finally{xo=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Ii(o):""}function uu(i){switch(i.tag){case 26:case 27:case 5:return Ii(i.type);case 16:return Ii("Lazy");case 13:return Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return No(i.type,!1);case 11:return No(i.type.render,!1);case 1:return No(i.type,!0);case 31:return Ii("Activity");default:return""}}function ko(i){try{var r="";do r+=uu(i),i=i.return;while(i);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Dn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function cu(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function xp(i){var r=cu(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),u=""+i[r];if(!i.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){u=""+b,g.call(this,b)}}),Object.defineProperty(i,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Oo(i){i._valueTracker||(i._valueTracker=xp(i))}function hu(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return i&&(u=cu(i)?i.checked?"true":"false":i.value),i=u,i!==o?(r.setValue(i),!0):!1}function Ia(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Np=/[\n"\\]/g;function Ut(i){return i.replace(Np,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Xn(i,r,o,u,f,g,b,w){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),r!=null?b==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Dn(r)):i.value!==""+Dn(r)&&(i.value=""+Dn(r)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),r!=null?vr(i,b,Dn(r)):o!=null?vr(i,b,Dn(o)):u!=null&&i.removeAttribute("value"),f==null&&g!=null&&(i.defaultChecked=!!g),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+Dn(w):i.removeAttribute("name")}function xa(i,r,o,u,f,g,b,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),r!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||r!=null))return;o=o!=null?""+Dn(o):"",r=r!=null?""+Dn(r):o,w||r===i.value||(i.value=r),i.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=w?i.checked:!!u,i.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b)}function vr(i,r,o){r==="number"&&Ia(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function xi(i,r,o,u){if(i=i.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=r.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+Dn(o),r=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}r!==null||i[f].disabled||(r=i[f])}r!==null&&(r.selected=!0)}}function lt(i,r,o){if(r!=null&&(r=""+Dn(r),r!==i.value&&(i.value=r),o==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=o!=null?""+Dn(o):""}function Na(i,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(s(92));if(De(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=Dn(r),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u)}function ds(i,r){if(r){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=r;return}}i.textContent=r}var ka=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ih(i,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,o):typeof o!="number"||o===0||ka.has(r)?r==="float"?i.cssFloat=o:i[r]=(""+o).trim():i[r]=o+"px"}function fu(i,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&o[f]!==u&&Ih(i,f,u)}else for(var g in r)r.hasOwnProperty(g)&&Ih(i,g,r[g])}function du(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Op=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Do(i){return Op.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Ni=null;function ps(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ki=null,Oi=null;function pu(i){var r=Ks(i);if(r&&(i=r.stateNode)){var o=i[Lt]||null;e:switch(i=r.stateNode,r.type){case"input":if(Xn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ut(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==i&&u.form===i.form){var f=u[Lt]||null;if(!f)throw Error(s(90));Xn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===i.form&&hu(u)}break e;case"textarea":lt(i,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&xi(i,!!o.multiple,r,!1)}}}var Xs=!1;function xh(i,r,o){if(Xs)return i(r,o);Xs=!0;try{var u=i(r);return u}finally{if(Xs=!1,(ki!==null||Oi!==null)&&(bf(),ki&&(r=ki,i=Oi,Oi=ki=null,pu(r),i)))for(r=0;r<i.length;r++)pu(i[r])}}function Oa(i,r){var o=i.stateNode;if(o===null)return null;var u=o[Lt]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var Ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ms=!1;if(Ls)try{var Da={};Object.defineProperty(Da,"passive",{get:function(){ms=!0}}),window.addEventListener("test",Da,Da),window.removeEventListener("test",Da,Da)}catch{ms=!1}var Zs=null,Tr=null,Di=null;function mu(){if(Di)return Di;var i,r=Tr,o=r.length,u,f="value"in Zs?Zs.value:Zs.textContent,g=f.length;for(i=0;i<o&&r[i]===f[i];i++);var b=o-i;for(u=1;u<=b&&r[o-u]===f[g-u];u++);return Di=f.slice(i,1<u?1-u:void 0)}function Js(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function ei(){return!0}function gu(){return!1}function Xt(i){function r(o,u,f,g,b){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(o=i[w],this[w]=o?o(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ei:gu,this.isPropagationStopped=gu,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),r}var nt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Po=Xt(nt),Pa=v({},nt,{view:0,detail:0}),Nh=Xt(Pa),Mo,Lo,ti,Ma=v({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Va,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ti&&(ti&&i.type==="mousemove"?(Mo=i.screenX-ti.screenX,Lo=i.screenY-ti.screenY):Lo=Mo=0,ti=i),Mo)},movementY:function(i){return"movementY"in i?i.movementY:Lo}}),gs=Xt(Ma),kh=v({},Ma,{dataTransfer:0}),Dp=Xt(kh),La=v({},Pa,{relatedTarget:0}),Uo=Xt(La),_u=v({},nt,{animationName:0,elapsedTime:0,pseudoElement:0}),Vo=Xt(_u),Oh=v({},nt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),jo=Xt(Oh),Pp=v({},nt,{data:0}),yu=Xt(Pp),Ua={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ph={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Ph[i])?!!r[i]:!1}function Va(){return vu}var Mh=v({},Pa,{key:function(i){if(i.key){var r=Ua[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Js(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Dh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Va,charCode:function(i){return i.type==="keypress"?Js(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Js(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Bo=Xt(Mh),Lh=v({},Ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tu=Xt(Lh),Pi=v({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Va}),Uh=Xt(Pi),Vh=v({},nt,{propertyName:0,elapsedTime:0,pseudoElement:0}),jh=Xt(Vh),Bh=v({},Ma,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Fo=Xt(Bh),Pn=v({},nt,{newState:0,oldState:0}),Fh=Xt(Pn),zh=[9,13,27,32],ni=Ls&&"CompositionEvent"in window,h=null;Ls&&"documentMode"in document&&(h=document.documentMode);var _=Ls&&"TextEvent"in window&&!h,S=Ls&&(!ni||h&&8<h&&11>=h),C=" ",W=!1;function se(i,r){switch(i){case"keyup":return zh.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var We=!1;function zt(i,r){switch(i){case"compositionend":return de(r);case"keypress":return r.which!==32?null:(W=!0,C);case"textInput":return i=r.data,i===C&&W?null:i;default:return null}}function $e(i,r){if(We)return i==="compositionend"||!ni&&se(i,r)?(i=mu(),Di=Tr=Zs=null,We=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return S&&r.locale!=="ko"?null:r.data;default:return null}}var Zt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ht(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Zt[i.type]:r==="textarea"}function Mi(i,r,o,u){ki?Oi?Oi.push(u):Oi=[u]:ki=u,r=xf(r,"onChange"),0<r.length&&(o=new Po("onChange","change",null,o,u),i.push({event:o,listeners:r}))}var hn=null,si=null;function Eu(i){sS(i,0)}function Hh(i){var r=Ys(i);if(hu(r))return i}function wv(i,r){if(i==="change")return r}var Cv=!1;if(Ls){var Mp;if(Ls){var Lp="oninput"in document;if(!Lp){var Av=document.createElement("div");Av.setAttribute("oninput","return;"),Lp=typeof Av.oninput=="function"}Mp=Lp}else Mp=!1;Cv=Mp&&(!document.documentMode||9<document.documentMode)}function Rv(){hn&&(hn.detachEvent("onpropertychange",Iv),si=hn=null)}function Iv(i){if(i.propertyName==="value"&&Hh(si)){var r=[];Mi(r,si,i,ps(i)),xh(Eu,r)}}function U1(i,r,o){i==="focusin"?(Rv(),hn=r,si=o,hn.attachEvent("onpropertychange",Iv)):i==="focusout"&&Rv()}function V1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Hh(si)}function j1(i,r){if(i==="click")return Hh(r)}function B1(i,r){if(i==="input"||i==="change")return Hh(r)}function F1(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Zn=typeof Object.is=="function"?Object.is:F1;function Su(i,r){if(Zn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var o=Object.keys(i),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!kn.call(r,f)||!Zn(i[f],r[f]))return!1}return!0}function xv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Nv(i,r){var o=xv(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=r&&u>=r)return{node:o,offset:r-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=xv(o)}}function kv(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?kv(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Ov(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Ia(i.document);r instanceof i.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)i=r.contentWindow;else break;r=Ia(i.document)}return r}function Up(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var z1=Ls&&"documentMode"in document&&11>=document.documentMode,zo=null,Vp=null,bu=null,jp=!1;function Dv(i,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;jp||zo==null||zo!==Ia(u)||(u=zo,"selectionStart"in u&&Up(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),bu&&Su(bu,u)||(bu=u,u=xf(Vp,"onSelect"),0<u.length&&(r=new Po("onSelect","select",null,r,o),i.push({event:r,listeners:u}),r.target=zo)))}function ja(i,r){var o={};return o[i.toLowerCase()]=r.toLowerCase(),o["Webkit"+i]="webkit"+r,o["Moz"+i]="moz"+r,o}var Ho={animationend:ja("Animation","AnimationEnd"),animationiteration:ja("Animation","AnimationIteration"),animationstart:ja("Animation","AnimationStart"),transitionrun:ja("Transition","TransitionRun"),transitionstart:ja("Transition","TransitionStart"),transitioncancel:ja("Transition","TransitionCancel"),transitionend:ja("Transition","TransitionEnd")},Bp={},Pv={};Ls&&(Pv=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function Ba(i){if(Bp[i])return Bp[i];if(!Ho[i])return i;var r=Ho[i],o;for(o in r)if(r.hasOwnProperty(o)&&o in Pv)return Bp[i]=r[o];return i}var Mv=Ba("animationend"),Lv=Ba("animationiteration"),Uv=Ba("animationstart"),H1=Ba("transitionrun"),q1=Ba("transitionstart"),G1=Ba("transitioncancel"),Vv=Ba("transitionend"),jv=new Map,Fp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fp.push("scrollEnd");function Us(i,r){jv.set(i,r),Ms(r,[i])}var Bv=new WeakMap;function _s(i,r){if(typeof i=="object"&&i!==null){var o=Bv.get(i);return o!==void 0?o:(r={value:i,source:r,stack:ko(r)},Bv.set(i,r),r)}return{value:i,source:r,stack:ko(r)}}var ys=[],qo=0,zp=0;function qh(){for(var i=qo,r=zp=qo=0;r<i;){var o=ys[r];ys[r++]=null;var u=ys[r];ys[r++]=null;var f=ys[r];ys[r++]=null;var g=ys[r];if(ys[r++]=null,u!==null&&f!==null){var b=u.pending;b===null?f.next=f:(f.next=b.next,b.next=f),u.pending=f}g!==0&&Fv(o,f,g)}}function Gh(i,r,o,u){ys[qo++]=i,ys[qo++]=r,ys[qo++]=o,ys[qo++]=u,zp|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Hp(i,r,o,u){return Gh(i,r,o,u),Wh(i)}function Go(i,r){return Gh(i,null,null,r),Wh(i)}function Fv(i,r,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=i.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(f=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,f&&r!==null&&(f=31-Qt(o),i=g.hiddenUpdates,u=i[f],u===null?i[f]=[r]:u.push(r),r.lane=o|536870912),g):null}function Wh(i){if(50<Ku)throw Ku=0,Ym=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Wo={};function W1(i,r,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(i,r,o,u){return new W1(i,r,o,u)}function qp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Li(i,r){var o=i.alternate;return o===null?(o=Jn(i.tag,r,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=r,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,r=i.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function zv(i,r){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function $h(i,r,o,u,f,g){var b=0;if(u=i,typeof i=="function")qp(i)&&(b=1);else if(typeof i=="string")b=KI(i,o,X.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=Jn(31,o,r,f),i.elementType=N,i.lanes=g,i;case A:return Fa(o.children,f,g,r);case j:b=8,f|=24;break;case D:return i=Jn(12,o,r,f|2),i.elementType=D,i.lanes=g,i;case ue:return i=Jn(13,o,r,f),i.elementType=ue,i.lanes=g,i;case ee:return i=Jn(19,o,r,f),i.elementType=ee,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:case q:b=10;break e;case z:b=9;break e;case ne:b=11;break e;case O:b=14;break e;case I:b=16,u=null;break e}b=29,o=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=Jn(b,o,r,f),r.elementType=i,r.type=u,r.lanes=g,r}function Fa(i,r,o,u){return i=Jn(7,i,u,r),i.lanes=o,i}function Gp(i,r,o){return i=Jn(6,i,null,r),i.lanes=o,i}function Wp(i,r,o){return r=Jn(4,i.children!==null?i.children:[],i.key,r),r.lanes=o,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var $o=[],Ko=0,Kh=null,Yh=0,vs=[],Ts=0,za=null,Ui=1,Vi="";function Ha(i,r){$o[Ko++]=Yh,$o[Ko++]=Kh,Kh=i,Yh=r}function Hv(i,r,o){vs[Ts++]=Ui,vs[Ts++]=Vi,vs[Ts++]=za,za=i;var u=Ui;i=Vi;var f=32-Qt(u)-1;u&=~(1<<f),o+=1;var g=32-Qt(r)+f;if(30<g){var b=f-f%5;g=(u&(1<<b)-1).toString(32),u>>=b,f-=b,Ui=1<<32-Qt(r)+f|o<<f|u,Vi=g+i}else Ui=1<<g|o<<f|u,Vi=i}function $p(i){i.return!==null&&(Ha(i,1),Hv(i,1,0))}function Kp(i){for(;i===Kh;)Kh=$o[--Ko],$o[Ko]=null,Yh=$o[--Ko],$o[Ko]=null;for(;i===za;)za=vs[--Ts],vs[Ts]=null,Vi=vs[--Ts],vs[Ts]=null,Ui=vs[--Ts],vs[Ts]=null}var Mn=null,xt=null,tt=!1,qa=null,ii=!1,Yp=Error(s(519));function Ga(i){var r=Error(s(418,""));throw Au(_s(r,i)),Yp}function qv(i){var r=i.stateNode,o=i.type,u=i.memoizedProps;switch(r[Ft]=i,r[Lt]=u,o){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(o=0;o<Qu.length;o++)Fe(Qu[o],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Fe("invalid",r),xa(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Oo(r);break;case"select":Fe("invalid",r);break;case"textarea":Fe("invalid",r),Na(r,u.value,u.defaultValue,u.children),Oo(r)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||oS(r.textContent,o)?(u.popover!=null&&(Fe("beforetoggle",r),Fe("toggle",r)),u.onScroll!=null&&Fe("scroll",r),u.onScrollEnd!=null&&Fe("scrollend",r),u.onClick!=null&&(r.onclick=Nf),r=!0):r=!1,r||Ga(i)}function Gv(i){for(Mn=i.return;Mn;)switch(Mn.tag){case 5:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:Mn=Mn.return}}function wu(i){if(i!==Mn)return!1;if(!tt)return Gv(i),tt=!0,!1;var r=i.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||hg(i.type,i.memoizedProps)),o=!o),o&&xt&&Ga(i),Gv(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(r===0){xt=js(i.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;i=i.nextSibling}xt=null}}else r===27?(r=xt,Lr(i.type)?(i=mg,mg=null,xt=i):xt=r):xt=Mn?js(i.stateNode.nextSibling):null;return!0}function Cu(){xt=Mn=null,tt=!1}function Wv(){var i=qa;return i!==null&&(qn===null?qn=i:qn.push.apply(qn,i),qa=null),i}function Au(i){qa===null?qa=[i]:qa.push(i)}var Qp=te(null),Wa=null,ji=null;function Er(i,r,o){$(Qp,r._currentValue),r._currentValue=o}function Bi(i){i._currentValue=Qp.current,B(Qp)}function Xp(i,r,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===o)break;i=i.return}}function Zp(i,r,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var g=f.dependencies;if(g!==null){var b=f.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=f;for(var P=0;P<r.length;P++)if(w.context===r[P]){g.lanes|=o,w=g.alternate,w!==null&&(w.lanes|=o),Xp(g.return,o,i),u||(b=null);break e}g=w.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(s(341));b.lanes|=o,g=b.alternate,g!==null&&(g.lanes|=o),Xp(b,o,i),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===i){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function Ru(i,r,o,u){i=null;for(var f=r,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var w=f.type;Zn(f.pendingProps.value,b.value)||(i!==null?i.push(w):i=[w])}}else if(f===Ee.current){if(b=f.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(nc):i=[nc])}f=f.return}i!==null&&Zp(r,i,o,u),r.flags|=262144}function Qh(i){for(i=i.firstContext;i!==null;){if(!Zn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function $a(i){Wa=i,ji=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Tn(i){return $v(Wa,i)}function Xh(i,r){return Wa===null&&$a(i),$v(i,r)}function $v(i,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},ji===null){if(i===null)throw Error(s(308));ji=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ji=ji.next=r;return o}var $1=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(o){return o()})}},K1=n.unstable_scheduleCallback,Y1=n.unstable_NormalPriority,qt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jp(){return{controller:new $1,data:new Map,refCount:0}}function Iu(i){i.refCount--,i.refCount===0&&K1(Y1,function(){i.controller.abort()})}var xu=null,em=0,Yo=0,Qo=null;function Q1(i,r){if(xu===null){var o=xu=[];em=0,Yo=ng(),Qo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return em++,r.then(Kv,Kv),r}function Kv(){if(--em===0&&xu!==null){Qo!==null&&(Qo.status="fulfilled");var i=xu;xu=null,Yo=0,Qo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function X1(i,r){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Yv=J.S;J.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Q1(i,r),Yv!==null&&Yv(i,r)};var Ka=te(null);function tm(){var i=Ka.current;return i!==null?i:mt.pooledCache}function Zh(i,r){r===null?$(Ka,Ka.current):$(Ka,r.pool)}function Qv(){var i=tm();return i===null?null:{parent:qt._currentValue,pool:i}}var Nu=Error(s(460)),Xv=Error(s(474)),Jh=Error(s(542)),nm={then:function(){}};function Zv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function ef(){}function Jv(i,r,o){switch(o=i[o],o===void 0?i.push(r):o!==r&&(r.then(ef,ef),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,tT(i),i;default:if(typeof r.status=="string")r.then(ef,ef);else{if(i=mt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,tT(i),i}throw ku=r,Nu}}var ku=null;function eT(){if(ku===null)throw Error(s(459));var i=ku;return ku=null,i}function tT(i){if(i===Nu||i===Jh)throw Error(s(483))}var Sr=!1;function sm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function im(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function br(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function wr(i,r,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(at&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=Wh(i),Fv(i,null,o),r}return Gh(i,u,r,o),Wh(i)}function Ou(i,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,au(i,o)}}function rm(i,r){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=b:g=g.next=b,o=o.next}while(o!==null);g===null?f=g=r:g=g.next=r}else f=g=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=r:i.next=r,o.lastBaseUpdate=r}var am=!1;function Du(){if(am){var i=Qo;if(i!==null)throw i}}function Pu(i,r,o,u){am=!1;var f=i.updateQueue;Sr=!1;var g=f.firstBaseUpdate,b=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var P=w,Y=P.next;P.next=null,b===null?g=Y:b.next=Y,b=P;var re=i.alternate;re!==null&&(re=re.updateQueue,w=re.lastBaseUpdate,w!==b&&(w===null?re.firstBaseUpdate=Y:w.next=Y,re.lastBaseUpdate=P))}if(g!==null){var oe=f.baseState;b=0,re=Y=P=null,w=g;do{var Q=w.lane&-536870913,Z=Q!==w.lane;if(Z?(Ke&Q)===Q:(u&Q)===Q){Q!==0&&Q===Yo&&(am=!0),re!==null&&(re=re.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var xe=i,we=w;Q=r;var ht=o;switch(we.tag){case 1:if(xe=we.payload,typeof xe=="function"){oe=xe.call(ht,oe,Q);break e}oe=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=we.payload,Q=typeof xe=="function"?xe.call(ht,oe,Q):xe,Q==null)break e;oe=v({},oe,Q);break e;case 2:Sr=!0}}Q=w.callback,Q!==null&&(i.flags|=64,Z&&(i.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},re===null?(Y=re=Z,P=oe):re=re.next=Z,b|=Q;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;Z=w,w=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);re===null&&(P=oe),f.baseState=P,f.firstBaseUpdate=Y,f.lastBaseUpdate=re,g===null&&(f.shared.lanes=0),Or|=b,i.lanes=b,i.memoizedState=oe}}function nT(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function sT(i,r){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)nT(o[i],r)}var Xo=te(null),tf=te(0);function iT(i,r){i=$i,$(tf,i),$(Xo,r),$i=i|r.baseLanes}function om(){$(tf,$i),$(Xo,Xo.current)}function lm(){$i=tf.current,B(Xo),B(tf)}var Cr=0,Ue=null,ut=null,Vt=null,nf=!1,Zo=!1,Ya=!1,sf=0,Mu=0,Jo=null,Z1=0;function Dt(){throw Error(s(321))}function um(i,r){if(r===null)return!1;for(var o=0;o<r.length&&o<i.length;o++)if(!Zn(i[o],r[o]))return!1;return!0}function cm(i,r,o,u,f,g){return Cr=g,Ue=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=i===null||i.memoizedState===null?FT:zT,Ya=!1,g=o(u,f),Ya=!1,Zo&&(g=aT(r,o,u,f)),rT(i),g}function rT(i){J.H=cf;var r=ut!==null&&ut.next!==null;if(Cr=0,Vt=ut=Ue=null,nf=!1,Mu=0,Jo=null,r)throw Error(s(300));i===null||Jt||(i=i.dependencies,i!==null&&Qh(i)&&(Jt=!0))}function aT(i,r,o,u){Ue=i;var f=0;do{if(Zo&&(Jo=null),Mu=0,Zo=!1,25<=f)throw Error(s(301));if(f+=1,Vt=ut=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}J.H=rI,g=r(o,u)}while(Zo);return g}function J1(){var i=J.H,r=i.useState()[0];return r=typeof r.then=="function"?Lu(r):r,i=i.useState()[0],(ut!==null?ut.memoizedState:null)!==i&&(Ue.flags|=1024),r}function hm(){var i=sf!==0;return sf=0,i}function fm(i,r,o){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~o}function dm(i){if(nf){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}nf=!1}Cr=0,Vt=ut=Ue=null,Zo=!1,Mu=sf=0,Jo=null}function zn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Ue.memoizedState=Vt=i:Vt=Vt.next=i,Vt}function jt(){if(ut===null){var i=Ue.alternate;i=i!==null?i.memoizedState:null}else i=ut.next;var r=Vt===null?Ue.memoizedState:Vt.next;if(r!==null)Vt=r,ut=i;else{if(i===null)throw Ue.alternate===null?Error(s(467)):Error(s(310));ut=i,i={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Vt===null?Ue.memoizedState=Vt=i:Vt=Vt.next=i}return Vt}function pm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lu(i){var r=Mu;return Mu+=1,Jo===null&&(Jo=[]),i=Jv(Jo,i,r),r=Ue,(Vt===null?r.memoizedState:Vt.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?FT:zT),i}function rf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Lu(i);if(i.$$typeof===q)return Tn(i)}throw Error(s(438,String(i)))}function mm(i){var r=null,o=Ue.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Ue.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=pm(),Ue.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(i),u=0;u<i;u++)o[u]=V;return r.index++,o}function Fi(i,r){return typeof r=="function"?r(i):r}function af(i){var r=jt();return gm(r,ut,i)}function gm(i,r,o){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var f=i.baseQueue,g=u.pending;if(g!==null){if(f!==null){var b=f.next;f.next=g.next,g.next=b}r.baseQueue=f=g,u.pending=null}if(g=i.baseState,f===null)i.memoizedState=g;else{r=f.next;var w=b=null,P=null,Y=r,re=!1;do{var oe=Y.lane&-536870913;if(oe!==Y.lane?(Ke&oe)===oe:(Cr&oe)===oe){var Q=Y.revertLane;if(Q===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),oe===Yo&&(re=!0);else if((Cr&Q)===Q){Y=Y.next,Q===Yo&&(re=!0);continue}else oe={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(w=P=oe,b=g):P=P.next=oe,Ue.lanes|=Q,Or|=Q;oe=Y.action,Ya&&o(g,oe),g=Y.hasEagerState?Y.eagerState:o(g,oe)}else Q={lane:oe,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(w=P=Q,b=g):P=P.next=Q,Ue.lanes|=oe,Or|=oe;Y=Y.next}while(Y!==null&&Y!==r);if(P===null?b=g:P.next=w,!Zn(g,i.memoizedState)&&(Jt=!0,re&&(o=Qo,o!==null)))throw o;i.memoizedState=g,i.baseState=b,i.baseQueue=P,u.lastRenderedState=g}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function _m(i){var r=jt(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,g=r.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do g=i(g,b.action),b=b.next;while(b!==f);Zn(g,r.memoizedState)||(Jt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),o.lastRenderedState=g}return[g,u]}function oT(i,r,o){var u=Ue,f=jt(),g=tt;if(g){if(o===void 0)throw Error(s(407));o=o()}else o=r();var b=!Zn((ut||f).memoizedState,o);b&&(f.memoizedState=o,Jt=!0),f=f.queue;var w=cT.bind(null,u,f,i);if(Uu(2048,8,w,[i]),f.getSnapshot!==r||b||Vt!==null&&Vt.memoizedState.tag&1){if(u.flags|=2048,el(9,of(),uT.bind(null,u,f,o,r),null),mt===null)throw Error(s(349));g||(Cr&124)!==0||lT(u,r,o)}return o}function lT(i,r,o){i.flags|=16384,i={getSnapshot:r,value:o},r=Ue.updateQueue,r===null?(r=pm(),Ue.updateQueue=r,r.stores=[i]):(o=r.stores,o===null?r.stores=[i]:o.push(i))}function uT(i,r,o,u){r.value=o,r.getSnapshot=u,hT(r)&&fT(i)}function cT(i,r,o){return o(function(){hT(r)&&fT(i)})}function hT(i){var r=i.getSnapshot;i=i.value;try{var o=r();return!Zn(i,o)}catch{return!0}}function fT(i){var r=Go(i,2);r!==null&&is(r,i,2)}function ym(i){var r=zn();if(typeof i=="function"){var o=i;if(i=o(),Ya){Yt(!0);try{o()}finally{Yt(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:i},r}function dT(i,r,o,u){return i.baseState=o,gm(i,ut,typeof u=="function"?u:Fi)}function eI(i,r,o,u,f){if(uf(i))throw Error(s(485));if(i=r.action,i!==null){var g={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};J.T!==null?o(!0):g.isTransition=!1,u(g),o=r.pending,o===null?(g.next=r.pending=g,pT(r,g)):(g.next=o.next,r.pending=o.next=g)}}function pT(i,r){var o=r.action,u=r.payload,f=i.state;if(r.isTransition){var g=J.T,b={};J.T=b;try{var w=o(f,u),P=J.S;P!==null&&P(b,w),mT(i,r,w)}catch(Y){vm(i,r,Y)}finally{J.T=g}}else try{g=o(f,u),mT(i,r,g)}catch(Y){vm(i,r,Y)}}function mT(i,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){gT(i,r,u)},function(u){return vm(i,r,u)}):gT(i,r,o)}function gT(i,r,o){r.status="fulfilled",r.value=o,_T(r),i.state=o,r=i.pending,r!==null&&(o=r.next,o===r?i.pending=null:(o=o.next,r.next=o,pT(i,o)))}function vm(i,r,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,_T(r),r=r.next;while(r!==u)}i.action=null}function _T(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function yT(i,r){return r}function vT(i,r){if(tt){var o=mt.formState;if(o!==null){e:{var u=Ue;if(tt){if(xt){t:{for(var f=xt,g=ii;f.nodeType!==8;){if(!g){f=null;break t}if(f=js(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){xt=js(f.nextSibling),u=f.data==="F!";break e}}Ga(u)}u=!1}u&&(r=o[0])}}return o=zn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yT,lastRenderedState:r},o.queue=u,o=VT.bind(null,Ue,u),u.dispatch=o,u=ym(!1),g=wm.bind(null,Ue,!1,u.queue),u=zn(),f={state:r,dispatch:null,action:i,pending:null},u.queue=f,o=eI.bind(null,Ue,f,g,o),f.dispatch=o,u.memoizedState=i,[r,o,!1]}function TT(i){var r=jt();return ET(r,ut,i)}function ET(i,r,o){if(r=gm(i,r,yT)[0],i=af(Fi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Lu(r)}catch(b){throw b===Nu?Jh:b}else u=r;r=jt();var f=r.queue,g=f.dispatch;return o!==r.memoizedState&&(Ue.flags|=2048,el(9,of(),tI.bind(null,f,o),null)),[u,g,i]}function tI(i,r){i.action=r}function ST(i){var r=jt(),o=ut;if(o!==null)return ET(r,o,i);jt(),r=r.memoizedState,o=jt();var u=o.queue.dispatch;return o.memoizedState=i,[r,u,!1]}function el(i,r,o,u){return i={tag:i,create:o,deps:u,inst:r,next:null},r=Ue.updateQueue,r===null&&(r=pm(),Ue.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,r.lastEffect=i),i}function of(){return{destroy:void 0,resource:void 0}}function bT(){return jt().memoizedState}function lf(i,r,o,u){var f=zn();u=u===void 0?null:u,Ue.flags|=i,f.memoizedState=el(1|r,of(),o,u)}function Uu(i,r,o,u){var f=jt();u=u===void 0?null:u;var g=f.memoizedState.inst;ut!==null&&u!==null&&um(u,ut.memoizedState.deps)?f.memoizedState=el(r,g,o,u):(Ue.flags|=i,f.memoizedState=el(1|r,g,o,u))}function wT(i,r){lf(8390656,8,i,r)}function CT(i,r){Uu(2048,8,i,r)}function AT(i,r){return Uu(4,2,i,r)}function RT(i,r){return Uu(4,4,i,r)}function IT(i,r){if(typeof r=="function"){i=i();var o=r(i);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function xT(i,r,o){o=o!=null?o.concat([i]):null,Uu(4,4,IT.bind(null,r,i),o)}function Tm(){}function NT(i,r){var o=jt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&um(r,u[1])?u[0]:(o.memoizedState=[i,r],i)}function kT(i,r){var o=jt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&um(r,u[1]))return u[0];if(u=i(),Ya){Yt(!0);try{i()}finally{Yt(!1)}}return o.memoizedState=[u,r],u}function Em(i,r,o){return o===void 0||(Cr&1073741824)!==0?i.memoizedState=r:(i.memoizedState=o,i=PE(),Ue.lanes|=i,Or|=i,o)}function OT(i,r,o,u){return Zn(o,r)?o:Xo.current!==null?(i=Em(i,o,u),Zn(i,r)||(Jt=!0),i):(Cr&42)===0?(Jt=!0,i.memoizedState=o):(i=PE(),Ue.lanes|=i,Or|=i,r)}function DT(i,r,o,u,f){var g=ce.p;ce.p=g!==0&&8>g?g:8;var b=J.T,w={};J.T=w,wm(i,!1,r,o);try{var P=f(),Y=J.S;if(Y!==null&&Y(w,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var re=X1(P,u);Vu(i,r,re,ss(i))}else Vu(i,r,u,ss(i))}catch(oe){Vu(i,r,{then:function(){},status:"rejected",reason:oe},ss())}finally{ce.p=g,J.T=b}}function nI(){}function Sm(i,r,o,u){if(i.tag!==5)throw Error(s(476));var f=PT(i).queue;DT(i,f,r,pe,o===null?nI:function(){return MT(i),o(u)})}function PT(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:pe},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:o},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function MT(i){var r=PT(i).next.queue;Vu(i,r,{},ss())}function bm(){return Tn(nc)}function LT(){return jt().memoizedState}function UT(){return jt().memoizedState}function sI(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var o=ss();i=br(o);var u=wr(r,i,o);u!==null&&(is(u,r,o),Ou(u,r,o)),r={cache:Jp()},i.payload=r;return}r=r.return}}function iI(i,r,o){var u=ss();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},uf(i)?jT(r,o):(o=Hp(i,r,o,u),o!==null&&(is(o,i,u),BT(o,r,u)))}function VT(i,r,o){var u=ss();Vu(i,r,o,u)}function Vu(i,r,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(uf(i))jT(r,f);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var b=r.lastRenderedState,w=g(b,o);if(f.hasEagerState=!0,f.eagerState=w,Zn(w,b))return Gh(i,r,f,0),mt===null&&qh(),!1}catch{}finally{}if(o=Hp(i,r,f,u),o!==null)return is(o,i,u),BT(o,r,u),!0}return!1}function wm(i,r,o,u){if(u={lane:2,revertLane:ng(),action:u,hasEagerState:!1,eagerState:null,next:null},uf(i)){if(r)throw Error(s(479))}else r=Hp(i,o,u,2),r!==null&&is(r,i,2)}function uf(i){var r=i.alternate;return i===Ue||r!==null&&r===Ue}function jT(i,r){Zo=nf=!0;var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}function BT(i,r,o){if((o&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,au(i,o)}}var cf={readContext:Tn,use:rf,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt},FT={readContext:Tn,use:rf,useCallback:function(i,r){return zn().memoizedState=[i,r===void 0?null:r],i},useContext:Tn,useEffect:wT,useImperativeHandle:function(i,r,o){o=o!=null?o.concat([i]):null,lf(4194308,4,IT.bind(null,r,i),o)},useLayoutEffect:function(i,r){return lf(4194308,4,i,r)},useInsertionEffect:function(i,r){lf(4,2,i,r)},useMemo:function(i,r){var o=zn();r=r===void 0?null:r;var u=i();if(Ya){Yt(!0);try{i()}finally{Yt(!1)}}return o.memoizedState=[u,r],u},useReducer:function(i,r,o){var u=zn();if(o!==void 0){var f=o(r);if(Ya){Yt(!0);try{o(r)}finally{Yt(!1)}}}else f=r;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=iI.bind(null,Ue,i),[u.memoizedState,i]},useRef:function(i){var r=zn();return i={current:i},r.memoizedState=i},useState:function(i){i=ym(i);var r=i.queue,o=VT.bind(null,Ue,r);return r.dispatch=o,[i.memoizedState,o]},useDebugValue:Tm,useDeferredValue:function(i,r){var o=zn();return Em(o,i,r)},useTransition:function(){var i=ym(!1);return i=DT.bind(null,Ue,i.queue,!0,!1),zn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,o){var u=Ue,f=zn();if(tt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),mt===null)throw Error(s(349));(Ke&124)!==0||lT(u,r,o)}f.memoizedState=o;var g={value:o,getSnapshot:r};return f.queue=g,wT(cT.bind(null,u,g,i),[i]),u.flags|=2048,el(9,of(),uT.bind(null,u,g,o,r),null),o},useId:function(){var i=zn(),r=mt.identifierPrefix;if(tt){var o=Vi,u=Ui;o=(u&~(1<<32-Qt(u)-1)).toString(32)+o,r=""+r+"R"+o,o=sf++,0<o&&(r+="H"+o.toString(32)),r+=""}else o=Z1++,r=""+r+"r"+o.toString(32)+"";return i.memoizedState=r},useHostTransitionStatus:bm,useFormState:vT,useActionState:vT,useOptimistic:function(i){var r=zn();r.memoizedState=r.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=wm.bind(null,Ue,!0,o),o.dispatch=r,[i,r]},useMemoCache:mm,useCacheRefresh:function(){return zn().memoizedState=sI.bind(null,Ue)}},zT={readContext:Tn,use:rf,useCallback:NT,useContext:Tn,useEffect:CT,useImperativeHandle:xT,useInsertionEffect:AT,useLayoutEffect:RT,useMemo:kT,useReducer:af,useRef:bT,useState:function(){return af(Fi)},useDebugValue:Tm,useDeferredValue:function(i,r){var o=jt();return OT(o,ut.memoizedState,i,r)},useTransition:function(){var i=af(Fi)[0],r=jt().memoizedState;return[typeof i=="boolean"?i:Lu(i),r]},useSyncExternalStore:oT,useId:LT,useHostTransitionStatus:bm,useFormState:TT,useActionState:TT,useOptimistic:function(i,r){var o=jt();return dT(o,ut,i,r)},useMemoCache:mm,useCacheRefresh:UT},rI={readContext:Tn,use:rf,useCallback:NT,useContext:Tn,useEffect:CT,useImperativeHandle:xT,useInsertionEffect:AT,useLayoutEffect:RT,useMemo:kT,useReducer:_m,useRef:bT,useState:function(){return _m(Fi)},useDebugValue:Tm,useDeferredValue:function(i,r){var o=jt();return ut===null?Em(o,i,r):OT(o,ut.memoizedState,i,r)},useTransition:function(){var i=_m(Fi)[0],r=jt().memoizedState;return[typeof i=="boolean"?i:Lu(i),r]},useSyncExternalStore:oT,useId:LT,useHostTransitionStatus:bm,useFormState:ST,useActionState:ST,useOptimistic:function(i,r){var o=jt();return ut!==null?dT(o,ut,i,r):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:mm,useCacheRefresh:UT},tl=null,ju=0;function hf(i){var r=ju;return ju+=1,tl===null&&(tl=[]),Jv(tl,i,r)}function Bu(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function ff(i,r){throw r.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function HT(i){var r=i._init;return r(i._payload)}function qT(i){function r(G,H){if(i){var K=G.deletions;K===null?(G.deletions=[H],G.flags|=16):K.push(H)}}function o(G,H){if(!i)return null;for(;H!==null;)r(G,H),H=H.sibling;return null}function u(G){for(var H=new Map;G!==null;)G.key!==null?H.set(G.key,G):H.set(G.index,G),G=G.sibling;return H}function f(G,H){return G=Li(G,H),G.index=0,G.sibling=null,G}function g(G,H,K){return G.index=K,i?(K=G.alternate,K!==null?(K=K.index,K<H?(G.flags|=67108866,H):K):(G.flags|=67108866,H)):(G.flags|=1048576,H)}function b(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function w(G,H,K,ae){return H===null||H.tag!==6?(H=Gp(K,G.mode,ae),H.return=G,H):(H=f(H,K),H.return=G,H)}function P(G,H,K,ae){var Te=K.type;return Te===A?re(G,H,K.props.children,ae,K.key):H!==null&&(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===I&&HT(Te)===H.type)?(H=f(H,K.props),Bu(H,K),H.return=G,H):(H=$h(K.type,K.key,K.props,null,G.mode,ae),Bu(H,K),H.return=G,H)}function Y(G,H,K,ae){return H===null||H.tag!==4||H.stateNode.containerInfo!==K.containerInfo||H.stateNode.implementation!==K.implementation?(H=Wp(K,G.mode,ae),H.return=G,H):(H=f(H,K.children||[]),H.return=G,H)}function re(G,H,K,ae,Te){return H===null||H.tag!==7?(H=Fa(K,G.mode,ae,Te),H.return=G,H):(H=f(H,K),H.return=G,H)}function oe(G,H,K){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Gp(""+H,G.mode,K),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case E:return K=$h(H.type,H.key,H.props,null,G.mode,K),Bu(K,H),K.return=G,K;case R:return H=Wp(H,G.mode,K),H.return=G,H;case I:var ae=H._init;return H=ae(H._payload),oe(G,H,K)}if(De(H)||F(H))return H=Fa(H,G.mode,K,null),H.return=G,H;if(typeof H.then=="function")return oe(G,hf(H),K);if(H.$$typeof===q)return oe(G,Xh(G,H),K);ff(G,H)}return null}function Q(G,H,K,ae){var Te=H!==null?H.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Te!==null?null:w(G,H,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case E:return K.key===Te?P(G,H,K,ae):null;case R:return K.key===Te?Y(G,H,K,ae):null;case I:return Te=K._init,K=Te(K._payload),Q(G,H,K,ae)}if(De(K)||F(K))return Te!==null?null:re(G,H,K,ae,null);if(typeof K.then=="function")return Q(G,H,hf(K),ae);if(K.$$typeof===q)return Q(G,H,Xh(G,K),ae);ff(G,K)}return null}function Z(G,H,K,ae,Te){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return G=G.get(K)||null,w(H,G,""+ae,Te);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case E:return G=G.get(ae.key===null?K:ae.key)||null,P(H,G,ae,Te);case R:return G=G.get(ae.key===null?K:ae.key)||null,Y(H,G,ae,Te);case I:var je=ae._init;return ae=je(ae._payload),Z(G,H,K,ae,Te)}if(De(ae)||F(ae))return G=G.get(K)||null,re(H,G,ae,Te,null);if(typeof ae.then=="function")return Z(G,H,K,hf(ae),Te);if(ae.$$typeof===q)return Z(G,H,K,Xh(H,ae),Te);ff(H,ae)}return null}function xe(G,H,K,ae){for(var Te=null,je=null,Se=H,Ae=H=0,tn=null;Se!==null&&Ae<K.length;Ae++){Se.index>Ae?(tn=Se,Se=null):tn=Se.sibling;var et=Q(G,Se,K[Ae],ae);if(et===null){Se===null&&(Se=tn);break}i&&Se&&et.alternate===null&&r(G,Se),H=g(et,H,Ae),je===null?Te=et:je.sibling=et,je=et,Se=tn}if(Ae===K.length)return o(G,Se),tt&&Ha(G,Ae),Te;if(Se===null){for(;Ae<K.length;Ae++)Se=oe(G,K[Ae],ae),Se!==null&&(H=g(Se,H,Ae),je===null?Te=Se:je.sibling=Se,je=Se);return tt&&Ha(G,Ae),Te}for(Se=u(Se);Ae<K.length;Ae++)tn=Z(Se,G,Ae,K[Ae],ae),tn!==null&&(i&&tn.alternate!==null&&Se.delete(tn.key===null?Ae:tn.key),H=g(tn,H,Ae),je===null?Te=tn:je.sibling=tn,je=tn);return i&&Se.forEach(function(Fr){return r(G,Fr)}),tt&&Ha(G,Ae),Te}function we(G,H,K,ae){if(K==null)throw Error(s(151));for(var Te=null,je=null,Se=H,Ae=H=0,tn=null,et=K.next();Se!==null&&!et.done;Ae++,et=K.next()){Se.index>Ae?(tn=Se,Se=null):tn=Se.sibling;var Fr=Q(G,Se,et.value,ae);if(Fr===null){Se===null&&(Se=tn);break}i&&Se&&Fr.alternate===null&&r(G,Se),H=g(Fr,H,Ae),je===null?Te=Fr:je.sibling=Fr,je=Fr,Se=tn}if(et.done)return o(G,Se),tt&&Ha(G,Ae),Te;if(Se===null){for(;!et.done;Ae++,et=K.next())et=oe(G,et.value,ae),et!==null&&(H=g(et,H,Ae),je===null?Te=et:je.sibling=et,je=et);return tt&&Ha(G,Ae),Te}for(Se=u(Se);!et.done;Ae++,et=K.next())et=Z(Se,G,Ae,et.value,ae),et!==null&&(i&&et.alternate!==null&&Se.delete(et.key===null?Ae:et.key),H=g(et,H,Ae),je===null?Te=et:je.sibling=et,je=et);return i&&Se.forEach(function(ax){return r(G,ax)}),tt&&Ha(G,Ae),Te}function ht(G,H,K,ae){if(typeof K=="object"&&K!==null&&K.type===A&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case E:e:{for(var Te=K.key;H!==null;){if(H.key===Te){if(Te=K.type,Te===A){if(H.tag===7){o(G,H.sibling),ae=f(H,K.props.children),ae.return=G,G=ae;break e}}else if(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===I&&HT(Te)===H.type){o(G,H.sibling),ae=f(H,K.props),Bu(ae,K),ae.return=G,G=ae;break e}o(G,H);break}else r(G,H);H=H.sibling}K.type===A?(ae=Fa(K.props.children,G.mode,ae,K.key),ae.return=G,G=ae):(ae=$h(K.type,K.key,K.props,null,G.mode,ae),Bu(ae,K),ae.return=G,G=ae)}return b(G);case R:e:{for(Te=K.key;H!==null;){if(H.key===Te)if(H.tag===4&&H.stateNode.containerInfo===K.containerInfo&&H.stateNode.implementation===K.implementation){o(G,H.sibling),ae=f(H,K.children||[]),ae.return=G,G=ae;break e}else{o(G,H);break}else r(G,H);H=H.sibling}ae=Wp(K,G.mode,ae),ae.return=G,G=ae}return b(G);case I:return Te=K._init,K=Te(K._payload),ht(G,H,K,ae)}if(De(K))return xe(G,H,K,ae);if(F(K)){if(Te=F(K),typeof Te!="function")throw Error(s(150));return K=Te.call(K),we(G,H,K,ae)}if(typeof K.then=="function")return ht(G,H,hf(K),ae);if(K.$$typeof===q)return ht(G,H,Xh(G,K),ae);ff(G,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,H!==null&&H.tag===6?(o(G,H.sibling),ae=f(H,K),ae.return=G,G=ae):(o(G,H),ae=Gp(K,G.mode,ae),ae.return=G,G=ae),b(G)):o(G,H)}return function(G,H,K,ae){try{ju=0;var Te=ht(G,H,K,ae);return tl=null,Te}catch(Se){if(Se===Nu||Se===Jh)throw Se;var je=Jn(29,Se,null,G.mode);return je.lanes=ae,je.return=G,je}finally{}}}var nl=qT(!0),GT=qT(!1),Es=te(null),ri=null;function Ar(i){var r=i.alternate;$(Gt,Gt.current&1),$(Es,i),ri===null&&(r===null||Xo.current!==null||r.memoizedState!==null)&&(ri=i)}function WT(i){if(i.tag===22){if($(Gt,Gt.current),$(Es,i),ri===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&(ri=i)}}else Rr()}function Rr(){$(Gt,Gt.current),$(Es,Es.current)}function zi(i){B(Es),ri===i&&(ri=null),B(Gt)}var Gt=te(0);function df(i){for(var r=i;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||pg(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Cm(i,r,o,u){r=i.memoizedState,o=o(u,r),o=o==null?r:v({},r,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Am={enqueueSetState:function(i,r,o){i=i._reactInternals;var u=ss(),f=br(u);f.payload=r,o!=null&&(f.callback=o),r=wr(i,f,u),r!==null&&(is(r,i,u),Ou(r,i,u))},enqueueReplaceState:function(i,r,o){i=i._reactInternals;var u=ss(),f=br(u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=wr(i,f,u),r!==null&&(is(r,i,u),Ou(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var o=ss(),u=br(o);u.tag=2,r!=null&&(u.callback=r),r=wr(i,u,o),r!==null&&(is(r,i,o),Ou(r,i,o))}};function $T(i,r,o,u,f,g,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,g,b):r.prototype&&r.prototype.isPureReactComponent?!Su(o,u)||!Su(f,g):!0}function KT(i,r,o,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==i&&Am.enqueueReplaceState(r,r.state,null)}function Qa(i,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(i=i.defaultProps){o===r&&(o=v({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}var pf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function YT(i){pf(i)}function QT(i){console.error(i)}function XT(i){pf(i)}function mf(i,r){try{var o=i.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function ZT(i,r,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Rm(i,r,o){return o=br(o),o.tag=3,o.payload={element:null},o.callback=function(){mf(i,r)},o}function JT(i){return i=br(i),i.tag=3,i}function eE(i,r,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;i.payload=function(){return f(g)},i.callback=function(){ZT(r,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){ZT(r,o,u),typeof f!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function aI(i,r,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&Ru(r,o,f,!0),o=Es.current,o!==null){switch(o.tag){case 13:return ri===null?Xm():o.alternate===null&&Nt===0&&(Nt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===nm?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),Jm(i,u,f)),!1;case 22:return o.flags|=65536,u===nm?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),Jm(i,u,f)),!1}throw Error(s(435,o.tag))}return Jm(i,u,f),Xm(),!1}if(tt)return r=Es.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==Yp&&(i=Error(s(422),{cause:u}),Au(_s(i,o)))):(u!==Yp&&(r=Error(s(423),{cause:u}),Au(_s(r,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=_s(u,o),f=Rm(i.stateNode,u,f),rm(i,f),Nt!==4&&(Nt=2)),!1;var g=Error(s(520),{cause:u});if(g=_s(g,o),$u===null?$u=[g]:$u.push(g),Nt!==4&&(Nt=2),r===null)return!0;u=_s(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=Rm(o.stateNode,u,i),rm(o,i),!1;case 1:if(r=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Dr===null||!Dr.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=JT(f),eE(f,i,o,u),rm(o,f),!1}o=o.return}while(o!==null);return!1}var tE=Error(s(461)),Jt=!1;function fn(i,r,o,u){r.child=i===null?GT(r,null,o,u):nl(r,i.child,o,u)}function nE(i,r,o,u,f){o=o.render;var g=r.ref;if("ref"in u){var b={};for(var w in u)w!=="ref"&&(b[w]=u[w])}else b=u;return $a(r),u=cm(i,r,o,b,g,f),w=hm(),i!==null&&!Jt?(fm(i,r,f),Hi(i,r,f)):(tt&&w&&$p(r),r.flags|=1,fn(i,r,u,f),r.child)}function sE(i,r,o,u,f){if(i===null){var g=o.type;return typeof g=="function"&&!qp(g)&&g.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=g,iE(i,r,g,u,f)):(i=$h(o.type,null,u,r,r.mode,f),i.ref=r.ref,i.return=r,r.child=i)}if(g=i.child,!Mm(i,f)){var b=g.memoizedProps;if(o=o.compare,o=o!==null?o:Su,o(b,u)&&i.ref===r.ref)return Hi(i,r,f)}return r.flags|=1,i=Li(g,u),i.ref=r.ref,i.return=r,r.child=i}function iE(i,r,o,u,f){if(i!==null){var g=i.memoizedProps;if(Su(g,u)&&i.ref===r.ref)if(Jt=!1,r.pendingProps=u=g,Mm(i,f))(i.flags&131072)!==0&&(Jt=!0);else return r.lanes=i.lanes,Hi(i,r,f)}return Im(i,r,o,u,f)}function rE(i,r,o){var u=r.pendingProps,f=u.children,g=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,i!==null){for(f=r.child=i.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;r.childLanes=g&~u}else r.childLanes=0,r.child=null;return aE(i,r,u,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Zh(r,g!==null?g.cachePool:null),g!==null?iT(r,g):om(),WT(r);else return r.lanes=r.childLanes=536870912,aE(i,r,g!==null?g.baseLanes|o:o,o)}else g!==null?(Zh(r,g.cachePool),iT(r,g),Rr(),r.memoizedState=null):(i!==null&&Zh(r,null),om(),Rr());return fn(i,r,f,o),r.child}function aE(i,r,o,u){var f=tm();return f=f===null?null:{parent:qt._currentValue,pool:f},r.memoizedState={baseLanes:o,cachePool:f},i!==null&&Zh(r,null),om(),WT(r),i!==null&&Ru(i,r,u,!0),null}function gf(i,r){var o=r.ref;if(o===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(i===null||i.ref!==o)&&(r.flags|=4194816)}}function Im(i,r,o,u,f){return $a(r),o=cm(i,r,o,u,void 0,f),u=hm(),i!==null&&!Jt?(fm(i,r,f),Hi(i,r,f)):(tt&&u&&$p(r),r.flags|=1,fn(i,r,o,f),r.child)}function oE(i,r,o,u,f,g){return $a(r),r.updateQueue=null,o=aT(r,u,o,f),rT(i),u=hm(),i!==null&&!Jt?(fm(i,r,g),Hi(i,r,g)):(tt&&u&&$p(r),r.flags|=1,fn(i,r,o,g),r.child)}function lE(i,r,o,u,f){if($a(r),r.stateNode===null){var g=Wo,b=o.contextType;typeof b=="object"&&b!==null&&(g=Tn(b)),g=new o(u,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Am,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=u,g.state=r.memoizedState,g.refs={},sm(r),b=o.contextType,g.context=typeof b=="object"&&b!==null?Tn(b):Wo,g.state=r.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(Cm(r,o,b,u),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&Am.enqueueReplaceState(g,g.state,null),Pu(r,u,g,f),Du(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){g=r.stateNode;var w=r.memoizedProps,P=Qa(o,w);g.props=P;var Y=g.context,re=o.contextType;b=Wo,typeof re=="object"&&re!==null&&(b=Tn(re));var oe=o.getDerivedStateFromProps;re=typeof oe=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,re||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||Y!==b)&&KT(r,g,u,b),Sr=!1;var Q=r.memoizedState;g.state=Q,Pu(r,u,g,f),Du(),Y=r.memoizedState,w||Q!==Y||Sr?(typeof oe=="function"&&(Cm(r,o,oe,u),Y=r.memoizedState),(P=Sr||$T(r,o,P,u,Q,Y,b))?(re||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=Y),g.props=u,g.state=Y,g.context=b,u=P):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{g=r.stateNode,im(i,r),b=r.memoizedProps,re=Qa(o,b),g.props=re,oe=r.pendingProps,Q=g.context,Y=o.contextType,P=Wo,typeof Y=="object"&&Y!==null&&(P=Tn(Y)),w=o.getDerivedStateFromProps,(Y=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==oe||Q!==P)&&KT(r,g,u,P),Sr=!1,Q=r.memoizedState,g.state=Q,Pu(r,u,g,f),Du();var Z=r.memoizedState;b!==oe||Q!==Z||Sr||i!==null&&i.dependencies!==null&&Qh(i.dependencies)?(typeof w=="function"&&(Cm(r,o,w,u),Z=r.memoizedState),(re=Sr||$T(r,o,re,u,Q,Z,P)||i!==null&&i.dependencies!==null&&Qh(i.dependencies))?(Y||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,Z,P),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,Z,P)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Z),g.props=u,g.state=Z,g.context=P,u=re):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),u=!1)}return g=u,gf(i,r),u=(r.flags&128)!==0,g||u?(g=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,i!==null&&u?(r.child=nl(r,i.child,null,f),r.child=nl(r,null,o,f)):fn(i,r,o,f),r.memoizedState=g.state,i=r.child):i=Hi(i,r,f),i}function uE(i,r,o,u){return Cu(),r.flags|=256,fn(i,r,o,u),r.child}var xm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nm(i){return{baseLanes:i,cachePool:Qv()}}function km(i,r,o){return i=i!==null?i.childLanes&~o:0,r&&(i|=Ss),i}function cE(i,r,o){var u=r.pendingProps,f=!1,g=(r.flags&128)!==0,b;if((b=g)||(b=i!==null&&i.memoizedState===null?!1:(Gt.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,i===null){if(tt){if(f?Ar(r):Rr(),tt){var w=xt,P;if(P=w){e:{for(P=w,w=ii;P.nodeType!==8;){if(!w){w=null;break e}if(P=js(P.nextSibling),P===null){w=null;break e}}w=P}w!==null?(r.memoizedState={dehydrated:w,treeContext:za!==null?{id:Ui,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},P=Jn(18,null,null,0),P.stateNode=w,P.return=r,r.child=P,Mn=r,xt=null,P=!0):P=!1}P||Ga(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return pg(w)?r.lanes=32:r.lanes=536870912,null;zi(r)}return w=u.children,u=u.fallback,f?(Rr(),f=r.mode,w=_f({mode:"hidden",children:w},f),u=Fa(u,f,o,null),w.return=r,u.return=r,w.sibling=u,r.child=w,f=r.child,f.memoizedState=Nm(o),f.childLanes=km(i,b,o),r.memoizedState=xm,u):(Ar(r),Om(r,w))}if(P=i.memoizedState,P!==null&&(w=P.dehydrated,w!==null)){if(g)r.flags&256?(Ar(r),r.flags&=-257,r=Dm(i,r,o)):r.memoizedState!==null?(Rr(),r.child=i.child,r.flags|=128,r=null):(Rr(),f=u.fallback,w=r.mode,u=_f({mode:"visible",children:u.children},w),f=Fa(f,w,o,null),f.flags|=2,u.return=r,f.return=r,u.sibling=f,r.child=u,nl(r,i.child,null,o),u=r.child,u.memoizedState=Nm(o),u.childLanes=km(i,b,o),r.memoizedState=xm,r=f);else if(Ar(r),pg(w)){if(b=w.nextSibling&&w.nextSibling.dataset,b)var Y=b.dgst;b=Y,u=Error(s(419)),u.stack="",u.digest=b,Au({value:u,source:null,stack:null}),r=Dm(i,r,o)}else if(Jt||Ru(i,r,o,!1),b=(o&i.childLanes)!==0,Jt||b){if(b=mt,b!==null&&(u=o&-o,u=(u&42)!==0?1:pr(u),u=(u&(b.suspendedLanes|o))!==0?0:u,u!==0&&u!==P.retryLane))throw P.retryLane=u,Go(i,u),is(b,i,u),tE;w.data==="$?"||Xm(),r=Dm(i,r,o)}else w.data==="$?"?(r.flags|=192,r.child=i.child,r=null):(i=P.treeContext,xt=js(w.nextSibling),Mn=r,tt=!0,qa=null,ii=!1,i!==null&&(vs[Ts++]=Ui,vs[Ts++]=Vi,vs[Ts++]=za,Ui=i.id,Vi=i.overflow,za=r),r=Om(r,u.children),r.flags|=4096);return r}return f?(Rr(),f=u.fallback,w=r.mode,P=i.child,Y=P.sibling,u=Li(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,Y!==null?f=Li(Y,f):(f=Fa(f,w,o,null),f.flags|=2),f.return=r,u.return=r,u.sibling=f,r.child=u,u=f,f=r.child,w=i.child.memoizedState,w===null?w=Nm(o):(P=w.cachePool,P!==null?(Y=qt._currentValue,P=P.parent!==Y?{parent:Y,pool:Y}:P):P=Qv(),w={baseLanes:w.baseLanes|o,cachePool:P}),f.memoizedState=w,f.childLanes=km(i,b,o),r.memoizedState=xm,u):(Ar(r),o=i.child,i=o.sibling,o=Li(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,i!==null&&(b=r.deletions,b===null?(r.deletions=[i],r.flags|=16):b.push(i)),r.child=o,r.memoizedState=null,o)}function Om(i,r){return r=_f({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function _f(i,r){return i=Jn(22,i,null,r),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Dm(i,r,o){return nl(r,i.child,null,o),i=Om(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function hE(i,r,o){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Xp(i.return,r,o)}function Pm(i,r,o,u,f){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=f)}function fE(i,r,o){var u=r.pendingProps,f=u.revealOrder,g=u.tail;if(fn(i,r,u.children,o),u=Gt.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&hE(i,o,r);else if(i.tag===19)hE(i,o,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch($(Gt,u),f){case"forwards":for(o=r.child,f=null;o!==null;)i=o.alternate,i!==null&&df(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),Pm(r,!1,f,o,g);break;case"backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(i=f.alternate,i!==null&&df(i)===null){r.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}Pm(r,!0,o,null,g);break;case"together":Pm(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Hi(i,r,o){if(i!==null&&(r.dependencies=i.dependencies),Or|=r.lanes,(o&r.childLanes)===0)if(i!==null){if(Ru(i,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,o=Li(i,i.pendingProps),r.child=o,o.return=r;i.sibling!==null;)i=i.sibling,o=o.sibling=Li(i,i.pendingProps),o.return=r;o.sibling=null}return r.child}function Mm(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Qh(i)))}function oI(i,r,o){switch(r.tag){case 3:ge(r,r.stateNode.containerInfo),Er(r,qt,i.memoizedState.cache),Cu();break;case 27:case 5:Nn(r);break;case 4:ge(r,r.stateNode.containerInfo);break;case 10:Er(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Ar(r),r.flags|=128,null):(o&r.child.childLanes)!==0?cE(i,r,o):(Ar(r),i=Hi(i,r,o),i!==null?i.sibling:null);Ar(r);break;case 19:var f=(i.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(Ru(i,r,o,!1),u=(o&r.childLanes)!==0),f){if(u)return fE(i,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),$(Gt,Gt.current),u)break;return null;case 22:case 23:return r.lanes=0,rE(i,r,o);case 24:Er(r,qt,i.memoizedState.cache)}return Hi(i,r,o)}function dE(i,r,o){if(i!==null)if(i.memoizedProps!==r.pendingProps)Jt=!0;else{if(!Mm(i,o)&&(r.flags&128)===0)return Jt=!1,oI(i,r,o);Jt=(i.flags&131072)!==0}else Jt=!1,tt&&(r.flags&1048576)!==0&&Hv(r,Yh,r.index);switch(r.lanes=0,r.tag){case 16:e:{i=r.pendingProps;var u=r.elementType,f=u._init;if(u=f(u._payload),r.type=u,typeof u=="function")qp(u)?(i=Qa(u,i),r.tag=1,r=lE(null,r,u,i,o)):(r.tag=0,r=Im(null,r,u,i,o));else{if(u!=null){if(f=u.$$typeof,f===ne){r.tag=11,r=nE(null,r,u,i,o);break e}else if(f===O){r.tag=14,r=sE(null,r,u,i,o);break e}}throw r=Pe(u)||u,Error(s(306,r,""))}}return r;case 0:return Im(i,r,r.type,r.pendingProps,o);case 1:return u=r.type,f=Qa(u,r.pendingProps),lE(i,r,u,f,o);case 3:e:{if(ge(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var g=r.memoizedState;f=g.element,im(i,r),Pu(r,u,null,o);var b=r.memoizedState;if(u=b.cache,Er(r,qt,u),u!==g.cache&&Zp(r,[qt],o,!0),Du(),u=b.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=uE(i,r,u,o);break e}else if(u!==f){f=_s(Error(s(424)),r),Au(f),r=uE(i,r,u,o);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(xt=js(i.firstChild),Mn=r,tt=!0,qa=null,ii=!0,o=GT(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Cu(),u===f){r=Hi(i,r,o);break e}fn(i,r,u,o)}r=r.child}return r;case 26:return gf(i,r),i===null?(o=_S(r.type,null,r.pendingProps,null))?r.memoizedState=o:tt||(o=r.type,i=r.pendingProps,u=kf(fe.current).createElement(o),u[Ft]=r,u[Lt]=i,pn(u,o,i),Ot(u),r.stateNode=u):r.memoizedState=_S(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Nn(r),i===null&&tt&&(u=r.stateNode=pS(r.type,r.pendingProps,fe.current),Mn=r,ii=!0,f=xt,Lr(r.type)?(mg=f,xt=js(u.firstChild)):xt=f),fn(i,r,r.pendingProps.children,o),gf(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&tt&&((f=u=xt)&&(u=MI(u,r.type,r.pendingProps,ii),u!==null?(r.stateNode=u,Mn=r,xt=js(u.firstChild),ii=!1,f=!0):f=!1),f||Ga(r)),Nn(r),f=r.type,g=r.pendingProps,b=i!==null?i.memoizedProps:null,u=g.children,hg(f,g)?u=null:b!==null&&hg(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=cm(i,r,J1,null,null,o),nc._currentValue=f),gf(i,r),fn(i,r,u,o),r.child;case 6:return i===null&&tt&&((i=o=xt)&&(o=LI(o,r.pendingProps,ii),o!==null?(r.stateNode=o,Mn=r,xt=null,i=!0):i=!1),i||Ga(r)),null;case 13:return cE(i,r,o);case 4:return ge(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=nl(r,null,u,o):fn(i,r,u,o),r.child;case 11:return nE(i,r,r.type,r.pendingProps,o);case 7:return fn(i,r,r.pendingProps,o),r.child;case 8:return fn(i,r,r.pendingProps.children,o),r.child;case 12:return fn(i,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,Er(r,r.type,u.value),fn(i,r,u.children,o),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,$a(r),f=Tn(f),u=u(f),r.flags|=1,fn(i,r,u,o),r.child;case 14:return sE(i,r,r.type,r.pendingProps,o);case 15:return iE(i,r,r.type,r.pendingProps,o);case 19:return fE(i,r,o);case 31:return u=r.pendingProps,o=r.mode,u={mode:u.mode,children:u.children},i===null?(o=_f(u,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=Li(i.child,u),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return rE(i,r,o);case 24:return $a(r),u=Tn(qt),i===null?(f=tm(),f===null&&(f=mt,g=Jp(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),r.memoizedState={parent:u,cache:f},sm(r),Er(r,qt,f)):((i.lanes&o)!==0&&(im(i,r),Pu(r,null,null,o),Du()),f=i.memoizedState,g=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Er(r,qt,u)):(u=g.cache,Er(r,qt,u),u!==f.cache&&Zp(r,[qt],o,!0))),fn(i,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function qi(i){i.flags|=4}function pE(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!SS(r)){if(r=Es.current,r!==null&&((Ke&4194048)===Ke?ri!==null:(Ke&62914560)!==Ke&&(Ke&536870912)===0||r!==ri))throw ku=nm,Xv;i.flags|=8192}}function yf(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?iu():536870912,i.lanes|=r,al|=r)}function Fu(i,r){if(!tt)switch(i.tailMode){case"hidden":r=i.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Ct(i){var r=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(r)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,r}function lI(i,r,o){var u=r.pendingProps;switch(Kp(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(r),null;case 1:return Ct(r),null;case 3:return o=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Bi(qt),wt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(wu(r)?qi(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Wv())),Ct(r),null;case 26:return o=r.memoizedState,i===null?(qi(r),o!==null?(Ct(r),pE(r,o)):(Ct(r),r.flags&=-16777217)):o?o!==i.memoizedState?(qi(r),Ct(r),pE(r,o)):(Ct(r),r.flags&=-16777217):(i.memoizedProps!==u&&qi(r),Ct(r),r.flags&=-16777217),null;case 27:vn(r),o=fe.current;var f=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==u&&qi(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return Ct(r),null}i=X.current,wu(r)?qv(r):(i=pS(f,u,o),r.stateNode=i,qi(r))}return Ct(r),null;case 5:if(vn(r),o=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&qi(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return Ct(r),null}if(i=X.current,wu(r))qv(r);else{switch(f=kf(fe.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}i[Ft]=r,i[Lt]=u;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=i;e:switch(pn(i,o,u),o){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&qi(r)}}return Ct(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&qi(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=fe.current,wu(r)){if(i=r.stateNode,o=r.memoizedProps,u=null,f=Mn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Ft]=r,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||oS(i.nodeValue,o)),i||Ga(r)}else i=kf(i).createTextNode(u),i[Ft]=r,r.stateNode=i}return Ct(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=wu(r),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ft]=r}else Cu(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ct(r),f=!1}else f=Wv(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(zi(r),r):(zi(r),null)}if(zi(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=u!==null,i=i!==null&&i.memoizedState!==null,o){u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return o!==i&&o&&(r.child.flags|=8192),yf(r,r.updateQueue),Ct(r),null;case 4:return wt(),i===null&&ag(r.stateNode.containerInfo),Ct(r),null;case 10:return Bi(r.type),Ct(r),null;case 19:if(B(Gt),f=r.memoizedState,f===null)return Ct(r),null;if(u=(r.flags&128)!==0,g=f.rendering,g===null)if(u)Fu(f,!1);else{if(Nt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(g=df(i),g!==null){for(r.flags|=128,Fu(f,!1),i=g.updateQueue,r.updateQueue=i,yf(r,i),r.subtreeFlags=0,i=o,o=r.child;o!==null;)zv(o,i),o=o.sibling;return $(Gt,Gt.current&1|2),r.child}i=i.sibling}f.tail!==null&&un()>Ef&&(r.flags|=128,u=!0,Fu(f,!1),r.lanes=4194304)}else{if(!u)if(i=df(g),i!==null){if(r.flags|=128,u=!0,i=i.updateQueue,r.updateQueue=i,yf(r,i),Fu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!tt)return Ct(r),null}else 2*un()-f.renderingStartTime>Ef&&o!==536870912&&(r.flags|=128,u=!0,Fu(f,!1),r.lanes=4194304);f.isBackwards?(g.sibling=r.child,r.child=g):(i=f.last,i!==null?i.sibling=g:r.child=g,f.last=g)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=un(),r.sibling=null,i=Gt.current,$(Gt,u?i&1|2:i&1),r):(Ct(r),null);case 22:case 23:return zi(r),lm(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(Ct(r),r.subtreeFlags&6&&(r.flags|=8192)):Ct(r),o=r.updateQueue,o!==null&&yf(r,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),i!==null&&B(Ka),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Bi(qt),Ct(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function uI(i,r){switch(Kp(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Bi(qt),wt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return vn(r),null;case 13:if(zi(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Cu()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return B(Gt),null;case 4:return wt(),null;case 10:return Bi(r.type),null;case 22:case 23:return zi(r),lm(),i!==null&&B(Ka),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Bi(qt),null;case 25:return null;default:return null}}function mE(i,r){switch(Kp(r),r.tag){case 3:Bi(qt),wt();break;case 26:case 27:case 5:vn(r);break;case 4:wt();break;case 13:zi(r);break;case 19:B(Gt);break;case 10:Bi(r.type);break;case 22:case 23:zi(r),lm(),i!==null&&B(Ka);break;case 24:Bi(qt)}}function zu(i,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var g=o.create,b=o.inst;u=g(),b.destroy=u}o=o.next}while(o!==f)}}catch(w){pt(r,r.return,w)}}function Ir(i,r,o){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&i)===i){var b=u.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,f=r;var P=o,Y=w;try{Y()}catch(re){pt(f,P,re)}}}u=u.next}while(u!==g)}}catch(re){pt(r,r.return,re)}}function gE(i){var r=i.updateQueue;if(r!==null){var o=i.stateNode;try{sT(r,o)}catch(u){pt(i,i.return,u)}}}function _E(i,r,o){o.props=Qa(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){pt(i,r,u)}}function Hu(i,r){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){pt(i,r,f)}}function ai(i,r){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){pt(i,r,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){pt(i,r,f)}else o.current=null}function yE(i){var r=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){pt(i,i.return,f)}}function Lm(i,r,o){try{var u=i.stateNode;NI(u,i.type,o,r),u[Lt]=r}catch(f){pt(i,i.return,f)}}function vE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Lr(i.type)||i.tag===4}function Um(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||vE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Lr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Vm(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(i),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Nf));else if(u!==4&&(u===27&&Lr(i.type)&&(o=i.stateNode,r=null),i=i.child,i!==null))for(Vm(i,r,o),i=i.sibling;i!==null;)Vm(i,r,o),i=i.sibling}function vf(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?o.insertBefore(i,r):o.appendChild(i);else if(u!==4&&(u===27&&Lr(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(vf(i,r,o),i=i.sibling;i!==null;)vf(i,r,o),i=i.sibling}function TE(i){var r=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);pn(r,u,o),r[Ft]=i,r[Lt]=o}catch(g){pt(i,i.return,g)}}var Gi=!1,Pt=!1,jm=!1,EE=typeof WeakSet=="function"?WeakSet:Set,en=null;function cI(i,r){if(i=i.containerInfo,ug=Uf,i=Ov(i),Up(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var b=0,w=-1,P=-1,Y=0,re=0,oe=i,Q=null;t:for(;;){for(var Z;oe!==o||f!==0&&oe.nodeType!==3||(w=b+f),oe!==g||u!==0&&oe.nodeType!==3||(P=b+u),oe.nodeType===3&&(b+=oe.nodeValue.length),(Z=oe.firstChild)!==null;)Q=oe,oe=Z;for(;;){if(oe===i)break t;if(Q===o&&++Y===f&&(w=b),Q===g&&++re===u&&(P=b),(Z=oe.nextSibling)!==null)break;oe=Q,Q=oe.parentNode}oe=Z}o=w===-1||P===-1?null:{start:w,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(cg={focusedElem:i,selectionRange:o},Uf=!1,en=r;en!==null;)if(r=en,i=r.child,(r.subtreeFlags&1024)!==0&&i!==null)i.return=r,en=i;else for(;en!==null;){switch(r=en,g=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,o=r,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var xe=Qa(o.type,f,o.elementType===o.type);i=u.getSnapshotBeforeUpdate(xe,g),u.__reactInternalSnapshotBeforeUpdate=i}catch(we){pt(o,o.return,we)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,o=i.nodeType,o===9)dg(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":dg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,en=i;break}en=r.return}}function SE(i,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:xr(i,o),u&4&&zu(5,o);break;case 1:if(xr(i,o),u&4)if(i=o.stateNode,r===null)try{i.componentDidMount()}catch(b){pt(o,o.return,b)}else{var f=Qa(o.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(f,r,i.__reactInternalSnapshotBeforeUpdate)}catch(b){pt(o,o.return,b)}}u&64&&gE(o),u&512&&Hu(o,o.return);break;case 3:if(xr(i,o),u&64&&(i=o.updateQueue,i!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{sT(i,r)}catch(b){pt(o,o.return,b)}}break;case 27:r===null&&u&4&&TE(o);case 26:case 5:xr(i,o),r===null&&u&4&&yE(o),u&512&&Hu(o,o.return);break;case 12:xr(i,o);break;case 13:xr(i,o),u&4&&CE(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=vI.bind(null,o),UI(i,o))));break;case 22:if(u=o.memoizedState!==null||Gi,!u){r=r!==null&&r.memoizedState!==null||Pt,f=Gi;var g=Pt;Gi=u,(Pt=r)&&!g?Nr(i,o,(o.subtreeFlags&8772)!==0):xr(i,o),Gi=f,Pt=g}break;case 30:break;default:xr(i,o)}}function bE(i){var r=i.alternate;r!==null&&(i.alternate=null,bE(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&_r(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var St=null,Hn=!1;function Wi(i,r,o){for(o=o.child;o!==null;)wE(i,r,o),o=o.sibling}function wE(i,r,o){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(rt,o)}catch{}switch(o.tag){case 26:Pt||ai(o,r),Wi(i,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Pt||ai(o,r);var u=St,f=Hn;Lr(o.type)&&(St=o.stateNode,Hn=!1),Wi(i,r,o),Zu(o.stateNode),St=u,Hn=f;break;case 5:Pt||ai(o,r);case 6:if(u=St,f=Hn,St=null,Wi(i,r,o),St=u,Hn=f,St!==null)if(Hn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(o.stateNode)}catch(g){pt(o,r,g)}else try{St.removeChild(o.stateNode)}catch(g){pt(o,r,g)}break;case 18:St!==null&&(Hn?(i=St,fS(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),ac(i)):fS(St,o.stateNode));break;case 4:u=St,f=Hn,St=o.stateNode.containerInfo,Hn=!0,Wi(i,r,o),St=u,Hn=f;break;case 0:case 11:case 14:case 15:Pt||Ir(2,o,r),Pt||Ir(4,o,r),Wi(i,r,o);break;case 1:Pt||(ai(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&_E(o,r,u)),Wi(i,r,o);break;case 21:Wi(i,r,o);break;case 22:Pt=(u=Pt)||o.memoizedState!==null,Wi(i,r,o),Pt=u;break;default:Wi(i,r,o)}}function CE(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ac(i)}catch(o){pt(r,r.return,o)}}function hI(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new EE),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new EE),r;default:throw Error(s(435,i.tag))}}function Bm(i,r){var o=hI(i);r.forEach(function(u){var f=TI.bind(null,i,u);o.has(u)||(o.add(u),u.then(f,f))})}function es(i,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=i,b=r,w=b;e:for(;w!==null;){switch(w.tag){case 27:if(Lr(w.type)){St=w.stateNode,Hn=!1;break e}break;case 5:St=w.stateNode,Hn=!1;break e;case 3:case 4:St=w.stateNode.containerInfo,Hn=!0;break e}w=w.return}if(St===null)throw Error(s(160));wE(g,b,f),St=null,Hn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)AE(r,i),r=r.sibling}var Vs=null;function AE(i,r){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:es(r,i),ts(i),u&4&&(Ir(3,i,i.return),zu(3,i),Ir(5,i,i.return));break;case 1:es(r,i),ts(i),u&512&&(Pt||o===null||ai(o,o.return)),u&64&&Gi&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Vs;if(es(r,i),ts(i),u&512&&(Pt||o===null||ai(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Ca]||g[Ft]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),pn(g,u,o),g[Ft]=i,Ot(g),u=g;break e;case"link":var b=TS("link","href",f).get(u+(o.href||""));if(b){for(var w=0;w<b.length;w++)if(g=b[w],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(w,1);break t}}g=f.createElement(u),pn(g,u,o),f.head.appendChild(g);break;case"meta":if(b=TS("meta","content",f).get(u+(o.content||""))){for(w=0;w<b.length;w++)if(g=b[w],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(w,1);break t}}g=f.createElement(u),pn(g,u,o),f.head.appendChild(g);break;default:throw Error(s(468,u))}g[Ft]=i,Ot(g),u=g}i.stateNode=u}else ES(f,i.type,i.stateNode);else i.stateNode=vS(f,u,i.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?ES(f,i.type,i.stateNode):vS(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Lm(i,i.memoizedProps,o.memoizedProps)}break;case 27:es(r,i),ts(i),u&512&&(Pt||o===null||ai(o,o.return)),o!==null&&u&4&&Lm(i,i.memoizedProps,o.memoizedProps);break;case 5:if(es(r,i),ts(i),u&512&&(Pt||o===null||ai(o,o.return)),i.flags&32){f=i.stateNode;try{ds(f,"")}catch(Z){pt(i,i.return,Z)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,Lm(i,f,o!==null?o.memoizedProps:f)),u&1024&&(jm=!0);break;case 6:if(es(r,i),ts(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(Z){pt(i,i.return,Z)}}break;case 3:if(Pf=null,f=Vs,Vs=Of(r.containerInfo),es(r,i),Vs=f,ts(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ac(r.containerInfo)}catch(Z){pt(i,i.return,Z)}jm&&(jm=!1,RE(i));break;case 4:u=Vs,Vs=Of(i.stateNode.containerInfo),es(r,i),ts(i),Vs=u;break;case 12:es(r,i),ts(i);break;case 13:es(r,i),ts(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Wm=un()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Bm(i,u)));break;case 22:f=i.memoizedState!==null;var P=o!==null&&o.memoizedState!==null,Y=Gi,re=Pt;if(Gi=Y||f,Pt=re||P,es(r,i),Pt=re,Gi=Y,ts(i),u&8192)e:for(r=i.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||P||Gi||Pt||Xa(i)),o=null,r=i;;){if(r.tag===5||r.tag===26){if(o===null){P=o=r;try{if(g=P.stateNode,f)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{w=P.stateNode;var oe=P.memoizedProps.style,Q=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;w.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Z){pt(P,P.return,Z)}}}else if(r.tag===6){if(o===null){P=r;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(Z){pt(P,P.return,Z)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Bm(i,o))));break;case 19:es(r,i),ts(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Bm(i,u)));break;case 30:break;case 21:break;default:es(r,i),ts(i)}}function ts(i){var r=i.flags;if(r&2){try{for(var o,u=i.return;u!==null;){if(vE(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,g=Um(i);vf(i,g,f);break;case 5:var b=o.stateNode;o.flags&32&&(ds(b,""),o.flags&=-33);var w=Um(i);vf(i,w,b);break;case 3:case 4:var P=o.stateNode.containerInfo,Y=Um(i);Vm(i,Y,P);break;default:throw Error(s(161))}}catch(re){pt(i,i.return,re)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function RE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;RE(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function xr(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)SE(i,r.alternate,r),r=r.sibling}function Xa(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Ir(4,r,r.return),Xa(r);break;case 1:ai(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&_E(r,r.return,o),Xa(r);break;case 27:Zu(r.stateNode);case 26:case 5:ai(r,r.return),Xa(r);break;case 22:r.memoizedState===null&&Xa(r);break;case 30:Xa(r);break;default:Xa(r)}i=i.sibling}}function Nr(i,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=i,g=r,b=g.flags;switch(g.tag){case 0:case 11:case 15:Nr(f,g,o),zu(4,g);break;case 1:if(Nr(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){pt(u,u.return,Y)}if(u=g,f=u.updateQueue,f!==null){var w=u.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)nT(P[f],w)}catch(Y){pt(u,u.return,Y)}}o&&b&64&&gE(g),Hu(g,g.return);break;case 27:TE(g);case 26:case 5:Nr(f,g,o),o&&u===null&&b&4&&yE(g),Hu(g,g.return);break;case 12:Nr(f,g,o);break;case 13:Nr(f,g,o),o&&b&4&&CE(f,g);break;case 22:g.memoizedState===null&&Nr(f,g,o),Hu(g,g.return);break;case 30:break;default:Nr(f,g,o)}r=r.sibling}}function Fm(i,r){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Iu(o))}function zm(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Iu(i))}function oi(i,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)IE(i,r,o,u),r=r.sibling}function IE(i,r,o,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:oi(i,r,o,u),f&2048&&zu(9,r);break;case 1:oi(i,r,o,u);break;case 3:oi(i,r,o,u),f&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Iu(i)));break;case 12:if(f&2048){oi(i,r,o,u),i=r.stateNode;try{var g=r.memoizedProps,b=g.id,w=g.onPostCommit;typeof w=="function"&&w(b,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){pt(r,r.return,P)}}else oi(i,r,o,u);break;case 13:oi(i,r,o,u);break;case 23:break;case 22:g=r.stateNode,b=r.alternate,r.memoizedState!==null?g._visibility&2?oi(i,r,o,u):qu(i,r):g._visibility&2?oi(i,r,o,u):(g._visibility|=2,sl(i,r,o,u,(r.subtreeFlags&10256)!==0)),f&2048&&Fm(b,r);break;case 24:oi(i,r,o,u),f&2048&&zm(r.alternate,r);break;default:oi(i,r,o,u)}}function sl(i,r,o,u,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var g=i,b=r,w=o,P=u,Y=b.flags;switch(b.tag){case 0:case 11:case 15:sl(g,b,w,P,f),zu(8,b);break;case 23:break;case 22:var re=b.stateNode;b.memoizedState!==null?re._visibility&2?sl(g,b,w,P,f):qu(g,b):(re._visibility|=2,sl(g,b,w,P,f)),f&&Y&2048&&Fm(b.alternate,b);break;case 24:sl(g,b,w,P,f),f&&Y&2048&&zm(b.alternate,b);break;default:sl(g,b,w,P,f)}r=r.sibling}}function qu(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=i,u=r,f=u.flags;switch(u.tag){case 22:qu(o,u),f&2048&&Fm(u.alternate,u);break;case 24:qu(o,u),f&2048&&zm(u.alternate,u);break;default:qu(o,u)}r=r.sibling}}var Gu=8192;function il(i){if(i.subtreeFlags&Gu)for(i=i.child;i!==null;)xE(i),i=i.sibling}function xE(i){switch(i.tag){case 26:il(i),i.flags&Gu&&i.memoizedState!==null&&QI(Vs,i.memoizedState,i.memoizedProps);break;case 5:il(i);break;case 3:case 4:var r=Vs;Vs=Of(i.stateNode.containerInfo),il(i),Vs=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=Gu,Gu=16777216,il(i),Gu=r):il(i));break;default:il(i)}}function NE(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Wu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];en=u,OE(u,i)}NE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)kE(i),i=i.sibling}function kE(i){switch(i.tag){case 0:case 11:case 15:Wu(i),i.flags&2048&&Ir(9,i,i.return);break;case 3:Wu(i);break;case 12:Wu(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Tf(i)):Wu(i);break;default:Wu(i)}}function Tf(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];en=u,OE(u,i)}NE(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Ir(8,r,r.return),Tf(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Tf(r));break;default:Tf(r)}i=i.sibling}}function OE(i,r){for(;en!==null;){var o=en;switch(o.tag){case 0:case 11:case 15:Ir(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Iu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,en=u;else e:for(o=i;en!==null;){u=en;var f=u.sibling,g=u.return;if(bE(u),u===o){en=null;break e}if(f!==null){f.return=g,en=f;break e}en=g}}}var fI={getCacheForType:function(i){var r=Tn(qt),o=r.data.get(i);return o===void 0&&(o=i(),r.data.set(i,o)),o}},dI=typeof WeakMap=="function"?WeakMap:Map,at=0,mt=null,Be=null,Ke=0,ot=0,ns=null,kr=!1,rl=!1,Hm=!1,$i=0,Nt=0,Or=0,Za=0,qm=0,Ss=0,al=0,$u=null,qn=null,Gm=!1,Wm=0,Ef=1/0,Sf=null,Dr=null,dn=0,Pr=null,ol=null,ll=0,$m=0,Km=null,DE=null,Ku=0,Ym=null;function ss(){if((at&2)!==0&&Ke!==0)return Ke&-Ke;if(J.T!==null){var i=Yo;return i!==0?i:ng()}return mr()}function PE(){Ss===0&&(Ss=(Ke&536870912)===0||tt?su():536870912);var i=Es.current;return i!==null&&(i.flags|=32),Ss}function is(i,r,o){(i===mt&&(ot===2||ot===9)||i.cancelPendingCommit!==null)&&(ul(i,0),Mr(i,Ke,Ss,!1)),Ci(i,o),((at&2)===0||i!==mt)&&(i===mt&&((at&2)===0&&(Za|=o),Nt===4&&Mr(i,Ke,Ss,!1)),li(i))}function ME(i,r,o){if((at&6)!==0)throw Error(s(327));var u=!o&&(r&124)===0&&(r&i.expiredLanes)===0||wa(i,r),f=u?gI(i,r):Zm(i,r,!0),g=u;do{if(f===0){rl&&!u&&Mr(i,r,0,!1);break}else{if(o=i.current.alternate,g&&!pI(o)){f=Zm(i,r,!1),g=!1;continue}if(f===2){if(g=r,i.errorRecoveryDisabledLanes&g)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var w=i;f=$u;var P=w.current.memoizedState.isDehydrated;if(P&&(ul(w,b).flags|=256),b=Zm(w,b,!1),b!==2){if(Hm&&!P){w.errorRecoveryDisabledLanes|=g,Za|=g,f=4;break e}g=qn,qn=f,g!==null&&(qn===null?qn=g:qn.push.apply(qn,g))}f=b}if(g=!1,f!==2)continue}}if(f===1){ul(i,0),Mr(i,r,0,!0);break}e:{switch(u=i,g=f,g){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Mr(u,r,Ss,!kr);break e;case 2:qn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Wm+300-un(),10<f)){if(Mr(u,r,Ss,!kr),Ao(u,0,!0)!==0)break e;u.timeoutHandle=cS(LE.bind(null,u,o,qn,Sf,Gm,r,Ss,Za,al,kr,g,2,-0,0),f);break e}LE(u,o,qn,Sf,Gm,r,Ss,Za,al,kr,g,0,-0,0)}}break}while(!0);li(i)}function LE(i,r,o,u,f,g,b,w,P,Y,re,oe,Q,Z){if(i.timeoutHandle=-1,oe=r.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(tc={stylesheets:null,count:0,unsuspend:YI},xE(r),oe=XI(),oe!==null)){i.cancelPendingCommit=oe(HE.bind(null,i,r,g,o,u,f,b,w,P,re,1,Q,Z)),Mr(i,g,b,!Y);return}HE(i,r,g,o,u,f,b,w,P)}function pI(i){for(var r=i;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!Zn(g(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Mr(i,r,o,u){r&=~qm,r&=~Za,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var f=r;0<f;){var g=31-Qt(f),b=1<<g;u[g]=-1,f&=~b}o!==0&&$s(i,o,r)}function bf(){return(at&6)===0?(Yu(0),!1):!0}function Qm(){if(Be!==null){if(ot===0)var i=Be.return;else i=Be,ji=Wa=null,dm(i),tl=null,ju=0,i=Be;for(;i!==null;)mE(i.alternate,i),i=i.return;Be=null}}function ul(i,r){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,OI(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Qm(),mt=i,Be=o=Li(i.current,null),Ke=r,ot=0,ns=null,kr=!1,rl=wa(i,r),Hm=!1,al=Ss=qm=Za=Or=Nt=0,qn=$u=null,Gm=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var f=31-Qt(u),g=1<<f;r|=i[f],u&=~g}return $i=r,qh(),o}function UE(i,r){Ue=null,J.H=cf,r===Nu||r===Jh?(r=eT(),ot=3):r===Xv?(r=eT(),ot=4):ot=r===tE?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ns=r,Be===null&&(Nt=1,mf(i,_s(r,i.current)))}function VE(){var i=J.H;return J.H=cf,i===null?cf:i}function jE(){var i=J.A;return J.A=fI,i}function Xm(){Nt=4,kr||(Ke&4194048)!==Ke&&Es.current!==null||(rl=!0),(Or&134217727)===0&&(Za&134217727)===0||mt===null||Mr(mt,Ke,Ss,!1)}function Zm(i,r,o){var u=at;at|=2;var f=VE(),g=jE();(mt!==i||Ke!==r)&&(Sf=null,ul(i,r)),r=!1;var b=Nt;e:do try{if(ot!==0&&Be!==null){var w=Be,P=ns;switch(ot){case 8:Qm(),b=6;break e;case 3:case 2:case 9:case 6:Es.current===null&&(r=!0);var Y=ot;if(ot=0,ns=null,cl(i,w,P,Y),o&&rl){b=0;break e}break;default:Y=ot,ot=0,ns=null,cl(i,w,P,Y)}}mI(),b=Nt;break}catch(re){UE(i,re)}while(!0);return r&&i.shellSuspendCounter++,ji=Wa=null,at=u,J.H=f,J.A=g,Be===null&&(mt=null,Ke=0,qh()),b}function mI(){for(;Be!==null;)BE(Be)}function gI(i,r){var o=at;at|=2;var u=VE(),f=jE();mt!==i||Ke!==r?(Sf=null,Ef=un()+500,ul(i,r)):rl=wa(i,r);e:do try{if(ot!==0&&Be!==null){r=Be;var g=ns;t:switch(ot){case 1:ot=0,ns=null,cl(i,r,g,1);break;case 2:case 9:if(Zv(g)){ot=0,ns=null,FE(r);break}r=function(){ot!==2&&ot!==9||mt!==i||(ot=7),li(i)},g.then(r,r);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:Zv(g)?(ot=0,ns=null,FE(r)):(ot=0,ns=null,cl(i,r,g,7));break;case 5:var b=null;switch(Be.tag){case 26:b=Be.memoizedState;case 5:case 27:var w=Be;if(!b||SS(b)){ot=0,ns=null;var P=w.sibling;if(P!==null)Be=P;else{var Y=w.return;Y!==null?(Be=Y,wf(Y)):Be=null}break t}}ot=0,ns=null,cl(i,r,g,5);break;case 6:ot=0,ns=null,cl(i,r,g,6);break;case 8:Qm(),Nt=6;break e;default:throw Error(s(462))}}_I();break}catch(re){UE(i,re)}while(!0);return ji=Wa=null,J.H=u,J.A=f,at=o,Be!==null?0:(mt=null,Ke=0,qh(),Nt)}function _I(){for(;Be!==null&&!bi();)BE(Be)}function BE(i){var r=dE(i.alternate,i,$i);i.memoizedProps=i.pendingProps,r===null?wf(i):Be=r}function FE(i){var r=i,o=r.alternate;switch(r.tag){case 15:case 0:r=oE(o,r,r.pendingProps,r.type,void 0,Ke);break;case 11:r=oE(o,r,r.pendingProps,r.type.render,r.ref,Ke);break;case 5:dm(r);default:mE(o,r),r=Be=zv(r,$i),r=dE(o,r,$i)}i.memoizedProps=i.pendingProps,r===null?wf(i):Be=r}function cl(i,r,o,u){ji=Wa=null,dm(r),tl=null,ju=0;var f=r.return;try{if(aI(i,f,r,o,Ke)){Nt=1,mf(i,_s(o,i.current)),Be=null;return}}catch(g){if(f!==null)throw Be=f,g;Nt=1,mf(i,_s(o,i.current)),Be=null;return}r.flags&32768?(tt||u===1?i=!0:rl||(Ke&536870912)!==0?i=!1:(kr=i=!0,(u===2||u===9||u===3||u===6)&&(u=Es.current,u!==null&&u.tag===13&&(u.flags|=16384))),zE(r,i)):wf(r)}function wf(i){var r=i;do{if((r.flags&32768)!==0){zE(r,kr);return}i=r.return;var o=lI(r.alternate,r,$i);if(o!==null){Be=o;return}if(r=r.sibling,r!==null){Be=r;return}Be=r=i}while(r!==null);Nt===0&&(Nt=5)}function zE(i,r){do{var o=uI(i.alternate,i);if(o!==null){o.flags&=32767,Be=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(i=i.sibling,i!==null)){Be=i;return}Be=i=o}while(i!==null);Nt=6,Be=null}function HE(i,r,o,u,f,g,b,w,P){i.cancelPendingCommit=null;do Cf();while(dn!==0);if((at&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(g=r.lanes|r.childLanes,g|=zp,ru(i,o,g,b,w,P),i===mt&&(Be=mt=null,Ke=0),ol=r,Pr=i,ll=o,$m=g,Km=f,DE=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,EI(Me,function(){return KE(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,f=ce.p,ce.p=2,b=at,at|=4;try{cI(i,r,o)}finally{at=b,ce.p=f,J.T=u}}dn=1,qE(),GE(),WE()}}function qE(){if(dn===1){dn=0;var i=Pr,r=ol,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=ce.p;ce.p=2;var f=at;at|=4;try{AE(r,i);var g=cg,b=Ov(i.containerInfo),w=g.focusedElem,P=g.selectionRange;if(b!==w&&w&&w.ownerDocument&&kv(w.ownerDocument.documentElement,w)){if(P!==null&&Up(w)){var Y=P.start,re=P.end;if(re===void 0&&(re=Y),"selectionStart"in w)w.selectionStart=Y,w.selectionEnd=Math.min(re,w.value.length);else{var oe=w.ownerDocument||document,Q=oe&&oe.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),xe=w.textContent.length,we=Math.min(P.start,xe),ht=P.end===void 0?we:Math.min(P.end,xe);!Z.extend&&we>ht&&(b=ht,ht=we,we=b);var G=Nv(w,we),H=Nv(w,ht);if(G&&H&&(Z.rangeCount!==1||Z.anchorNode!==G.node||Z.anchorOffset!==G.offset||Z.focusNode!==H.node||Z.focusOffset!==H.offset)){var K=oe.createRange();K.setStart(G.node,G.offset),Z.removeAllRanges(),we>ht?(Z.addRange(K),Z.extend(H.node,H.offset)):(K.setEnd(H.node,H.offset),Z.addRange(K))}}}}for(oe=[],Z=w;Z=Z.parentNode;)Z.nodeType===1&&oe.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<oe.length;w++){var ae=oe[w];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Uf=!!ug,cg=ug=null}finally{at=f,ce.p=u,J.T=o}}i.current=r,dn=2}}function GE(){if(dn===2){dn=0;var i=Pr,r=ol,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=ce.p;ce.p=2;var f=at;at|=4;try{SE(i,r.alternate,r)}finally{at=f,ce.p=u,J.T=o}}dn=3}}function WE(){if(dn===4||dn===3){dn=0,Ta();var i=Pr,r=ol,o=ll,u=DE;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?dn=5:(dn=0,ol=Pr=null,$E(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(Dr=null),Ro(o),r=r.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(rt,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=J.T,f=ce.p,ce.p=2,J.T=null;try{for(var g=i.onRecoverableError,b=0;b<u.length;b++){var w=u[b];g(w.value,{componentStack:w.stack})}}finally{J.T=r,ce.p=f}}(ll&3)!==0&&Cf(),li(i),f=i.pendingLanes,(o&4194090)!==0&&(f&42)!==0?i===Ym?Ku++:(Ku=0,Ym=i):Ku=0,Yu(0)}}function $E(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Iu(r)))}function Cf(i){return qE(),GE(),WE(),KE()}function KE(){if(dn!==5)return!1;var i=Pr,r=$m;$m=0;var o=Ro(ll),u=J.T,f=ce.p;try{ce.p=32>o?32:o,J.T=null,o=Km,Km=null;var g=Pr,b=ll;if(dn=0,ol=Pr=null,ll=0,(at&6)!==0)throw Error(s(331));var w=at;if(at|=4,kE(g.current),IE(g,g.current,b,o),at=w,Yu(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(rt,g)}catch{}return!0}finally{ce.p=f,J.T=u,$E(i,r)}}function YE(i,r,o){r=_s(o,r),r=Rm(i.stateNode,r,2),i=wr(i,r,2),i!==null&&(Ci(i,2),li(i))}function pt(i,r,o){if(i.tag===3)YE(i,i,o);else for(;r!==null;){if(r.tag===3){YE(r,i,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Dr===null||!Dr.has(u))){i=_s(o,i),o=JT(2),u=wr(r,o,2),u!==null&&(eE(o,u,r,i),Ci(u,2),li(u));break}}r=r.return}}function Jm(i,r,o){var u=i.pingCache;if(u===null){u=i.pingCache=new dI;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(Hm=!0,f.add(o),i=yI.bind(null,i,r,o),r.then(i,i))}function yI(i,r,o){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,mt===i&&(Ke&o)===o&&(Nt===4||Nt===3&&(Ke&62914560)===Ke&&300>un()-Wm?(at&2)===0&&ul(i,0):qm|=o,al===Ke&&(al=0)),li(i)}function QE(i,r){r===0&&(r=iu()),i=Go(i,r),i!==null&&(Ci(i,r),li(i))}function vI(i){var r=i.memoizedState,o=0;r!==null&&(o=r.retryLane),QE(i,o)}function TI(i,r){var o=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),QE(i,o)}function EI(i,r){return Qn(i,r)}var Af=null,hl=null,eg=!1,Rf=!1,tg=!1,Ja=0;function li(i){i!==hl&&i.next===null&&(hl===null?Af=hl=i:hl=hl.next=i),Rf=!0,eg||(eg=!0,bI())}function Yu(i,r){if(!tg&&Rf){tg=!0;do for(var o=!1,u=Af;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var b=u.suspendedLanes,w=u.pingedLanes;g=(1<<31-Qt(42|i)+1)-1,g&=f&~(b&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,eS(u,g))}else g=Ke,g=Ao(u,u===mt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||wa(u,g)||(o=!0,eS(u,g));u=u.next}while(o);tg=!1}}function SI(){XE()}function XE(){Rf=eg=!1;var i=0;Ja!==0&&(kI()&&(i=Ja),Ja=0);for(var r=un(),o=null,u=Af;u!==null;){var f=u.next,g=ZE(u,r);g===0?(u.next=null,o===null?Af=f:o.next=f,f===null&&(hl=o)):(o=u,(i!==0||(g&3)!==0)&&(Rf=!0)),u=f}Yu(i)}function ZE(i,r){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var b=31-Qt(g),w=1<<b,P=f[b];P===-1?((w&o)===0||(w&u)!==0)&&(f[b]=nu(w,r)):P<=r&&(i.expiredLanes|=w),g&=~w}if(r=mt,o=Ke,o=Ao(i,i===r?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===r&&(ot===2||ot===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Ds(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||wa(i,o)){if(r=o&-o,r===i.callbackPriority)return r;switch(u!==null&&Ds(u),Ro(o)){case 2:case 8:o=He;break;case 32:o=Me;break;case 268435456:o=Tt;break;default:o=Me}return u=JE.bind(null,i),o=Qn(o,u),i.callbackPriority=r,i.callbackNode=o,r}return u!==null&&u!==null&&Ds(u),i.callbackPriority=2,i.callbackNode=null,2}function JE(i,r){if(dn!==0&&dn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Cf()&&i.callbackNode!==o)return null;var u=Ke;return u=Ao(i,i===mt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(ME(i,u,r),ZE(i,un()),i.callbackNode!=null&&i.callbackNode===o?JE.bind(null,i):null)}function eS(i,r){if(Cf())return null;ME(i,r,!0)}function bI(){DI(function(){(at&6)!==0?Qn(Ws,SI):XE()})}function ng(){return Ja===0&&(Ja=su()),Ja}function tS(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Do(""+i)}function nS(i,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,i.id&&o.setAttribute("form",i.id),r.parentNode.insertBefore(o,r),i=new FormData(i),o.parentNode.removeChild(o),i}function wI(i,r,o,u,f){if(r==="submit"&&o&&o.stateNode===f){var g=tS((f[Lt]||null).action),b=u.submitter;b&&(r=(r=b[Lt]||null)?tS(r.formAction):b.getAttribute("formAction"),r!==null&&(g=r,b=null));var w=new Po("action","action",null,u,f);i.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ja!==0){var P=b?nS(f,b):new FormData(f);Sm(o,{pending:!0,data:P,method:f.method,action:g},null,P)}}else typeof g=="function"&&(w.preventDefault(),P=b?nS(f,b):new FormData(f),Sm(o,{pending:!0,data:P,method:f.method,action:g},g,P))},currentTarget:f}]})}}for(var sg=0;sg<Fp.length;sg++){var ig=Fp[sg],CI=ig.toLowerCase(),AI=ig[0].toUpperCase()+ig.slice(1);Us(CI,"on"+AI)}Us(Mv,"onAnimationEnd"),Us(Lv,"onAnimationIteration"),Us(Uv,"onAnimationStart"),Us("dblclick","onDoubleClick"),Us("focusin","onFocus"),Us("focusout","onBlur"),Us(H1,"onTransitionRun"),Us(q1,"onTransitionStart"),Us(G1,"onTransitionCancel"),Us(Vv,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function sS(i,r){r=(r&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;e:{var g=void 0;if(r)for(var b=u.length-1;0<=b;b--){var w=u[b],P=w.instance,Y=w.currentTarget;if(w=w.listener,P!==g&&f.isPropagationStopped())break e;g=w,f.currentTarget=Y;try{g(f)}catch(re){pf(re)}f.currentTarget=null,g=P}else for(b=0;b<u.length;b++){if(w=u[b],P=w.instance,Y=w.currentTarget,w=w.listener,P!==g&&f.isPropagationStopped())break e;g=w,f.currentTarget=Y;try{g(f)}catch(re){pf(re)}f.currentTarget=null,g=P}}}}function Fe(i,r){var o=r[ou];o===void 0&&(o=r[ou]=new Set);var u=i+"__bubble";o.has(u)||(iS(r,i,2,!1),o.add(u))}function rg(i,r,o){var u=0;r&&(u|=4),iS(o,i,u,r)}var If="_reactListening"+Math.random().toString(36).slice(2);function ag(i){if(!i[If]){i[If]=!0,lu.forEach(function(o){o!=="selectionchange"&&(RI.has(o)||rg(o,!1,i),rg(o,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[If]||(r[If]=!0,rg("selectionchange",!1,r))}}function iS(i,r,o,u){switch(IS(r)){case 2:var f=ex;break;case 8:f=tx;break;default:f=Tg}o=f.bind(null,r,o,i),f=void 0,!ms||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(r,o,{capture:!0,passive:f}):i.addEventListener(r,o,!0):f!==void 0?i.addEventListener(r,o,{passive:f}):i.addEventListener(r,o,!1)}function og(i,r,o,u,f){var g=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var w=u.stateNode.containerInfo;if(w===f)break;if(b===4)for(b=u.return;b!==null;){var P=b.tag;if((P===3||P===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;w!==null;){if(b=Ai(w),b===null)return;if(P=b.tag,P===5||P===6||P===26||P===27){u=g=b;continue e}w=w.parentNode}}u=u.return}xh(function(){var Y=g,re=ps(o),oe=[];e:{var Q=jv.get(i);if(Q!==void 0){var Z=Po,xe=i;switch(i){case"keypress":if(Js(o)===0)break e;case"keydown":case"keyup":Z=Bo;break;case"focusin":xe="focus",Z=Uo;break;case"focusout":xe="blur",Z=Uo;break;case"beforeblur":case"afterblur":Z=Uo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=gs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Dp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Uh;break;case Mv:case Lv:case Uv:Z=Vo;break;case Vv:Z=jh;break;case"scroll":case"scrollend":Z=Nh;break;case"wheel":Z=Fo;break;case"copy":case"cut":case"paste":Z=jo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Tu;break;case"toggle":case"beforetoggle":Z=Fh}var we=(r&4)!==0,ht=!we&&(i==="scroll"||i==="scrollend"),G=we?Q!==null?Q+"Capture":null:Q;we=[];for(var H=Y,K;H!==null;){var ae=H;if(K=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||K===null||G===null||(ae=Oa(H,G),ae!=null&&we.push(Xu(H,ae,K))),ht)break;H=H.return}0<we.length&&(Q=new Z(Q,xe,null,o,re),oe.push({event:Q,listeners:we}))}}if((r&7)===0){e:{if(Q=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout",Q&&o!==Ni&&(xe=o.relatedTarget||o.fromElement)&&(Ai(xe)||xe[fs]))break e;if((Z||Q)&&(Q=re.window===re?re:(Q=re.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(xe=o.relatedTarget||o.toElement,Z=Y,xe=xe?Ai(xe):null,xe!==null&&(ht=l(xe),we=xe.tag,xe!==ht||we!==5&&we!==27&&we!==6)&&(xe=null)):(Z=null,xe=Y),Z!==xe)){if(we=gs,ae="onMouseLeave",G="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(we=Tu,ae="onPointerLeave",G="onPointerEnter",H="pointer"),ht=Z==null?Q:Ys(Z),K=xe==null?Q:Ys(xe),Q=new we(ae,H+"leave",Z,o,re),Q.target=ht,Q.relatedTarget=K,ae=null,Ai(re)===Y&&(we=new we(G,H+"enter",xe,o,re),we.target=K,we.relatedTarget=ht,ae=we),ht=ae,Z&&xe)t:{for(we=Z,G=xe,H=0,K=we;K;K=fl(K))H++;for(K=0,ae=G;ae;ae=fl(ae))K++;for(;0<H-K;)we=fl(we),H--;for(;0<K-H;)G=fl(G),K--;for(;H--;){if(we===G||G!==null&&we===G.alternate)break t;we=fl(we),G=fl(G)}we=null}else we=null;Z!==null&&rS(oe,Q,Z,we,!1),xe!==null&&ht!==null&&rS(oe,ht,xe,we,!0)}}e:{if(Q=Y?Ys(Y):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var Te=wv;else if(Ht(Q))if(Cv)Te=B1;else{Te=V1;var je=U1}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?Y&&du(Y.elementType)&&(Te=wv):Te=j1;if(Te&&(Te=Te(i,Y))){Mi(oe,Te,o,re);break e}je&&je(i,Q,Y),i==="focusout"&&Y&&Q.type==="number"&&Y.memoizedProps.value!=null&&vr(Q,"number",Q.value)}switch(je=Y?Ys(Y):window,i){case"focusin":(Ht(je)||je.contentEditable==="true")&&(zo=je,Vp=Y,bu=null);break;case"focusout":bu=Vp=zo=null;break;case"mousedown":jp=!0;break;case"contextmenu":case"mouseup":case"dragend":jp=!1,Dv(oe,o,re);break;case"selectionchange":if(z1)break;case"keydown":case"keyup":Dv(oe,o,re)}var Se;if(ni)e:{switch(i){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else We?se(i,o)&&(Ae="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Ae="onCompositionStart");Ae&&(S&&o.locale!=="ko"&&(We||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&We&&(Se=mu()):(Zs=re,Tr="value"in Zs?Zs.value:Zs.textContent,We=!0)),je=xf(Y,Ae),0<je.length&&(Ae=new yu(Ae,i,null,o,re),oe.push({event:Ae,listeners:je}),Se?Ae.data=Se:(Se=de(o),Se!==null&&(Ae.data=Se)))),(Se=_?zt(i,o):$e(i,o))&&(Ae=xf(Y,"onBeforeInput"),0<Ae.length&&(je=new yu("onBeforeInput","beforeinput",null,o,re),oe.push({event:je,listeners:Ae}),je.data=Se)),wI(oe,i,Y,o,re)}sS(oe,r)})}function Xu(i,r,o){return{instance:i,listener:r,currentTarget:o}}function xf(i,r){for(var o=r+"Capture",u=[];i!==null;){var f=i,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Oa(i,o),f!=null&&u.unshift(Xu(i,f,g)),f=Oa(i,r),f!=null&&u.push(Xu(i,f,g))),i.tag===3)return u;i=i.return}return[]}function fl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function rS(i,r,o,u,f){for(var g=r._reactName,b=[];o!==null&&o!==u;){var w=o,P=w.alternate,Y=w.stateNode;if(w=w.tag,P!==null&&P===u)break;w!==5&&w!==26&&w!==27||Y===null||(P=Y,f?(Y=Oa(o,g),Y!=null&&b.unshift(Xu(o,Y,P))):f||(Y=Oa(o,g),Y!=null&&b.push(Xu(o,Y,P)))),o=o.return}b.length!==0&&i.push({event:r,listeners:b})}var II=/\r\n?/g,xI=/\u0000|\uFFFD/g;function aS(i){return(typeof i=="string"?i:""+i).replace(II,`
`).replace(xI,"")}function oS(i,r){return r=aS(r),aS(i)===r}function Nf(){}function ct(i,r,o,u,f,g){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||ds(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&ds(i,""+u);break;case"className":Qs(i,"class",u);break;case"tabIndex":Qs(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Qs(i,o,u);break;case"style":fu(i,u,g);break;case"data":if(r!=="object"){Qs(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Do(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(r!=="input"&&ct(i,r,"name",f.name,f,null),ct(i,r,"formEncType",f.formEncType,f,null),ct(i,r,"formMethod",f.formMethod,f,null),ct(i,r,"formTarget",f.formTarget,f,null)):(ct(i,r,"encType",f.encType,f,null),ct(i,r,"method",f.method,f,null),ct(i,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Do(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Nf);break;case"onScroll":u!=null&&Fe("scroll",i);break;case"onScrollEnd":u!=null&&Fe("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Do(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Fe("beforetoggle",i),Fe("toggle",i),yr(i,"popover",u);break;case"xlinkActuate":cn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":cn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":cn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":cn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":cn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":cn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":cn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":cn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":cn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":yr(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=kp.get(o)||o,yr(i,o,u))}}function lg(i,r,o,u,f,g){switch(o){case"style":fu(i,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"children":typeof u=="string"?ds(i,u):(typeof u=="number"||typeof u=="bigint")&&ds(i,""+u);break;case"onScroll":u!=null&&Fe("scroll",i);break;case"onScrollEnd":u!=null&&Fe("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Nf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Io.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),g=i[Lt]||null,g=g!=null?g[o]:null,typeof g=="function"&&i.removeEventListener(r,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(r,u,f);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):yr(i,o,u)}}}function pn(i,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",i),Fe("load",i);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var b=o[g];if(b!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ct(i,r,g,b,o,null)}}f&&ct(i,r,"srcSet",o.srcSet,o,null),u&&ct(i,r,"src",o.src,o,null);return;case"input":Fe("invalid",i);var w=g=b=f=null,P=null,Y=null;for(u in o)if(o.hasOwnProperty(u)){var re=o[u];if(re!=null)switch(u){case"name":f=re;break;case"type":b=re;break;case"checked":P=re;break;case"defaultChecked":Y=re;break;case"value":g=re;break;case"defaultValue":w=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,r));break;default:ct(i,r,u,re,o,null)}}xa(i,g,w,P,Y,b,f,!1),Oo(i);return;case"select":Fe("invalid",i),u=b=g=null;for(f in o)if(o.hasOwnProperty(f)&&(w=o[f],w!=null))switch(f){case"value":g=w;break;case"defaultValue":b=w;break;case"multiple":u=w;default:ct(i,r,f,w,o,null)}r=g,o=b,i.multiple=!!u,r!=null?xi(i,!!u,r,!1):o!=null&&xi(i,!!u,o,!0);return;case"textarea":Fe("invalid",i),g=f=u=null;for(b in o)if(o.hasOwnProperty(b)&&(w=o[b],w!=null))switch(b){case"value":u=w;break;case"defaultValue":f=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:ct(i,r,b,w,o,null)}Na(i,u,f,g),Oo(i);return;case"option":for(P in o)if(o.hasOwnProperty(P)&&(u=o[P],u!=null))switch(P){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ct(i,r,P,u,o,null)}return;case"dialog":Fe("beforetoggle",i),Fe("toggle",i),Fe("cancel",i),Fe("close",i);break;case"iframe":case"object":Fe("load",i);break;case"video":case"audio":for(u=0;u<Qu.length;u++)Fe(Qu[u],i);break;case"image":Fe("error",i),Fe("load",i);break;case"details":Fe("toggle",i);break;case"embed":case"source":case"link":Fe("error",i),Fe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in o)if(o.hasOwnProperty(Y)&&(u=o[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ct(i,r,Y,u,o,null)}return;default:if(du(r)){for(re in o)o.hasOwnProperty(re)&&(u=o[re],u!==void 0&&lg(i,r,re,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&ct(i,r,w,u,o,null))}function NI(i,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,b=null,w=null,P=null,Y=null,re=null;for(Z in o){var oe=o[Z];if(o.hasOwnProperty(Z)&&oe!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":P=oe;default:u.hasOwnProperty(Z)||ct(i,r,Z,null,u,oe)}}for(var Q in u){var Z=u[Q];if(oe=o[Q],u.hasOwnProperty(Q)&&(Z!=null||oe!=null))switch(Q){case"type":g=Z;break;case"name":f=Z;break;case"checked":Y=Z;break;case"defaultChecked":re=Z;break;case"value":b=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,r));break;default:Z!==oe&&ct(i,r,Q,Z,u,oe)}}Xn(i,b,w,P,Y,re,g,f);return;case"select":Z=b=w=Q=null;for(g in o)if(P=o[g],o.hasOwnProperty(g)&&P!=null)switch(g){case"value":break;case"multiple":Z=P;default:u.hasOwnProperty(g)||ct(i,r,g,null,u,P)}for(f in u)if(g=u[f],P=o[f],u.hasOwnProperty(f)&&(g!=null||P!=null))switch(f){case"value":Q=g;break;case"defaultValue":w=g;break;case"multiple":b=g;default:g!==P&&ct(i,r,f,g,u,P)}r=w,o=b,u=Z,Q!=null?xi(i,!!o,Q,!1):!!u!=!!o&&(r!=null?xi(i,!!o,r,!0):xi(i,!!o,o?[]:"",!1));return;case"textarea":Z=Q=null;for(w in o)if(f=o[w],o.hasOwnProperty(w)&&f!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ct(i,r,w,null,u,f)}for(b in u)if(f=u[b],g=o[b],u.hasOwnProperty(b)&&(f!=null||g!=null))switch(b){case"value":Q=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==g&&ct(i,r,b,f,u,g)}lt(i,Q,Z);return;case"option":for(var xe in o)if(Q=o[xe],o.hasOwnProperty(xe)&&Q!=null&&!u.hasOwnProperty(xe))switch(xe){case"selected":i.selected=!1;break;default:ct(i,r,xe,null,u,Q)}for(P in u)if(Q=u[P],Z=o[P],u.hasOwnProperty(P)&&Q!==Z&&(Q!=null||Z!=null))switch(P){case"selected":i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ct(i,r,P,Q,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in o)Q=o[we],o.hasOwnProperty(we)&&Q!=null&&!u.hasOwnProperty(we)&&ct(i,r,we,null,u,Q);for(Y in u)if(Q=u[Y],Z=o[Y],u.hasOwnProperty(Y)&&Q!==Z&&(Q!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:ct(i,r,Y,Q,u,Z)}return;default:if(du(r)){for(var ht in o)Q=o[ht],o.hasOwnProperty(ht)&&Q!==void 0&&!u.hasOwnProperty(ht)&&lg(i,r,ht,void 0,u,Q);for(re in u)Q=u[re],Z=o[re],!u.hasOwnProperty(re)||Q===Z||Q===void 0&&Z===void 0||lg(i,r,re,Q,u,Z);return}}for(var G in o)Q=o[G],o.hasOwnProperty(G)&&Q!=null&&!u.hasOwnProperty(G)&&ct(i,r,G,null,u,Q);for(oe in u)Q=u[oe],Z=o[oe],!u.hasOwnProperty(oe)||Q===Z||Q==null&&Z==null||ct(i,r,oe,Q,u,Z)}var ug=null,cg=null;function kf(i){return i.nodeType===9?i:i.ownerDocument}function lS(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uS(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function hg(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var fg=null;function kI(){var i=window.event;return i&&i.type==="popstate"?i===fg?!1:(fg=i,!0):(fg=null,!1)}var cS=typeof setTimeout=="function"?setTimeout:void 0,OI=typeof clearTimeout=="function"?clearTimeout:void 0,hS=typeof Promise=="function"?Promise:void 0,DI=typeof queueMicrotask=="function"?queueMicrotask:typeof hS<"u"?function(i){return hS.resolve(null).then(i).catch(PI)}:cS;function PI(i){setTimeout(function(){throw i})}function Lr(i){return i==="head"}function fS(i,r){var o=r,u=0,f=0;do{var g=o.nextSibling;if(i.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var b=i.ownerDocument;if(o&1&&Zu(b.documentElement),o&2&&Zu(b.body),o&4)for(o=b.head,Zu(o),b=o.firstChild;b;){var w=b.nextSibling,P=b.nodeName;b[Ca]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&b.rel.toLowerCase()==="stylesheet"||o.removeChild(b),b=w}}if(f===0){i.removeChild(g),ac(r);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);ac(r)}function dg(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":dg(o),_r(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function MI(i,r,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ca])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=js(i.nextSibling),i===null)break}return null}function LI(i,r,o){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=js(i.nextSibling),i===null))return null;return i}function pg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function UI(i,r){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function js(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}var mg=null;function dS(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return i;r--}else o==="/$"&&r++}i=i.previousSibling}return null}function pS(i,r,o){switch(r=kf(o),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Zu(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);_r(i)}var bs=new Map,mS=new Set;function Of(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ki=ce.d;ce.d={f:VI,r:jI,D:BI,C:FI,L:zI,m:HI,X:GI,S:qI,M:WI};function VI(){var i=Ki.f(),r=bf();return i||r}function jI(i){var r=Ks(i);r!==null&&r.tag===5&&r.type==="form"?MT(r):Ki.r(i)}var dl=typeof document>"u"?null:document;function gS(i,r,o){var u=dl;if(u&&typeof r=="string"&&r){var f=Ut(r);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),mS.has(f)||(mS.add(f),i={rel:i,crossOrigin:o,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),pn(r,"link",i),Ot(r),u.head.appendChild(r)))}}function BI(i){Ki.D(i),gS("dns-prefetch",i,null)}function FI(i,r){Ki.C(i,r),gS("preconnect",i,r)}function zI(i,r,o){Ki.L(i,r,o);var u=dl;if(u&&i&&r){var f='link[rel="preload"][as="'+Ut(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Ut(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Ut(o.imageSizes)+'"]')):f+='[href="'+Ut(i)+'"]';var g=f;switch(r){case"style":g=pl(i);break;case"script":g=ml(i)}bs.has(g)||(i=v({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:i,as:r},o),bs.set(g,i),u.querySelector(f)!==null||r==="style"&&u.querySelector(Ju(g))||r==="script"&&u.querySelector(ec(g))||(r=u.createElement("link"),pn(r,"link",i),Ot(r),u.head.appendChild(r)))}}function HI(i,r){Ki.m(i,r);var o=dl;if(o&&i){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Ut(u)+'"][href="'+Ut(i)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=ml(i)}if(!bs.has(g)&&(i=v({rel:"modulepreload",href:i},r),bs.set(g,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ec(g)))return}u=o.createElement("link"),pn(u,"link",i),Ot(u),o.head.appendChild(u)}}}function qI(i,r,o){Ki.S(i,r,o);var u=dl;if(u&&i){var f=On(u).hoistableStyles,g=pl(i);r=r||"default";var b=f.get(g);if(!b){var w={loading:0,preload:null};if(b=u.querySelector(Ju(g)))w.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":r},o),(o=bs.get(g))&&gg(i,o);var P=b=u.createElement("link");Ot(P),pn(P,"link",i),P._p=new Promise(function(Y,re){P.onload=Y,P.onerror=re}),P.addEventListener("load",function(){w.loading|=1}),P.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Df(b,r,u)}b={type:"stylesheet",instance:b,count:1,state:w},f.set(g,b)}}}function GI(i,r){Ki.X(i,r);var o=dl;if(o&&i){var u=On(o).hoistableScripts,f=ml(i),g=u.get(f);g||(g=o.querySelector(ec(f)),g||(i=v({src:i,async:!0},r),(r=bs.get(f))&&_g(i,r),g=o.createElement("script"),Ot(g),pn(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function WI(i,r){Ki.M(i,r);var o=dl;if(o&&i){var u=On(o).hoistableScripts,f=ml(i),g=u.get(f);g||(g=o.querySelector(ec(f)),g||(i=v({src:i,async:!0,type:"module"},r),(r=bs.get(f))&&_g(i,r),g=o.createElement("script"),Ot(g),pn(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function _S(i,r,o,u){var f=(f=fe.current)?Of(f):null;if(!f)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=pl(o.href),o=On(f).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=pl(o.href);var g=On(f).hoistableStyles,b=g.get(i);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,b),(g=f.querySelector(Ju(i)))&&!g._p&&(b.instance=g,b.state.loading=5),bs.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},bs.set(i,o),g||$I(f,i,o,b.state))),r&&u===null)throw Error(s(528,""));return b}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ml(o),o=On(f).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function pl(i){return'href="'+Ut(i)+'"'}function Ju(i){return'link[rel="stylesheet"]['+i+"]"}function yS(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function $I(i,r,o,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),pn(r,"link",o),Ot(r),i.head.appendChild(r))}function ml(i){return'[src="'+Ut(i)+'"]'}function ec(i){return"script[async]"+i}function vS(i,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+Ut(o.href)+'"]');if(u)return r.instance=u,Ot(u),u;var f=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Ot(u),pn(u,"style",f),Df(u,o.precedence,i),r.instance=u;case"stylesheet":f=pl(o.href);var g=i.querySelector(Ju(f));if(g)return r.state.loading|=4,r.instance=g,Ot(g),g;u=yS(o),(f=bs.get(f))&&gg(u,f),g=(i.ownerDocument||i).createElement("link"),Ot(g);var b=g;return b._p=new Promise(function(w,P){b.onload=w,b.onerror=P}),pn(g,"link",u),r.state.loading|=4,Df(g,o.precedence,i),r.instance=g;case"script":return g=ml(o.src),(f=i.querySelector(ec(g)))?(r.instance=f,Ot(f),f):(u=o,(f=bs.get(g))&&(u=v({},o),_g(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Ot(f),pn(f,"link",u),i.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Df(u,o.precedence,i));return r.instance}function Df(i,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,b=0;b<u.length;b++){var w=u[b];if(w.dataset.precedence===r)g=w;else if(g!==f)break}g?g.parentNode.insertBefore(i,g.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(i,r.firstChild))}function gg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function _g(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Pf=null;function TS(i,r,o){if(Pf===null){var u=new Map,f=Pf=new Map;f.set(o,u)}else f=Pf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var g=o[f];if(!(g[Ca]||g[Ft]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(r)||"";b=i+b;var w=u.get(b);w?w.push(g):u.set(b,[g])}}return u}function ES(i,r,o){i=i.ownerDocument||i,i.head.insertBefore(o,r==="title"?i.querySelector("head > title"):null)}function KI(i,r,o){if(o===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function SS(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var tc=null;function YI(){}function QI(i,r,o){if(tc===null)throw Error(s(475));var u=tc;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=pl(o.href),g=i.querySelector(Ju(f));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Mf.bind(u),i.then(u,u)),r.state.loading|=4,r.instance=g,Ot(g);return}g=i.ownerDocument||i,o=yS(o),(f=bs.get(f))&&gg(o,f),g=g.createElement("link"),Ot(g);var b=g;b._p=new Promise(function(w,P){b.onload=w,b.onerror=P}),pn(g,"link",o),r.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=Mf.bind(u),i.addEventListener("load",r),i.addEventListener("error",r))}}function XI(){if(tc===null)throw Error(s(475));var i=tc;return i.stylesheets&&i.count===0&&yg(i,i.stylesheets),0<i.count?function(r){var o=setTimeout(function(){if(i.stylesheets&&yg(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(o)}}:null}function Mf(){if(this.count--,this.count===0){if(this.stylesheets)yg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Lf=null;function yg(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Lf=new Map,r.forEach(ZI,i),Lf=null,Mf.call(i))}function ZI(i,r){if(!(r.state.loading&4)){var o=Lf.get(i);if(o)var u=o.get(null);else{o=new Map,Lf.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var b=f[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}f=r.instance,b=f.getAttribute("data-precedence"),g=o.get(b)||u,g===u&&o.set(null,f),o.set(b,f),this.count++,u=Mf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),r.state.loading|=4}}var nc={$$typeof:q,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function JI(i,r,o,u,f,g,b,w){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.hiddenUpdates=wi(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function bS(i,r,o,u,f,g,b,w,P,Y,re,oe){return i=new JI(i,r,o,b,w,P,Y,oe),r=1,g===!0&&(r|=24),g=Jn(3,null,null,r),i.current=g,g.stateNode=i,r=Jp(),r.refCount++,i.pooledCache=r,r.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:r},sm(g),i}function wS(i){return i?(i=Wo,i):Wo}function CS(i,r,o,u,f,g){f=wS(f),u.context===null?u.context=f:u.pendingContext=f,u=br(r),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=wr(i,u,r),o!==null&&(is(o,i,r),Ou(o,i,r))}function AS(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<r?o:r}}function vg(i,r){AS(i,r),(i=i.alternate)&&AS(i,r)}function RS(i){if(i.tag===13){var r=Go(i,67108864);r!==null&&is(r,i,67108864),vg(i,67108864)}}var Uf=!0;function ex(i,r,o,u){var f=J.T;J.T=null;var g=ce.p;try{ce.p=2,Tg(i,r,o,u)}finally{ce.p=g,J.T=f}}function tx(i,r,o,u){var f=J.T;J.T=null;var g=ce.p;try{ce.p=8,Tg(i,r,o,u)}finally{ce.p=g,J.T=f}}function Tg(i,r,o,u){if(Uf){var f=Eg(u);if(f===null)og(i,r,u,Vf,o),xS(i,u);else if(sx(f,i,r,o,u))u.stopPropagation();else if(xS(i,u),r&4&&-1<nx.indexOf(i)){for(;f!==null;){var g=Ks(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=Ps(g.pendingLanes);if(b!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var P=1<<31-Qt(b);w.entanglements[1]|=P,b&=~P}li(g),(at&6)===0&&(Ef=un()+500,Yu(0))}}break;case 13:w=Go(g,2),w!==null&&is(w,g,2),bf(),vg(g,2)}if(g=Eg(u),g===null&&og(i,r,u,Vf,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else og(i,r,u,null,o)}}function Eg(i){return i=ps(i),Sg(i)}var Vf=null;function Sg(i){if(Vf=null,i=Ai(i),i!==null){var r=l(i);if(r===null)i=null;else{var o=r.tag;if(o===13){if(i=c(r),i!==null)return i;i=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Vf=i,null}function IS(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dr()){case Ws:return 2;case He:return 8;case Me:case dt:return 32;case Tt:return 268435456;default:return 32}default:return 32}}var bg=!1,Ur=null,Vr=null,jr=null,sc=new Map,ic=new Map,Br=[],nx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xS(i,r){switch(i){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":sc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ic.delete(r.pointerId)}}function rc(i,r,o,u,f,g){return i===null||i.nativeEvent!==g?(i={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},r!==null&&(r=Ks(r),r!==null&&RS(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),i)}function sx(i,r,o,u,f){switch(r){case"focusin":return Ur=rc(Ur,i,r,o,u,f),!0;case"dragenter":return Vr=rc(Vr,i,r,o,u,f),!0;case"mouseover":return jr=rc(jr,i,r,o,u,f),!0;case"pointerover":var g=f.pointerId;return sc.set(g,rc(sc.get(g)||null,i,r,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,ic.set(g,rc(ic.get(g)||null,i,r,o,u,f)),!0}return!1}function NS(i){var r=Ai(i.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){i.blockedOn=r,Sh(i.priority,function(){if(o.tag===13){var u=ss();u=pr(u);var f=Go(o,u);f!==null&&is(f,o,u),vg(o,u)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function jf(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var o=Eg(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);Ni=u,o.target.dispatchEvent(u),Ni=null}else return r=Ks(o),r!==null&&RS(r),i.blockedOn=o,!1;r.shift()}return!0}function kS(i,r,o){jf(i)&&o.delete(r)}function ix(){bg=!1,Ur!==null&&jf(Ur)&&(Ur=null),Vr!==null&&jf(Vr)&&(Vr=null),jr!==null&&jf(jr)&&(jr=null),sc.forEach(kS),ic.forEach(kS)}function Bf(i,r){i.blockedOn===r&&(i.blockedOn=null,bg||(bg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ix)))}var Ff=null;function OS(i){Ff!==i&&(Ff=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ff===i&&(Ff=null);for(var r=0;r<i.length;r+=3){var o=i[r],u=i[r+1],f=i[r+2];if(typeof u!="function"){if(Sg(u||o)===null)continue;break}var g=Ks(o);g!==null&&(i.splice(r,3),r-=3,Sm(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function ac(i){function r(P){return Bf(P,i)}Ur!==null&&Bf(Ur,i),Vr!==null&&Bf(Vr,i),jr!==null&&Bf(jr,i),sc.forEach(r),ic.forEach(r);for(var o=0;o<Br.length;o++){var u=Br[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Br.length&&(o=Br[0],o.blockedOn===null);)NS(o),o.blockedOn===null&&Br.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],b=f[Lt]||null;if(typeof g=="function")b||OS(o);else if(b){var w=null;if(g&&g.hasAttribute("formAction")){if(f=g,b=g[Lt]||null)w=b.formAction;else if(Sg(f)!==null)continue}else w=b.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),OS(o)}}}function wg(i){this._internalRoot=i}zf.prototype.render=wg.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,u=ss();CS(o,u,i,r,null,null)},zf.prototype.unmount=wg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;CS(i.current,2,null,i,null,null),bf(),r[fs]=null}};function zf(i){this._internalRoot=i}zf.prototype.unstable_scheduleHydration=function(i){if(i){var r=mr();i={blockedOn:null,target:i,priority:r};for(var o=0;o<Br.length&&r!==0&&r<Br[o].priority;o++);Br.splice(o,0,i),o===0&&NS(i)}};var DS=e.version;if(DS!=="19.1.0")throw Error(s(527,DS,"19.1.0"));ce.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(r),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var rx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hf.isDisabled&&Hf.supportsFiber)try{rt=Hf.inject(rx),Je=Hf}catch{}}return lc.createRoot=function(i,r){if(!a(i))throw Error(s(299));var o=!1,u="",f=YT,g=QT,b=XT,w=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=bS(i,1,!1,null,null,o,u,f,g,b,w,null),i[fs]=r.current,ag(i),new wg(r)},lc.hydrateRoot=function(i,r,o){if(!a(i))throw Error(s(299));var u=!1,f="",g=YT,b=QT,w=XT,P=null,Y=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(P=o.unstable_transitionCallbacks),o.formState!==void 0&&(Y=o.formState)),r=bS(i,1,!0,r,o??null,u,f,g,b,w,P,Y),r.context=wS(null),o=r.current,u=ss(),u=pr(u),f=br(u),f.callback=null,wr(o,f,u),o=u,r.current.lanes=o,Ci(r,o),li(r),i[fs]=r.current,ag(i),new zf(r)},lc.version="19.1.0",lc}var HS;function mx(){if(HS)return Rg.exports;HS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rg.exports=px(),Rg.exports}var gx=mx();const _x="_navBarWrapper_1kl1r_71",yx="_left_1kl1r_105",vx="_title_1kl1r_113",Tx="_mid_1kl1r_131",Ex="_Links_1kl1r_143",Sx="_content_1kl1r_161",bx="_ind_1kl1r_173",wx="_indicator_1kl1r_183",Cx="_right_1kl1r_211",Ax="_authButts_1kl1r_211",Rx="_HamburgerButt_1kl1r_213",Ix="_signOut_1kl1r_277",xx="_sidebar_1kl1r_303",Nx="_hideSideBar_1kl1r_313",kx="_signUp_1kl1r_455",Ox="_indicated_1kl1r_615",Dx="_indication_1kl1r_641",Ze={navBarWrapper:_x,left:yx,title:vx,mid:Tx,Links:Ex,content:Sx,ind:bx,indicator:wx,right:Cx,authButts:Ax,HamburgerButt:Rx,signOut:Ix,sidebar:xx,hideSideBar:Nx,signUp:kx,indicated:Ox,indication:Dx};var uc={},qS;function Px(){if(qS)return uc;qS=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.parse=c,uc.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function c(E,R){const A=new l,j=E.length;if(j<2)return A;const D=(R==null?void 0:R.decode)||v;let M=0;do{const z=E.indexOf("=",M);if(z===-1)break;const q=E.indexOf(";",M),ne=q===-1?j:q;if(z>ne){M=E.lastIndexOf(";",z-1)+1;continue}const ue=d(E,M,z),ee=p(E,z,ue),O=E.slice(ue,ee);if(A[O]===void 0){let I=d(E,z+1,ne),N=p(E,ne,I);const V=D(E.slice(I,N));A[O]=V}M=ne+1}while(M<j);return A}function d(E,R,A){do{const j=E.charCodeAt(R);if(j!==32&&j!==9)return R}while(++R<A);return A}function p(E,R,A){for(;R>A;){const j=E.charCodeAt(--R);if(j!==32&&j!==9)return R+1}return A}function m(E,R,A){const j=(A==null?void 0:A.encode)||encodeURIComponent;if(!n.test(E))throw new TypeError(`argument name is invalid: ${E}`);const D=j(R);if(!e.test(D))throw new TypeError(`argument val is invalid: ${R}`);let M=E+"="+D;if(!A)return M;if(A.maxAge!==void 0){if(!Number.isInteger(A.maxAge))throw new TypeError(`option maxAge is invalid: ${A.maxAge}`);M+="; Max-Age="+A.maxAge}if(A.domain){if(!t.test(A.domain))throw new TypeError(`option domain is invalid: ${A.domain}`);M+="; Domain="+A.domain}if(A.path){if(!s.test(A.path))throw new TypeError(`option path is invalid: ${A.path}`);M+="; Path="+A.path}if(A.expires){if(!T(A.expires)||!Number.isFinite(A.expires.valueOf()))throw new TypeError(`option expires is invalid: ${A.expires}`);M+="; Expires="+A.expires.toUTCString()}if(A.httpOnly&&(M+="; HttpOnly"),A.secure&&(M+="; Secure"),A.partitioned&&(M+="; Partitioned"),A.priority)switch(typeof A.priority=="string"?A.priority.toLowerCase():void 0){case"low":M+="; Priority=Low";break;case"medium":M+="; Priority=Medium";break;case"high":M+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${A.priority}`)}if(A.sameSite)switch(typeof A.sameSite=="string"?A.sameSite.toLowerCase():A.sameSite){case!0:case"strict":M+="; SameSite=Strict";break;case"lax":M+="; SameSite=Lax";break;case"none":M+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${A.sameSite}`)}return M}function v(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function T(E){return a.call(E)==="[object Date]"}return uc}Px();var GS="popstate";function Mx(n={}){function e(a,l){let{pathname:c="/",search:d="",hash:p=""}=yo(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),t_("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=a.location.href,m=p.indexOf("#");d=m===-1?p:p.slice(0,m)}return d+"#"+(typeof l=="string"?l:Hc(l))}function s(a,l){Gs(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return Ux(e,t,s,n)}function At(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Gs(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Lx(){return Math.random().toString(36).substring(2,10)}function WS(n,e){return{usr:n.state,key:n.key,idx:e}}function t_(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?yo(e):e,state:t,key:e&&e.key||s||Lx()}}function Hc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function yo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function Ux(n,e,t,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,c=a.history,d="POP",p=null,m=v();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function v(){return(c.state||{idx:null}).idx}function T(){d="POP";let D=v(),M=D==null?null:D-m;m=D,p&&p({action:d,location:j.location,delta:M})}function E(D,M){d="PUSH";let z=t_(j.location,D,M);t&&t(z,D),m=v()+1;let q=WS(z,m),ne=j.createHref(z);try{c.pushState(q,"",ne)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;a.location.assign(ne)}l&&p&&p({action:d,location:j.location,delta:1})}function R(D,M){d="REPLACE";let z=t_(j.location,D,M);t&&t(z,D),m=v();let q=WS(z,m),ne=j.createHref(z);c.replaceState(q,"",ne),l&&p&&p({action:d,location:j.location,delta:0})}function A(D){return Vx(D)}let j={get action(){return d},get location(){return n(a,c)},listen(D){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(GS,T),p=D,()=>{a.removeEventListener(GS,T),p=null}},createHref(D){return e(a,D)},createURL:A,encodeLocation(D){let M=A(D);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:E,replace:R,go(D){return c.go(D)}};return j}function Vx(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),At(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Hc(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function pw(n,e,t="/"){return jx(n,e,t,!1)}function jx(n,e,t,s){let a=typeof e=="string"?yo(e):e,l=rr(a.pathname||"/",t);if(l==null)return null;let c=mw(n);Bx(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let m=Xx(l);d=Yx(c[p],m,s)}return d}function mw(n,e=[],t=[],s=""){let a=(l,c,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(At(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let m=nr([s,p.relativePath]),v=t.concat(p);l.children&&l.children.length>0&&(At(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),mw(l.children,e,v,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:$x(m,l.index),routesMeta:v})};return n.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,c);else for(let p of gw(l.path))a(l,c,p)}),e}function gw(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let c=gw(s.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function Bx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Kx(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var Fx=/^:[\w-]+$/,zx=3,Hx=2,qx=1,Gx=10,Wx=-2,$S=n=>n==="*";function $x(n,e){let t=n.split("/"),s=t.length;return t.some($S)&&(s+=Wx),e&&(s+=Hx),t.filter(a=>!$S(a)).reduce((a,l)=>a+(Fx.test(l)?zx:l===""?qx:Gx),s)}function Kx(n,e){return n.length===e.length&&n.slice(0,-1).every((s,a)=>s===e[a])?n[n.length-1]-e[e.length-1]:0}function Yx(n,e,t=!1){let{routesMeta:s}=n,a={},l="/",c=[];for(let d=0;d<s.length;++d){let p=s[d],m=d===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",T=gd({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},v),E=p.route;if(!T&&m&&t&&!s[s.length-1].route.index&&(T=gd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:nr([l,T.pathname]),pathnameBase:tN(nr([l,T.pathnameBase])),route:E}),T.pathnameBase!=="/"&&(l=nr([l,T.pathnameBase]))}return c}function gd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=Qx(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((m,{paramName:v,isOptional:T},E)=>{if(v==="*"){let A=d[E]||"";c=l.slice(0,l.length-A.length).replace(/(.)\/+$/,"$1")}const R=d[E];return T&&!R?m[v]=void 0:m[v]=(R||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:n}}function Qx(n,e=!1,t=!0){Gs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(s.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function Xx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function rr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function Zx(n,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof n=="string"?yo(n):n;return{pathname:t?t.startsWith("/")?t:Jx(t,e):e,search:nN(s),hash:sN(a)}}function Jx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function kg(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function eN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function _w(n){let e=eN(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function yw(n,e,t,s=!1){let a;typeof n=="string"?a=yo(n):(a={...n},At(!a.pathname||!a.pathname.includes("?"),kg("?","pathname","search",a)),At(!a.pathname||!a.pathname.includes("#"),kg("#","pathname","hash",a)),At(!a.search||!a.search.includes("#"),kg("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!s&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),T-=1;a.pathname=E.join("/")}d=T>=0?e[T]:"/"}let p=Zx(a,d),m=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||v)&&(p.pathname+="/"),p}var nr=n=>n.join("/").replace(/\/\/+/g,"/"),tN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),nN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,sN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function iN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var vw=["POST","PUT","PATCH","DELETE"];new Set(vw);var rN=["GET",...vw];new Set(rN);var Hl=x.createContext(null);Hl.displayName="DataRouter";var Kd=x.createContext(null);Kd.displayName="DataRouterState";var Tw=x.createContext({isTransitioning:!1});Tw.displayName="ViewTransition";var aN=x.createContext(new Map);aN.displayName="Fetchers";var oN=x.createContext(null);oN.displayName="Await";var Ei=x.createContext(null);Ei.displayName="Navigation";var nh=x.createContext(null);nh.displayName="Location";var hr=x.createContext({outlet:null,matches:[],isDataRoute:!1});hr.displayName="Route";var W_=x.createContext(null);W_.displayName="RouteError";function lN(n,{relative:e}={}){At(sh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=x.useContext(Ei),{hash:a,pathname:l,search:c}=ih(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:nr([t,l])),s.createHref({pathname:d,search:c,hash:a})}function sh(){return x.useContext(nh)!=null}function vo(){return At(sh(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(nh).location}var Ew="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sw(n){x.useContext(Ei).static||x.useLayoutEffect(n)}function ql(){let{isDataRoute:n}=x.useContext(hr);return n?EN():uN()}function uN(){At(sh(),"useNavigate() may be used only in the context of a <Router> component.");let n=x.useContext(Hl),{basename:e,navigator:t}=x.useContext(Ei),{matches:s}=x.useContext(hr),{pathname:a}=vo(),l=JSON.stringify(_w(s)),c=x.useRef(!1);return Sw(()=>{c.current=!0}),x.useCallback((p,m={})=>{if(Gs(c.current,Ew),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=yw(p,JSON.parse(l),a,m.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:nr([e,v.pathname])),(m.replace?t.replace:t.push)(v,m.state,m)},[e,t,l,a,n])}x.createContext(null);function ih(n,{relative:e}={}){let{matches:t}=x.useContext(hr),{pathname:s}=vo(),a=JSON.stringify(_w(t));return x.useMemo(()=>yw(n,JSON.parse(a),s,e==="path"),[n,a,s,e])}function cN(n,e){return bw(n,e)}function bw(n,e,t,s){var M;At(sh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=x.useContext(Ei),{matches:l}=x.useContext(hr),c=l[l.length-1],d=c?c.params:{},p=c?c.pathname:"/",m=c?c.pathnameBase:"/",v=c&&c.route;{let z=v&&v.path||"";ww(p,!v||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let T=vo(),E;if(e){let z=typeof e=="string"?yo(e):e;At(m==="/"||((M=z.pathname)==null?void 0:M.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${z.pathname}" was given in the \`location\` prop.`),E=z}else E=T;let R=E.pathname||"/",A=R;if(m!=="/"){let z=m.replace(/^\//,"").split("/");A="/"+R.replace(/^\//,"").split("/").slice(z.length).join("/")}let j=pw(n,{pathname:A});Gs(v||j!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Gs(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=mN(j&&j.map(z=>Object.assign({},z,{params:Object.assign({},d,z.params),pathname:nr([m,a.encodeLocation?a.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?m:nr([m,a.encodeLocation?a.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),l,t,s);return e&&D?x.createElement(nh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},D):D}function hN(){let n=TN(),e=iN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:l},"ErrorBoundary")," or"," ",x.createElement("code",{style:l},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),t?x.createElement("pre",{style:a},t):null,c)}var fN=x.createElement(hN,null),dN=class extends x.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?x.createElement(hr.Provider,{value:this.props.routeContext},x.createElement(W_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function pN({routeContext:n,match:e,children:t}){let s=x.useContext(Hl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(hr.Provider,{value:n},t)}function mN(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let p=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);At(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(t)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:v,errors:T}=t,E=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!T||T[m.route.id]===void 0);if(m.route.lazy||E){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,m,v)=>{let T,E=!1,R=null,A=null;t&&(T=l&&m.route.id?l[m.route.id]:void 0,R=m.route.errorElement||fN,c&&(d<0&&v===0?(ww("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,A=null):d===v&&(E=!0,A=m.route.hydrateFallbackElement||null)));let j=e.concat(a.slice(0,v+1)),D=()=>{let M;return T?M=R:E?M=A:m.route.Component?M=x.createElement(m.route.Component,null):m.route.element?M=m.route.element:M=p,x.createElement(pN,{match:m,routeContext:{outlet:p,matches:j,isDataRoute:t!=null},children:M})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?x.createElement(dN,{location:t.location,revalidation:t.revalidation,component:R,error:T,children:D(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):D()},null)}function $_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gN(n){let e=x.useContext(Hl);return At(e,$_(n)),e}function _N(n){let e=x.useContext(Kd);return At(e,$_(n)),e}function yN(n){let e=x.useContext(hr);return At(e,$_(n)),e}function K_(n){let e=yN(n),t=e.matches[e.matches.length-1];return At(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function vN(){return K_("useRouteId")}function TN(){var s;let n=x.useContext(W_),e=_N("useRouteError"),t=K_("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function EN(){let{router:n}=gN("useNavigate"),e=K_("useNavigate"),t=x.useRef(!1);return Sw(()=>{t.current=!0}),x.useCallback(async(a,l={})=>{Gs(t.current,Ew),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var KS={};function ww(n,e,t){!e&&!KS[n]&&(KS[n]=!0,Gs(!1,t))}x.memo(SN);function SN({routes:n,future:e,state:t}){return bw(n,void 0,t,e)}function Cw(n){At(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bN({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:l=!1}){At(!sh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=yo(t));let{pathname:p="/",search:m="",hash:v="",state:T=null,key:E="default"}=t,R=x.useMemo(()=>{let A=rr(p,c);return A==null?null:{location:{pathname:A,search:m,hash:v,state:T,key:E},navigationType:s}},[c,p,m,v,T,E,s]);return Gs(R!=null,`<Router basename="${c}"> is not able to match the URL "${p}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:x.createElement(Ei.Provider,{value:d},x.createElement(nh.Provider,{children:e,value:R}))}function wN({children:n,location:e}){return cN(n_(n),e)}function n_(n,e=[]){let t=[];return x.Children.forEach(n,(s,a)=>{if(!x.isValidElement(s))return;let l=[...e,a];if(s.type===x.Fragment){t.push.apply(t,n_(s.props.children,l));return}At(s.type===Cw,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),At(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=n_(s.props.children,l)),t.push(c)}),t}var id="get",rd="application/x-www-form-urlencoded";function Yd(n){return n!=null&&typeof n.tagName=="string"}function CN(n){return Yd(n)&&n.tagName.toLowerCase()==="button"}function AN(n){return Yd(n)&&n.tagName.toLowerCase()==="form"}function RN(n){return Yd(n)&&n.tagName.toLowerCase()==="input"}function IN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function xN(n,e){return n.button===0&&(!e||e==="_self")&&!IN(n)}var qf=null;function NN(){if(qf===null)try{new FormData(document.createElement("form"),0),qf=!1}catch{qf=!0}return qf}var kN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Og(n){return n!=null&&!kN.has(n)?(Gs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rd}"`),null):n}function ON(n,e){let t,s,a,l,c;if(AN(n)){let d=n.getAttribute("action");s=d?rr(d,e):null,t=n.getAttribute("method")||id,a=Og(n.getAttribute("enctype"))||rd,l=new FormData(n)}else if(CN(n)||RN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(s=p?rr(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||id,a=Og(n.getAttribute("formenctype"))||Og(d.getAttribute("enctype"))||rd,l=new FormData(d,n),!NN()){let{name:m,type:v,value:T}=n;if(v==="image"){let E=m?`${m}.`:"";l.append(`${E}x`,"0"),l.append(`${E}y`,"0")}else m&&l.append(m,T)}}else{if(Yd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=id,s=null,a=rd,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:l,body:c}}function Y_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function DN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function PN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function MN(n,e,t){let s=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await DN(l,t);return c.links?c.links():[]}return[]}));return jN(s.flat(1).filter(PN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function YS(n,e,t,s,a,l){let c=(p,m)=>t[m]?p.route.id!==t[m].route.id:!0,d=(p,m)=>{var v;return t[m].pathname!==p.pathname||((v=t[m].route.path)==null?void 0:v.endsWith("*"))&&t[m].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,m)=>c(p,m)||d(p,m)):l==="data"?e.filter((p,m)=>{var T;let v=s.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,m)||d(p,m))return!0;if(p.route.shouldRevalidate){let E=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function LN(n,e,{includeHydrateFallback:t}={}){return UN(n.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function UN(n){return[...new Set(n)]}function VN(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function jN(n,e){let t=new Set;return new Set(e),n.reduce((s,a)=>{let l=JSON.stringify(VN(a));return t.has(l)||(t.add(l),s.push({key:l,link:a})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var BN=new Set([100,101,204,205]);function FN(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&rr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Aw(){let n=x.useContext(Hl);return Y_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function zN(){let n=x.useContext(Kd);return Y_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Q_=x.createContext(void 0);Q_.displayName="FrameworkContext";function Rw(){let n=x.useContext(Q_);return Y_(n,"You must render this element inside a <HydratedRouter> element"),n}function HN(n,e){let t=x.useContext(Q_),[s,a]=x.useState(!1),[l,c]=x.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:m,onMouseLeave:v,onTouchStart:T}=e,E=x.useRef(null);x.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let j=M=>{M.forEach(z=>{c(z.isIntersecting)})},D=new IntersectionObserver(j,{threshold:.5});return E.current&&D.observe(E.current),()=>{D.disconnect()}}},[n]),x.useEffect(()=>{if(s){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[s]);let R=()=>{a(!0)},A=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,E,{}]:[l,E,{onFocus:cc(d,R),onBlur:cc(p,A),onMouseEnter:cc(m,R),onMouseLeave:cc(v,A),onTouchStart:cc(T,R)}]:[!1,E,{}]}function cc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function qN({page:n,...e}){let{router:t}=Aw(),s=x.useMemo(()=>pw(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?x.createElement(WN,{page:n,matches:s,...e}):null}function GN(n){let{manifest:e,routeModules:t}=Rw(),[s,a]=x.useState([]);return x.useEffect(()=>{let l=!1;return MN(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),s}function WN({page:n,matches:e,...t}){let s=vo(),{manifest:a,routeModules:l}=Rw(),{basename:c}=Aw(),{loaderData:d,matches:p}=zN(),m=x.useMemo(()=>YS(n,e,p,a,s,"data"),[n,e,p,a,s]),v=x.useMemo(()=>YS(n,e,p,a,s,"assets"),[n,e,p,a,s]),T=x.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let A=new Set,j=!1;if(e.forEach(M=>{var q;let z=a.routes[M.route.id];!z||!z.hasLoader||(!m.some(ne=>ne.route.id===M.route.id)&&M.route.id in d&&((q=l[M.route.id])!=null&&q.shouldRevalidate)||z.hasClientLoader?j=!0:A.add(M.route.id))}),A.size===0)return[];let D=FN(n,c);return j&&A.size>0&&D.searchParams.set("_routes",e.filter(M=>A.has(M.route.id)).map(M=>M.route.id).join(",")),[D.pathname+D.search]},[c,d,s,a,m,e,n,l]),E=x.useMemo(()=>LN(v,a),[v,a]),R=GN(v);return x.createElement(x.Fragment,null,T.map(A=>x.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),E.map(A=>x.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),R.map(({key:A,link:j})=>x.createElement("link",{key:A,...j})))}function $N(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Iw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Iw&&(window.__reactRouterVersion="7.6.1")}catch{}function KN({basename:n,children:e,window:t}){let s=x.useRef();s.current==null&&(s.current=Mx({window:t,v5Compat:!0}));let a=s.current,[l,c]=x.useState({action:a.action,location:a.location}),d=x.useCallback(p=>{x.startTransition(()=>c(p))},[c]);return x.useLayoutEffect(()=>a.listen(d),[a,d]),x.createElement(bN,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var xw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,os=x.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:m,preventScrollReset:v,viewTransition:T,...E},R){let{basename:A}=x.useContext(Ei),j=typeof m=="string"&&xw.test(m),D,M=!1;if(typeof m=="string"&&j&&(D=m,Iw))try{let N=new URL(window.location.href),V=m.startsWith("//")?new URL(N.protocol+m):new URL(m),L=rr(V.pathname,A);V.origin===N.origin&&L!=null?m=L+V.search+V.hash:M=!0}catch{Gs(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=lN(m,{relative:a}),[q,ne,ue]=HN(s,E),ee=ZN(m,{replace:c,state:d,target:p,preventScrollReset:v,relative:a,viewTransition:T});function O(N){e&&e(N),N.defaultPrevented||ee(N)}let I=x.createElement("a",{...E,...ue,href:D||z,onClick:M||l?e:O,ref:$N(R,ne),target:p,"data-discover":!j&&t==="render"?"true":void 0});return q&&!j?x.createElement(x.Fragment,null,I,x.createElement(qN,{page:z})):I});os.displayName="Link";var YN=x.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...m},v){let T=ih(c,{relative:m.relative}),E=vo(),R=x.useContext(Kd),{navigator:A,basename:j}=x.useContext(Ei),D=R!=null&&sk(T)&&d===!0,M=A.encodeLocation?A.encodeLocation(T).pathname:T.pathname,z=E.pathname,q=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(z=z.toLowerCase(),q=q?q.toLowerCase():null,M=M.toLowerCase()),q&&j&&(q=rr(q,j)||q);const ne=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let ue=z===M||!a&&z.startsWith(M)&&z.charAt(ne)==="/",ee=q!=null&&(q===M||!a&&q.startsWith(M)&&q.charAt(M.length)==="/"),O={isActive:ue,isPending:ee,isTransitioning:D},I=ue?e:void 0,N;typeof s=="function"?N=s(O):N=[s,ue?"active":null,ee?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(O):l;return x.createElement(os,{...m,"aria-current":I,className:N,ref:v,style:V,to:c,viewTransition:d},typeof p=="function"?p(O):p)});YN.displayName="NavLink";var QN=x.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:l,method:c=id,action:d,onSubmit:p,relative:m,preventScrollReset:v,viewTransition:T,...E},R)=>{let A=tk(),j=nk(d,{relative:m}),D=c.toLowerCase()==="get"?"get":"post",M=typeof d=="string"&&xw.test(d),z=q=>{if(p&&p(q),q.defaultPrevented)return;q.preventDefault();let ne=q.nativeEvent.submitter,ue=(ne==null?void 0:ne.getAttribute("formmethod"))||c;A(ne||q.currentTarget,{fetcherKey:e,method:ue,navigate:t,replace:a,state:l,relative:m,preventScrollReset:v,viewTransition:T})};return x.createElement("form",{ref:R,method:D,action:j,onSubmit:s?p:z,...E,"data-discover":!M&&n==="render"?"true":void 0})});QN.displayName="Form";function XN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nw(n){let e=x.useContext(Hl);return At(e,XN(n)),e}function ZN(n,{target:e,replace:t,state:s,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=ql(),p=vo(),m=ih(n,{relative:l});return x.useCallback(v=>{if(xN(v,e)){v.preventDefault();let T=t!==void 0?t:Hc(p)===Hc(m);d(n,{replace:T,state:s,preventScrollReset:a,relative:l,viewTransition:c})}},[p,d,m,t,s,e,n,a,l,c])}var JN=0,ek=()=>`__${String(++JN)}__`;function tk(){let{router:n}=Nw("useSubmit"),{basename:e}=x.useContext(Ei),t=vN();return x.useCallback(async(s,a={})=>{let{action:l,method:c,encType:d,formData:p,body:m}=ON(s,e);if(a.navigate===!1){let v=a.fetcherKey||ek();await n.fetch(v,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function nk(n,{relative:e}={}){let{basename:t}=x.useContext(Ei),s=x.useContext(hr);At(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...ih(n||".",{relative:e})},c=vo();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(T=>T).forEach(T=>d.append("index",T));let v=d.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:nr([t,l.pathname])),Hc(l)}function sk(n,e={}){let t=x.useContext(Tw);At(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Nw("useViewTransitionState"),a=ih(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=rr(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=rr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return gd(a.pathname,c)!=null||gd(a.pathname,l)!=null}[...BN];const _e=({className:n,content:e,func:t,submit:s,icon:a,change:l,element:c})=>y.jsxs("button",{className:`${n}`,onSubmit:d=>{s(d)},onClick:()=>{t()},children:[a,e,c]}),ik=()=>{const n=ql(),{pages:e,setPages:t,user:s,setPrevPage:a,setHideSideBar:l,hideSideBar:c,setIsSigningOut:d,changes:p,setSaveChanges:m,prevPage:v}=x.useContext(Fn);function T(E,R){p&&e[1].ind?m(!0):(n(R),t(A=>A.map((j,D)=>D==E?{...j,ind:!0}:{...j,ind:!1})))}return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Ze.navBarWrapper,children:[y.jsxs("div",{className:Ze.left,children:[y.jsx("img",{src:"./web-icon.png"}),y.jsx("h1",{className:Ze.title,children:"Acad"})]}),y.jsx("div",{className:Ze.mid,children:y.jsx("ul",{children:e==null?void 0:e.map((E,R)=>y.jsxs("li",{className:E.ind?`${Ze.ind} ${Ze.Links}`:`${Ze.notInd} ${Ze.Links}`,onClick:()=>{T(R,E.path),a(E.path)},children:[y.jsxs("span",{className:Ze.content,children:[E.icon,E.name]}),y.jsx("span",{className:Ze.indicator})]},E.name))})}),s!=null&&s.uid?y.jsxs("div",{className:Ze.right,children:[y.jsx(os,{to:"/AcadComponent/Dashboard",className:Ze.Links,children:y.jsx("button",{className:Ze.authButts,children:"Account"})}),y.jsx("button",{className:`${Ze.authButts} ${Ze.signOut}`,onClick:()=>{d(!0)},children:"Log Out"}),y.jsx("button",{className:Ze.HamburgerButt,onClick:()=>{l(!1)},children:y.jsx("i",{className:"fa fa-list-ul"})})]}):y.jsxs("div",{className:Ze.right,children:[y.jsx(os,{to:"/AcadComponent/SignIn",className:Ze.Links,children:y.jsx("button",{className:Ze.authButts,children:"Sign In"})}),y.jsx(os,{to:"/AcadComponent/SignUp",className:Ze.Links,children:y.jsx("button",{className:`${Ze.authButts} ${Ze.signUp}`,children:"Sign Up"})}),y.jsx("button",{className:Ze.HamburgerButt,onClick:()=>{l(!1)},children:y.jsx("i",{className:"fa fa-list-ul"})})]})]}),y.jsx("div",{className:c==!1?Ze.sidebar:Ze.hideSideBar,children:y.jsxs("ul",{className:c==!1?Ze.NavLinks:Ze.hideNavLinks,children:[y.jsx(_e,{className:Ze.HamburgerButt,func:()=>{l(!c)},content:y.jsx("i",{className:"fa fa-list-ul"})}),e.map((E,R)=>y.jsxs("li",{to:E.path,onClick:()=>{T(R,E.path),a(E.path)},className:E.ind?`${Ze.Links} ${Ze.indicated}`:`${Ze.Links} ${Ze.notIndicated}`,children:[E.icon,y.jsxs("span",{children:[E.name,y.jsx("span",{className:Ze.indication})]})]},E.path))]})})]})},rk="_homeWrapper_7j659_15",ak="_left_7j659_31",ok="_wrapTop_7j659_49",lk="_Links_7j659_97",uk="_wrapBottom_7j659_129",ck="_orange_7j659_159",hk="_purple_7j659_165",fk="_blue_7j659_171",dk="_right_7j659_181",Yi={homeWrapper:rk,left:ak,wrapTop:ok,Links:lk,wrapBottom:uk,orange:ck,purple:hk,blue:fk,right:dk},QS={},kw=()=>{const{pagination:n,setPages:e}=x.useContext(Fn);return x.useEffect(()=>{e(t=>t.map(s=>s.name==="Home"?{...s,ind:!0}:{...s}))},[]),y.jsx(y.Fragment,{children:y.jsxs("div",{className:Yi.homeWrapper,children:[y.jsxs("div",{className:`${Yi.left} ${QS.animateLeft}`,children:[y.jsxs("div",{className:Yi.wrapTop,children:[y.jsx("h1",{children:"Welcome User!"}),y.jsx("p",{children:"Write, read and document your work and studies using the Acad Web App for free!"}),y.jsx(os,{to:"/AcadComponent/Tasks",className:Yi.Links,children:y.jsx(_e,{content:"Get Started",func:()=>{n(1)}})})]}),y.jsxs("div",{className:Yi.wrapBottom,children:[y.jsx(_e,{className:Yi.orange}),y.jsx(_e,{className:Yi.purple}),y.jsx(_e,{className:Yi.blue})]})]}),y.jsx("div",{className:Yi.right,children:y.jsx("img",{src:"./Home/Working.png",className:QS.animateImg})})]})})},pk="_bottomOptionsWrapper_9abog_1",mk="_left_9abog_71",gk="_uncheck_9abog_71",_k="_right_9abog_89",yk="_fullContent_9abog_143",ws={bottomOptionsWrapper:pk,left:mk,uncheck:gk,right:_k,fullContent:yk},vk=()=>{const{handleSelectedTasks:n,selectedTasks:e,unselectAll:t,tasks:s,searching:a,setTasks:l,filteredTasks:c,setFilteredTasks:d,handleMarking:p,selecting:m,setSelecting:v,tasksOnType:T,setTasksOnType:E}=x.useContext(Os),R=()=>{let D=T,M=c,z=[],q=[];if(a){M=M.map(ne=>({...ne,isChecked:!0}));for(let ne=0;ne<M.length;ne++)M[ne].isChecked&&q.push({id:M[ne].id,index:ne});n([...q])}else{D=D.map(ne=>({...ne,isChecked:!0}));for(let ne=0;ne<D.length;ne++)D[ne].isChecked&&z.push({id:D[ne].id,index:ne});n([...z])}a?d([...M]):E(ne=>ne.map(ue=>({...ue,isChecked:!0})))};function A(){let D=s,M=c;for(let z in M)for(let q in e)M[z].id===e[q].id&&M.splice(z,1);for(let z in s)for(let q in e)D[z].id===e[q].id&&D.splice(z,1);p(M,[...D]),n(null)}const j=()=>{if(m==!0)return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:ws.left,children:[y.jsx(_e,{element:y.jsx("span",{className:ws.fullContent,children:"Select All"}),icon:y.jsx("i",{className:"fa fa-check"}),className:ws.SelectAllButton,func:()=>{R()}}),y.jsx(_e,{element:y.jsx("span",{className:ws.fullContent,children:"Unselect"}),icon:y.jsx("i",{className:`fas fa fa-check ${ws.uncheck}`}),className:ws.UnselectAllButton,func:()=>{t()}})]}),y.jsxs("div",{className:ws.right,children:[y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-trash"}),element:y.jsx("span",{className:ws.fullContent,children:"Delete"}),func:()=>{e?A():console.log("No update")}}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),element:y.jsx("span",{className:ws.fullContent,children:"Cancel"}),func:()=>{v(!1),t()}})]})]})};return y.jsx(y.Fragment,{children:y.jsx("div",{className:ws.bottomOptionsWrapper,children:m?y.jsx(j,{}):y.jsx(_e,{element:y.jsx("span",{className:ws.fullContent,children:"Select"}),icon:y.jsx("i",{className:"fa fa-hand-o-up"}),className:ws.SelectButton,func:()=>v(!0)})})})},Tk="_editTaskPrompt_1qqsx_1",Ek="_hideEditTaskPrompt_1qqsx_19",Sk="_nav_1qqsx_57",bk="_content_1qqsx_127",wk="_submitButton_1qqsx_173",hc={editTaskPrompt:Tk,hideEditTaskPrompt:Ek,nav:Sk,content:bk,submitButton:wk},Ck=()=>{const{openedTask:n,setOpenedTask:e,tasks:t,filteredTasks:s,setEditing:a,editing:l,handleMarking:c}=x.useContext(Os),d=x.useRef(null);function p(){let m=[...t],v=s;for(let T in m)m[T].id===n.id&&(m[T].task=d.current.innerText);for(let T in v)v[T].id===n.id&&(v[T].task=d.current.innerText);c(v,[...m])}if((n==null?void 0:n.id)!=null)return y.jsxs("div",{className:l?hc.editTaskPrompt:hc.hideEditTaskPrompt,children:[y.jsxs("div",{className:hc.nav,children:[y.jsxs("h3",{children:[y.jsx("i",{className:"fa fa-edit"})," ",y.jsx("span",{children:"Edit Task"})]}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-times"}),func:()=>{e({index:null,isOpened:!1}),a(!1)}})]}),y.jsx("div",{className:hc.content,children:y.jsx("p",{ref:d,contentEditable:l,children:t.map((m,v)=>{if(m.id===n.id)return m.task})})}),y.jsx(_e,{content:"Save Changes",className:hc.submitButton,func:()=>{p(),a(!1)}})]})},Ak="_sortTypeBar_1i2uf_1",Rk="_hideSortTypeBar_1i2uf_1",Ik="_sortTypeBarBox_1i2uf_27",xk="_notIndicated_1i2uf_63",Nk="_indicated_1i2uf_73",fc={sortTypeBar:Ak,hideSortTypeBar:Rk,sortTypeBarBox:Ik,notIndicated:xk,indicated:Nk},kk=()=>{const{sortingTypeBar:n,setSortingTypeBar:e,sortingTypes:t,setSortingTypes:s,unselectAll:a,setType:l,type:c,setTasksOnType:d,tasks:p}=x.useContext(Os);return x.useEffect(()=>{s(v=>v.map(T=>c==T.type?{...T,ind:!0}:{...T,ind:!1})),console.log(c);let m=[];if(c=="Pending"||c=="Finished"){for(let v in p)p[v].type.toLowerCase()==c.toLowerCase()&&m.push(p[v]);d([...m])}else d([...p])},[c,p]),y.jsx(y.Fragment,{children:y.jsx("div",{className:n?fc.sortTypeBar:fc.hideSortTypeBar,onClick:()=>{e(!1)},children:y.jsx("ul",{className:fc.sortTypeBarBox,children:t==null?void 0:t.map((m,v)=>y.jsx("li",{className:m.ind?fc.indicated:fc.notIndicated,onClick:()=>{a(),l(m.type),s(T=>T.map(E=>T[v].type==E.type?{...E,ind:!0}:{...E,ind:!1}))},children:m.type},m.type))})})})},Ok="_sortTaskPrompt_1n6vz_17",Dk="_hideSortTaskPrompt_1n6vz_19",Pk="_sortBox_1n6vz_51",Mk="_Hide_Sort_Box_Button_1n6vz_75",Lk="_sortOptions_1n6vz_105",Uk="_checked_1n6vz_151",Vk="_unchecked_1n6vz_151",zr={sortTaskPrompt:Ok,hideSortTaskPrompt:Dk,sortBox:Pk,Hide_Sort_Box_Button:Mk,sortOptions:Lk,checked:Uk,unchecked:Vk},jk=()=>{const{setSortTaskPrompt:n,sortTaskPrompt:e,sortingTypes:t,setSortingTypes:s,setSorting:a,sortOptions:l,setSortOptions:c}=x.useContext(Os);function d(p){let m=l;m=m.map((v,T)=>m[T]===m[p]?{...v,state:!v.state}:{...v,state:!1});for(let v in m){if(m[v].state==!0){a(!0);break}v==m.length-1&&!m[v].state&&a(!1)}console.log(m),c([...m])}return y.jsx("div",{className:e?zr.sortTaskPrompt:zr.hideSortTaskPrompt,children:y.jsxs("div",{className:e?zr.sortBox:zr.Hide_Sort_Box,children:[y.jsx("h2",{children:"Sort Settings"}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),className:zr.Hide_Sort_Box_Button,func:()=>{n(!1)}}),y.jsx("div",{className:zr.sortOptions,children:l==null?void 0:l.map((p,m)=>y.jsx(_e,{icon:y.jsx("i",{className:`fa fa-check-square ${p.state==!0?zr.checked:zr.unchecked}`}),content:p.description,func:()=>{d(m)}},p.description))})]})})},Bk="_tasksContainer_gj5si_1",Fk="_tasks_gj5si_1",zk="_Finished_gj5si_73",Hk="_unchecked_gj5si_115",qk="_checked_gj5si_123",Gk="_col_gj5si_131",Wk="_br_gj5si_139",$k="_fs_gj5si_147",Kk="_bgC_gj5si_155",Yk="_fW_gj5si_163",Vn={tasksContainer:Bk,tasks:Fk,Finished:zk,unchecked:Hk,checked:qk,col:Gk,br:Wk,fs:$k,bgC:Kk,fW:Yk},Cs=({task:n,i:e})=>{const{selecting:t,searching:s,tasks:a,setTasks:l,setFilteredTasks:c,handleSelectedTasks:d}=x.useContext(X_),{setOpenedTask:p,setEditing:m}=x.useContext(Os);function v(T){let E=[],R=a;R=R.map(A=>A.id===T?{...A,isChecked:!A.isChecked}:{...A});for(let A=0;A<R.length;A++)R[A].isChecked&&E.push({id:R[A].id,index:A}),A==R.length-1&&(d(E),console.log(E));l(A=>A.map(j=>j.id===T?{...j,isChecked:!j.isChecked}:{...j})),s&&c(A=>A.map(j=>j.id===T?{...j,isChecked:!j.isChecked}:{...j}))}return y.jsxs("label",{htmlFor:"task"+n.id,style:n.style!="default"?{...n.style}:null,className:n.type=="pending"?`${Vn.Pending} ${n.cName.map(T=>JSON.parse(T)).join(" ")} ${Vn.tasks}`:`${Vn.Finished} ${n.cName.map(T=>JSON.parse(T)).join(" ")} ${Vn.tasks}`,onDoubleClick:()=>{m(!0),p({id:n.id,isOpened:!0})},children:[y.jsx("i",{style:t==!1?{display:"none"}:{display:"block"},className:`fa fa-check-square ${n.isChecked===!0?Vn.checked:Vn.unchecked}`}),y.jsx("input",{style:{display:"none"},type:"checkbox",id:"task"+n.id,onChange:()=>{t&&v(n.id)}}),y.jsx("span",{children:n.task})]},n.id)},Qk=()=>{const{tasks:n,sortOptions:e,searching:t,filteredTasks:s,tasksOnType:a,setTasksOnType:l}=x.useContext(Os),{sorting:c,type:d,selecting:p}=x.useContext(X_),[m,v]=x.useState([]);if(x.useEffect(()=>{let T=t?s:a;for(let E in e)E==0&&e[E].state==!0?T=T.sort((R,A)=>A.dateCreated.time-R.dateCreated.time):E==1&&e[E].state==!0?T=T.sort((R,A)=>R.dateCreated.time-A.dateCreated.time):E==2&&e[E].state==!0?T=T.sort((R,A)=>R.task.localeCompare(A.task)):E==3&&e[E].state==!0&&(T=T.sort((R,A)=>A.task.localeCompare(R.task)));v([...T])},[e,a,s]),t&&c)return y.jsx("div",{className:Vn.tasksContainer,children:m.map((T,E)=>{if(T.type==="pending"&&d==="Pending")return y.jsx(Cs,{task:T,i:E,selecting:p,chechTask:()=>checkTask()},T.id);if(T.type==="finished"&&d==="Finished")return y.jsx(Cs,{task:T,i:E,selecting:p,chechTask:()=>checkTask()},T.id);if(d==="All Tasks")return y.jsx(Cs,{task:T,i:E,selecting:p,chechTask:()=>checkTask()},T.id)})},"Task_Container");if(t&&!c)return y.jsx("div",{className:Vn.tasksContainer,children:s.map((T,E)=>{if(T.type==="pending"&&d==="Pending")return y.jsx(Cs,{task:T,i:E,selecting:p,chechTask:()=>checkTask()},T.id);if(T.type==="finished"&&d==="Finished")return y.jsx(Cs,{task:T,i:E,selecting:p,chechTask:()=>checkTask()},T.id);if(d==="All Tasks")return y.jsx(Cs,{task:T,i:E,selecting:p,chechTask:()=>checkTask()},T.id)})},"Task_Container");if(c&&!t)return y.jsx("div",{className:Vn.tasksContainer,children:m.map((T,E)=>{if(T.type==="pending"&&d==="Pending")return y.jsx(Cs,{task:T,i:E,selecting:p,chechTask:()=>checkTask()},T.id);if(T.type==="finished"&&d==="Finished")return y.jsx(Cs,{task:T,i:E,selecting:p,chechTask:()=>checkTask()},T.id);if(d==="All Tasks")return y.jsx(Cs,{task:T,i:E,selecting:p,chechTask:()=>checkTask()},T.id)})});if(!c&&!t)return y.jsx("div",{className:Vn.tasksContainer,children:a==null?void 0:a.map((T,E)=>{if(T.type==="pending"&&d==="Pending")return y.jsx(Cs,{task:T,i:E,selecting:p,chechTask:()=>checkTask()},T.id);if(T.type==="finished"&&d==="Finished")return y.jsx(Cs,{task:T,i:E,selecting:p,chechTask:()=>checkTask()},T.id);if(d==="All Tasks")return y.jsx(Cs,{task:T,i:E,selecting:p,chechTask:()=>checkTask()},T.id)})})},X_=x.createContext(),Xk=()=>{const{searching:n,setSearching:e,tasks:t,setTasks:s,filteredTasks:a,setFilteredTasks:l,sorting:c,setSorting:d,type:p,selecting:m,setSelecting:v,handleSelectedTasks:T}=x.useContext(Os),[E,R]=x.useState(t.length!=0?[...t]:[]),A={searching:n,setSearching:e,tasks:t,setTasks:s,filteredTasks:a,setFilteredTasks:l,sorting:c,setSorting:d,type:p,selecting:m,setSelecting:v,taskCheckboxes:E,setTaskCheckboxes:R,handleSelectedTasks:T};return x.useEffect(()=>{R([...t])},[t]),y.jsx(X_.Provider,{value:A,children:y.jsx(Qk,{})})},Zk="_Prompt_Box_1ice6_1",Jk="_Close_Button_1ice6_43",eO="_colorPicker_1ice6_125",tO="_Hide_BG_Color_Prompt_1ice6_157",nO="_Hide_Color_Prompt_1ice6_159",sO="_Hide_Border_Color_Prompt_1ice6_161",iO="_Hide_Font_Weight_Prompt_1ice6_163",rO="_Hide_Italic_Prompt_1ice6_165",aO="_BG_Color_Prompt_1ice6_173",oO="_Color_Prompt_1ice6_175",lO="_Border_Color_Prompt_1ice6_177",uO="_Font_Weight_Prompt_1ice6_179",cO="_Italic_Prompt_1ice6_181",hO="_topOptionsWrapper_1ice6_189",fO="_topOptionsBox_1ice6_209",dO="_notWorking_1ice6_347",Re={Prompt_Box:Zk,Close_Button:Jk,colorPicker:eO,Hide_BG_Color_Prompt:tO,Hide_Color_Prompt:nO,Hide_Border_Color_Prompt:sO,Hide_Font_Weight_Prompt:iO,Hide_Italic_Prompt:rO,BG_Color_Prompt:aO,Color_Prompt:oO,Border_Color_Prompt:lO,Font_Weight_Prompt:uO,Italic_Prompt:cO,topOptionsWrapper:hO,topOptionsBox:fO,notWorking:dO},pO=()=>{var V;const{tasks:n,setTasks:e,selectedTasks:t,numberOfChanges:s,setNumberOfChanges:a,handleMarking:l,filteredTasks:c,searching:d,saveToDataBase:p,setType:m,setWriteTaskPrompt:v,setSortTaskPrompt:T}=x.useContext(Os),[E,R]=x.useState(!1),[A,j]=x.useState(!1),[D,M]=x.useState(!1),[z,q]=x.useState(!1),[ne,ue]=x.useState(!1);function ee(L,F,k,Pe,De,J){if(t.length>=1){let ce=[],pe=n,ve=c,U=[];L=="finished"?m("Finished"):L=="pending"&&m("Pending");for(let te in t)if(d)for(let B in ve)ve[B].id==t[te].id?(ve[B].lastUpdate={fullDate:new Date,time:Date.now()},L!=!1?(ve[t[te].index].type=L,U.push(ve[t[te].index])):((ve[B].style=="default"||ve[B].style==null)&&(ve[B].style={color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}),F&&(ve[B].style.color=F,U.push(ve[B])),k&&(ve[B].style.backgroundColor=k,U.push(ve[B])),Pe&&(ve[B].style.fontWeight=Pe,U.push(ve[B])),De&&(ve[B].style.fontStyle=De,U.push(ve[B])),J&&(ve[B].style.borderColor=J,U.push(ve[B])))):U.push(ve[t[te].index]);for(let te in t)pe=pe.map(B=>{if(t[te].id==B.id){let $={...B};return $.style=$.style==="default"?{color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}:{...$.style},$.isChecked&&(ce.push($),$.lastUpdate={fullDate:new Date,time:Date.now()}),L!==!1&&($.type=L),F&&($.style={...$.style,color:F}),k&&($.style={...$.style,backgroundColor:k}),Pe&&($.style={...$.style,fontWeight:Pe}),De&&($.style={...$.style,fontStyle:De}),J&&($.style={...$.style,borderColor:J}),$.isChecked=!0,$}else return{...B}});d?l([...ve],[...pe],[...ce]):l(ve,[...pe],[...ce])}}function O(){let L=s+1,F=JSON.parse(localStorage.getItem("Changes"));F=F[L],e([...F]),a(L)}function I(){let L=s-1,F=JSON.parse(localStorage.getItem("Changes"));F=F[L],e([...F]),a(L)}const N=()=>y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:E?`${Re.BG_Color_Prompt} ${Re.Prompt_Box}`:`${Re.Hide_BG_Color_Prompt} ${Re.Prompt_Box}`,children:[y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),className:`${Re.Close_Button}`,func:()=>{R(!1)}}),y.jsx("h1",{children:"Change BG Color"}),y.jsxs("label",{htmlFor:"colorPicker",className:Re.colorPicker,children:[y.jsx("input",{type:"color",id:"colorPicker",onBlur:L=>{ee(!1,!1,L.target.value,!1,!1)}}),y.jsx("span",{children:"Choose BG Color"})]}),y.jsx(_e,{content:"Default",func:()=>{ee(!1,!1,"#f09c2e",!1,!1)}})]}),y.jsxs("div",{className:A?`${Re.Color_Prompt} ${Re.Prompt_Box}`:`${Re.Hide_Color_Prompt} ${Re.Prompt_Box}`,children:[y.jsx("h1",{children:"Change Font Color"}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),className:`${Re.Close_Button}`,func:()=>{j(!1)}}),y.jsxs("label",{htmlFor:"bgColorPicker",className:`${Re.bgColorPicker} ${Re.colorPicker}`,children:[y.jsx("input",{type:"color",id:"bgColorPicker",onBlur:L=>{ee(!1,L.target.value,!1,!1,!1)}}),y.jsx("span",{children:"Choose Font Color"})]}),y.jsx(_e,{content:"Default",func:()=>{ee(!1,"white",!1,!1,!1)}})]}),y.jsxs("div",{className:D?`${Re.Border_Color_Prompt} ${Re.Prompt_Box}`:`${Re.Hide_Border_Color_Prompt} ${Re.Prompt_Box}`,children:[y.jsx("h1",{children:"Change Border Color"}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),className:`${Re.Close_Button}`,func:()=>{M(!1)}}),y.jsxs("label",{htmlFor:"borderColorPicker",className:`${Re.borderColorPicker} ${Re.colorPicker}`,children:[y.jsx("input",{type:"color",id:"borderColorPicker",onBlur:L=>{ee(!1,!1,!1,!1,!1,L.target.value)}}),y.jsx("span",{children:"Choose Border Color"})]}),y.jsx(_e,{content:"Default",func:()=>{ee(!1,!1,!1,!1,!1,"#d16c06")}})]}),y.jsxs("div",{className:z?`${Re.Font_Weight_Prompt} ${Re.Prompt_Box}`:`${Re.Hide_Font_Weight_Prompt} ${Re.Prompt_Box}`,children:[y.jsx("h1",{children:"Change Font Weight"}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),className:`${Re.Close_Button}`,func:()=>{q(!1)}}),y.jsx(_e,{content:"Normal",func:()=>{ee(!1,!1,!1,"Normal",!1,!1)}}),y.jsx(_e,{content:"Bold",func:()=>{ee(!1,!1,!1,"Bold",!1,!1)}}),y.jsx(_e,{content:"Bolder",func:()=>{ee(!1,!1,!1,"Bolder",!1,!1)}})]}),y.jsxs("div",{className:ne?`${Re.Italic_Prompt} ${Re.Prompt_Box}`:`${Re.Hide_Italic_Prompt} ${Re.Prompt_Box}`,children:[y.jsx("h1",{children:"Change Italization"}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),className:`${Re.Close_Button}`,func:()=>{ue(!1)}}),y.jsx(_e,{content:"Normal",func:()=>{ee(!1,!1,!1,!1,"Normal",!1)}}),y.jsx(_e,{content:"Italic",func:()=>{ee(!1,!1,!1,!1,"Italic",!1)}})]})]});return y.jsx(y.Fragment,{children:y.jsxs("div",{className:Re.topOptionsWrapper,children:[y.jsx(N,{}),y.jsxs("div",{className:Re.topOptionsBox,children:[y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-save"}),content:"Save Changes",className:s==null?`${Re.notWorking}`:null,func:()=>{s!=null&&p()}}),y.jsx(_e,{icon:y.jsx("i",{className:"material-icons",children:"undo"}),content:"Undo",className:s==null||s==0?`${Re.notWorking}`:null,func:()=>{s>0&&I()}}),y.jsx(_e,{icon:y.jsx("i",{className:"material-icons",children:"redo"}),content:"Redo",className:s<((V=JSON.parse(localStorage.getItem("Changes")))==null?void 0:V.length)-1&&s!=null?null:`${Re.notWorking}`,func:()=>{var L;s<((L=JSON.parse(localStorage.getItem("Changes")))==null?void 0:L.length)-1&&s!=null&&O()}}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-plus"}),content:y.jsx("span",{children:" Create New Task"}),func:()=>{v(!0)}}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-edit"}),content:y.jsx("span",{children:" Mark As Finished"}),className:t.length!=0?Re.working:Re.notWorking,func:()=>{ee("finished","white","#51af0f",!1,!1,"rgb(8, 97, 20)")}}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-edit"}),content:y.jsx("span",{children:" Mark As Pending"}),className:t.length!=0?Re.working:Re.notWorking,func:()=>{ee("pending","white","#f09c2e",!1,!1,"rgb(209, 108, 6)")}}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-sort"}),content:y.jsx("span",{children:" Sort"}),func:()=>{T(!0)}}),y.jsx(_e,{icon:y.jsx("i",{className:"material-icons",children:"format_color_fill"}),content:y.jsx("span",{children:" BG Color "}),className:t.length!=0?Re.working:Re.notWorking,func:()=>{R(!0),j(!1),M(!1),q(!1),ue(!1)}}),y.jsx(_e,{icon:y.jsx("i",{className:"material-icons",children:"format_color_text"}),content:y.jsx("span",{children:" Font Color"}),className:t.length!=0?Re.working:Re.notWorking,func:()=>{j(!0),R(!1),M(!1),q(!1,ue(!1))}}),y.jsx(_e,{icon:y.jsx("i",{className:"material-icons",children:"border_color"}),content:y.jsx("span",{children:" Border Color"}),className:t.length!=0?Re.working:Re.notWorking,func:()=>{M(!0),R(!1),j(!1),q(!1),ue(!1)}}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-bold"}),content:" Bold",className:t.length!=0?Re.working:Re.notWorking,func:()=>{M(!1),R(!1),j(!1),q(!0),ue(!1)}}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-italic"}),content:" Italic",className:t.length!=0?Re.working:Re.notWorking,func:()=>{M(!1),R(!1),j(!1),q(!1),ue(!0)}})]})]})})},mO="_writeTaskPrompt_cl8qy_1",gO="_hideWriteTaskPrompt_cl8qy_1",_O="_nav_cl8qy_45",yO="_content_cl8qy_115",vO="_submitButton_cl8qy_161",dc={writeTaskPrompt:mO,hideWriteTaskPrompt:gO,nav:_O,content:yO,submitButton:vO},TO=({setWriteTaskPrompt:n})=>{const{writeTaskPrompt:e,writeTask:t,setShowNavbar:s}=x.useContext(Os),a=x.useRef(null),l=x.useRef(null),[c,d]=x.useState(!1);function p(){d(Math.random()*1)}function m(){t(l.current.innerText)}function v(){l.current.innerHTML="<br>",T()}function T(){l.current.innerText==`
`||l.current.innerHTML=="<br>"?a.current.style.display="block":a.current.style.display="none"}return y.jsx(y.Fragment,{children:y.jsxs("div",{className:e?dc.writeTaskPrompt:dc.hideWriteTaskPrompt,children:[y.jsxs("div",{className:dc.nav,children:[y.jsxs("h3",{children:[y.jsx("i",{className:"fa fa-edit"})," ",y.jsx("span",{children:"Task Prompt"})]}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-times"}),func:()=>{n(!1),v()}})]}),y.jsxs("div",{className:dc.content,children:[y.jsx("span",{ref:a,children:"Type Any Task..."}),y.jsx("p",{ref:l,contentEditable:"true",onInput:()=>{p(),T()}})]}),y.jsx(_e,{content:"Submit",className:dc.submitButton,func:()=>{m(),v(),n(!1)}})]})})},EO="_Changes_Wrapper_hvebf_1",SO="_Changes_Box_hvebf_15",bO="_closeButton_hvebf_29",wO="_Top_hvebf_45",CO="_Options_hvebf_71",pc={Changes_Wrapper:EO,Changes_Box:SO,closeButton:bO,Top:wO,Options:CO},AO=()=>{};var XS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me=function(n,e){if(!n)throw Gl(e)},Gl=function(n){return new Error("Firebase Database ("+Ow.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},RO=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Z_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,p=a+2<n.length,m=p?n[a+2]:0,v=l>>2,T=(l&3)<<4|d>>4;let E=(d&15)<<2|m>>6,R=m&63;p||(R=64,c||(E=64)),s.push(t[v],t[T],t[E],t[R])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Dw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):RO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const m=a<n.length?t[n.charAt(a)]:64;++a;const T=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||m==null||T==null)throw new IO;const E=l<<2|d>>4;if(s.push(E),m!==64){const R=d<<4&240|m>>2;if(s.push(R),T!==64){const A=m<<6&192|T;s.push(A)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class IO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pw=function(n){const e=Dw(n);return Z_.encodeByteArray(e,!0)},_d=function(n){return Pw(n).replace(/\./g,"")},yd=function(n){try{return Z_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(n){return Mw(void 0,n)}function Mw(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!NO(t)||(n[t]=Mw(n[t],e[t]));return n}function NO(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=()=>kO().__FIREBASE_DEFAULTS__,DO=()=>{if(typeof process>"u"||typeof XS>"u")return;const n=XS.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},PO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&yd(n[1]);return e&&JSON.parse(e)},Qd=()=>{try{return AO()||OO()||DO()||PO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Lw=n=>{var e,t;return(t=(e=Qd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Uw=n=>{const e=Lw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Vw=()=>{var n;return(n=Qd())===null||n===void 0?void 0:n.config},jw=n=>{var e;return(e=Qd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(n){return n.endsWith(".cloudworkstations.dev")}async function ey(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_d(JSON.stringify(t)),_d(JSON.stringify(c)),""].join(".")}const Nc={};function MO(){const n={prod:[],emulator:[]};for(const e of Object.keys(Nc))Nc[e]?n.emulator.push(e):n.prod.push(e);return n}function LO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ZS=!1;function ty(n,e){if(typeof window>"u"||typeof document>"u"||!To(window.location.host)||Nc[n]===e||Nc[n]||ZS)return;Nc[n]=e;function t(E){return`__firebase__banner__${E}`}const s="__firebase__banner",l=MO().prod.length>0;function c(){const E=document.getElementById(s);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function p(E,R){E.setAttribute("width","24"),E.setAttribute("id",R),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{ZS=!0,c()},E}function v(E,R){E.setAttribute("id",R),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=LO(s),R=t("text"),A=document.getElementById(R)||document.createElement("span"),j=t("learnmore"),D=document.getElementById(j)||document.createElement("a"),M=t("preprendIcon"),z=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const q=E.element;d(q),v(D,j);const ne=m();p(z,M),q.append(z,A,D,ne),document.body.appendChild(q)}l?(A.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ny(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xn())}function UO(){var n;const e=(n=Qd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Fw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BO(){const n=xn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FO(){return Ow.NODE_ADMIN===!0}function zO(){return!UO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HO(){try{return typeof indexedDB=="object"}catch{return!1}}function qO(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="FirebaseError";class Si extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=GO,Object.setPrototypeOf(this,Si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rh.prototype.create)}}class rh{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?WO(l,s):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Si(a,d,s)}}function WO(n,e){return n.replace($O,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const $O=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(n){return JSON.parse(n)}function gn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=function(n){let e={},t={},s={},a="";try{const l=n.split(".");e=qc(yd(l[0])||""),t=qc(yd(l[1])||""),a=l[2],s=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:s,signature:a}},KO=function(n){const e=zw(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},YO=function(n){const e=zw(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ol(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function s_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function vd(n,e,t){const s={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=e.call(t,n[a],a,n));return s}function na(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],c=e[a];if(JS(l)&&JS(c)){if(!na(l,c))return!1}else if(l!==c)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function JS(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function wc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Cc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const s=this.W_;if(typeof e=="string")for(let T=0;T<16;T++)s[T]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let T=0;T<16;T++)s[T]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let T=16;T<80;T++){const E=s[T-3]^s[T-8]^s[T-14]^s[T-16];s[T]=(E<<1|E>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],c=this.chain_[2],d=this.chain_[3],p=this.chain_[4],m,v;for(let T=0;T<80;T++){T<40?T<20?(m=d^l&(c^d),v=1518500249):(m=l^c^d,v=1859775393):T<60?(m=l&c|d&(l|c),v=2400959708):(m=l^c^d,v=3395469782);const E=(a<<5|a>>>27)+m+p+v+s[T]&4294967295;p=d,d=c,c=(l<<30|l>>>2)&4294967295,l=a,a=E}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const s=t-this.blockSize;let a=0;const l=this.buf_;let c=this.inbuf_;for(;a<t;){if(c===0)for(;a<=s;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(l[c]=e.charCodeAt(a),++c,++a,c===this.blockSize){this.compress_(l),c=0;break}}else for(;a<t;)if(l[c]=e[a],++c,++a,c===this.blockSize){this.compress_(l),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let s=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)e[s]=this.chain_[a]>>l&255,++s;return e}}function XO(n,e){const t=new ZO(n,e);return t.subscribe.bind(t)}class ZO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");JO(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=Dg),a.error===void 0&&(a.error=Dg),a.complete===void 0&&(a.complete=Dg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Dg(){}function eD(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);if(a>=55296&&a<=56319){const l=a-55296;s++,me(s<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(s)-56320;a=65536+(l<<10)+c}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Xd=function(n){let e=0;for(let t=0;t<n.length;t++){const s=n.charCodeAt(t);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(n){return n&&n._delegate?n._delegate:n}class ar{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new J_;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iD(e))try{this.getOrInitializeService({instanceIdentifier:to})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=to){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=to){return this.instances.has(e)}getOptions(e=to){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:sD(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=to){return this.component?this.component.multipleInstances?e:to:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sD(n){return n===to?void 0:n}function iD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const aD={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},oD=ze.INFO,lD={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},uD=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=lD[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zd{constructor(e){this.name=e,this._logLevel=oD,this._logHandler=uD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const cD=(n,e)=>e.some(t=>n instanceof t);let e0,t0;function hD(){return e0||(e0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fD(){return t0||(t0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hw=new WeakMap,i_=new WeakMap,qw=new WeakMap,Pg=new WeakMap,sy=new WeakMap;function dD(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Xr(n.result)),a()},c=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Hw.set(t,n)}).catch(()=>{}),sy.set(e,n),e}function pD(n){if(i_.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});i_.set(n,e)}let r_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return i_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mD(n){r_=n(r_)}function gD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Mg(this),e,...t);return qw.set(s,e.sort?e.sort():[e]),Xr(s)}:fD().includes(n)?function(...e){return n.apply(Mg(this),e),Xr(Hw.get(this))}:function(...e){return Xr(n.apply(Mg(this),e))}}function _D(n){return typeof n=="function"?gD(n):(n instanceof IDBTransaction&&pD(n),cD(n,hD())?new Proxy(n,r_):n)}function Xr(n){if(n instanceof IDBRequest)return dD(n);if(Pg.has(n))return Pg.get(n);const e=_D(n);return e!==n&&(Pg.set(n,e),sy.set(e,n)),e}const Mg=n=>sy.get(n);function yD(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=Xr(c);return s&&c.addEventListener("upgradeneeded",p=>{s(Xr(c.result),p.oldVersion,p.newVersion,Xr(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const vD=["get","getKey","getAll","getAllKeys","count"],TD=["put","add","delete","clear"],Lg=new Map;function n0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Lg.get(e))return Lg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=TD.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||vD.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),a&&p.done]))[0]};return Lg.set(e,l),l}mD(n=>({...n,get:(e,t,s)=>n0(e,t)||n.get(e,t,s),has:(e,t)=>!!n0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(SD(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function SD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const a_="@firebase/app",s0="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new Zd("@firebase/app"),bD="@firebase/app-compat",wD="@firebase/analytics-compat",CD="@firebase/analytics",AD="@firebase/app-check-compat",RD="@firebase/app-check",ID="@firebase/auth",xD="@firebase/auth-compat",ND="@firebase/database",kD="@firebase/data-connect",OD="@firebase/database-compat",DD="@firebase/functions",PD="@firebase/functions-compat",MD="@firebase/installations",LD="@firebase/installations-compat",UD="@firebase/messaging",VD="@firebase/messaging-compat",jD="@firebase/performance",BD="@firebase/performance-compat",FD="@firebase/remote-config",zD="@firebase/remote-config-compat",HD="@firebase/storage",qD="@firebase/storage-compat",GD="@firebase/firestore",WD="@firebase/ai",$D="@firebase/firestore-compat",KD="firebase",YD="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="[DEFAULT]",QD={[a_]:"fire-core",[bD]:"fire-core-compat",[CD]:"fire-analytics",[wD]:"fire-analytics-compat",[RD]:"fire-app-check",[AD]:"fire-app-check-compat",[ID]:"fire-auth",[xD]:"fire-auth-compat",[ND]:"fire-rtdb",[kD]:"fire-data-connect",[OD]:"fire-rtdb-compat",[DD]:"fire-fn",[PD]:"fire-fn-compat",[MD]:"fire-iid",[LD]:"fire-iid-compat",[UD]:"fire-fcm",[VD]:"fire-fcm-compat",[jD]:"fire-perf",[BD]:"fire-perf-compat",[FD]:"fire-rc",[zD]:"fire-rc-compat",[HD]:"fire-gcs",[qD]:"fire-gcs-compat",[GD]:"fire-fst",[$D]:"fire-fst-compat",[WD]:"fire-vertex","fire-js":"fire-js",[KD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=new Map,XD=new Map,l_=new Map;function i0(n,e){try{n.container.addComponent(e)}catch(t){or.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function sa(n){const e=n.name;if(l_.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;l_.set(e,n);for(const t of Td.values())i0(t,n);for(const t of XD.values())i0(t,n);return!0}function Jd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new rh("app","Firebase",ZD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=YD;function iy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:o_,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw Zr.create("bad-app-name",{appName:String(a)});if(t||(t=Vw()),!t)throw Zr.create("no-options");const l=Td.get(a);if(l){if(na(t,l.options)&&na(s,l.config))return l;throw Zr.create("duplicate-app",{appName:a})}const c=new rD(a);for(const p of l_.values())c.addComponent(p);const d=new JD(t,s,c);return Td.set(a,d),d}function ry(n=o_){const e=Td.get(n);if(!e&&n===o_&&Vw())return iy();if(!e)throw Zr.create("no-app",{appName:n});return e}function xs(n,e,t){var s;let a=(s=QD[n])!==null&&s!==void 0?s:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(d.join(" "));return}sa(new ar(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP="firebase-heartbeat-database",tP=1,Gc="firebase-heartbeat-store";let Ug=null;function Gw(){return Ug||(Ug=yD(eP,tP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zr.create("idb-open",{originalErrorMessage:n.message})})),Ug}async function nP(n){try{const t=(await Gw()).transaction(Gc),s=await t.objectStore(Gc).get(Ww(n));return await t.done,s}catch(e){if(e instanceof Si)or.warn(e.message);else{const t=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});or.warn(t.message)}}}async function r0(n,e){try{const s=(await Gw()).transaction(Gc,"readwrite");await s.objectStore(Gc).put(e,Ww(n)),await s.done}catch(t){if(t instanceof Si)or.warn(t.message);else{const s=Zr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});or.warn(s.message)}}}function Ww(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=1024,iP=30;class rP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oP(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=a0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>iP){const c=lP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){or.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=a0(),{heartbeatsToSend:s,unsentEntries:a}=aP(this._heartbeatsCache.heartbeats),l=_d(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return or.warn(t),""}}}function a0(){return new Date().toISOString().substring(0,10)}function aP(n,e=sP){const t=[];let s=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),o0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),o0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class oP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HO()?qO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await nP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return r0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return r0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function o0(n){return _d(JSON.stringify({version:2,heartbeats:n})).length}function lP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(n){sa(new ar("platform-logger",e=>new ED(e),"PRIVATE")),sa(new ar("heartbeat",e=>new rP(e),"PRIVATE")),xs(a_,s0,n),xs(a_,s0,"esm2017"),xs("fire-js","")}uP("");var cP="firebase",hP="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs(cP,hP,"app");var l0={};const u0="@firebase/database",c0="1.0.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $w="";function fP(n){$w=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),gn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:qc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return fr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new dP(e)}}catch{}return new pP},so=Kw("localStorage"),mP=Kw("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=new Zd("@firebase/database"),gP=function(){let n=1;return function(){return n++}}(),Yw=function(n){const e=tD(n),t=new QO;t.update(e);const s=t.digest();return Z_.encodeByteArray(s)},ah=function(...n){let e="";for(let t=0;t<n.length;t++){const s=n[t];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=ah.apply(null,s):typeof s=="object"?e+=gn(s):e+=s,e+=" "}return e};let kc=null,h0=!0;const _P=function(n,e){me(!0,"Can't turn on custom loggers persistently."),Al.logLevel=ze.VERBOSE,kc=Al.log.bind(Al)},Cn=function(...n){if(h0===!0&&(h0=!1,kc===null&&mP.get("logging_enabled")===!0&&_P()),kc){const e=ah.apply(null,n);kc(e)}},oh=function(n){return function(...e){Cn(n,...e)}},u_=function(...n){const e="FIREBASE INTERNAL ERROR: "+ah(...n);Al.error(e)},oo=function(...n){const e=`FIREBASE FATAL ERROR: ${ah(...n)}`;throw Al.error(e),new Error(e)},ls=function(...n){const e="FIREBASE WARNING: "+ah(...n);Al.warn(e)},yP=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ls("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Qw=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},vP=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Dl="[MIN_NAME]",lo="[MAX_NAME]",$l=function(n,e){if(n===e)return 0;if(n===Dl||e===lo)return-1;if(e===Dl||n===lo)return 1;{const t=f0(n),s=f0(e);return t!==null?s!==null?t-s===0?n.length-e.length:t-s:-1:s!==null?1:n<e?-1:1}},TP=function(n,e){return n===e?0:n<e?-1:1},mc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+gn(e))},ay=function(n){if(typeof n!="object"||n===null)return gn(n);const e=[];for(const s in n)e.push(s);e.sort();let t="{";for(let s=0;s<e.length;s++)s!==0&&(t+=","),t+=gn(e[s]),t+=":",t+=ay(n[e[s]]);return t+="}",t},Xw=function(n,e){const t=n.length;if(t<=e)return[n];const s=[];for(let a=0;a<t;a+=e)a+e>t?s.push(n.substring(a,t)):s.push(n.substring(a,a+e));return s};function Ns(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Zw=function(n){me(!Qw(n),"Invalid JSON number");const e=11,t=52,s=(1<<e-1)-1;let a,l,c,d,p;n===0?(l=0,c=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-s)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),s),l=d+s,c=Math.round(n*Math.pow(2,t-d)-Math.pow(2,t))):(l=0,c=Math.round(n/Math.pow(2,1-s-t))));const m=[];for(p=t;p;p-=1)m.push(c%2?1:0),c=Math.floor(c/2);for(p=e;p;p-=1)m.push(l%2?1:0),l=Math.floor(l/2);m.push(a?1:0),m.reverse();const v=m.join("");let T="";for(p=0;p<64;p+=8){let E=parseInt(v.substr(p,8),2).toString(16);E.length===1&&(E="0"+E),T=T+E}return T.toLowerCase()},EP=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},SP=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},bP=new RegExp("^-?(0*)\\d{1,10}$"),wP=-2147483648,CP=2147483647,f0=function(n){if(bP.test(n)){const e=Number(n);if(e>=wP&&e<=CP)return e}return null},lh=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw ls("Exception was thrown by user callback.",t),e},Math.floor(0))}},AP=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Oc=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,jn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){ls(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t,s){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Cn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ls(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="5",Jw="v",eC="s",tC="r",nC="f",sC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,iC="ls",rC="p",c_="ac",aC="websocket",oC="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,t,s,a,l=!1,c="",d=!1,p=!1,m=null){this.secure=t,this.namespace=s,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=p,this.emulatorOptions=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=so.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&so.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function NP(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function lC(n,e,t){me(typeof e=="string","typeof type must == string"),me(typeof t=="object","typeof params must == object");let s;if(e===aC)s=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===oC)s=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);NP(n)&&(t.ns=n.namespace);const a=[];return Ns(t,(l,c)=>{a.push(l+"="+c)}),s+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this.counters_={}}incrementCounter(e,t=1){fr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return xO(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg={},jg={};function ly(n){const e=n.toString();return Vg[e]||(Vg[e]=new kP),Vg[e]}function OP(n,e){const t=n.toString();return jg[t]||(jg[t]=e()),jg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<s.length;++a)s[a]&&lh(()=>{this.onMessage_(s[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="start",PP="close",MP="pLPCommand",LP="pRTLPCB",uC="id",cC="pw",hC="ser",UP="cb",VP="seg",jP="ts",BP="d",FP="dframe",fC=1870,dC=30,zP=fC-dC,HP=25e3,qP=3e4;class wl{constructor(e,t,s,a,l,c,d){this.connId=e,this.repoInfo=t,this.applicationId=s,this.appCheckToken=a,this.authToken=l,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=oh(e),this.stats_=ly(t),this.urlFn=p=>(this.appCheckToken&&(p[c_]=this.appCheckToken),lC(t,oC,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new DP(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(qP)),vP(()=>{if(this.isClosed_)return;this.scriptTagHolder=new uy((...l)=>{const[c,d,p,m,v]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===d0)this.id=d,this.password=p;else if(c===PP)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...l)=>{const[c,d]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const s={};s[d0]="t",s[hC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[UP]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Jw]=oy,this.transportSessionId&&(s[eC]=this.transportSessionId),this.lastSessionId&&(s[iC]=this.lastSessionId),this.applicationId&&(s[rC]=this.applicationId),this.appCheckToken&&(s[c_]=this.appCheckToken),typeof location<"u"&&location.hostname&&sC.test(location.hostname)&&(s[tC]=nC);const a=this.urlFn(s);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wl.forceAllow_=!0}static forceDisallow(){wl.forceDisallow_=!0}static isAvailable(){return wl.forceAllow_?!0:!wl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!EP()&&!SP()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=gn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=Pw(t),a=Xw(s,zP);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const s={};s[FP]="t",s[uC]=e,s[cC]=t,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=gn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class uy{constructor(e,t,s,a){this.onDisconnect=s,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=gP(),window[MP+this.uniqueCallbackIdentifier]=e,window[LP+this.uniqueCallbackIdentifier]=t,this.myIFrame=uy.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){Cn("frame writing exception"),d.stack&&Cn(d.stack),Cn(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Cn("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[uC]=this.myID,e[cC]=this.myPW,e[hC]=this.currentSerial;let t=this.urlFn(e),s="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+dC+s.length<=fC;){const c=this.pendingSegs.shift();s=s+"&"+VP+a+"="+c.seg+"&"+jP+a+"="+c.ts+"&"+BP+a+"="+c.d,a++}return t=t+s,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,s){this.pendingSegs.push({seg:e,ts:t,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const s=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(s,Math.floor(HP)),l=()=>{clearTimeout(a),s()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const a=s.readyState;(!a||a==="loaded"||a==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),t())},s.onerror=()=>{Cn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP=16384,WP=45e3;let Ed=null;typeof MozWebSocket<"u"?Ed=MozWebSocket:typeof WebSocket<"u"&&(Ed=WebSocket);class Bs{constructor(e,t,s,a,l,c,d){this.connId=e,this.applicationId=s,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=oh(this.connId),this.stats_=ly(t),this.connURL=Bs.connectionURL_(t,c,d,a,s),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,s,a,l){const c={};return c[Jw]=oy,typeof location<"u"&&location.hostname&&sC.test(location.hostname)&&(c[tC]=nC),t&&(c[eC]=t),s&&(c[iC]=s),a&&(c[c_]=a),l&&(c[rC]=l),lC(e,aC,c)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,so.set("previous_websocket_failure",!0);try{let s;FO(),this.mySock=new Ed(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const a=s.message||s.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const a=s.message||s.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){Bs.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(t);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Ed!==null&&!Bs.forceDisallow_}static previouslyFailed(){return so.isInMemoryStorage||so.get("previous_websocket_failure")===!0}markConnectionHealthy(){so.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const s=qc(t);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(me(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const s=this.extractFrameCount_(t);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const t=gn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=Xw(t,GP);s.length>1&&this.sendString_(String(s.length));for(let a=0;a<s.length;a++)this.sendString_(s[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WP))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Bs.responsesRequiredToBeHealthy=2;Bs.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{static get ALL_TRANSPORTS(){return[wl,Bs]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Bs&&Bs.isAvailable();let s=t&&!Bs.previouslyFailed();if(e.webSocketOnly&&(t||ls("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Bs];else{const a=this.transports_=[];for(const l of Wc.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);Wc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=6e4,KP=5e3,YP=10*1024,QP=100*1024,Bg="t",p0="d",XP="s",m0="r",ZP="e",g0="o",_0="a",y0="n",v0="p",JP="h";class e2{constructor(e,t,s,a,l,c,d,p,m,v){this.id=e,this.repoInfo_=t,this.applicationId_=s,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=p,this.onKill_=m,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=oh("c:"+this.id+":"),this.transportManager_=new Wc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,s)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=Oc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>QP?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>YP?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Bg in e){const t=e[Bg];t===_0?this.upgradeIfSecondaryHealthy_():t===m0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===g0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=mc("t",e),s=mc("d",e);if(t==="c")this.onSecondaryControl_(s);else if(t==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:v0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:_0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:y0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=mc("t",e),s=mc("d",e);t==="c"?this.onControl_(s):t==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=mc(Bg,e);if(p0 in e){const s=e[p0];if(t===JP){const a=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===y0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===XP?this.onConnectionShutdown_(s):t===m0?this.onReset_(s):t===ZP?u_("Server Error: "+s):t===g0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):u_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,s=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),oy!==s&&ls("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,s),Oc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor($P))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Oc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(KP))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:v0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(so.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{put(e,t,s,a){}merge(e,t,s,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,s){}onDisconnectMerge(e,t,s){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.allowedEvents_=e,this.listeners_={},me(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let a=0;a<s.length;a++)s[a].callback.apply(s[a].context,t)}}on(e,t,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:s});const a=this.getInitialEvent(e);a&&t.apply(s,a)}off(e,t,s){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let l=0;l<a.length;l++)if(a[l].callback===t&&(!s||s===a[l].context)){a.splice(l,1);return}}validateEventType_(e){me(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends mC{static getInstance(){return new Sd}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ny()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return me(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=32,E0=768;class yt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let s=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[s]=this.pieces_[a],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function ft(){return new yt("")}function Qe(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ia(n){return n.pieces_.length-n.pieceNum_}function _t(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new yt(n.pieces_,e)}function gC(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function t2(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function _C(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function yC(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new yt(e,0)}function on(n,e){const t=[];for(let s=n.pieceNum_;s<n.pieces_.length;s++)t.push(n.pieces_[s]);if(e instanceof yt)for(let s=e.pieceNum_;s<e.pieces_.length;s++)t.push(e.pieces_[s]);else{const s=e.split("/");for(let a=0;a<s.length;a++)s[a].length>0&&t.push(s[a])}return new yt(t,0)}function Ge(n){return n.pieceNum_>=n.pieces_.length}function Is(n,e){const t=Qe(n),s=Qe(e);if(t===null)return e;if(t===s)return Is(_t(n),_t(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function vC(n,e){if(ia(n)!==ia(e))return!1;for(let t=n.pieceNum_,s=e.pieceNum_;t<=n.pieces_.length;t++,s++)if(n.pieces_[t]!==e.pieces_[s])return!1;return!0}function Fs(n,e){let t=n.pieceNum_,s=e.pieceNum_;if(ia(n)>ia(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[s])return!1;++t,++s}return!0}class n2{constructor(e,t){this.errorPrefix_=t,this.parts_=_C(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Xd(this.parts_[s]);TC(this)}}function s2(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Xd(e),TC(n)}function i2(n){const e=n.parts_.pop();n.byteLength_-=Xd(e),n.parts_.length>0&&(n.byteLength_-=1)}function TC(n){if(n.byteLength_>E0)throw new Error(n.errorPrefix_+"has a key path longer than "+E0+" bytes ("+n.byteLength_+").");if(n.parts_.length>T0)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+T0+") or object contains a cycle "+no(n))}function no(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy extends mC{static getInstance(){return new cy}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return me(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=1e3,r2=60*5*1e3,S0=30*1e3,a2=1.3,o2=3e4,l2="server_kill",b0=3;class sr extends pC{constructor(e,t,s,a,l,c,d,p){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=s,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=c,this.appCheckTokenProvider_=d,this.authOverride_=p,this.id=sr.nextPersistentConnectionId_++,this.log_=oh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gc,this.maxReconnectDelay_=r2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");cy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Sd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,s){const a=++this.requestNumber_,l={r:a,a:e,b:t};this.log_(gn(l)),me(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),s&&(this.requestCBHash_[a]=s)}get(e){this.initConnection_();const t=new J_,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const d=c.d;c.s==="ok"?t.resolve(d):t.reject(d)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,s,a){this.initConnection_();const l=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+l),this.listens.has(c)||this.listens.set(c,new Map),me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),me(!this.listens.get(c).has(l),"listen() called twice for same path/queryId.");const d={onComplete:a,hashFn:t,query:e,tag:s};this.listens.get(c).set(l,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(s)})}sendListen_(e){const t=e.query,s=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+s+" for "+a);const l={p:s},c="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(c,l,d=>{const p=d.d,m=d.s;sr.warnOnListenWarnings_(p,t),(this.listens.get(s)&&this.listens.get(s).get(a))===e&&(this.log_("listen response",d),m!=="ok"&&this.removeListen_(s,a),e.onComplete&&e.onComplete(m,p))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&fr(e,"w")){const s=Ol(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();ls(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||YO(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=S0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=KO(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(t,s,a=>{const l=a.s,c=a.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,s=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,s)})}unlisten(e,t){const s=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+a),me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,a)&&this.connected_&&this.sendUnlisten_(s,a,e._queryObject,t)}sendUnlisten_(e,t,s,a){this.log_("Unlisten on "+e+" for "+t);const l={p:e},c="n";a&&(l.q=s,l.t=a),this.sendRequest(c,l)}onDisconnectPut(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:s})}onDisconnectMerge(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:s})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,s,a){const l={p:t,d:s};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,c=>{a&&setTimeout(()=>{a(c.s,c.d)},Math.floor(0))})}put(e,t,s,a){this.putInternal("p",e,t,s,a)}merge(e,t,s,a){this.putInternal("m",e,t,s,a)}putInternal(e,t,s,a,l){this.initConnection_();const c={p:t,d:s};l!==void 0&&(c.h=l),this.outstandingPuts_.push({action:e,request:c,onComplete:a}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,s,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,s=>{if(s.s!=="ok"){const l=s.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+gn(e));const t=e.r,s=this.requestCBHash_[t];s&&(delete this.requestCBHash_[t],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):u_("Unrecognized action received from server: "+gn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){me(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=gc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>o2&&(this.reconnectDelay_=gc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*a2)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+sr.nextConnectionId_++,l=this.lastSessionId;let c=!1,d=null;const p=function(){d?d.close():(c=!0,s())},m=function(T){me(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(T)};this.realtime_={close:p,sendRequest:m};const v=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[T,E]=await Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)]);c?Cn("getToken() completed but was canceled"):(Cn("getToken() completed. Creating connection."),this.authToken_=T&&T.accessToken,this.appCheckToken_=E&&E.token,d=new e2(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,s,R=>{ls(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(l2)},l))}catch(T){this.log_("Failed to get token: "+T),c||(this.repoInfo_.nodeAdmin&&ls(T),p())}}}interrupt(e){Cn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Cn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],s_(this.interruptReasons_)&&(this.reconnectDelay_=gc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let s;t?s=t.map(l=>ay(l)).join("$"):s="default";const a=this.removeListen_(e,s);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const s=new yt(e).toString();let a;if(this.listens.has(s)){const l=this.listens.get(s);a=l.get(t),l.delete(t),l.size===0&&this.listens.delete(s)}else a=void 0;return a}onAuthRevoked_(e,t){Cn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=b0&&(this.reconnectDelay_=S0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Cn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=b0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+$w.replace(/\./g,"-")]=1,ny()?e["framework.cordova"]=1:Fw()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Sd.getInstance().currentlyOnline();return s_(this.interruptReasons_)&&e}}sr.nextPersistentConnectionId_=0;sr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Xe(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const s=new Xe(Dl,e),a=new Xe(Dl,t);return this.compare(s,a)!==0}minPost(){return Xe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf;class EC extends ep{static get __EMPTY_NODE(){return Gf}static set __EMPTY_NODE(e){Gf=e}compare(e,t){return $l(e.name,t.name)}isDefinedOn(e){throw Gl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Xe.MIN}maxPost(){return new Xe(lo,Gf)}makePost(e,t){return me(typeof e=="string","KeyIndex indexValue must always be a string."),new Xe(e,Gf)}toString(){return".key"}}const Rl=new EC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wf=class{constructor(e,t,s,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?s(e.key,t):1,a&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},rs=class Ac{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Ac.RED,this.left=a??hi.EMPTY_NODE,this.right=l??hi.EMPTY_NODE}copy(e,t,s,a,l){return new Ac(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return hi.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let s,a;if(s=this,t(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),t(e,s.key)===0){if(s.right.isEmpty())return hi.EMPTY_NODE;a=s.right.min_(),s=s.copy(a.key,a.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ac.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ac.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};rs.RED=!0;rs.BLACK=!1;class u2{copy(e,t,s,a,l){return this}insert(e,t,s){return new rs(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let hi=class ad{constructor(e,t=ad.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ad(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,rs.BLACK,null,null))}remove(e){return new ad(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rs.BLACK,null,null))}get(e){let t,s=this.root_;for(;!s.isEmpty();){if(t=this.comparator_(e,s.key),t===0)return s.value;t<0?s=s.left:t>0&&(s=s.right)}return null}getPredecessorKey(e){let t,s=this.root_,a=null;for(;!s.isEmpty();)if(t=this.comparator_(e,s.key),t===0){if(s.left.isEmpty())return a?a.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else t<0?s=s.left:t>0&&(a=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Wf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Wf(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Wf(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Wf(this.root_,null,this.comparator_,!0,e)}};hi.EMPTY_NODE=new u2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(n,e){return $l(n.name,e.name)}function hy(n,e){return $l(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h_;function h2(n){h_=n}const SC=function(n){return typeof n=="number"?"number:"+Zw(n):"string:"+n},bC=function(n){if(n.isLeafNode()){const e=n.val();me(typeof e=="string"||typeof e=="number"||typeof e=="object"&&fr(e,".sv"),"Priority must be a string or number.")}else me(n===h_||n.isEmpty(),"priority of unexpected type.");me(n===h_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w0;class rn{static set __childrenNodeConstructor(e){w0=e}static get __childrenNodeConstructor(){return w0}constructor(e,t=rn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,me(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),bC(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new rn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:rn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ge(e)?this:Qe(e)===".priority"?this.priorityNode_:rn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:rn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const s=Qe(e);return s===null?t:t.isEmpty()&&s!==".priority"?this:(me(s!==".priority"||ia(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,rn.__childrenNodeConstructor.EMPTY_NODE.updateChild(_t(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+SC(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=Zw(this.value_):e+=this.value_,this.lazyHash_=Yw(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===rn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof rn.__childrenNodeConstructor?-1:(me(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,s=typeof this.value_,a=rn.VALUE_TYPE_ORDER.indexOf(t),l=rn.VALUE_TYPE_ORDER.indexOf(s);return me(a>=0,"Unknown leaf type: "+t),me(l>=0,"Unknown leaf type: "+s),a===l?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}rn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wC,CC;function f2(n){wC=n}function d2(n){CC=n}class p2 extends ep{compare(e,t){const s=e.node.getPriority(),a=t.node.getPriority(),l=s.compareTo(a);return l===0?$l(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Xe.MIN}maxPost(){return new Xe(lo,new rn("[PRIORITY-POST]",CC))}makePost(e,t){const s=wC(e);return new Xe(t,new rn("[PRIORITY-POST]",s))}toString(){return".priority"}}const In=new p2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=Math.log(2);class g2{constructor(e){const t=l=>parseInt(Math.log(l)/m2,10),s=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=s(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const bd=function(n,e,t,s){n.sort(e);const a=function(p,m){const v=m-p;let T,E;if(v===0)return null;if(v===1)return T=n[p],E=t?t(T):T,new rs(E,T.node,rs.BLACK,null,null);{const R=parseInt(v/2,10)+p,A=a(p,R),j=a(R+1,m);return T=n[R],E=t?t(T):T,new rs(E,T.node,rs.BLACK,A,j)}},l=function(p){let m=null,v=null,T=n.length;const E=function(A,j){const D=T-A,M=T;T-=A;const z=a(D+1,M),q=n[D],ne=t?t(q):q;R(new rs(ne,q.node,j,null,z))},R=function(A){m?(m.left=A,m=A):(v=A,m=A)};for(let A=0;A<p.count;++A){const j=p.nextBitIsOne(),D=Math.pow(2,p.count-(A+1));j?E(D,rs.BLACK):(E(D,rs.BLACK),E(D,rs.RED))}return v},c=new g2(n.length),d=l(c);return new hi(s||e,d)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fg;const gl={};class Ji{static get Default(){return me(gl&&In,"ChildrenNode.ts has not been loaded"),Fg=Fg||new Ji({".priority":gl},{".priority":In}),Fg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Ol(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof hi?t:null}hasIndex(e){return fr(this.indexSet_,e.toString())}addIndex(e,t){me(e!==Rl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let a=!1;const l=t.getIterator(Xe.Wrap);let c=l.getNext();for(;c;)a=a||e.isDefinedOn(c.node),s.push(c),c=l.getNext();let d;a?d=bd(s,e.getCompare()):d=gl;const p=e.toString(),m=Object.assign({},this.indexSet_);m[p]=e;const v=Object.assign({},this.indexes_);return v[p]=d,new Ji(v,m)}addToIndexes(e,t){const s=vd(this.indexes_,(a,l)=>{const c=Ol(this.indexSet_,l);if(me(c,"Missing index implementation for "+l),a===gl)if(c.isDefinedOn(e.node)){const d=[],p=t.getIterator(Xe.Wrap);let m=p.getNext();for(;m;)m.name!==e.name&&d.push(m),m=p.getNext();return d.push(e),bd(d,c.getCompare())}else return gl;else{const d=t.get(e.name);let p=a;return d&&(p=p.remove(new Xe(e.name,d))),p.insert(e,e.node)}});return new Ji(s,this.indexSet_)}removeFromIndexes(e,t){const s=vd(this.indexes_,a=>{if(a===gl)return a;{const l=t.get(e.name);return l?a.remove(new Xe(e.name,l)):a}});return new Ji(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c;class st{static get EMPTY_NODE(){return _c||(_c=new st(new hi(hy),null,Ji.Default))}constructor(e,t,s){this.children_=e,this.priorityNode_=t,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&bC(this.priorityNode_),this.children_.isEmpty()&&me(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_c}updatePriority(e){return this.children_.isEmpty()?this:new st(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?_c:t}}getChild(e){const t=Qe(e);return t===null?this:this.getImmediateChild(t).getChild(_t(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(me(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const s=new Xe(e,t);let a,l;t.isEmpty()?(a=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(s,this.children_)):(a=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(s,this.children_));const c=a.isEmpty()?_c:this.priorityNode_;return new st(a,c,l)}}updateChild(e,t){const s=Qe(e);if(s===null)return t;{me(Qe(e)!==".priority"||ia(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(s).updateChild(_t(e),t);return this.updateImmediateChild(s,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let s=0,a=0,l=!0;if(this.forEachChild(In,(c,d)=>{t[c]=d.val(e),s++,l&&st.INTEGER_REGEXP_.test(c)?a=Math.max(a,Number(c)):l=!1}),!e&&l&&a<2*s){const c=[];for(const d in t)c[d]=t[d];return c}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+SC(this.getPriority().val())+":"),this.forEachChild(In,(t,s)=>{const a=s.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":Yw(e)}return this.lazyHash_}getPredecessorChildName(e,t,s){const a=this.resolveIndex_(s);if(a){const l=a.getPredecessorKey(new Xe(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Xe(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Xe(t,this.children_.get(t)):null}forEachChild(e,t){const s=this.resolveIndex_(e);return s?s.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,Xe.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,Xe.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)>0;)a.getNext(),l=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===uh?-1:0}withIndex(e){if(e===Rl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new st(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Rl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const s=this.getIterator(In),a=t.getIterator(In);let l=s.getNext(),c=a.getNext();for(;l&&c;){if(l.name!==c.name||!l.node.equals(c.node))return!1;l=s.getNext(),c=a.getNext()}return l===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Rl?null:this.indexMap_.get(e.toString())}}st.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class _2 extends st{constructor(){super(new hi(hy),st.EMPTY_NODE,Ji.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return st.EMPTY_NODE}isEmpty(){return!1}}const uh=new _2;Object.defineProperties(Xe,{MIN:{value:new Xe(Dl,st.EMPTY_NODE)},MAX:{value:new Xe(lo,uh)}});EC.__EMPTY_NODE=st.EMPTY_NODE;rn.__childrenNodeConstructor=st;h2(uh);d2(uh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=!0;function An(n,e=null){if(n===null)return st.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),me(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new rn(t,An(e))}if(!(n instanceof Array)&&y2){const t=[];let s=!1;if(Ns(n,(c,d)=>{if(c.substring(0,1)!=="."){const p=An(d);p.isEmpty()||(s=s||!p.getPriority().isEmpty(),t.push(new Xe(c,p)))}}),t.length===0)return st.EMPTY_NODE;const l=bd(t,c2,c=>c.name,hy);if(s){const c=bd(t,In.getCompare());return new st(l,An(e),new Ji({".priority":c},{".priority":In}))}else return new st(l,An(e),Ji.Default)}else{let t=st.EMPTY_NODE;return Ns(n,(s,a)=>{if(fr(n,s)&&s.substring(0,1)!=="."){const l=An(a);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(s,l))}}),t.updatePriority(An(e))}}f2(An);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2 extends ep{constructor(e){super(),this.indexPath_=e,me(!Ge(e)&&Qe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const s=this.extractChild(e.node),a=this.extractChild(t.node),l=s.compareTo(a);return l===0?$l(e.name,t.name):l}makePost(e,t){const s=An(e),a=st.EMPTY_NODE.updateChild(this.indexPath_,s);return new Xe(t,a)}maxPost(){const e=st.EMPTY_NODE.updateChild(this.indexPath_,uh);return new Xe(lo,e)}toString(){return _C(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2 extends ep{compare(e,t){const s=e.node.compareTo(t.node);return s===0?$l(e.name,t.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Xe.MIN}maxPost(){return Xe.MAX}makePost(e,t){const s=An(e);return new Xe(t,s)}toString(){return".value"}}const E2=new T2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(n){return{type:"value",snapshotNode:n}}function b2(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function w2(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function C0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function C2(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=In}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return me(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return me(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Dl}hasEnd(){return this.endSet_}getIndexEndValue(){return me(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return me(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return me(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===In}copy(){const e=new fy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function A0(n){const e={};if(n.isDefault())return e;let t;if(n.index_===In?t="$priority":n.index_===E2?t="$value":n.index_===Rl?t="$key":(me(n.index_ instanceof v2,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=gn(t),n.startSet_){const s=n.startAfterSet_?"startAfter":"startAt";e[s]=gn(n.indexStartValue_),n.startNameSet_&&(e[s]+=","+gn(n.indexStartName_))}if(n.endSet_){const s=n.endBeforeSet_?"endBefore":"endAt";e[s]=gn(n.indexEndValue_),n.endNameSet_&&(e[s]+=","+gn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function R0(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==In&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends pC{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(me(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,s,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.log_=oh("p:rest:"),this.listens_={}}listen(e,t,s,a){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const c=wd.getListenId_(e,s),d={};this.listens_[c]=d;const p=A0(e._queryParams);this.restRequest_(l+".json",p,(m,v)=>{let T=v;if(m===404&&(T=null,m=null),m===null&&this.onDataUpdate_(l,T,!1,s),Ol(this.listens_,c)===d){let E;m?m===401?E="permission_denied":E="rest_error:"+m:E="ok",a(E,null)}})}unlisten(e,t){const s=wd.getListenId_(e,t);delete this.listens_[s]}get(e){const t=A0(e._queryParams),s=e._path.toString(),a=new J_;return this.restRequest_(s+".json",t,(l,c)=>{let d=c;l===404&&(d=null,l=null),l===null?(this.onDataUpdate_(s,d,!1,null),a.resolve(d)):a.reject(new Error(d))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},s){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(t.auth=a.accessToken),l&&l.token&&(t.ac=l.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Wl(t);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(s&&d.readyState===4){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=qc(d.responseText)}catch{ls("Failed to parse JSON response for "+c+": "+d.responseText)}s(null,p)}else d.status!==401&&d.status!==404&&ls("Got unsuccessful REST response for "+c+" Status: "+d.status),s(d.status);s=null}},d.open("GET",c,!0),d.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.rootNode_=st.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(){return{value:null,children:new Map}}function AC(n,e,t){if(Ge(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const s=Qe(e);n.children.has(s)||n.children.set(s,Cd());const a=n.children.get(s);e=_t(e),AC(a,e,t)}}function f_(n,e,t){n.value!==null?t(e,n.value):R2(n,(s,a)=>{const l=new yt(e.toString()+"/"+s);f_(a,l,t)})}function R2(n,e){n.children.forEach((t,s)=>{e(s,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ns(this.last_,(s,a)=>{t[s]=t[s]-a}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=10*1e3,x2=30*1e3,N2=5*60*1e3;class k2{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new I2(e);const s=I0+(x2-I0)*Math.random();Oc(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),t={};let s=!1;Ns(e,(a,l)=>{l>0&&fr(this.statsToReport_,a)&&(t[a]=l,s=!0)}),s&&this.server_.reportStats(t),Oc(this.reportStats_.bind(this),Math.floor(Math.random()*2*N2))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(fi||(fi={}));function RC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function IC(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function xC(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t,s){this.path=e,this.affectedTree=t,this.revert=s,this.type=fi.ACK_USER_WRITE,this.source=RC()}operationForChild(e){if(Ge(this.path)){if(this.affectedTree.value!=null)return me(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new yt(e));return new Ad(ft(),t,this.revert)}}else return me(Qe(this.path)===e,"operationForChild called for unrelated child."),new Ad(_t(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t,s){this.source=e,this.path=t,this.snap=s,this.type=fi.OVERWRITE}operationForChild(e){return Ge(this.path)?new uo(this.source,ft(),this.snap.getImmediateChild(e)):new uo(this.source,_t(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t,s){this.source=e,this.path=t,this.children=s,this.type=fi.MERGE}operationForChild(e){if(Ge(this.path)){const t=this.children.subtree(new yt(e));return t.isEmpty()?null:t.value?new uo(this.source,ft(),t.value):new $c(this.source,ft(),t)}else return me(Qe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new $c(this.source,_t(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,t,s){this.node_=e,this.fullyInitialized_=t,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ge(e))return this.isFullyInitialized()&&!this.filtered_;const t=Qe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function O2(n,e,t,s){const a=[],l=[];return e.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&l.push(C2(c.childName,c.snapshotNode))}),yc(n,a,"child_removed",e,s,t),yc(n,a,"child_added",e,s,t),yc(n,a,"child_moved",l,s,t),yc(n,a,"child_changed",e,s,t),yc(n,a,"value",e,s,t),a}function yc(n,e,t,s,a,l){const c=s.filter(d=>d.type===t);c.sort((d,p)=>P2(n,d,p)),c.forEach(d=>{const p=D2(n,d,l);a.forEach(m=>{m.respondsTo(d.type)&&e.push(m.createEvent(p,n.query_))})})}function D2(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function P2(n,e,t){if(e.childName==null||t.childName==null)throw Gl("Should only compare child_ events.");const s=new Xe(e.childName,e.snapshotNode),a=new Xe(t.childName,t.snapshotNode);return n.index_.compare(s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(n,e){return{eventCache:n,serverCache:e}}function Dc(n,e,t,s){return NC(new dy(e,t,s),n.serverCache)}function kC(n,e,t,s){return NC(n.eventCache,new dy(e,t,s))}function d_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function co(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zg;const M2=()=>(zg||(zg=new hi(TP)),zg);class gt{static fromObject(e){let t=new gt(null);return Ns(e,(s,a)=>{t=t.set(new yt(s),a)}),t}constructor(e,t=M2()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ft(),value:this.value};if(Ge(e))return null;{const s=Qe(e),a=this.children.get(s);if(a!==null){const l=a.findRootMostMatchingPathAndValue(_t(e),t);return l!=null?{path:on(new yt(s),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ge(e))return this;{const t=Qe(e),s=this.children.get(t);return s!==null?s.subtree(_t(e)):new gt(null)}}set(e,t){if(Ge(e))return new gt(t,this.children);{const s=Qe(e),l=(this.children.get(s)||new gt(null)).set(_t(e),t),c=this.children.insert(s,l);return new gt(this.value,c)}}remove(e){if(Ge(e))return this.children.isEmpty()?new gt(null):new gt(null,this.children);{const t=Qe(e),s=this.children.get(t);if(s){const a=s.remove(_t(e));let l;return a.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,a),this.value===null&&l.isEmpty()?new gt(null):new gt(this.value,l)}else return this}}get(e){if(Ge(e))return this.value;{const t=Qe(e),s=this.children.get(t);return s?s.get(_t(e)):null}}setTree(e,t){if(Ge(e))return t;{const s=Qe(e),l=(this.children.get(s)||new gt(null)).setTree(_t(e),t);let c;return l.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,l),new gt(this.value,c)}}fold(e){return this.fold_(ft(),e)}fold_(e,t){const s={};return this.children.inorderTraversal((a,l)=>{s[a]=l.fold_(on(e,a),t)}),t(e,this.value,s)}findOnPath(e,t){return this.findOnPath_(e,ft(),t)}findOnPath_(e,t,s){const a=this.value?s(t,this.value):!1;if(a)return a;if(Ge(e))return null;{const l=Qe(e),c=this.children.get(l);return c?c.findOnPath_(_t(e),on(t,l),s):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ft(),t)}foreachOnPath_(e,t,s){if(Ge(e))return this;{this.value&&s(t,this.value);const a=Qe(e),l=this.children.get(a);return l?l.foreachOnPath_(_t(e),on(t,a),s):new gt(null)}}foreach(e){this.foreach_(ft(),e)}foreach_(e,t){this.children.inorderTraversal((s,a)=>{a.foreach_(on(e,s),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,s)=>{s.value&&e(t,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.writeTree_=e}static empty(){return new Hs(new gt(null))}}function Pc(n,e,t){if(Ge(e))return new Hs(new gt(t));{const s=n.writeTree_.findRootMostValueAndPath(e);if(s!=null){const a=s.path;let l=s.value;const c=Is(a,e);return l=l.updateChild(c,t),new Hs(n.writeTree_.set(a,l))}else{const a=new gt(t),l=n.writeTree_.setTree(e,a);return new Hs(l)}}}function x0(n,e,t){let s=n;return Ns(t,(a,l)=>{s=Pc(s,on(e,a),l)}),s}function N0(n,e){if(Ge(e))return Hs.empty();{const t=n.writeTree_.setTree(e,new gt(null));return new Hs(t)}}function p_(n,e){return Eo(n,e)!=null}function Eo(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Is(t.path,e)):null}function k0(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(In,(s,a)=>{e.push(new Xe(s,a))}):n.writeTree_.children.inorderTraversal((s,a)=>{a.value!=null&&e.push(new Xe(s,a.value))}),e}function Jr(n,e){if(Ge(e))return n;{const t=Eo(n,e);return t!=null?new Hs(new gt(t)):new Hs(n.writeTree_.subtree(e))}}function m_(n){return n.writeTree_.isEmpty()}function Pl(n,e){return OC(ft(),n.writeTree_,e)}function OC(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let s=null;return e.children.inorderTraversal((a,l)=>{a===".priority"?(me(l.value!==null,"Priority writes must always be leaf nodes"),s=l.value):t=OC(on(n,a),l,t)}),!t.getChild(n).isEmpty()&&s!==null&&(t=t.updateChild(on(n,".priority"),s)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(n,e){return VC(e,n)}function L2(n,e,t,s,a){me(s>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:s,visible:a}),a&&(n.visibleWrites=Pc(n.visibleWrites,e,t)),n.lastWriteId=s}function U2(n,e){for(let t=0;t<n.allWrites.length;t++){const s=n.allWrites[t];if(s.writeId===e)return s}return null}function V2(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);me(t>=0,"removeWrite called with nonexistent writeId.");const s=n.allWrites[t];n.allWrites.splice(t,1);let a=s.visible,l=!1,c=n.allWrites.length-1;for(;a&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=t&&j2(d,s.path)?a=!1:Fs(s.path,d.path)&&(l=!0)),c--}if(a){if(l)return B2(n),!0;if(s.snap)n.visibleWrites=N0(n.visibleWrites,s.path);else{const d=s.children;Ns(d,p=>{n.visibleWrites=N0(n.visibleWrites,on(s.path,p))})}return!0}else return!1}function j2(n,e){if(n.snap)return Fs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Fs(on(n.path,t),e))return!0;return!1}function B2(n){n.visibleWrites=PC(n.allWrites,F2,ft()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function F2(n){return n.visible}function PC(n,e,t){let s=Hs.empty();for(let a=0;a<n.length;++a){const l=n[a];if(e(l)){const c=l.path;let d;if(l.snap)Fs(t,c)?(d=Is(t,c),s=Pc(s,d,l.snap)):Fs(c,t)&&(d=Is(c,t),s=Pc(s,ft(),l.snap.getChild(d)));else if(l.children){if(Fs(t,c))d=Is(t,c),s=x0(s,d,l.children);else if(Fs(c,t))if(d=Is(c,t),Ge(d))s=x0(s,ft(),l.children);else{const p=Ol(l.children,Qe(d));if(p){const m=p.getChild(_t(d));s=Pc(s,ft(),m)}}}else throw Gl("WriteRecord should have .snap or .children")}}return s}function MC(n,e,t,s,a){if(!s&&!a){const l=Eo(n.visibleWrites,e);if(l!=null)return l;{const c=Jr(n.visibleWrites,e);if(m_(c))return t;if(t==null&&!p_(c,ft()))return null;{const d=t||st.EMPTY_NODE;return Pl(c,d)}}}else{const l=Jr(n.visibleWrites,e);if(!a&&m_(l))return t;if(!a&&t==null&&!p_(l,ft()))return null;{const c=function(m){return(m.visible||a)&&(!s||!~s.indexOf(m.writeId))&&(Fs(m.path,e)||Fs(e,m.path))},d=PC(n.allWrites,c,e),p=t||st.EMPTY_NODE;return Pl(d,p)}}}function z2(n,e,t){let s=st.EMPTY_NODE;const a=Eo(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(In,(l,c)=>{s=s.updateImmediateChild(l,c)}),s;if(t){const l=Jr(n.visibleWrites,e);return t.forEachChild(In,(c,d)=>{const p=Pl(Jr(l,new yt(c)),d);s=s.updateImmediateChild(c,p)}),k0(l).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const l=Jr(n.visibleWrites,e);return k0(l).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function H2(n,e,t,s,a){me(s||a,"Either existingEventSnap or existingServerSnap must exist");const l=on(e,t);if(p_(n.visibleWrites,l))return null;{const c=Jr(n.visibleWrites,l);return m_(c)?a.getChild(t):Pl(c,a.getChild(t))}}function q2(n,e,t,s){const a=on(e,t),l=Eo(n.visibleWrites,a);if(l!=null)return l;if(s.isCompleteForChild(t)){const c=Jr(n.visibleWrites,a);return Pl(c,s.getNode().getImmediateChild(t))}else return null}function G2(n,e){return Eo(n.visibleWrites,e)}function W2(n,e,t,s,a,l,c){let d;const p=Jr(n.visibleWrites,e),m=Eo(p,ft());if(m!=null)d=m;else if(t!=null)d=Pl(p,t);else return[];if(d=d.withIndex(c),!d.isEmpty()&&!d.isLeafNode()){const v=[],T=c.getCompare(),E=l?d.getReverseIteratorFrom(s,c):d.getIteratorFrom(s,c);let R=E.getNext();for(;R&&v.length<a;)T(R,s)!==0&&v.push(R),R=E.getNext();return v}else return[]}function $2(){return{visibleWrites:Hs.empty(),allWrites:[],lastWriteId:-1}}function g_(n,e,t,s){return MC(n.writeTree,n.treePath,e,t,s)}function LC(n,e){return z2(n.writeTree,n.treePath,e)}function O0(n,e,t,s){return H2(n.writeTree,n.treePath,e,t,s)}function Rd(n,e){return G2(n.writeTree,on(n.treePath,e))}function K2(n,e,t,s,a,l){return W2(n.writeTree,n.treePath,e,t,s,a,l)}function py(n,e,t){return q2(n.writeTree,n.treePath,e,t)}function UC(n,e){return VC(on(n.treePath,e),n.writeTree)}function VC(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,s=e.childName;me(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),me(s!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(s);if(a){const l=a.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(s,C0(s,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(s);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(s,w2(s,a.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(s,b2(s,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(s,C0(s,e.snapshotNode,a.oldSnap));else throw Gl("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{getCompleteChild(e){return null}getChildAfterChild(e,t,s){return null}}const jC=new Q2;class my{constructor(e,t,s=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=s}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new dy(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return py(this.writes_,e,s)}}getChildAfterChild(e,t,s){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:co(this.viewCache_),l=K2(this.writes_,a,t,1,s,e);return l.length===0?null:l[0]}}function X2(n,e){me(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),me(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function Z2(n,e,t,s,a){const l=new Y2;let c,d;if(t.type===fi.OVERWRITE){const m=t;m.source.fromUser?c=__(n,e,m.path,m.snap,s,a,l):(me(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered()&&!Ge(m.path),c=Id(n,e,m.path,m.snap,s,a,d,l))}else if(t.type===fi.MERGE){const m=t;m.source.fromUser?c=eM(n,e,m.path,m.children,s,a,l):(me(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered(),c=y_(n,e,m.path,m.children,s,a,d,l))}else if(t.type===fi.ACK_USER_WRITE){const m=t;m.revert?c=sM(n,e,m.path,s,a,l):c=tM(n,e,m.path,m.affectedTree,s,a,l)}else if(t.type===fi.LISTEN_COMPLETE)c=nM(n,e,t.path,s,l);else throw Gl("Unknown operation type: "+t.type);const p=l.getChanges();return J2(e,c,p),{viewCache:c,changes:p}}function J2(n,e,t){const s=e.eventCache;if(s.isFullyInitialized()){const a=s.getNode().isLeafNode()||s.getNode().isEmpty(),l=d_(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!s.getNode().equals(l)||!s.getNode().getPriority().equals(l.getPriority()))&&t.push(S2(d_(e)))}}function BC(n,e,t,s,a,l){const c=e.eventCache;if(Rd(s,t)!=null)return e;{let d,p;if(Ge(t))if(me(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=co(e),v=m instanceof st?m:st.EMPTY_NODE,T=LC(s,v);d=n.filter.updateFullNode(e.eventCache.getNode(),T,l)}else{const m=g_(s,co(e));d=n.filter.updateFullNode(e.eventCache.getNode(),m,l)}else{const m=Qe(t);if(m===".priority"){me(ia(t)===1,"Can't have a priority with additional path components");const v=c.getNode();p=e.serverCache.getNode();const T=O0(s,t,v,p);T!=null?d=n.filter.updatePriority(v,T):d=c.getNode()}else{const v=_t(t);let T;if(c.isCompleteForChild(m)){p=e.serverCache.getNode();const E=O0(s,t,c.getNode(),p);E!=null?T=c.getNode().getImmediateChild(m).updateChild(v,E):T=c.getNode().getImmediateChild(m)}else T=py(s,m,e.serverCache);T!=null?d=n.filter.updateChild(c.getNode(),m,T,v,a,l):d=c.getNode()}}return Dc(e,d,c.isFullyInitialized()||Ge(t),n.filter.filtersNodes())}}function Id(n,e,t,s,a,l,c,d){const p=e.serverCache;let m;const v=c?n.filter:n.filter.getIndexedFilter();if(Ge(t))m=v.updateFullNode(p.getNode(),s,null);else if(v.filtersNodes()&&!p.isFiltered()){const R=p.getNode().updateChild(t,s);m=v.updateFullNode(p.getNode(),R,null)}else{const R=Qe(t);if(!p.isCompleteForPath(t)&&ia(t)>1)return e;const A=_t(t),D=p.getNode().getImmediateChild(R).updateChild(A,s);R===".priority"?m=v.updatePriority(p.getNode(),D):m=v.updateChild(p.getNode(),R,D,A,jC,null)}const T=kC(e,m,p.isFullyInitialized()||Ge(t),v.filtersNodes()),E=new my(a,T,l);return BC(n,T,t,a,E,d)}function __(n,e,t,s,a,l,c){const d=e.eventCache;let p,m;const v=new my(a,e,l);if(Ge(t))m=n.filter.updateFullNode(e.eventCache.getNode(),s,c),p=Dc(e,m,!0,n.filter.filtersNodes());else{const T=Qe(t);if(T===".priority")m=n.filter.updatePriority(e.eventCache.getNode(),s),p=Dc(e,m,d.isFullyInitialized(),d.isFiltered());else{const E=_t(t),R=d.getNode().getImmediateChild(T);let A;if(Ge(E))A=s;else{const j=v.getCompleteChild(T);j!=null?gC(E)===".priority"&&j.getChild(yC(E)).isEmpty()?A=j:A=j.updateChild(E,s):A=st.EMPTY_NODE}if(R.equals(A))p=e;else{const j=n.filter.updateChild(d.getNode(),T,A,E,v,c);p=Dc(e,j,d.isFullyInitialized(),n.filter.filtersNodes())}}}return p}function D0(n,e){return n.eventCache.isCompleteForChild(e)}function eM(n,e,t,s,a,l,c){let d=e;return s.foreach((p,m)=>{const v=on(t,p);D0(e,Qe(v))&&(d=__(n,d,v,m,a,l,c))}),s.foreach((p,m)=>{const v=on(t,p);D0(e,Qe(v))||(d=__(n,d,v,m,a,l,c))}),d}function P0(n,e,t){return t.foreach((s,a)=>{e=e.updateChild(s,a)}),e}function y_(n,e,t,s,a,l,c,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,m;Ge(t)?m=s:m=new gt(null).setTree(t,s);const v=e.serverCache.getNode();return m.children.inorderTraversal((T,E)=>{if(v.hasChild(T)){const R=e.serverCache.getNode().getImmediateChild(T),A=P0(n,R,E);p=Id(n,p,new yt(T),A,a,l,c,d)}}),m.children.inorderTraversal((T,E)=>{const R=!e.serverCache.isCompleteForChild(T)&&E.value===null;if(!v.hasChild(T)&&!R){const A=e.serverCache.getNode().getImmediateChild(T),j=P0(n,A,E);p=Id(n,p,new yt(T),j,a,l,c,d)}}),p}function tM(n,e,t,s,a,l,c){if(Rd(a,t)!=null)return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(s.value!=null){if(Ge(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return Id(n,e,t,p.getNode().getChild(t),a,l,d,c);if(Ge(t)){let m=new gt(null);return p.getNode().forEachChild(Rl,(v,T)=>{m=m.set(new yt(v),T)}),y_(n,e,t,m,a,l,d,c)}else return e}else{let m=new gt(null);return s.foreach((v,T)=>{const E=on(t,v);p.isCompleteForPath(E)&&(m=m.set(v,p.getNode().getChild(E)))}),y_(n,e,t,m,a,l,d,c)}}function nM(n,e,t,s,a){const l=e.serverCache,c=kC(e,l.getNode(),l.isFullyInitialized()||Ge(t),l.isFiltered());return BC(n,c,t,s,jC,a)}function sM(n,e,t,s,a,l){let c;if(Rd(s,t)!=null)return e;{const d=new my(s,e,a),p=e.eventCache.getNode();let m;if(Ge(t)||Qe(t)===".priority"){let v;if(e.serverCache.isFullyInitialized())v=g_(s,co(e));else{const T=e.serverCache.getNode();me(T instanceof st,"serverChildren would be complete if leaf node"),v=LC(s,T)}v=v,m=n.filter.updateFullNode(p,v,l)}else{const v=Qe(t);let T=py(s,v,e.serverCache);T==null&&e.serverCache.isCompleteForChild(v)&&(T=p.getImmediateChild(v)),T!=null?m=n.filter.updateChild(p,v,T,_t(t),d,l):e.eventCache.getNode().hasChild(v)?m=n.filter.updateChild(p,v,st.EMPTY_NODE,_t(t),d,l):m=p,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=g_(s,co(e)),c.isLeafNode()&&(m=n.filter.updateFullNode(m,c,l)))}return c=e.serverCache.isFullyInitialized()||Rd(s,ft())!=null,Dc(e,m,c,n.filter.filtersNodes())}}function iM(n,e){const t=co(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ge(e)&&!t.getImmediateChild(Qe(e)).isEmpty())?t.getChild(e):null}function M0(n,e,t,s){e.type===fi.MERGE&&e.source.queryId!==null&&(me(co(n.viewCache_),"We should always have a full cache before handling merges"),me(d_(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,l=Z2(n.processor_,a,e,t,s);return X2(n.processor_,l.viewCache),me(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,rM(n,l.changes,l.viewCache.eventCache.getNode())}function rM(n,e,t,s){const a=n.eventRegistrations_;return O2(n.eventGenerator_,e,t,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L0;function aM(n){me(!L0,"__referenceConstructor has already been defined"),L0=n}function gy(n,e,t,s){const a=e.source.queryId;if(a!==null){const l=n.views.get(a);return me(l!=null,"SyncTree gave us an op for an invalid query."),M0(l,e,t,s)}else{let l=[];for(const c of n.views.values())l=l.concat(M0(c,e,t,s));return l}}function _y(n,e){let t=null;for(const s of n.views.values())t=t||iM(s,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U0;function oM(n){me(!U0,"__referenceConstructor has already been defined"),U0=n}class V0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new gt(null),this.pendingWriteTree_=$2(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lM(n,e,t,s,a){return L2(n.pendingWriteTree_,e,t,s,a),a?np(n,new uo(RC(),e,t)):[]}function Cl(n,e,t=!1){const s=U2(n.pendingWriteTree_,e);if(V2(n.pendingWriteTree_,e)){let l=new gt(null);return s.snap!=null?l=l.set(ft(),!0):Ns(s.children,c=>{l=l.set(new yt(c),!0)}),np(n,new Ad(s.path,l,t))}else return[]}function tp(n,e,t){return np(n,new uo(IC(),e,t))}function uM(n,e,t){const s=gt.fromObject(t);return np(n,new $c(IC(),e,s))}function cM(n,e,t,s){const a=qC(n,s);if(a!=null){const l=GC(a),c=l.path,d=l.queryId,p=Is(c,e),m=new uo(xC(d),p,t);return WC(n,c,m)}else return[]}function hM(n,e,t,s){const a=qC(n,s);if(a){const l=GC(a),c=l.path,d=l.queryId,p=Is(c,e),m=gt.fromObject(t),v=new $c(xC(d),p,m);return WC(n,c,v)}else return[]}function FC(n,e,t){const a=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(c,d)=>{const p=Is(c,e),m=_y(d,p);if(m)return m});return MC(a,e,l,t,!0)}function np(n,e){return zC(e,n.syncPointTree_,null,DC(n.pendingWriteTree_,ft()))}function zC(n,e,t,s){if(Ge(n.path))return HC(n,e,t,s);{const a=e.get(ft());t==null&&a!=null&&(t=_y(a,ft()));let l=[];const c=Qe(n.path),d=n.operationForChild(c),p=e.children.get(c);if(p&&d){const m=t?t.getImmediateChild(c):null,v=UC(s,c);l=l.concat(zC(d,p,m,v))}return a&&(l=l.concat(gy(a,n,s,t))),l}}function HC(n,e,t,s){const a=e.get(ft());t==null&&a!=null&&(t=_y(a,ft()));let l=[];return e.children.inorderTraversal((c,d)=>{const p=t?t.getImmediateChild(c):null,m=UC(s,c),v=n.operationForChild(c);v&&(l=l.concat(HC(v,d,p,m)))}),a&&(l=l.concat(gy(a,n,s,t))),l}function qC(n,e){return n.tagToQueryMap.get(e)}function GC(n){const e=n.indexOf("$");return me(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new yt(n.substr(0,e))}}function WC(n,e,t){const s=n.syncPointTree_.get(e);me(s,"Missing sync point for query tag that we're tracking");const a=DC(n.pendingWriteTree_,e);return gy(s,t,a,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new yy(t)}node(){return this.node_}}class vy{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=on(this.path_,e);return new vy(this.syncTree_,t)}node(){return FC(this.syncTree_,this.path_)}}const fM=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},j0=function(n,e,t){if(!n||typeof n!="object")return n;if(me(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return dM(n[".sv"],e,t);if(typeof n[".sv"]=="object")return pM(n[".sv"],e);me(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},dM=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:me(!1,"Unexpected server value: "+n)}},pM=function(n,e,t){n.hasOwnProperty("increment")||me(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const s=n.increment;typeof s!="number"&&me(!1,"Unexpected increment value: "+s);const a=e.node();if(me(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return s;const c=a.getValue();return typeof c!="number"?s:c+s},mM=function(n,e,t,s){return Ty(e,new vy(t,n),s)},gM=function(n,e,t){return Ty(n,new yy(e),t)};function Ty(n,e,t){const s=n.getPriority().val(),a=j0(s,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const c=n,d=j0(c.getValue(),e,t);return d!==c.getValue()||a!==c.getPriority().val()?new rn(d,An(a)):n}else{const c=n;return l=c,a!==c.getPriority().val()&&(l=l.updatePriority(new rn(a))),c.forEachChild(In,(d,p)=>{const m=Ty(p,e.getImmediateChild(d),t);m!==p&&(l=l.updateImmediateChild(d,m))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e="",t=null,s={children:{},childCount:0}){this.name=e,this.parent=t,this.node=s}}function Sy(n,e){let t=e instanceof yt?e:new yt(e),s=n,a=Qe(t);for(;a!==null;){const l=Ol(s.node.children,a)||{children:{},childCount:0};s=new Ey(a,s,l),t=_t(t),a=Qe(t)}return s}function Kl(n){return n.node.value}function $C(n,e){n.node.value=e,v_(n)}function KC(n){return n.node.childCount>0}function _M(n){return Kl(n)===void 0&&!KC(n)}function sp(n,e){Ns(n.node.children,(t,s)=>{e(new Ey(t,n,s))})}function YC(n,e,t,s){t&&e(n),sp(n,a=>{YC(a,e,!0)})}function yM(n,e,t){let s=n.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function ch(n){return new yt(n.parent===null?n.name:ch(n.parent)+"/"+n.name)}function v_(n){n.parent!==null&&vM(n.parent,n.name,n)}function vM(n,e,t){const s=_M(t),a=fr(n.node.children,e);s&&a?(delete n.node.children[e],n.node.childCount--,v_(n)):!s&&!a&&(n.node.children[e]=t.node,n.node.childCount++,v_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=/[\[\].#$\/\u0000-\u001F\u007F]/,EM=/[\[\].#$\u0000-\u001F\u007F]/,Hg=10*1024*1024,QC=function(n){return typeof n=="string"&&n.length!==0&&!TM.test(n)},SM=function(n){return typeof n=="string"&&n.length!==0&&!EM.test(n)},bM=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),SM(n)},XC=function(n,e,t){const s=t instanceof yt?new n2(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+no(s));if(typeof e=="function")throw new Error(n+"contains a function "+no(s)+" with contents = "+e.toString());if(Qw(e))throw new Error(n+"contains "+e.toString()+" "+no(s));if(typeof e=="string"&&e.length>Hg/3&&Xd(e)>Hg)throw new Error(n+"contains a string greater than "+Hg+" utf8 bytes "+no(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,l=!1;if(Ns(e,(c,d)=>{if(c===".value")a=!0;else if(c!==".priority"&&c!==".sv"&&(l=!0,!QC(c)))throw new Error(n+" contains an invalid key ("+c+") "+no(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);s2(s,c),XC(n,d,s),i2(s)}),a&&l)throw new Error(n+' contains ".value" child '+no(s)+" in addition to actual children.")}},wM=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!QC(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!bM(t))throw new Error(eD(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function AM(n,e){let t=null;for(let s=0;s<e.length;s++){const a=e[s],l=a.getPath();t!==null&&!vC(l,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(a)}t&&n.eventLists_.push(t)}function So(n,e,t){AM(n,t),RM(n,s=>Fs(s,e)||Fs(e,s))}function RM(n,e){n.recursionDepth_++;let t=!0;for(let s=0;s<n.eventLists_.length;s++){const a=n.eventLists_[s];if(a){const l=a.path;e(l)?(IM(n.eventLists_[s]),n.eventLists_[s]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function IM(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const s=t.getEventRunner();kc&&Cn("event: "+t.toString()),lh(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="repo_interrupt",NM=25;class kM{constructor(e,t,s,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=s,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new CM,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Cd(),this.transactionQueueTree_=new Ey,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function OM(n,e,t){if(n.stats_=ly(n.repoInfo_),n.forceRestClient_||AP())n.server_=new wd(n.repoInfo_,(s,a,l,c)=>{B0(n,s,a,l,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>F0(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{gn(t)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}n.persistentConnection_=new sr(n.repoInfo_,e,(s,a,l,c)=>{B0(n,s,a,l,c)},s=>{F0(n,s)},s=>{PM(n,s)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(s=>{n.server_.refreshAuthToken(s)}),n.appCheckProvider_.addTokenChangeListener(s=>{n.server_.refreshAppCheckToken(s.token)}),n.statsReporter_=OP(n.repoInfo_,()=>new k2(n.stats_,n.server_)),n.infoData_=new A2,n.infoSyncTree_=new V0({startListening:(s,a,l,c)=>{let d=[];const p=n.infoData_.getNode(s._path);return p.isEmpty()||(d=tp(n.infoSyncTree_,s._path,p),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),by(n,"connected",!1),n.serverSyncTree_=new V0({startListening:(s,a,l,c)=>(n.server_.listen(s,l,a,(d,p)=>{const m=c(d,p);So(n.eventQueue_,s._path,m)}),[]),stopListening:(s,a)=>{n.server_.unlisten(s,a)}})}function DM(n){const t=n.infoData_.getNode(new yt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function ZC(n){return fM({timestamp:DM(n)})}function B0(n,e,t,s,a){n.dataUpdateCount++;const l=new yt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(a)if(s){const p=vd(t,m=>An(m));c=hM(n.serverSyncTree_,l,p,a)}else{const p=An(t);c=cM(n.serverSyncTree_,l,p,a)}else if(s){const p=vd(t,m=>An(m));c=uM(n.serverSyncTree_,l,p)}else{const p=An(t);c=tp(n.serverSyncTree_,l,p)}let d=l;c.length>0&&(d=Cy(n,l)),So(n.eventQueue_,d,c)}function F0(n,e){by(n,"connected",e),e===!1&&LM(n)}function PM(n,e){Ns(e,(t,s)=>{by(n,t,s)})}function by(n,e,t){const s=new yt("/.info/"+e),a=An(t);n.infoData_.updateSnapshot(s,a);const l=tp(n.infoSyncTree_,s,a);So(n.eventQueue_,s,l)}function MM(n){return n.nextWriteId_++}function LM(n){JC(n,"onDisconnectEvents");const e=ZC(n),t=Cd();f_(n.onDisconnect_,ft(),(a,l)=>{const c=mM(a,l,n.serverSyncTree_,e);AC(t,a,c)});let s=[];f_(t,ft(),(a,l)=>{s=s.concat(tp(n.serverSyncTree_,a,l));const c=BM(n,a);Cy(n,c)}),n.onDisconnect_=Cd(),So(n.eventQueue_,ft(),s)}function UM(n){n.persistentConnection_&&n.persistentConnection_.interrupt(xM)}function JC(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Cn(t,...e)}function eA(n,e,t){return FC(n.serverSyncTree_,e,t)||st.EMPTY_NODE}function wy(n,e=n.transactionQueueTree_){if(e||ip(n,e),Kl(e)){const t=nA(n,e);me(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&VM(n,ch(e),t)}else KC(e)&&sp(e,t=>{wy(n,t)})}function VM(n,e,t){const s=t.map(m=>m.currentWriteId),a=eA(n,e,s);let l=a;const c=a.hash();for(let m=0;m<t.length;m++){const v=t[m];me(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const T=Is(e,v.path);l=l.updateChild(T,v.currentOutputSnapshotRaw)}const d=l.val(!0),p=e;n.server_.put(p.toString(),d,m=>{JC(n,"transaction put response",{path:p.toString(),status:m});let v=[];if(m==="ok"){const T=[];for(let E=0;E<t.length;E++)t[E].status=2,v=v.concat(Cl(n.serverSyncTree_,t[E].currentWriteId)),t[E].onComplete&&T.push(()=>t[E].onComplete(null,!0,t[E].currentOutputSnapshotResolved)),t[E].unwatcher();ip(n,Sy(n.transactionQueueTree_,e)),wy(n,n.transactionQueueTree_),So(n.eventQueue_,e,v);for(let E=0;E<T.length;E++)lh(T[E])}else{if(m==="datastale")for(let T=0;T<t.length;T++)t[T].status===3?t[T].status=4:t[T].status=0;else{ls("transaction at "+p.toString()+" failed: "+m);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=m}Cy(n,e)}},c)}function Cy(n,e){const t=tA(n,e),s=ch(t),a=nA(n,t);return jM(n,a,s),s}function jM(n,e,t){if(e.length===0)return;const s=[];let a=[];const c=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],m=Is(t,p.path);let v=!1,T;if(me(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)v=!0,T=p.abortReason,a=a.concat(Cl(n.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=NM)v=!0,T="maxretry",a=a.concat(Cl(n.serverSyncTree_,p.currentWriteId,!0));else{const E=eA(n,p.path,c);p.currentInputSnapshot=E;const R=e[d].update(E.val());if(R!==void 0){XC("transaction failed: Data returned ",R,p.path);let A=An(R);typeof R=="object"&&R!=null&&fr(R,".priority")||(A=A.updatePriority(E.getPriority()));const D=p.currentWriteId,M=ZC(n),z=gM(A,E,M);p.currentOutputSnapshotRaw=A,p.currentOutputSnapshotResolved=z,p.currentWriteId=MM(n),c.splice(c.indexOf(D),1),a=a.concat(lM(n.serverSyncTree_,p.path,z,p.currentWriteId,p.applyLocally)),a=a.concat(Cl(n.serverSyncTree_,D,!0))}else v=!0,T="nodata",a=a.concat(Cl(n.serverSyncTree_,p.currentWriteId,!0))}So(n.eventQueue_,t,a),a=[],v&&(e[d].status=2,function(E){setTimeout(E,Math.floor(0))}(e[d].unwatcher),e[d].onComplete&&(T==="nodata"?s.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):s.push(()=>e[d].onComplete(new Error(T),!1,null))))}ip(n,n.transactionQueueTree_);for(let d=0;d<s.length;d++)lh(s[d]);wy(n,n.transactionQueueTree_)}function tA(n,e){let t,s=n.transactionQueueTree_;for(t=Qe(e);t!==null&&Kl(s)===void 0;)s=Sy(s,t),e=_t(e),t=Qe(e);return s}function nA(n,e){const t=[];return sA(n,e,t),t.sort((s,a)=>s.order-a.order),t}function sA(n,e,t){const s=Kl(e);if(s)for(let a=0;a<s.length;a++)t.push(s[a]);sp(e,a=>{sA(n,a,t)})}function ip(n,e){const t=Kl(e);if(t){let s=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[s]=t[a],s++);t.length=s,$C(e,t.length>0?t:void 0)}sp(e,s=>{ip(n,s)})}function BM(n,e){const t=ch(tA(n,e)),s=Sy(n.transactionQueueTree_,e);return yM(s,a=>{qg(n,a)}),qg(n,s),YC(s,a=>{qg(n,a)}),t}function qg(n,e){const t=Kl(e);if(t){const s=[];let a=[],l=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(me(l===c-1,"All SENT items should be at beginning of queue."),l=c,t[c].status=3,t[c].abortReason="set"):(me(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),a=a.concat(Cl(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&s.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));l===-1?$C(e,void 0):t.length=l+1,So(n.eventQueue_,ch(e),a);for(let c=0;c<s.length;c++)lh(s[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(n){let e="";const t=n.split("/");for(let s=0;s<t.length;s++)if(t[s].length>0){let a=t[s];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function zM(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const s=t.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ls(`Invalid query segment '${t}' in query '${n}'`)}return e}const z0=function(n,e){const t=HM(n),s=t.namespace;t.domain==="firebase.com"&&oo(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&t.domain!=="localhost"&&oo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||yP();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new xP(t.host,t.secure,s,a,e,"",s!==t.subdomain),path:new yt(t.pathString)}},HM=function(n){let e="",t="",s="",a="",l="",c=!0,d="https",p=443;if(typeof n=="string"){let m=n.indexOf("//");m>=0&&(d=n.substring(0,m-1),n=n.substring(m+2));let v=n.indexOf("/");v===-1&&(v=n.length);let T=n.indexOf("?");T===-1&&(T=n.length),e=n.substring(0,Math.min(v,T)),v<T&&(a=FM(n.substring(v,T)));const E=zM(n.substring(Math.min(n.length,T)));m=e.indexOf(":"),m>=0?(c=d==="https"||d==="wss",p=parseInt(e.substring(m+1),10)):m=e.length;const R=e.slice(0,m);if(R.toLowerCase()==="localhost")t="localhost";else if(R.split(".").length<=2)t=R;else{const A=e.indexOf(".");s=e.substring(0,A).toLowerCase(),t=e.substring(A+1),l=s}"ns"in E&&(l=E.ns)}return{host:e,port:p,domain:t,subdomain:s,secure:c,scheme:d,pathString:a,namespace:l}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,t,s,a){this._repo=e,this._path=t,this._queryParams=s,this._orderByCalled=a}get key(){return Ge(this._path)?null:gC(this._path)}get ref(){return new Yl(this._repo,this._path)}get _queryIdentifier(){const e=R0(this._queryParams),t=ay(e);return t==="{}"?"default":t}get _queryObject(){return R0(this._queryParams)}isEqual(e){if(e=bt(e),!(e instanceof Ay))return!1;const t=this._repo===e._repo,s=vC(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&s&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+t2(this._path)}}class Yl extends Ay{constructor(e,t){super(e,t,new fy,!1)}get parent(){const e=yC(this._path);return e===null?null:new Yl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}aM(Yl);oM(Yl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="FIREBASE_DATABASE_EMULATOR_HOST",T_={};let GM=!1;function WM(n,e,t,s,a){let l=s||n.options.databaseURL;l===void 0&&(n.options.projectId||oo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Cn("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=z0(l,a),d=c.repoInfo,p;typeof process<"u"&&l0&&(p=l0[qM]),p?(l=`http://${p}?ns=${d.namespace}`,c=z0(l,a),d=c.repoInfo):c.repoInfo.secure;const m=new IP(n.name,n.options,e);wM("Invalid Firebase Database URL",c),Ge(c.path)||oo("Database URL must point to the root of a Firebase Database (not including a child path).");const v=KM(d,n,m,new RP(n,t));return new YM(v,n)}function $M(n,e){const t=T_[e];(!t||t[n.key]!==n)&&oo(`Database ${e}(${n.repoInfo_}) has already been deleted.`),UM(n),delete t[n.key]}function KM(n,e,t,s){let a=T_[e.name];a||(a={},T_[e.name]=a);let l=a[n.toURLString()];return l&&oo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new kM(n,GM,t,s),a[n.toURLString()]=l,l}class YM{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(OM(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Yl(this._repo,ft())),this._rootInternal}_delete(){return this._rootInternal!==null&&($M(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&oo("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(n){fP(fa),sa(new ar("database",(e,{instanceIdentifier:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return WM(s,a,l,t)},"PUBLIC").setMultipleInstances(!0)),xs(u0,c0,n),xs(u0,c0,"esm2017")}sr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};sr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};QM();function Ry(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function iA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XM=iA,rA=new rh("auth","Firebase",iA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Zd("@firebase/auth");function ZM(n,...e){xd.logLevel<=ze.WARN&&xd.warn(`Auth (${fa}): ${n}`,...e)}function od(n,...e){xd.logLevel<=ze.ERROR&&xd.error(`Auth (${fa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(n,...e){throw xy(n,...e)}function qs(n,...e){return xy(n,...e)}function Iy(n,e,t){const s=Object.assign(Object.assign({},XM()),{[e]:t});return new rh("auth","Firebase",s).create(e,{appName:n.name})}function ir(n){return Iy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JM(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&ks(n,"argument-error"),Iy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xy(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return rA.create(n,...e)}function Ie(n,e,...t){if(!n)throw xy(e,...t)}function er(n){const e="INTERNAL ASSERTION FAILED: "+n;throw od(e),new Error(e)}function lr(n,e){n||er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function eL(){return H0()==="http:"||H0()==="https:"}function H0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eL()||jO()||"connection"in navigator)?navigator.onLine:!0}function nL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t){this.shortDelay=e,this.longDelay=t,lr(t>e,"Short delay should be less than long delay!"),this.isMobile=ny()||Fw()}get(){return tL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(n,e){lr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rL=new hh(3e4,6e4);function da(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function pa(n,e,t,s,a={}){return oA(n,a,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const d=Wl(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},l);return VO()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&To(n.emulatorConfig.host)&&(m.credentials="include"),aA.fetch()(await lA(n,n.config.apiHost,t,d),m)})}async function oA(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},sL),e);try{const a=new oL(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw $f(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw $f(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw $f(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw $f(n,"user-disabled",c);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Iy(n,v,m);ks(n,v)}}catch(a){if(a instanceof Si)throw a;ks(n,"network-request-failed",{message:String(a)})}}async function fh(n,e,t,s,a={}){const l=await pa(n,e,t,s,a);return"mfaPendingCredential"in l&&ks(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function lA(n,e,t,s){const a=`${e}${t}?${s}`,l=n,c=l.config.emulator?Ny(n.config,a):`${n.config.apiScheme}://${a}`;return iL.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function aL(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(qs(this.auth,"network-request-failed")),rL.get())})}}function $f(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=qs(n,e,s);return a.customData._tokenResponse=t,a}function q0(n){return n!==void 0&&n.enterprise!==void 0}class lL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return aL(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uL(n,e){return pa(n,"GET","/v2/recaptchaConfig",da(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL(n,e){return pa(n,"POST","/v1/accounts:delete",e)}async function Nd(n,e){return pa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hL(n,e=!1){const t=bt(n),s=await t.getIdToken(e),a=ky(s);Ie(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Mc(Gg(a.auth_time)),issuedAtTime:Mc(Gg(a.iat)),expirationTime:Mc(Gg(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Gg(n){return Number(n)*1e3}function ky(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return od("JWT malformed, contained fewer than 3 sections"),null;try{const a=yd(t);return a?JSON.parse(a):(od("Failed to decode base64 JWT payload"),null)}catch(a){return od("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function G0(n){const e=ky(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Si&&fL(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function fL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mc(this.lastLoginAt),this.creationTime=Mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(n){var e;const t=n.auth,s=await n.getIdToken(),a=await Kc(n,Nd(t,{idToken:s}));Ie(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?uA(l.providerUserInfo):[],d=mL(n.providerData,c),p=n.isAnonymous,m=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),v=p?m:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new S_(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,T)}async function pL(n){const e=bt(n);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mL(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function uA(n){return n.map(e=>{var{providerId:t}=e,s=Ry(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gL(n,e){const t=await oA(n,{},async()=>{const s=Wl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await lA(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",aA.fetch()(c,{method:"POST",headers:d,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _L(n,e){return pa(n,"POST","/v2/accounts:revokeToken",da(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):G0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=G0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await gL(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,c=new Il;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(Ie(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ie(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Il,this.toJSON())}_performRefresh(){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class zs{constructor(e){var{uid:t,auth:s,stsTokenManager:a}=e,l=Ry(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new S_(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Kc(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return hL(this,e)}reload(){return pL(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await kd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(ir(this.auth));const e=await this.getIdToken();return await Kc(this,cL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,a,l,c,d,p,m,v;const T=(s=t.displayName)!==null&&s!==void 0?s:void 0,E=(a=t.email)!==null&&a!==void 0?a:void 0,R=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,A=(c=t.photoURL)!==null&&c!==void 0?c:void 0,j=(d=t.tenantId)!==null&&d!==void 0?d:void 0,D=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,M=(m=t.createdAt)!==null&&m!==void 0?m:void 0,z=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:q,emailVerified:ne,isAnonymous:ue,providerData:ee,stsTokenManager:O}=t;Ie(q&&O,e,"internal-error");const I=Il.fromJSON(this.name,O);Ie(typeof q=="string",e,"internal-error"),Hr(T,e.name),Hr(E,e.name),Ie(typeof ne=="boolean",e,"internal-error"),Ie(typeof ue=="boolean",e,"internal-error"),Hr(R,e.name),Hr(A,e.name),Hr(j,e.name),Hr(D,e.name),Hr(M,e.name),Hr(z,e.name);const N=new zs({uid:q,auth:e,email:E,emailVerified:ne,displayName:T,isAnonymous:ue,photoURL:A,phoneNumber:R,tenantId:j,stsTokenManager:I,createdAt:M,lastLoginAt:z});return ee&&Array.isArray(ee)&&(N.providerData=ee.map(V=>Object.assign({},V))),D&&(N._redirectEventId=D),N}static async _fromIdTokenResponse(e,t,s=!1){const a=new Il;a.updateFromServerResponse(t);const l=new zs({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await kd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Ie(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?uA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new Il;d.updateFromIdToken(s);const p=new zs({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new S_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new Map;function tr(n){lr(n instanceof Function,"Expected a class definition");let e=W0.get(n);return e?(lr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,W0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}cA.type="NONE";const $0=cA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(n,e,t){return`firebase:${n}:${e}:${t}`}class xl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=ld(this.userKey,a.apiKey,l),this.fullPersistenceKey=ld("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Nd(this.auth,{idToken:e}).catch(()=>{});return t?zs._fromGetAccountInfoResponse(this.auth,t,e):null}return zs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new xl(tr($0),e,s);const a=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=a[0]||tr($0);const c=ld(s,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(c);if(v){let T;if(typeof v=="string"){const E=await Nd(e,{idToken:v}).catch(()=>{});if(!E)break;T=await zs._fromGetAccountInfoResponse(e,E,v)}else T=zs._fromJSON(e,v);m!==l&&(d=T),l=m;break}}catch{}const p=a.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new xl(l,e,s):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new xl(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gA(e))return"Blackberry";if(_A(e))return"Webos";if(fA(e))return"Safari";if((e.includes("chrome/")||dA(e))&&!e.includes("edge/"))return"Chrome";if(mA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function hA(n=xn()){return/firefox\//i.test(n)}function fA(n=xn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dA(n=xn()){return/crios\//i.test(n)}function pA(n=xn()){return/iemobile/i.test(n)}function mA(n=xn()){return/android/i.test(n)}function gA(n=xn()){return/blackberry/i.test(n)}function _A(n=xn()){return/webos/i.test(n)}function Oy(n=xn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yL(n=xn()){var e;return Oy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vL(){return BO()&&document.documentMode===10}function yA(n=xn()){return Oy(n)||mA(n)||_A(n)||gA(n)||/windows phone/i.test(n)||pA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(n,e=[]){let t;switch(n){case"Browser":t=K0(xn());break;case"Worker":t=`${K0(xn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EL(n,e={}){return pa(n,"GET","/v2/passwordPolicy",da(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=6;class bL{constructor(e){var t,s,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:SL,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,a,l,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y0(this),this.idTokenSubscription=new Y0(this),this.beforeStateQueue=new TL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=tr(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await xl.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Nd(this,{idToken:e}),s=await zs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(jn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(a=p.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(ir(this));const t=e?bt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EL(this),t=new bL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rh("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await _L(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&tr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await xl.create(this,[tr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&ZM(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ma(n){return bt(n)}class Y0{constructor(e){this.auth=e,this.observer=null,this.addObserver=XO(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CL(n){rp=n}function TA(n){return rp.loadJS(n)}function AL(){return rp.recaptchaEnterpriseScript}function RL(){return rp.gapiScript}function IL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class xL{constructor(){this.enterprise=new NL}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class NL{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const kL="recaptcha-enterprise",EA="NO_RECAPTCHA";class OL{constructor(e){this.type=kL,this.auth=ma(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{uL(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new lL(p);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(p=>{d(p)})})}function a(l,c,d){const p=window.grecaptcha;q0(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(EA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xL().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(d=>{if(!t&&q0(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=AL();p.length!==0&&(p+=d),TA(p).then(()=>{a(d,l,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function Q0(n,e,t,s=!1,a=!1){const l=new OL(n);let c;if(a)c=EA;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function b_(n,e,t,s,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Q0(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Q0(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(n,e){const t=Jd(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(na(l,e??{}))return a;ks(a,"already-initialized")}return t.initialize({options:e})}function PL(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(tr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function ML(n,e,t){const s=ma(n);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=SA(e),{host:c,port:d}=LL(e),p=d===null?"":`:${d}`,m={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(na(m,s.config.emulator)&&na(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,To(c)?(ey(`${l}//${c}${p}`),ty("Auth",!0)):UL()}function SA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function LL(n){const e=SA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:X0(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:X0(c)}}}function X0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function UL(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,t){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}async function VL(n,e){return pa(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jL(n,e){return fh(n,"POST","/v1/accounts:signInWithPassword",da(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(n,e){return fh(n,"POST","/v1/accounts:signInWithEmailLink",da(n,e))}async function FL(n,e){return fh(n,"POST","/v1/accounts:signInWithEmailLink",da(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends Dy{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Yc(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Yc(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return b_(e,t,"signInWithPassword",jL);case"emailLink":return BL(e,{email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return b_(e,s,"signUpPassword",VL);case"emailLink":return FL(e,{idToken:t,email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(n,e){return fh(n,"POST","/v1/accounts:signInWithIdp",da(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL="http://localhost";class ho extends Dy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ks("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=t,l=Ry(t,["providerId","signInMethod"]);if(!s||!a)return null;const c=new ho(s,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Nl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Nl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Nl(e,t)}buildRequest(){const e={requestUri:zL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Wl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qL(n){const e=wc(Cc(n)).link,t=e?wc(Cc(e)).deep_link_id:null,s=wc(Cc(n)).deep_link_id;return(s?wc(Cc(s)).link:null)||s||t||e||n}class Py{constructor(e){var t,s,a,l,c,d;const p=wc(Cc(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(s=p.oobCode)!==null&&s!==void 0?s:null,T=HL((a=p.mode)!==null&&a!==void 0?a:null);Ie(m&&v&&T,"argument-error"),this.apiKey=m,this.operation=T,this.code=v,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=qL(e);try{return new Py(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(){this.providerId=Ql.PROVIDER_ID}static credential(e,t){return Yc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Py.parseLink(t);return Ie(s,"argument-error"),Yc._fromEmailAndCode(e,s.code,s.tenantId)}}Ql.PROVIDER_ID="password";Ql.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ql.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends My{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends dh{constructor(){super("facebook.com")}static credential(e){return ho._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends dh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ho._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Qi.credential(t,s)}catch{return null}}}Qi.GOOGLE_SIGN_IN_METHOD="google.com";Qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends dh{constructor(){super("github.com")}static credential(e){return ho._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.GITHUB_SIGN_IN_METHOD="github.com";Kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends dh{constructor(){super("twitter.com")}static credential(e,t){return ho._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Yr.credential(t,s)}catch{return null}}}Yr.TWITTER_SIGN_IN_METHOD="twitter.com";Yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(n,e){return fh(n,"POST","/v1/accounts:signUp",da(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await zs._fromIdTokenResponse(e,s,a),c=Z0(s);return new fo({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=Z0(s);return new fo({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function Z0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends Si{constructor(e,t,s,a){var l;super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Od.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Od(e,t,s,a)}}function bA(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Od._fromErrorAndOperation(n,l,e,s):l})}async function WL(n,e,t=!1){const s=await Kc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return fo._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $L(n,e,t=!1){const{auth:s}=n;if(jn(s.app))return Promise.reject(ir(s));const a="reauthenticate";try{const l=await Kc(n,bA(s,a,e,n),t);Ie(l.idToken,s,"internal-error");const c=ky(l.idToken);Ie(c,s,"internal-error");const{sub:d}=c;return Ie(n.uid===d,s,"user-mismatch"),fo._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ks(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(n,e,t=!1){if(jn(n.app))return Promise.reject(ir(n));const s="signIn",a=await bA(n,s,e),l=await fo._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}async function KL(n,e){return wA(ma(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(n){const e=ma(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YL(n,e,t){if(jn(n.app))return Promise.reject(ir(n));const s=ma(n),c=await b_(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GL).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&CA(n),p}),d=await fo._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(d.user),d}function QL(n,e,t){return jn(n.app)?Promise.reject(ir(n)):KL(bt(n),Ql.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&CA(n),s})}function XL(n,e,t,s){return bt(n).onIdTokenChanged(e,t,s)}function ZL(n,e,t){return bt(n).beforeAuthStateChanged(e,t)}function JL(n,e,t,s){return bt(n).onAuthStateChanged(e,t,s)}function eU(n){return bt(n).signOut()}const Dd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dd,"1"),this.storage.removeItem(Dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU=1e3,nU=10;class RA extends AA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);vL()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,nU):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},tU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}RA.type="LOCAL";const sU=RA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends AA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}IA.type="SESSION";const xA=IA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new ap(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const d=Array.from(c).map(async m=>m(t.origin,l)),p=await iU(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ap.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const m=Ly("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(T){const E=T;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(E.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(){return window}function aU(n){pi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){return typeof pi().WorkerGlobalScope<"u"&&typeof pi().importScripts=="function"}async function oU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function uU(){return NA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="firebaseLocalStorageDb",cU=1,Pd="firebaseLocalStorage",OA="fbase_key";class ph{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function op(n,e){return n.transaction([Pd],e?"readwrite":"readonly").objectStore(Pd)}function hU(){const n=indexedDB.deleteDatabase(kA);return new ph(n).toPromise()}function w_(){const n=indexedDB.open(kA,cU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Pd,{keyPath:OA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Pd)?e(s):(s.close(),await hU(),e(await w_()))})})}async function J0(n,e,t){const s=op(n,!0).put({[OA]:e,value:t});return new ph(s).toPromise()}async function fU(n,e){const t=op(n,!1).get(e),s=await new ph(t).toPromise();return s===void 0?null:s.value}function eb(n,e){const t=op(n,!0).delete(e);return new ph(t).toPromise()}const dU=800,pU=3;class DA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await w_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>pU)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ap._getInstance(uU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await oU(),!this.activeServiceWorker)return;this.sender=new rU(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await w_();return await J0(e,Dd,"1"),await eb(e,Dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>J0(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>fU(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>eb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=op(a,!1).getAll();return new ph(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DA.type="LOCAL";const mU=DA;new hh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(n,e){return e?tr(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy extends Dy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Nl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gU(n){return wA(n.auth,new Uy(n),n.bypassAuthState)}function _U(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),$L(t,new Uy(n),n.bypassAuthState)}async function yU(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),WL(t,new Uy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gU;case"linkViaPopup":case"linkViaRedirect":return yU;case"reauthViaPopup":case"reauthViaRedirect":return _U;default:ks(this.auth,"internal-error")}}resolve(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU=new hh(2e3,1e4);async function TU(n,e,t){if(jn(n.app))return Promise.reject(qs(n,"operation-not-supported-in-this-environment"));const s=ma(n);JM(n,e,My);const a=PA(s,t);return new io(s,"signInViaPopup",e,a).executeNotNull()}class io extends MA{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){lr(this.filter.length===1,"Popup operations only handle one event");const e=Ly();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(qs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vU.get())};e()}}io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU="pendingRedirect",ud=new Map;class SU extends MA{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=ud.get(this.auth._key());if(!e){try{const s=await bU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}ud.set(this.auth._key(),e)}return this.bypassAuthState||ud.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bU(n,e){const t=AU(e),s=CU(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function wU(n,e){ud.set(n._key(),e)}function CU(n){return tr(n._redirectPersistence)}function AU(n){return ld(EU,n.config.apiKey,n.name)}async function RU(n,e,t=!1){if(jn(n.app))return Promise.reject(ir(n));const s=ma(n),a=PA(s,e),c=await new SU(s,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU=10*60*1e3;class xU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!LA(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(qs(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IU&&this.cachedEventUids.clear(),this.cachedEventUids.has(tb(e))}saveEventToCache(e){this.cachedEventUids.add(tb(e)),this.lastProcessedEventTime=Date.now()}}function tb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function LA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(n,e={}){return pa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DU=/^https?/;async function PU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await kU(n);for(const t of e)try{if(MU(t))return}catch{}ks(n,"unauthorized-domain")}function MU(n){const e=E_(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!DU.test(t))return!1;if(OU.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=new hh(3e4,6e4);function nb(){const n=pi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function UU(n){return new Promise((e,t)=>{var s,a,l;function c(){nb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nb(),t(qs(n,"network-request-failed"))},timeout:LU.get()})}if(!((a=(s=pi().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=pi().gapi)===null||l===void 0)&&l.load)c();else{const d=IL("iframefcb");return pi()[d]=()=>{gapi.load?c():t(qs(n,"network-request-failed"))},TA(`${RL()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw cd=null,e})}let cd=null;function VU(n){return cd=cd||UU(n),cd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU=new hh(5e3,15e3),BU="__/auth/iframe",FU="emulator/auth/iframe",zU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qU(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ny(e,FU):`https://${n.config.authDomain}/${BU}`,s={apiKey:e.apiKey,appName:n.name,v:fa},a=HU.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Wl(s).slice(1)}`}async function GU(n){const e=await VU(n),t=pi().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:qU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zU,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const c=qs(n,"network-request-failed"),d=pi().setTimeout(()=>{l(c)},jU.get());function p(){pi().clearTimeout(d),a(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$U=500,KU=600,YU="_blank",QU="http://localhost";class sb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XU(n,e,t,s=$U,a=KU){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p=Object.assign(Object.assign({},WU),{width:s.toString(),height:a.toString(),top:l,left:c}),m=xn().toLowerCase();t&&(d=dA(m)?YU:t),hA(m)&&(e=e||QU,p.scrollbars="yes");const v=Object.entries(p).reduce((E,[R,A])=>`${E}${R}=${A},`,"");if(yL(m)&&d!=="_self")return ZU(e||"",d),new sb(null);const T=window.open(e||"",d,v);Ie(T,n,"popup-blocked");try{T.focus()}catch{}return new sb(T)}function ZU(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU="__/auth/handler",e4="emulator/auth/handler",t4=encodeURIComponent("fac");async function ib(n,e,t,s,a,l){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:fa,eventId:a};if(e instanceof My){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",s_(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))c[v]=T}if(e instanceof dh){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),m=p?`#${t4}=${encodeURIComponent(p)}`:"";return`${n4(n)}?${Wl(d).slice(1)}${m}`}function n4({config:n}){return n.emulator?Ny(n,e4):`https://${n.authDomain}/${JU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="webStorageSupport";class s4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xA,this._completeRedirectFn=RU,this._overrideRedirectResult=wU}async _openPopup(e,t,s,a){var l;lr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await ib(e,t,s,E_(),a);return XU(e,c,Ly())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await ib(e,t,s,E_(),a);return aU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(lr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await GU(e),s=new xU(e);return t.register("authEvent",a=>(Ie(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wg,{type:Wg},a=>{var l;const c=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[Wg];c!==void 0&&t(!!c),ks(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=PU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yA()||fA()||Oy()}}const i4=s4;var rb="@firebase/auth",ab="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function o4(n){sa(new ar("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;Ie(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vA(n)},m=new wL(s,a,l,p);return PL(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),sa(new ar("auth-internal",e=>{const t=ma(e.getProvider("auth").getImmediate());return(s=>new r4(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(rb,ab,a4(n)),xs(rb,ab,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=5*60,u4=jw("authIdTokenMaxAge")||l4;let ob=null;const c4=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>u4)return;const a=t==null?void 0:t.token;ob!==a&&(ob=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function h4(n=ry()){const e=Jd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=DL(n,{popupRedirectResolver:i4,persistence:[mU,sU,xA]}),s=jw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=c4(l.toString());ZL(t,c,()=>c(t.currentUser)),XL(t,d=>c(d))}}const a=Lw("auth");return a&&ML(t,`http://${a}`),t}function f4(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}CL({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=qs("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",f4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});o4("Browser");var lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ea,UA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,I){function N(){}N.prototype=I.prototype,O.D=I.prototype,O.prototype=new N,O.prototype.constructor=O,O.C=function(V,L,F){for(var k=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)k[Pe-2]=arguments[Pe];return I.prototype[L].apply(V,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,I,N){N||(N=0);var V=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)V[L]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(L=0;16>L;++L)V[L]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=O.g[0],N=O.g[1],L=O.g[2];var F=O.g[3],k=I+(F^N&(L^F))+V[0]+3614090360&4294967295;I=N+(k<<7&4294967295|k>>>25),k=F+(L^I&(N^L))+V[1]+3905402710&4294967295,F=I+(k<<12&4294967295|k>>>20),k=L+(N^F&(I^N))+V[2]+606105819&4294967295,L=F+(k<<17&4294967295|k>>>15),k=N+(I^L&(F^I))+V[3]+3250441966&4294967295,N=L+(k<<22&4294967295|k>>>10),k=I+(F^N&(L^F))+V[4]+4118548399&4294967295,I=N+(k<<7&4294967295|k>>>25),k=F+(L^I&(N^L))+V[5]+1200080426&4294967295,F=I+(k<<12&4294967295|k>>>20),k=L+(N^F&(I^N))+V[6]+2821735955&4294967295,L=F+(k<<17&4294967295|k>>>15),k=N+(I^L&(F^I))+V[7]+4249261313&4294967295,N=L+(k<<22&4294967295|k>>>10),k=I+(F^N&(L^F))+V[8]+1770035416&4294967295,I=N+(k<<7&4294967295|k>>>25),k=F+(L^I&(N^L))+V[9]+2336552879&4294967295,F=I+(k<<12&4294967295|k>>>20),k=L+(N^F&(I^N))+V[10]+4294925233&4294967295,L=F+(k<<17&4294967295|k>>>15),k=N+(I^L&(F^I))+V[11]+2304563134&4294967295,N=L+(k<<22&4294967295|k>>>10),k=I+(F^N&(L^F))+V[12]+1804603682&4294967295,I=N+(k<<7&4294967295|k>>>25),k=F+(L^I&(N^L))+V[13]+4254626195&4294967295,F=I+(k<<12&4294967295|k>>>20),k=L+(N^F&(I^N))+V[14]+2792965006&4294967295,L=F+(k<<17&4294967295|k>>>15),k=N+(I^L&(F^I))+V[15]+1236535329&4294967295,N=L+(k<<22&4294967295|k>>>10),k=I+(L^F&(N^L))+V[1]+4129170786&4294967295,I=N+(k<<5&4294967295|k>>>27),k=F+(N^L&(I^N))+V[6]+3225465664&4294967295,F=I+(k<<9&4294967295|k>>>23),k=L+(I^N&(F^I))+V[11]+643717713&4294967295,L=F+(k<<14&4294967295|k>>>18),k=N+(F^I&(L^F))+V[0]+3921069994&4294967295,N=L+(k<<20&4294967295|k>>>12),k=I+(L^F&(N^L))+V[5]+3593408605&4294967295,I=N+(k<<5&4294967295|k>>>27),k=F+(N^L&(I^N))+V[10]+38016083&4294967295,F=I+(k<<9&4294967295|k>>>23),k=L+(I^N&(F^I))+V[15]+3634488961&4294967295,L=F+(k<<14&4294967295|k>>>18),k=N+(F^I&(L^F))+V[4]+3889429448&4294967295,N=L+(k<<20&4294967295|k>>>12),k=I+(L^F&(N^L))+V[9]+568446438&4294967295,I=N+(k<<5&4294967295|k>>>27),k=F+(N^L&(I^N))+V[14]+3275163606&4294967295,F=I+(k<<9&4294967295|k>>>23),k=L+(I^N&(F^I))+V[3]+4107603335&4294967295,L=F+(k<<14&4294967295|k>>>18),k=N+(F^I&(L^F))+V[8]+1163531501&4294967295,N=L+(k<<20&4294967295|k>>>12),k=I+(L^F&(N^L))+V[13]+2850285829&4294967295,I=N+(k<<5&4294967295|k>>>27),k=F+(N^L&(I^N))+V[2]+4243563512&4294967295,F=I+(k<<9&4294967295|k>>>23),k=L+(I^N&(F^I))+V[7]+1735328473&4294967295,L=F+(k<<14&4294967295|k>>>18),k=N+(F^I&(L^F))+V[12]+2368359562&4294967295,N=L+(k<<20&4294967295|k>>>12),k=I+(N^L^F)+V[5]+4294588738&4294967295,I=N+(k<<4&4294967295|k>>>28),k=F+(I^N^L)+V[8]+2272392833&4294967295,F=I+(k<<11&4294967295|k>>>21),k=L+(F^I^N)+V[11]+1839030562&4294967295,L=F+(k<<16&4294967295|k>>>16),k=N+(L^F^I)+V[14]+4259657740&4294967295,N=L+(k<<23&4294967295|k>>>9),k=I+(N^L^F)+V[1]+2763975236&4294967295,I=N+(k<<4&4294967295|k>>>28),k=F+(I^N^L)+V[4]+1272893353&4294967295,F=I+(k<<11&4294967295|k>>>21),k=L+(F^I^N)+V[7]+4139469664&4294967295,L=F+(k<<16&4294967295|k>>>16),k=N+(L^F^I)+V[10]+3200236656&4294967295,N=L+(k<<23&4294967295|k>>>9),k=I+(N^L^F)+V[13]+681279174&4294967295,I=N+(k<<4&4294967295|k>>>28),k=F+(I^N^L)+V[0]+3936430074&4294967295,F=I+(k<<11&4294967295|k>>>21),k=L+(F^I^N)+V[3]+3572445317&4294967295,L=F+(k<<16&4294967295|k>>>16),k=N+(L^F^I)+V[6]+76029189&4294967295,N=L+(k<<23&4294967295|k>>>9),k=I+(N^L^F)+V[9]+3654602809&4294967295,I=N+(k<<4&4294967295|k>>>28),k=F+(I^N^L)+V[12]+3873151461&4294967295,F=I+(k<<11&4294967295|k>>>21),k=L+(F^I^N)+V[15]+530742520&4294967295,L=F+(k<<16&4294967295|k>>>16),k=N+(L^F^I)+V[2]+3299628645&4294967295,N=L+(k<<23&4294967295|k>>>9),k=I+(L^(N|~F))+V[0]+4096336452&4294967295,I=N+(k<<6&4294967295|k>>>26),k=F+(N^(I|~L))+V[7]+1126891415&4294967295,F=I+(k<<10&4294967295|k>>>22),k=L+(I^(F|~N))+V[14]+2878612391&4294967295,L=F+(k<<15&4294967295|k>>>17),k=N+(F^(L|~I))+V[5]+4237533241&4294967295,N=L+(k<<21&4294967295|k>>>11),k=I+(L^(N|~F))+V[12]+1700485571&4294967295,I=N+(k<<6&4294967295|k>>>26),k=F+(N^(I|~L))+V[3]+2399980690&4294967295,F=I+(k<<10&4294967295|k>>>22),k=L+(I^(F|~N))+V[10]+4293915773&4294967295,L=F+(k<<15&4294967295|k>>>17),k=N+(F^(L|~I))+V[1]+2240044497&4294967295,N=L+(k<<21&4294967295|k>>>11),k=I+(L^(N|~F))+V[8]+1873313359&4294967295,I=N+(k<<6&4294967295|k>>>26),k=F+(N^(I|~L))+V[15]+4264355552&4294967295,F=I+(k<<10&4294967295|k>>>22),k=L+(I^(F|~N))+V[6]+2734768916&4294967295,L=F+(k<<15&4294967295|k>>>17),k=N+(F^(L|~I))+V[13]+1309151649&4294967295,N=L+(k<<21&4294967295|k>>>11),k=I+(L^(N|~F))+V[4]+4149444226&4294967295,I=N+(k<<6&4294967295|k>>>26),k=F+(N^(I|~L))+V[11]+3174756917&4294967295,F=I+(k<<10&4294967295|k>>>22),k=L+(I^(F|~N))+V[2]+718787259&4294967295,L=F+(k<<15&4294967295|k>>>17),k=N+(F^(L|~I))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+I&4294967295,O.g[1]=O.g[1]+(L+(k<<21&4294967295|k>>>11))&4294967295,O.g[2]=O.g[2]+L&4294967295,O.g[3]=O.g[3]+F&4294967295}s.prototype.u=function(O,I){I===void 0&&(I=O.length);for(var N=I-this.blockSize,V=this.B,L=this.h,F=0;F<I;){if(L==0)for(;F<=N;)a(this,O,F),F+=this.blockSize;if(typeof O=="string"){for(;F<I;)if(V[L++]=O.charCodeAt(F++),L==this.blockSize){a(this,V),L=0;break}}else for(;F<I;)if(V[L++]=O[F++],L==this.blockSize){a(this,V),L=0;break}}this.h=L,this.o+=I},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var I=1;I<O.length-8;++I)O[I]=0;var N=8*this.o;for(I=O.length-8;I<O.length;++I)O[I]=N&255,N/=256;for(this.u(O),O=Array(16),I=N=0;4>I;++I)for(var V=0;32>V;V+=8)O[N++]=this.g[I]>>>V&255;return O};function l(O,I){var N=d;return Object.prototype.hasOwnProperty.call(N,O)?N[O]:N[O]=I(O)}function c(O,I){this.h=I;for(var N=[],V=!0,L=O.length-1;0<=L;L--){var F=O[L]|0;V&&F==I||(N[L]=F,V=!1)}this.g=N}var d={};function p(O){return-128<=O&&128>O?l(O,function(I){return new c([I|0],0>I?-1:0)}):new c([O|0],0>O?-1:0)}function m(O){if(isNaN(O)||!isFinite(O))return T;if(0>O)return D(m(-O));for(var I=[],N=1,V=0;O>=N;V++)I[V]=O/N|0,N*=4294967296;return new c(I,0)}function v(O,I){if(O.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O.charAt(0)=="-")return D(v(O.substring(1),I));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(I,8)),V=T,L=0;L<O.length;L+=8){var F=Math.min(8,O.length-L),k=parseInt(O.substring(L,L+F),I);8>F?(F=m(Math.pow(I,F)),V=V.j(F).add(m(k))):(V=V.j(N),V=V.add(m(k)))}return V}var T=p(0),E=p(1),R=p(16777216);n=c.prototype,n.m=function(){if(j(this))return-D(this).m();for(var O=0,I=1,N=0;N<this.g.length;N++){var V=this.i(N);O+=(0<=V?V:4294967296+V)*I,I*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(A(this))return"0";if(j(this))return"-"+D(this).toString(O);for(var I=m(Math.pow(O,6)),N=this,V="";;){var L=ne(N,I).g;N=M(N,L.j(I));var F=((0<N.g.length?N.g[0]:N.h)>>>0).toString(O);if(N=L,A(N))return F+V;for(;6>F.length;)F="0"+F;V=F+V}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function A(O){if(O.h!=0)return!1;for(var I=0;I<O.g.length;I++)if(O.g[I]!=0)return!1;return!0}function j(O){return O.h==-1}n.l=function(O){return O=M(this,O),j(O)?-1:A(O)?0:1};function D(O){for(var I=O.g.length,N=[],V=0;V<I;V++)N[V]=~O.g[V];return new c(N,~O.h).add(E)}n.abs=function(){return j(this)?D(this):this},n.add=function(O){for(var I=Math.max(this.g.length,O.g.length),N=[],V=0,L=0;L<=I;L++){var F=V+(this.i(L)&65535)+(O.i(L)&65535),k=(F>>>16)+(this.i(L)>>>16)+(O.i(L)>>>16);V=k>>>16,F&=65535,k&=65535,N[L]=k<<16|F}return new c(N,N[N.length-1]&-2147483648?-1:0)};function M(O,I){return O.add(D(I))}n.j=function(O){if(A(this)||A(O))return T;if(j(this))return j(O)?D(this).j(D(O)):D(D(this).j(O));if(j(O))return D(this.j(D(O)));if(0>this.l(R)&&0>O.l(R))return m(this.m()*O.m());for(var I=this.g.length+O.g.length,N=[],V=0;V<2*I;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(var L=0;L<O.g.length;L++){var F=this.i(V)>>>16,k=this.i(V)&65535,Pe=O.i(L)>>>16,De=O.i(L)&65535;N[2*V+2*L]+=k*De,z(N,2*V+2*L),N[2*V+2*L+1]+=F*De,z(N,2*V+2*L+1),N[2*V+2*L+1]+=k*Pe,z(N,2*V+2*L+1),N[2*V+2*L+2]+=F*Pe,z(N,2*V+2*L+2)}for(V=0;V<I;V++)N[V]=N[2*V+1]<<16|N[2*V];for(V=I;V<2*I;V++)N[V]=0;return new c(N,0)};function z(O,I){for(;(O[I]&65535)!=O[I];)O[I+1]+=O[I]>>>16,O[I]&=65535,I++}function q(O,I){this.g=O,this.h=I}function ne(O,I){if(A(I))throw Error("division by zero");if(A(O))return new q(T,T);if(j(O))return I=ne(D(O),I),new q(D(I.g),D(I.h));if(j(I))return I=ne(O,D(I)),new q(D(I.g),I.h);if(30<O.g.length){if(j(O)||j(I))throw Error("slowDivide_ only works with positive integers.");for(var N=E,V=I;0>=V.l(O);)N=ue(N),V=ue(V);var L=ee(N,1),F=ee(V,1);for(V=ee(V,2),N=ee(N,2);!A(V);){var k=F.add(V);0>=k.l(O)&&(L=L.add(N),F=k),V=ee(V,1),N=ee(N,1)}return I=M(O,L.j(I)),new q(L,I)}for(L=T;0<=O.l(I);){for(N=Math.max(1,Math.floor(O.m()/I.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),F=m(N),k=F.j(I);j(k)||0<k.l(O);)N-=V,F=m(N),k=F.j(I);A(F)&&(F=E),L=L.add(F),O=M(O,k)}return new q(L,O)}n.A=function(O){return ne(this,O).h},n.and=function(O){for(var I=Math.max(this.g.length,O.g.length),N=[],V=0;V<I;V++)N[V]=this.i(V)&O.i(V);return new c(N,this.h&O.h)},n.or=function(O){for(var I=Math.max(this.g.length,O.g.length),N=[],V=0;V<I;V++)N[V]=this.i(V)|O.i(V);return new c(N,this.h|O.h)},n.xor=function(O){for(var I=Math.max(this.g.length,O.g.length),N=[],V=0;V<I;V++)N[V]=this.i(V)^O.i(V);return new c(N,this.h^O.h)};function ue(O){for(var I=O.g.length+1,N=[],V=0;V<I;V++)N[V]=O.i(V)<<1|O.i(V-1)>>>31;return new c(N,O.h)}function ee(O,I){var N=I>>5;I%=32;for(var V=O.g.length-N,L=[],F=0;F<V;F++)L[F]=0<I?O.i(F+N)>>>I|O.i(F+N+1)<<32-I:O.i(F+N);return new c(L,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,UA=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,ea=c}).apply(typeof lb<"u"?lb:typeof self<"u"?self:typeof window<"u"?window:{});var Kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VA,Rc,jA,hd,C_,BA,FA,zA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,S){return h==Array.prototype||h==Object.prototype||(h[_]=S.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kf=="object"&&Kf];for(var _=0;_<h.length;++_){var S=h[_];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var s=t(this);function a(h,_){if(_)e:{var S=s;h=h.split(".");for(var C=0;C<h.length-1;C++){var W=h[C];if(!(W in S))break e;S=S[W]}h=h[h.length-1],C=S[h],_=_(C),_!=C&&_!=null&&e(S,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var S=0,C=!1,W={next:function(){if(!C&&S<h.length){var se=S++;return{value:_(se,h[se]),done:!1}}return C=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function m(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function v(h,_,S){return h.call.apply(h.bind,arguments)}function T(h,_,S){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,C),h.apply(_,W)}}return function(){return h.apply(_,arguments)}}function E(h,_,S){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,E.apply(null,arguments)}function R(h,_){var S=Array.prototype.slice.call(arguments,1);return function(){var C=S.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function A(h,_){function S(){}S.prototype=_.prototype,h.aa=_.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(C,W,se){for(var de=Array(arguments.length-2),We=2;We<arguments.length;We++)de[We-2]=arguments[We];return _.prototype[W].apply(C,de)}}function j(h){const _=h.length;if(0<_){const S=Array(_);for(let C=0;C<_;C++)S[C]=h[C];return S}return[]}function D(h,_){for(let S=1;S<arguments.length;S++){const C=arguments[S];if(p(C)){const W=h.length||0,se=C.length||0;h.length=W+se;for(let de=0;de<se;de++)h[W+de]=C[de]}else h.push(C)}}class M{constructor(_,S){this.i=_,this.j=S,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function z(h){return/^[\s\xa0]*$/.test(h)}function q(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function ne(h){return ne[" "](h),h}ne[" "]=function(){};var ue=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function ee(h,_,S){for(const C in h)_.call(S,h[C],C,h)}function O(h,_){for(const S in h)_.call(void 0,h[S],S,h)}function I(h){const _={};for(const S in h)_[S]=h[S];return _}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(h,_){let S,C;for(let W=1;W<arguments.length;W++){C=arguments[W];for(S in C)h[S]=C[S];for(let se=0;se<N.length;se++)S=N[se],Object.prototype.hasOwnProperty.call(C,S)&&(h[S]=C[S])}}function L(h){var _=1;h=h.split(":");const S=[];for(;0<_&&h.length;)S.push(h.shift()),_--;return h.length&&S.push(h.join(":")),S}function F(h){d.setTimeout(()=>{throw h},0)}function k(){var h=ve;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class Pe{constructor(){this.h=this.g=null}add(_,S){const C=De.get();C.set(_,S),this.h?this.h.next=C:this.g=C,this.h=C}}var De=new M(()=>new J,h=>h.reset());class J{constructor(){this.next=this.g=this.h=null}set(_,S){this.h=_,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,pe=!1,ve=new Pe,U=()=>{const h=d.Promise.resolve(void 0);ce=()=>{h.then(te)}};var te=()=>{for(var h;h=k();){try{h.h.call(h.g)}catch(S){F(S)}var _=De;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}pe=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};d.addEventListener("test",S,_),d.removeEventListener("test",S,_)}catch{}return h}();function ie(h,_){if($.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ue){e:{try{ne(_.nodeName);var W=!0;break e}catch{}W=!1}W||(_=null)}}else S=="mouseover"?_=h.fromElement:S=="mouseout"&&(_=h.toElement);this.relatedTarget=_,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:fe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ie.aa.h.call(this)}}A(ie,$);var fe={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),ge=0;function wt(h,_,S,C,W){this.listener=h,this.proxy=null,this.src=_,this.type=S,this.capture=!!C,this.ha=W,this.key=++ge,this.da=this.fa=!1}function Nn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function vn(h){this.src=h,this.g={},this.h=0}vn.prototype.add=function(h,_,S,C,W){var se=h.toString();h=this.g[se],h||(h=this.g[se]=[],this.h++);var de=Qn(h,_,C,W);return-1<de?(_=h[de],S||(_.fa=!1)):(_=new wt(_,this.src,se,!!C,W),_.fa=S,h.push(_)),_};function kn(h,_){var S=_.type;if(S in h.g){var C=h.g[S],W=Array.prototype.indexOf.call(C,_,void 0),se;(se=0<=W)&&Array.prototype.splice.call(C,W,1),se&&(Nn(_),h.g[S].length==0&&(delete h.g[S],h.h--))}}function Qn(h,_,S,C){for(var W=0;W<h.length;++W){var se=h[W];if(!se.da&&se.listener==_&&se.capture==!!S&&se.ha==C)return W}return-1}var Ds="closure_lm_"+(1e6*Math.random()|0),bi={};function Ta(h,_,S,C,W){if(Array.isArray(_)){for(var se=0;se<_.length;se++)Ta(h,_[se],S,C,W);return null}return S=hs(S),h&&h[Ee]?h.K(_,S,m(C)?!!C.capture:!1,W):un(h,_,S,!1,C,W)}function un(h,_,S,C,W,se){if(!_)throw Error("Invalid event type");var de=m(W)?!!W.capture:!!W,We=Tt(h);if(We||(h[Ds]=We=new vn(h)),S=We.add(_,S,C,de,se),S.proxy)return S;if(C=dr(),S.proxy=C,C.src=h,C.listener=S,h.addEventListener)X||(W=de),W===void 0&&(W=!1),h.addEventListener(_.toString(),C,W);else if(h.attachEvent)h.attachEvent(Me(_.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return S}function dr(){function h(S){return _.call(h.src,h.listener,S)}const _=dt;return h}function Ws(h,_,S,C,W){if(Array.isArray(_))for(var se=0;se<_.length;se++)Ws(h,_[se],S,C,W);else C=m(C)?!!C.capture:!!C,S=hs(S),h&&h[Ee]?(h=h.i,_=String(_).toString(),_ in h.g&&(se=h.g[_],S=Qn(se,S,C,W),-1<S&&(Nn(se[S]),Array.prototype.splice.call(se,S,1),se.length==0&&(delete h.g[_],h.h--)))):h&&(h=Tt(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Qn(_,S,C,W)),(S=-1<h?_[h]:null)&&He(S))}function He(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Ee])kn(_.i,h);else{var S=h.type,C=h.proxy;_.removeEventListener?_.removeEventListener(S,C,h.capture):_.detachEvent?_.detachEvent(Me(S),C):_.addListener&&_.removeListener&&_.removeListener(C),(S=Tt(_))?(kn(S,h),S.h==0&&(S.src=null,_[Ds]=null)):Nn(h)}}}function Me(h){return h in bi?bi[h]:bi[h]="on"+h}function dt(h,_){if(h.da)h=!0;else{_=new ie(_,this);var S=h.listener,C=h.ha||h.src;h.fa&&He(h),h=S.call(C,_)}return h}function Tt(h){return h=h[Ds],h instanceof vn?h:null}var cs="__closure_events_fn_"+(1e9*Math.random()>>>0);function hs(h){return typeof h=="function"?h:(h[cs]||(h[cs]=function(_){return h.handleEvent(_)}),h[cs])}function rt(){B.call(this),this.i=new vn(this),this.M=this,this.F=null}A(rt,B),rt.prototype[Ee]=!0,rt.prototype.removeEventListener=function(h,_,S,C){Ws(this,h,_,S,C)};function Je(h,_){var S,C=h.F;if(C)for(S=[];C;C=C.F)S.push(C);if(h=h.M,C=_.type||_,typeof _=="string")_=new $(_,h);else if(_ instanceof $)_.target=_.target||h;else{var W=_;_=new $(C,h),V(_,W)}if(W=!0,S)for(var se=S.length-1;0<=se;se--){var de=_.g=S[se];W=Yt(de,C,!0,_)&&W}if(de=_.g=h,W=Yt(de,C,!0,_)&&W,W=Yt(de,C,!1,_)&&W,S)for(se=0;se<S.length;se++)de=_.g=S[se],W=Yt(de,C,!1,_)&&W}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var S=h.g[_],C=0;C<S.length;C++)Nn(S[C]);delete h.g[_],h.h--}}this.F=null},rt.prototype.K=function(h,_,S,C){return this.i.add(String(h),_,!1,S,C)},rt.prototype.L=function(h,_,S,C){return this.i.add(String(h),_,!0,S,C)};function Yt(h,_,S,C){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var W=!0,se=0;se<_.length;++se){var de=_[se];if(de&&!de.da&&de.capture==S){var We=de.listener,zt=de.ha||de.src;de.fa&&kn(h.i,de),W=We.call(zt,C)!==!1&&W}}return W&&!C.defaultPrevented}function Qt(h,_,S){if(typeof h=="function")S&&(h=E(h,S));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Eh(h){h.g=Qt(()=>{h.g=null,h.i&&(h.i=!1,Eh(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Rp extends B{constructor(_,S){super(),this.m=_,this.l=S,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Eh(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ea(h){B.call(this),this.h=h,this.g={}}A(Ea,B);var Sa=[];function ba(h){ee(h.g,function(_,S){this.g.hasOwnProperty(S)&&He(_)},h),h.g={}}Ea.prototype.N=function(){Ea.aa.N.call(this),ba(this)},Ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ps=d.JSON.stringify,Ao=d.JSON.parse,wa=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function nu(){}nu.prototype.h=null;function su(h){return h.h||(h.h=h.i())}function iu(){}var wi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ci(){$.call(this,"d")}A(Ci,$);function ru(){$.call(this,"c")}A(ru,$);var $s={},au=null;function pr(){return au=au||new rt}$s.La="serverreachability";function Ro(h){$.call(this,$s.La,h)}A(Ro,$);function mr(h){const _=pr();Je(_,new Ro(_))}$s.STAT_EVENT="statevent";function Sh(h,_){$.call(this,$s.STAT_EVENT,h),this.stat=_}A(Sh,$);function Et(h){const _=pr();Je(_,new Sh(_,h))}$s.Ma="timingevent";function Ft(h,_){$.call(this,$s.Ma,h),this.size=_}A(Ft,$);function Lt(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function fs(){this.g=!0}fs.prototype.xa=function(){this.g=!1};function ou(h,_,S,C,W,se){h.info(function(){if(h.g)if(se)for(var de="",We=se.split("&"),zt=0;zt<We.length;zt++){var $e=We[zt].split("=");if(1<$e.length){var Zt=$e[0];$e=$e[1];var Ht=Zt.split("_");de=2<=Ht.length&&Ht[1]=="type"?de+(Zt+"="+$e+"&"):de+(Zt+"=redacted&")}}else de=null;else de=se;return"XMLHTTP REQ ("+C+") [attempt "+W+"]: "+_+`
`+S+`
`+de})}function Ip(h,_,S,C,W,se,de){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+W+"]: "+_+`
`+S+`
`+se+" "+de})}function gr(h,_,S,C){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ca(h,S)+(C?" "+C:"")})}function bh(h,_){h.info(function(){return"TIMEOUT: "+_})}fs.prototype.info=function(){};function Ca(h,_){if(!h.g)return _;if(!_)return null;try{var S=JSON.parse(_);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var C=S[h];if(!(2>C.length)){var W=C[1];if(Array.isArray(W)&&!(1>W.length)){var se=W[0];if(se!="noop"&&se!="stop"&&se!="close")for(var de=1;de<W.length;de++)W[de]=""}}}}return Ps(S)}catch{return _}}var _r={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ai={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ks;function Ys(){}A(Ys,nu),Ys.prototype.g=function(){return new XMLHttpRequest},Ys.prototype.i=function(){return{}},Ks=new Ys;function On(h,_,S,C){this.j=h,this.i=_,this.l=S,this.R=C||1,this.U=new Ea(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ot}function Ot(){this.i=null,this.g="",this.h=!1}var lu={},Io={};function Ms(h,_,S){h.L=1,h.v=Na(Xn(_)),h.m=S,h.P=!0,Ri(h,null)}function Ri(h,_){h.F=Date.now(),Aa(h),h.A=Xn(h.v);var S=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),pu(S.i,"t",C),h.C=0,S=h.j.J,h.h=new Ot,h.g=jh(h.j,S?_:null,!h.m),0<h.O&&(h.M=new Rp(E(h.Y,h,h.g),h.O)),_=h.U,S=h.g,C=h.ca;var W="readystatechange";Array.isArray(W)||(W&&(Sa[0]=W.toString()),W=Sa);for(var se=0;se<W.length;se++){var de=Ta(S,W[se],C||_.handleEvent,!1,_.h||_);if(!de)break;_.g[de.key]=de}_=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),mr(),ou(h.i,h.u,h.A,h.l,h.R,h.m)}On.prototype.ca=function(h){h=h.target;const _=this.M;_&&gs(h)==3?_.j():this.Y(h)},On.prototype.Y=function(h){try{if(h==this.g)e:{const Ht=gs(this.g);var _=this.g.Ba();const Mi=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||kh(this.g)))){this.J||Ht!=4||_==7||(_==8||0>=Mi?mr(3):mr(2)),yr(this);var S=this.g.Z();this.X=S;t:if(wh(this)){var C=kh(this.g);h="";var W=C.length,se=gs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),Qs(this);var de="";break t}this.h.i=new d.TextDecoder}for(_=0;_<W;_++)this.h.h=!0,h+=this.h.i.decode(C[_],{stream:!(se&&_==W-1)});C.length=0,this.h.g+=h,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=S==200,Ip(this.i,this.u,this.A,this.l,this.R,Ht,S),this.o){if(this.T&&!this.K){t:{if(this.g){var We,zt=this.g;if((We=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(We)){var $e=We;break t}}$e=null}if(S=$e)gr(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ra(this,S);else{this.o=!1,this.s=3,Et(12),cn(this),Qs(this);break e}}if(this.P){S=!0;let hn;for(;!this.J&&this.C<de.length;)if(hn=Ch(this,de),hn==Io){Ht==4&&(this.s=4,Et(14),S=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==lu){this.s=4,Et(15),gr(this.i,this.l,de,"[Invalid Chunk]"),S=!1;break}else gr(this.i,this.l,hn,null),Ra(this,hn);if(wh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||de.length!=0||this.h.h||(this.s=1,Et(16),S=!1),this.o=this.o&&S,!S)gr(this.i,this.l,de,"[Invalid Chunked Response]"),cn(this),Qs(this);else if(0<de.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Va(Zt),Zt.M=!0,Et(11))}}else gr(this.i,this.l,de,null),Ra(this,de);Ht==4&&cn(this),this.o&&!this.J&&(Ht==4?Lh(this.j,this):(this.o=!1,Aa(this)))}else Dp(this.g),S==400&&0<de.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),cn(this),Qs(this)}}}catch{}finally{}};function wh(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Ch(h,_){var S=h.C,C=_.indexOf(`
`,S);return C==-1?Io:(S=Number(_.substring(S,C)),isNaN(S)?lu:(C+=1,C+S>_.length?Io:(_=_.slice(C,C+S),h.C=C+S,_)))}On.prototype.cancel=function(){this.J=!0,cn(this)};function Aa(h){h.S=Date.now()+h.I,Ah(h,h.I)}function Ah(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Lt(E(h.ba,h),_)}function yr(h){h.B&&(d.clearTimeout(h.B),h.B=null)}On.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(bh(this.i,this.A),this.L!=2&&(mr(),Et(17)),cn(this),this.s=2,Qs(this)):Ah(this,this.S-h)};function Qs(h){h.j.G==0||h.J||Lh(h.j,h)}function cn(h){yr(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,ba(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Ra(h,_){try{var S=h.j;if(S.G!=0&&(S.g==h||uu(S.h,h))){if(!h.K&&uu(S.h,h)&&S.G==3){try{var C=S.Da.g.parse(_)}catch{C=null}if(Array.isArray(C)&&C.length==3){var W=C;if(W[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)Bo(S),Vo(S);else break e;vu(S),Et(18)}}else S.za=W[1],0<S.za-S.T&&37500>W[2]&&S.F&&S.v==0&&!S.C&&(S.C=Lt(E(S.Za,S),6e3));if(1>=No(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Pi(S,11)}else if((h.K||S.g==h)&&Bo(S),!z(_))for(W=S.Da.g.parse(_),_=0;_<W.length;_++){let $e=W[_];if(S.T=$e[0],$e=$e[1],S.G==2)if($e[0]=="c"){S.K=$e[1],S.ia=$e[2];const Zt=$e[3];Zt!=null&&(S.la=Zt,S.j.info("VER="+S.la));const Ht=$e[4];Ht!=null&&(S.Aa=Ht,S.j.info("SVER="+S.Aa));const Mi=$e[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(C=1.5*Mi,S.L=C,S.j.info("backChannelRequestTimeoutMs_="+C)),C=S;const hn=h.g;if(hn){const si=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var se=C.h;se.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(ko(se,se.h),se.h=null))}if(C.D){const Eu=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Eu&&(C.ya=Eu,lt(C.I,C.D,Eu))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),C=S;var de=h;if(C.qa=Vh(C,C.J?C.ia:null,C.W),de.K){Dn(C.h,de);var We=de,zt=C.L;zt&&(We.I=zt),We.B&&(yr(We),Aa(We)),C.g=de}else Ph(C);0<S.i.length&&jo(S)}else $e[0]!="stop"&&$e[0]!="close"||Pi(S,7);else S.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Pi(S,7):_u(S):$e[0]!="noop"&&S.l&&S.l.ta($e),S.v=0)}}mr(4)}catch{}}var Rh=class{constructor(h,_){this.g=h,this.map=_}};function Ii(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function No(h){return h.h?1:h.g?h.g.size:0}function uu(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function ko(h,_){h.g?h.g.add(_):h.h=_}function Dn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ii.prototype.cancel=function(){if(this.i=cu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function cu(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const S of h.g.values())_=_.concat(S.D);return _}return j(h.i)}function xp(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var _=[],S=h.length,C=0;C<S;C++)_.push(h[C]);return _}_=[],S=0;for(C in h)_[S++]=h[C];return _}function Oo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var _=[];h=h.length;for(var S=0;S<h;S++)_.push(S);return _}_=[],S=0;for(const C in h)_[S++]=C;return _}}}function hu(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var S=Oo(h),C=xp(h),W=C.length,se=0;se<W;se++)_.call(void 0,C[se],S&&S[se],h)}var Ia=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Np(h,_){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var C=h[S].indexOf("="),W=null;if(0<=C){var se=h[S].substring(0,C);W=h[S].substring(C+1)}else se=h[S];_(se,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Ut(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ut){this.h=h.h,xa(this,h.j),this.o=h.o,this.g=h.g,vr(this,h.s),this.l=h.l;var _=h.i,S=new Ni;S.i=_.i,_.g&&(S.g=new Map(_.g),S.h=_.h),xi(this,S),this.m=h.m}else h&&(_=String(h).match(Ia))?(this.h=!1,xa(this,_[1]||"",!0),this.o=ds(_[2]||""),this.g=ds(_[3]||"",!0),vr(this,_[4]),this.l=ds(_[5]||"",!0),xi(this,_[6]||"",!0),this.m=ds(_[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}Ut.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ka(_,fu,!0),":");var S=this.g;return(S||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ka(_,fu,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(ka(S,S.charAt(0)=="/"?kp:du,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",ka(S,Do)),h.join("")};function Xn(h){return new Ut(h)}function xa(h,_,S){h.j=S?ds(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function vr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function xi(h,_,S){_ instanceof Ni?(h.i=_,xh(h.i,h.h)):(S||(_=ka(_,Op)),h.i=new Ni(_,h.h))}function lt(h,_,S){h.i.set(_,S)}function Na(h){return lt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ds(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ka(h,_,S){return typeof h=="string"?(h=encodeURI(h).replace(_,Ih),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ih(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var fu=/[#\/\?@]/g,du=/[#\?:]/g,kp=/[#\?]/g,Op=/[#\?@]/g,Do=/#/g;function Ni(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function ps(h){h.g||(h.g=new Map,h.h=0,h.i&&Np(h.i,function(_,S){h.add(decodeURIComponent(_.replace(/\+/g," ")),S)}))}n=Ni.prototype,n.add=function(h,_){ps(this),this.i=null,h=Xs(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(_),this.h+=1,this};function ki(h,_){ps(h),_=Xs(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Oi(h,_){return ps(h),_=Xs(h,_),h.g.has(_)}n.forEach=function(h,_){ps(this),this.g.forEach(function(S,C){S.forEach(function(W){h.call(_,W,C,this)},this)},this)},n.na=function(){ps(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),S=[];for(let C=0;C<_.length;C++){const W=h[C];for(let se=0;se<W.length;se++)S.push(_[C])}return S},n.V=function(h){ps(this);let _=[];if(typeof h=="string")Oi(this,h)&&(_=_.concat(this.g.get(Xs(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)_=_.concat(h[S])}return _},n.set=function(h,_){return ps(this),this.i=null,h=Xs(this,h),Oi(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function pu(h,_,S){ki(h,_),0<S.length&&(h.i=null,h.g.set(Xs(h,_),j(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var S=0;S<_.length;S++){var C=_[S];const se=encodeURIComponent(String(C)),de=this.V(C);for(C=0;C<de.length;C++){var W=se;de[C]!==""&&(W+="="+encodeURIComponent(String(de[C]))),h.push(W)}}return this.i=h.join("&")};function Xs(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function xh(h,_){_&&!h.j&&(ps(h),h.i=null,h.g.forEach(function(S,C){var W=C.toLowerCase();C!=W&&(ki(this,C),pu(this,W,S))},h)),h.j=_}function Oa(h,_){const S=new fs;if(d.Image){const C=new Image;C.onload=R(ms,S,"TestLoadImage: loaded",!0,_,C),C.onerror=R(ms,S,"TestLoadImage: error",!1,_,C),C.onabort=R(ms,S,"TestLoadImage: abort",!1,_,C),C.ontimeout=R(ms,S,"TestLoadImage: timeout",!1,_,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else _(!1)}function Ls(h,_){const S=new fs,C=new AbortController,W=setTimeout(()=>{C.abort(),ms(S,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:C.signal}).then(se=>{clearTimeout(W),se.ok?ms(S,"TestPingServer: ok",!0,_):ms(S,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(W),ms(S,"TestPingServer: error",!1,_)})}function ms(h,_,S,C,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),C(S)}catch{}}function Da(){this.g=new wa}function Zs(h,_,S){const C=S||"";try{hu(h,function(W,se){let de=W;m(W)&&(de=Ps(W)),_.push(C+se+"="+encodeURIComponent(de))})}catch(W){throw _.push(C+"type="+encodeURIComponent("_badmap")),W}}function Tr(h){this.l=h.Ub||null,this.j=h.eb||!1}A(Tr,nu),Tr.prototype.g=function(){return new Di(this.l,this.j)},Tr.prototype.i=function(h){return function(){return h}}({});function Di(h,_){rt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Di,rt),n=Di.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,ei(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Js(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mu(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function mu(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Js(this):ei(this),this.readyState==3&&mu(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Js(this))},n.Qa=function(h){this.g&&(this.response=h,Js(this))},n.ga=function(){this.g&&Js(this)};function Js(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ei(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var S=_.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=_.next();return h.join(`\r
`)};function ei(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function gu(h){let _="";return ee(h,function(S,C){_+=C,_+=":",_+=S,_+=`\r
`}),_}function Xt(h,_,S){e:{for(C in S){var C=!1;break e}C=!0}C||(S=gu(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):lt(h,_,S))}function nt(h){rt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(nt,rt);var Po=/^https?$/i,Pa=["POST","PUT"];n=nt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,S,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ks.g(),this.v=this.o?su(this.o):su(Ks),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(se){Nh(this,se);return}if(h=S||"",S=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var W in C)S.set(W,C[W]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const se of C.keys())S.set(se,C.get(se));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(S.keys()).find(se=>se.toLowerCase()=="content-type"),W=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Pa,_,void 0))||C||W||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,de]of S)this.g.setRequestHeader(se,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ma(this),this.u=!0,this.g.send(h),this.u=!1}catch(se){Nh(this,se)}};function Nh(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Mo(h),ti(h)}function Mo(h){h.A||(h.A=!0,Je(h,"complete"),Je(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Je(this,"complete"),Je(this,"abort"),ti(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),nt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Lo(this):this.bb())},n.bb=function(){Lo(this)};function Lo(h){if(h.h&&typeof c<"u"&&(!h.v[1]||gs(h)!=4||h.Z()!=2)){if(h.u&&gs(h)==4)Qt(h.Ea,0,h);else if(Je(h,"readystatechange"),gs(h)==4){h.h=!1;try{const de=h.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var S;if(!(S=_)){var C;if(C=de===0){var W=String(h.D).match(Ia)[1]||null;!W&&d.self&&d.self.location&&(W=d.self.location.protocol.slice(0,-1)),C=!Po.test(W?W.toLowerCase():"")}S=C}if(S)Je(h,"complete"),Je(h,"success");else{h.m=6;try{var se=2<gs(h)?h.g.statusText:""}catch{se=""}h.l=se+" ["+h.Z()+"]",Mo(h)}}finally{ti(h)}}}}function ti(h,_){if(h.g){Ma(h);const S=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Je(h,"ready");try{S.onreadystatechange=C}catch{}}}function Ma(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function gs(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<gs(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Ao(_)}};function kh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Dp(h){const _={};h=(h.g&&2<=gs(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(z(h[C]))continue;var S=L(h[C]);const W=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const se=_[W]||[];_[W]=se,se.push(S)}O(_,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function La(h,_,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||_}function Uo(h){this.Aa=0,this.i=[],this.j=new fs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=La("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=La("baseRetryDelayMs",5e3,h),this.cb=La("retryDelaySeedMs",1e4,h),this.Wa=La("forwardChannelMaxRetries",2,h),this.wa=La("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ii(h&&h.concurrentRequestLimit),this.Da=new Da,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Uo.prototype,n.la=8,n.G=1,n.connect=function(h,_,S,C){Et(0),this.W=h,this.H=_||{},S&&C!==void 0&&(this.H.OSID=S,this.H.OAID=C),this.F=this.X,this.I=Vh(this,null,this.W),jo(this)};function _u(h){if(Oh(h),h.G==3){var _=h.U++,S=Xn(h.I);if(lt(S,"SID",h.K),lt(S,"RID",_),lt(S,"TYPE","terminate"),Ua(h,S),_=new On(h,h.j,_),_.L=2,_.v=Na(Xn(S)),S=!1,d.navigator&&d.navigator.sendBeacon)try{S=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!S&&d.Image&&(new Image().src=_.v,S=!0),S||(_.g=jh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Aa(_)}Uh(h)}function Vo(h){h.g&&(Va(h),h.g.cancel(),h.g=null)}function Oh(h){Vo(h),h.u&&(d.clearTimeout(h.u),h.u=null),Bo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function jo(h){if(!xo(h.h)&&!h.s){h.s=!0;var _=h.Ga;ce||U(),pe||(ce(),pe=!0),ve.add(_,h),h.B=0}}function Pp(h,_){return No(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Lt(E(h.Ga,h,_),Tu(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const W=new On(this,this.j,h);let se=this.o;if(this.S&&(se?(se=I(se),V(se,this.S)):se=this.S),this.m!==null||this.O||(W.H=se,se=null),this.P)e:{for(var _=0,S=0;S<this.i.length;S++){t:{var C=this.i[S];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(_+=C,4096<_){_=S;break e}if(_===4096||S===this.i.length-1){_=S+1;break e}}_=1e3}else _=1e3;_=Dh(this,W,_),S=Xn(this.I),lt(S,"RID",h),lt(S,"CVER",22),this.D&&lt(S,"X-HTTP-Session-Id",this.D),Ua(this,S),se&&(this.O?_="headers="+encodeURIComponent(String(gu(se)))+"&"+_:this.m&&Xt(S,this.m,se)),ko(this.h,W),this.Ua&&lt(S,"TYPE","init"),this.P?(lt(S,"$req",_),lt(S,"SID","null"),W.T=!0,Ms(W,S,null)):Ms(W,S,_),this.G=2}}else this.G==3&&(h?yu(this,h):this.i.length==0||xo(this.h)||yu(this))};function yu(h,_){var S;_?S=_.l:S=h.U++;const C=Xn(h.I);lt(C,"SID",h.K),lt(C,"RID",S),lt(C,"AID",h.T),Ua(h,C),h.m&&h.o&&Xt(C,h.m,h.o),S=new On(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Dh(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ko(h.h,S),Ms(S,C,_)}function Ua(h,_){h.H&&ee(h.H,function(S,C){lt(_,C,S)}),h.l&&hu({},function(S,C){lt(_,C,S)})}function Dh(h,_,S){S=Math.min(h.i.length,S);var C=h.l?E(h.l.Na,h.l,h):null;e:{var W=h.i;let se=-1;for(;;){const de=["count="+S];se==-1?0<S?(se=W[0].g,de.push("ofs="+se)):se=0:de.push("ofs="+se);let We=!0;for(let zt=0;zt<S;zt++){let $e=W[zt].g;const Zt=W[zt].map;if($e-=se,0>$e)se=Math.max(0,W[zt].g-100),We=!1;else try{Zs(Zt,de,"req"+$e+"_")}catch{C&&C(Zt)}}if(We){C=de.join("&");break e}}}return h=h.i.splice(0,S),_.D=h,C}function Ph(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;ce||U(),pe||(ce(),pe=!0),ve.add(_,h),h.v=0}}function vu(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Lt(E(h.Fa,h),Tu(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Mh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Lt(E(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Vo(this),Mh(this))};function Va(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Mh(h){h.g=new On(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Xn(h.qa);lt(_,"RID","rpc"),lt(_,"SID",h.K),lt(_,"AID",h.T),lt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&lt(_,"TO",h.ja),lt(_,"TYPE","xmlhttp"),Ua(h,_),h.m&&h.o&&Xt(_,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=Na(Xn(_)),S.m=null,S.P=!0,Ri(S,h)}n.Za=function(){this.C!=null&&(this.C=null,Vo(this),vu(this),Et(19))};function Bo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Lh(h,_){var S=null;if(h.g==_){Bo(h),Va(h),h.g=null;var C=2}else if(uu(h.h,_))S=_.D,Dn(h.h,_),C=1;else return;if(h.G!=0){if(_.o)if(C==1){S=_.m?_.m.length:0,_=Date.now()-_.F;var W=h.B;C=pr(),Je(C,new Ft(C,S)),jo(h)}else Ph(h);else if(W=_.s,W==3||W==0&&0<_.X||!(C==1&&Pp(h,_)||C==2&&vu(h)))switch(S&&0<S.length&&(_=h.h,_.i=_.i.concat(S)),W){case 1:Pi(h,5);break;case 4:Pi(h,10);break;case 3:Pi(h,6);break;default:Pi(h,2)}}}function Tu(h,_){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*_}function Pi(h,_){if(h.j.info("Error code "+_),_==2){var S=E(h.fb,h),C=h.Xa;const W=!C;C=new Ut(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||xa(C,"https"),Na(C),W?Oa(C.toString(),S):Ls(C.toString(),S)}else Et(2);h.G=0,h.l&&h.l.sa(_),Uh(h),Oh(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Uh(h){if(h.G=0,h.ka=[],h.l){const _=cu(h.h);(_.length!=0||h.i.length!=0)&&(D(h.ka,_),D(h.ka,h.i),h.h.i.length=0,j(h.i),h.i.length=0),h.l.ra()}}function Vh(h,_,S){var C=S instanceof Ut?Xn(S):new Ut(S);if(C.g!="")_&&(C.g=_+"."+C.g),vr(C,C.s);else{var W=d.location;C=W.protocol,_=_?_+"."+W.hostname:W.hostname,W=+W.port;var se=new Ut(null);C&&xa(se,C),_&&(se.g=_),W&&vr(se,W),S&&(se.l=S),C=se}return S=h.D,_=h.ya,S&&_&&lt(C,S,_),lt(C,"VER",h.la),Ua(h,C),C}function jh(h,_,S){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new nt(new Tr({eb:S})):new nt(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bh(){}n=Bh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Fo(){}Fo.prototype.g=function(h,_){return new Pn(h,_)};function Pn(h,_){rt.call(this),this.g=new Uo(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!z(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!z(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new ni(this)}A(Pn,rt),Pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){_u(this.g)},Pn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=Ps(h),h=S);_.i.push(new Rh(_.Ya++,h)),_.G==3&&jo(_)},Pn.prototype.N=function(){this.g.l=null,delete this.j,_u(this.g),delete this.g,Pn.aa.N.call(this)};function Fh(h){Ci.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const S in _){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}A(Fh,Ci);function zh(){ru.call(this),this.status=1}A(zh,ru);function ni(h){this.g=h}A(ni,Bh),ni.prototype.ua=function(){Je(this.g,"a")},ni.prototype.ta=function(h){Je(this.g,new Fh(h))},ni.prototype.sa=function(h){Je(this.g,new zh)},ni.prototype.ra=function(){Je(this.g,"b")},Fo.prototype.createWebChannel=Fo.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,zA=function(){return new Fo},FA=function(){return pr()},BA=$s,C_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_r.NO_ERROR=0,_r.TIMEOUT=8,_r.HTTP_ERROR=6,hd=_r,Ai.COMPLETE="complete",jA=Ai,iu.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",rt.prototype.listen=rt.prototype.K,Rc=iu,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,VA=nt}).apply(typeof Kf<"u"?Kf:typeof self<"u"?self:typeof window<"u"?window:{});const ub="@firebase/firestore",cb="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Zd("@firebase/firestore");function Tl(){return po.logLevel}function ye(n,...e){if(po.logLevel<=ze.DEBUG){const t=e.map(Vy);po.debug(`Firestore (${Xl}): ${n}`,...t)}}function ur(n,...e){if(po.logLevel<=ze.ERROR){const t=e.map(Vy);po.error(`Firestore (${Xl}): ${n}`,...t)}}function Ml(n,...e){if(po.logLevel<=ze.WARN){const t=e.map(Vy);po.warn(`Firestore (${Xl}): ${n}`,...t)}}function Vy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,HA(n,s,t)}function HA(n,e,t){let s=`FIRESTORE (${Xl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ur(s),new Error(s)}function it(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||HA(e,a,s)}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Si{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(wn.UNAUTHENTICATED))}shutdown(){}}class p4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class m4{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new ta;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ta,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},d=p=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ta)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(it(typeof s.accessToken=="string",31837,{l:s}),new qA(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new wn(e)}}class g4{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _4{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new g4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const s=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=v4(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Ve(n,e){return n<e?-1:n>e?1:0}function A_(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),a=e.codePointAt(t);if(s!==a){if(s<128&&a<128)return Ve(s,a);{const l=GA(),c=T4(l.encode(fb(n,t)),l.encode(fb(e,t)));return c!==0?c:Ve(s,a)}}t+=s>65535?2:1}return Ve(n.length,e.length)}function fb(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function T4(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ve(n[t],e[t]);return Ve(n.length,e.length)}function Ll(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=-62135596800,pb=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*pb);return new $t(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<db)throw new be(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pb}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-db;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new $t(0,0))}static max(){return new ke(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="__name__";class ci{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ne(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ci.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=ci.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const s=ci.isNumericId(e),a=ci.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?ci.extractNumericId(e).compare(ci.extractNumericId(t)):A_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ea.fromString(e.substring(4,e.length-2))}}class kt extends ci{construct(e,t,s){return new kt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new be(he.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new kt(t)}static emptyPath(){return new kt([])}}const E4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends ci{construct(e,t,s){return new _n(e,t,s)}static isValidIdentifier(e){return E4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mb}static keyField(){return new _n([mb])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new be(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new be(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new be(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(s+=d,a++):(l(),a++)}if(l(),c)throw new be(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(t)}static emptyPath(){return new _n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(kt.fromString(e))}static fromName(e){return new Ce(kt.fromString(e).popFirst(5))}static empty(){return new Ce(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new kt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=-1;function S4(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=ke.fromTimestamp(s===1e9?new $t(t+1,0):new $t(t,s));return new ra(a,Ce.empty(),e)}function b4(n){return new ra(n.readTime,n.key,Qc)}class ra{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ra(ke.min(),Ce.empty(),Qc)}static max(){return new ra(ke.max(),Ce.empty(),Qc)}}function w4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==C4)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,s)=>{t(e)})}static reject(e){return new le((t,s)=>{s(e)})}static waitFor(e){return new le((t,s)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},p=>s(p))}),c=!0,l===a&&t()})}static or(e){let t=le.resolve(!1);for(const s of e)t=t.next(a=>a?le.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new le((s,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const m=p;t(e[m]).next(v=>{c[m]=v,++d,d===l&&s(c)},v=>a(v))}})}static doWhile(e,t){return new le((s,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):s()};l()})}}function R4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Jl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>t.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}lp.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=-1;function up(n){return n==null}function Md(n){return n===0&&1/n==-1/0}function I4(n){return typeof n=="number"&&Number.isInteger(n)&&!Md(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="";function x4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gb(e)),e=N4(n.get(t),e);return gb(e)}function N4(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case $A:t+="";break;default:t+=l}}return t}function gb(n){return n+$A+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ga(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function KA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yf(this.root,e,this.comparator,!0)}}class Yf{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??mn.RED,this.left=a??mn.EMPTY,this.right=l??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new mn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return mn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yb(this.data.getIterator())}getIteratorFrom(e){return new yb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kt(this.comparator);return t.data=e,t}}class yb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new as([])}unionWith(e){let t=new Kt(_n.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new as(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ll(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new YA("Invalid base64 string: "+l):l}}(e);return new yn(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const k4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aa(n){if(it(!!n,39018),typeof n=="string"){let e=0;const t=k4.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Mt(n.seconds),nanos:Mt(n.nanos)}}function Mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oa(n){return typeof n=="string"?yn.fromBase64String(n):yn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="server_timestamp",XA="__type__",ZA="__previous_value__",JA="__local_write_time__";function By(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[XA])===null||t===void 0?void 0:t.stringValue)===QA}function cp(n){const e=n.mapValue.fields[ZA];return By(e)?cp(e):e}function Xc(n){const e=aa(n.mapValue.fields[JA].timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,t,s,a,l,c,d,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const Ld="(default)";class Zc{constructor(e,t){this.projectId=e,this.database=t||Ld}static empty(){return new Zc("","")}get isDefaultDatabase(){return this.database===Ld}isEqual(e){return e instanceof Zc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="__type__",D4="__max__",Qf={mapValue:{}},tR="__vector__",Ud="value";function la(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?By(n)?4:M4(n)?9007199254740991:P4(n)?10:11:Ne(28295,{value:n})}function vi(n,e){if(n===e)return!0;const t=la(n);if(t!==la(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xc(n).isEqual(Xc(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=aa(a.timestampValue),d=aa(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return oa(a.bytesValue).isEqual(oa(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return Mt(a.geoPointValue.latitude)===Mt(l.geoPointValue.latitude)&&Mt(a.geoPointValue.longitude)===Mt(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Mt(a.integerValue)===Mt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Mt(a.doubleValue),d=Mt(l.doubleValue);return c===d?Md(c)===Md(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return Ll(n.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(_b(c)!==_b(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!vi(c[p],d[p])))return!1;return!0}(n,e);default:return Ne(52216,{left:n})}}function Jc(n,e){return(n.values||[]).find(t=>vi(t,e))!==void 0}function Ul(n,e){if(n===e)return 0;const t=la(n),s=la(e);if(t!==s)return Ve(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return function(l,c){const d=Mt(l.integerValue||l.doubleValue),p=Mt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return vb(n.timestampValue,e.timestampValue);case 4:return vb(Xc(n),Xc(e));case 5:return A_(n.stringValue,e.stringValue);case 6:return function(l,c){const d=oa(l),p=oa(c);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),p=c.split("/");for(let m=0;m<d.length&&m<p.length;m++){const v=Ve(d[m],p[m]);if(v!==0)return v}return Ve(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Ve(Mt(l.latitude),Mt(c.latitude));return d!==0?d:Ve(Mt(l.longitude),Mt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Tb(n.arrayValue,e.arrayValue);case 10:return function(l,c){var d,p,m,v;const T=l.fields||{},E=c.fields||{},R=(d=T[Ud])===null||d===void 0?void 0:d.arrayValue,A=(p=E[Ud])===null||p===void 0?void 0:p.arrayValue,j=Ve(((m=R==null?void 0:R.values)===null||m===void 0?void 0:m.length)||0,((v=A==null?void 0:A.values)===null||v===void 0?void 0:v.length)||0);return j!==0?j:Tb(R,A)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===Qf.mapValue&&c===Qf.mapValue)return 0;if(l===Qf.mapValue)return 1;if(c===Qf.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),m=c.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const E=A_(p[T],v[T]);if(E!==0)return E;const R=Ul(d[p[T]],m[v[T]]);if(R!==0)return R}return Ve(p.length,v.length)}(n.mapValue,e.mapValue);default:throw Ne(23264,{Pe:t})}}function vb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=aa(n),s=aa(e),a=Ve(t.seconds,s.seconds);return a!==0?a:Ve(t.nanos,s.nanos)}function Tb(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Ul(t[a],s[a]);if(l)return l}return Ve(t.length,s.length)}function Vl(n){return R_(n)}function R_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=aa(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return oa(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ce.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=R_(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of s)l?l=!1:a+=",",a+=`${c}:${R_(t.fields[c])}`;return a+"}"}(n.mapValue):Ne(61005,{value:n})}function fd(n){switch(la(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cp(n);return e?16+fd(e):16;case 5:return 2*n.stringValue.length;case 6:return oa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,l)=>a+fd(l),0)}(n.arrayValue);case 10:case 11:return function(s){let a=0;return ga(s.fields,(l,c)=>{a+=l.length+fd(c)}),a}(n.mapValue);default:throw Ne(13486,{value:n})}}function I_(n){return!!n&&"integerValue"in n}function Fy(n){return!!n&&"arrayValue"in n}function Eb(n){return!!n&&"nullValue"in n}function Sb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dd(n){return!!n&&"mapValue"in n}function P4(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[eR])===null||t===void 0?void 0:t.stringValue)===tR}function Lc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ga(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Lc(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function M4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===D4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!dd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lc(t)}setAll(e){let t=_n.emptyPath(),s={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=d.popLast()}c?s[d.lastSegment()]=Lc(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());dd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];dd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){ga(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new $n(Lc(this.value))}}function nR(n){const e=[];return ga(n.fields,(t,s)=>{const a=new _n([t]);if(dd(s)){const l=nR(s.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new as(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,t,s,a,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Rn(e,0,ke.min(),ke.min(),ke.min(),$n.empty(),0)}static newFoundDocument(e,t,s,a){return new Rn(e,1,t,ke.min(),s,a,0)}static newNoDocument(e,t){return new Rn(e,2,t,ke.min(),ke.min(),$n.empty(),0)}static newUnknownDocument(e,t){return new Rn(e,3,t,ke.min(),ke.min(),$n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t){this.position=e,this.inclusive=t}}function bb(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?s=Ce.comparator(Ce.fromName(c.referenceValue),t.key):s=Ul(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function wb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t="asc"){this.field=e,this.dir=t}}function L4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{}class Wt extends sR{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new V4(e,t,s):t==="array-contains"?new F4(e,s):t==="in"?new z4(e,s):t==="not-in"?new H4(e,s):t==="array-contains-any"?new q4(e,s):new Wt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new j4(e,s):new B4(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ul(t,this.value)):t!==null&&la(this.value)===la(t)&&this.matchesComparison(Ul(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends sR{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Ti(e,t)}matches(e){return iR(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function iR(n){return n.op==="and"}function rR(n){return U4(n)&&iR(n)}function U4(n){for(const e of n.filters)if(e instanceof Ti)return!1;return!0}function x_(n){if(n instanceof Wt)return n.field.canonicalString()+n.op.toString()+Vl(n.value);if(rR(n))return n.filters.map(e=>x_(e)).join(",");{const e=n.filters.map(t=>x_(t)).join(",");return`${n.op}(${e})`}}function aR(n,e){return n instanceof Wt?function(s,a){return a instanceof Wt&&s.op===a.op&&s.field.isEqual(a.field)&&vi(s.value,a.value)}(n,e):n instanceof Ti?function(s,a){return a instanceof Ti&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((l,c,d)=>l&&aR(c,a.filters[d]),!0):!1}(n,e):void Ne(19439)}function oR(n){return n instanceof Wt?function(t){return`${t.field.canonicalString()} ${t.op} ${Vl(t.value)}`}(n):n instanceof Ti?function(t){return t.op.toString()+" {"+t.getFilters().map(oR).join(" ,")+"}"}(n):"Filter"}class V4 extends Wt{constructor(e,t,s){super(e,t,s),this.key=Ce.fromName(s.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class j4 extends Wt{constructor(e,t){super(e,"in",t),this.keys=lR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class B4 extends Wt{constructor(e,t){super(e,"not-in",t),this.keys=lR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Ce.fromName(s.referenceValue))}class F4 extends Wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fy(t)&&Jc(t.arrayValue,this.value)}}class z4 extends Wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Jc(this.value.arrayValue,t)}}class H4 extends Wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Jc(this.value.arrayValue,t)}}class q4 extends Wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Jc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,t=null,s=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function Cb(n,e=null,t=[],s=[],a=null,l=null,c=null){return new G4(n,e,t,s,a,l,c)}function zy(n){const e=Oe(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>x_(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),up(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Vl(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Vl(s)).join(",")),e.Ie=t}return e.Ie}function Hy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!L4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!aR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wb(n.startAt,e.startAt)&&wb(n.endAt,e.endAt)}function N_(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t=null,s=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function W4(n,e,t,s,a,l,c,d){return new hp(n,e,t,s,a,l,c,d)}function qy(n){return new hp(n)}function Ab(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $4(n){return n.collectionGroup!==null}function Uc(n){const e=Oe(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Kt(_n.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new jd(l,s))}),t.has(_n.keyField().canonicalString())||e.Ee.push(new jd(_n.keyField(),s))}return e.Ee}function mi(n){const e=Oe(n);return e.de||(e.de=K4(e,Uc(n))),e.de}function K4(n,e){if(n.limitType==="F")return Cb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new jd(a.field,l)});const t=n.endAt?new Vd(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Vd(n.startAt.position,n.startAt.inclusive):null;return Cb(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function k_(n,e,t){return new hp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fp(n,e){return Hy(mi(n),mi(e))&&n.limitType===e.limitType}function uR(n){return`${zy(mi(n))}|lt:${n.limitType}`}function El(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>oR(a)).join(", ")}]`),up(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>Vl(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>Vl(a)).join(",")),`Target(${s})`}(mi(n))}; limitType=${n.limitType})`}function dp(n,e){return e.isFoundDocument()&&function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ce.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(n,e)&&function(s,a){for(const l of Uc(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(s,a){return!(s.startAt&&!function(c,d,p){const m=bb(c,d,p);return c.inclusive?m<=0:m<0}(s.startAt,Uc(s),a)||s.endAt&&!function(c,d,p){const m=bb(c,d,p);return c.inclusive?m>=0:m>0}(s.endAt,Uc(s),a))}(n,e)}function Y4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cR(n){return(e,t)=>{let s=!1;for(const a of Uc(n)){const l=Q4(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function Q4(n,e,t){const s=n.field.isKeyField()?Ce.comparator(e.key,t.key):function(l,c,d){const p=c.data.field(l),m=d.data.field(l);return p!==null&&m!==null?Ul(p,m):Ne(42886)}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ne(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ga(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return KA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=new Rt(Ce.comparator);function cr(){return X4}const hR=new Rt(Ce.comparator);function Ic(...n){let e=hR;for(const t of n)e=e.insert(t.key,t);return e}function fR(n){let e=hR;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ro(){return Vc()}function dR(){return Vc()}function Vc(){return new bo(n=>n.toString(),(n,e)=>n.isEqual(e))}const Z4=new Rt(Ce.comparator),J4=new Kt(Ce.comparator);function qe(...n){let e=J4;for(const t of n)e=e.add(t);return e}const eV=new Kt(Ve);function tV(){return eV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Md(e)?"-0":e}}function pR(n){return{integerValue:""+n}}function nV(n,e){return I4(e)?pR(e):Gy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(){this._=void 0}}function sV(n,e,t){return n instanceof Bd?function(a,l){const c={fields:{[XA]:{stringValue:QA},[JA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&By(l)&&(l=cp(l)),l&&(c.fields[ZA]=l),{mapValue:c}}(t,e):n instanceof jl?gR(n,e):n instanceof eh?_R(n,e):function(a,l){const c=mR(a,l),d=Rb(c)+Rb(a.Re);return I_(c)&&I_(a.Re)?pR(d):Gy(a.serializer,d)}(n,e)}function iV(n,e,t){return n instanceof jl?gR(n,e):n instanceof eh?_R(n,e):t}function mR(n,e){return n instanceof Fd?function(s){return I_(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class Bd extends pp{}class jl extends pp{constructor(e){super(),this.elements=e}}function gR(n,e){const t=yR(e);for(const s of n.elements)t.some(a=>vi(a,s))||t.push(s);return{arrayValue:{values:t}}}class eh extends pp{constructor(e){super(),this.elements=e}}function _R(n,e){let t=yR(e);for(const s of n.elements)t=t.filter(a=>!vi(a,s));return{arrayValue:{values:t}}}class Fd extends pp{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Rb(n){return Mt(n.integerValue||n.doubleValue)}function yR(n){return Fy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,t){this.field=e,this.transform=t}}function aV(n,e){return n.field.isEqual(e.field)&&function(s,a){return s instanceof jl&&a instanceof jl||s instanceof eh&&a instanceof eh?Ll(s.elements,a.elements,vi):s instanceof Fd&&a instanceof Fd?vi(s.Re,a.Re):s instanceof Bd&&a instanceof Bd}(n.transform,e.transform)}class oV{constructor(e,t){this.version=e,this.transformResults=t}}class gi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gi}static exists(e){return new gi(void 0,e)}static updateTime(e){return new gi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class mp{}function vR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ER(n.key,gi.none()):new mh(n.key,n.data,gi.none());{const t=n.data,s=$n.empty();let a=new Kt(_n.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),a=a.add(l)}return new _a(n.key,s,new as(a.toArray()),gi.none())}}function lV(n,e,t){n instanceof mh?function(a,l,c){const d=a.value.clone(),p=xb(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof _a?function(a,l,c){if(!pd(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=xb(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(TR(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function jc(n,e,t,s){return n instanceof mh?function(l,c,d,p){if(!pd(l.precondition,c))return d;const m=l.value.clone(),v=Nb(l.fieldTransforms,p,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,s):n instanceof _a?function(l,c,d,p){if(!pd(l.precondition,c))return d;const m=Nb(l.fieldTransforms,p,c),v=c.data;return v.setAll(TR(l)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(n,e,t,s):function(l,c,d){return pd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function uV(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=mR(s.transform,a||null);l!=null&&(t===null&&(t=$n.empty()),t.set(s.field,l))}return t||null}function Ib(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Ll(s,a,(l,c)=>aV(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class mh extends mp{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class _a extends mp{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function TR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function xb(n,e,t){const s=new Map;it(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);s.set(l.field,iV(c,d,t[a]))}return s}function Nb(n,e,t){const s=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);s.set(a.field,sV(l,c,e))}return s}class ER extends mp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cV extends mp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&lV(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=jc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=jc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=dR();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=vR(c,d);p!==null&&s.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(ke.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qe())}isEqual(e){return this.batchId===e.batchId&&Ll(this.mutations,e.mutations,(t,s)=>Ib(t,s))&&Ll(this.baseMutations,e.baseMutations,(t,s)=>Ib(t,s))}}class Wy{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){it(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let a=function(){return Z4}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,s[c].version);return new Wy(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Ye;function pV(n){switch(n){case he.OK:return Ne(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return Ne(15467,{code:n})}}function SR(n){if(n===void 0)return ur("GRPC error has no .code"),he.UNKNOWN;switch(n){case Bt.OK:return he.OK;case Bt.CANCELLED:return he.CANCELLED;case Bt.UNKNOWN:return he.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return he.INTERNAL;case Bt.UNAVAILABLE:return he.UNAVAILABLE;case Bt.UNAUTHENTICATED:return he.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case Bt.NOT_FOUND:return he.NOT_FOUND;case Bt.ALREADY_EXISTS:return he.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return he.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case Bt.ABORTED:return he.ABORTED;case Bt.OUT_OF_RANGE:return he.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return he.UNIMPLEMENTED;case Bt.DATA_LOSS:return he.DATA_LOSS;default:return Ne(39323,{code:n})}}(Ye=Bt||(Bt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=new ea([4294967295,4294967295],0);function kb(n){const e=GA().encode(n),t=new UA;return t.update(e),new Uint8Array(t.digest())}function Ob(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ea([t,s],0),new ea([a,l],0)]}class $y{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new xc(`Invalid padding: ${t}`);if(s<0)throw new xc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new xc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new xc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=ea.fromNumber(this.pe)}we(e,t,s){let a=e.add(t.multiply(ea.fromNumber(s)));return a.compare(mV)===1&&(a=new ea([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=kb(e),[s,a]=Ob(t);for(let l=0;l<this.hashCount;l++){const c=this.we(s,a,l);if(!this.Se(c))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new $y(l,a,t);return s.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const t=kb(e),[s,a]=Ob(t);for(let l=0;l<this.hashCount;l++){const c=this.we(s,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class xc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,gh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new gp(ke.min(),a,new Rt(Ve),cr(),qe())}}class gh{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new gh(s,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t,s,a){this.De=e,this.removedTargetIds=t,this.key=s,this.ve=a}}class bR{constructor(e,t){this.targetId=e,this.Ce=t}}class wR{constructor(e,t,s=yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Db{constructor(){this.Fe=0,this.Me=Pb(),this.xe=yn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=qe(),t=qe(),s=qe();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ne(38017,{changeType:l})}}),new gh(this.xe,this.Oe,e,t,s)}Qe(){this.Ne=!1,this.Me=Pb()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,it(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class gV{constructor(e){this.ze=e,this.je=new Map,this.He=cr(),this.Je=Xf(),this.Ye=Xf(),this.Ze=new Rt(Ve)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const s=this.rt(t);switch(e.state){case 0:this.it(t)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(t);break;case 3:this.it(t)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),s.ke(e.resumeToken));break;default:Ne(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((s,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,s=e.Ce.count,a=this._t(t);if(a){const l=a.target;if(N_(l))if(s===0){const c=new Ce(l.path);this.tt(t,c,Rn.newNoDocument(c,ke.min()))}else it(s===1,20013,{expectedCount:s});else{const c=this.ut(t);if(c!==s){const d=this.ct(e),p=d?this.lt(d,e,c):1;if(p!==0){this.st(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=oa(s).toUint8Array()}catch(p){if(p instanceof YA)return Ml("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new $y(c,a,l)}catch(p){return Ml(p instanceof xc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.pe===0?null:d}lt(e,t,s){return t.Ce.count===s-this.Tt(e,t.targetId)?0:2}Tt(e,t){const s=this.ze.getRemoteKeysForTarget(t);let a=0;return s.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,l,null),a++)}),a}It(e){const t=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&N_(d.target)){const p=new Ce(d.target.path);this.Et(p).has(c)||this.dt(c,p)||this.tt(c,p,Rn.newNoDocument(p,e))}l.Le&&(t.set(c,l.qe()),l.Qe())}});let s=qe();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(p=>{const m=this._t(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(s=s.add(l))}),this.He.forEach((l,c)=>c.setReadTime(e));const a=new gp(e,t,this.Ze,this.He,s);return this.He=cr(),this.Je=Xf(),this.Ye=Xf(),this.Ze=new Rt(Ve),a}et(e,t){if(!this.it(e))return;const s=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,s),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,s){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),s&&(this.He=this.He.insert(t,s))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Db,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Kt(Ve),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Kt(Ve),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Db),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Xf(){return new Rt(Ce.comparator)}function Pb(){return new Rt(Ce.comparator)}const _V={asc:"ASCENDING",desc:"DESCENDING"},yV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vV={and:"AND",or:"OR"};class TV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function O_(n,e){return n.useProto3Json||up(e)?e:{value:e}}function zd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function EV(n,e){return zd(n,e.toTimestamp())}function _i(n){return it(!!n,49232),ke.fromTimestamp(function(t){const s=aa(t);return new $t(s.seconds,s.nanos)}(n))}function Ky(n,e){return D_(n,e).canonicalString()}function D_(n,e){const t=function(a){return new kt(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function AR(n){const e=kt.fromString(n);return it(kR(e),10190,{key:e.toString()}),e}function P_(n,e){return Ky(n.databaseId,e.path)}function $g(n,e){const t=AR(e);if(t.get(1)!==n.databaseId.projectId)throw new be(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(IR(t))}function RR(n,e){return Ky(n.databaseId,e)}function SV(n){const e=AR(n);return e.length===4?kt.emptyPath():IR(e)}function M_(n){return new kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IR(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Mb(n,e,t){return{name:P_(n,e),fields:t.value.mapValue.fields}}function bV(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ne(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(m,v){return m.useProto3Json?(it(v===void 0||typeof v=="string",58123),yn.fromBase64String(v||"")):(it(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),yn.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(m){const v=m.code===void 0?he.UNKNOWN:SR(m.code);return new be(v,m.message||"")}(c);t=new wR(s,a,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=$g(n,s.document.name),l=_i(s.document.updateTime),c=s.document.createTime?_i(s.document.createTime):ke.min(),d=new $n({mapValue:{fields:s.document.fields}}),p=Rn.newFoundDocument(a,l,c,d),m=s.targetIds||[],v=s.removedTargetIds||[];t=new md(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=$g(n,s.document),l=s.readTime?_i(s.readTime):ke.min(),c=Rn.newNoDocument(a,l),d=s.removedTargetIds||[];t=new md([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=$g(n,s.document),l=s.removedTargetIds||[];t=new md([],l,a,null)}else{if(!("filter"in e))return Ne(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,c=new dV(a,l),d=s.targetId;t=new bR(d,c)}}return t}function wV(n,e){let t;if(e instanceof mh)t={update:Mb(n,e.key,e.value)};else if(e instanceof ER)t={delete:P_(n,e.key)};else if(e instanceof _a)t={update:Mb(n,e.key,e.data),updateMask:DV(e.fieldMask)};else{if(!(e instanceof cV))return Ne(16599,{ft:e.type});t={verify:P_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,c){const d=c.transform;if(d instanceof Bd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof jl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof eh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Fd)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Ne(20930,{transform:c.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:EV(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ne(27497)}(n,e.precondition)),t}function CV(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map(t=>function(a,l){let c=a.updateTime?_i(a.updateTime):_i(l);return c.isEqual(ke.min())&&(c=_i(l)),new oV(c,a.transformResults||[])}(t,e))):[]}function AV(n,e){return{documents:[RR(n,e.path)]}}function RV(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=RR(n,a);const l=function(m){if(m.length!==0)return NR(Ti.create(m,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(m){if(m.length!==0)return m.map(v=>function(E){return{field:Sl(E.field),direction:NV(E.dir)}}(v))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=O_(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{gt:t,parent:a}}function IV(n){let e=SV(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){it(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(T){const E=xR(T);return E instanceof Ti&&rR(E)?E.getFilters():[E]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(E=>function(A){return new jd(bl(A.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(E))}(t.orderBy));let d=null;t.limit&&(d=function(T){let E;return E=typeof T=="object"?T.value:T,up(E)?null:E}(t.limit));let p=null;t.startAt&&(p=function(T){const E=!!T.before,R=T.values||[];return new Vd(R,E)}(t.startAt));let m=null;return t.endAt&&(m=function(T){const E=!T.before,R=T.values||[];return new Vd(R,E)}(t.endAt)),W4(e,a,c,l,d,"F",p,m)}function xV(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=bl(t.unaryFilter.field);return Wt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=bl(t.unaryFilter.field);return Wt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=bl(t.unaryFilter.field);return Wt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=bl(t.unaryFilter.field);return Wt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}}(n):n.fieldFilter!==void 0?function(t){return Wt.create(bl(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ti.create(t.compositeFilter.filters.map(s=>xR(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}}(t.compositeFilter.op))}(n):Ne(30097,{filter:n})}function NV(n){return _V[n]}function kV(n){return yV[n]}function OV(n){return vV[n]}function Sl(n){return{fieldPath:n.canonicalString()}}function bl(n){return _n.fromServerFormat(n.fieldPath)}function NR(n){return n instanceof Wt?function(t){if(t.op==="=="){if(Sb(t.value))return{unaryFilter:{field:Sl(t.field),op:"IS_NAN"}};if(Eb(t.value))return{unaryFilter:{field:Sl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Sb(t.value))return{unaryFilter:{field:Sl(t.field),op:"IS_NOT_NAN"}};if(Eb(t.value))return{unaryFilter:{field:Sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sl(t.field),op:kV(t.op),value:t.value}}}(n):n instanceof Ti?function(t){const s=t.getFilters().map(a=>NR(a));return s.length===1?s[0]:{compositeFilter:{op:OV(t.op),filters:s}}}(n):Ne(54877,{filter:n})}function DV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,t,s,a,l=ke.min(),c=ke.min(),d=yn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.wt=e}}function MV(n){const e=IV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?k_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(){this.Cn=new UV}addToCollectionParentIndex(e,t){return this.Cn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(ra.min())}updateCollectionGroup(e,t,s){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class UV{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Kt(kt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Kt(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OR=41943040;class Gn{static withCacheSize(e){return new Gn(e,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(OR,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Bl(0)}static lr(){return new Bl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="LruGarbageCollector",VV=1048576;function Vb([n,e],[t,s]){const a=Ve(n,t);return a===0?Ve(e,s):a}class jV{constructor(e){this.Er=e,this.buffer=new Kt(Vb),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Vb(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BV{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ye(Ub,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Jl(t)?ye(Ub,"Ignoring IndexedDB error during garbage collection: ",t):await Zl(t)}await this.mr(3e5)})}}class FV{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return le.resolve(lp.le);const s=new jV(t);return this.gr.forEachTarget(e,a=>s.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>s.Rr(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.gr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Lb)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lb):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let s,a,l,c,d,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(s=T,d=Date.now(),this.removeTargets(e,s,t))).next(T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(T=>(m=Date.now(),Tl()<=ze.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function zV(n,e){return new FV(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.changes=new bo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?le.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(s!==null&&jc(s.mutation,a,as.empty(),$t.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,qe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=qe()){const a=ro();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let c=Ic();return l.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const s=ro();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,qe()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,s,a){let l=cr();const c=Vc(),d=function(){return Vc()}();return t.forEach((p,m)=>{const v=s.get(m.key);a.has(m.key)&&(v===void 0||v.mutation instanceof _a)?l=l.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),jc(v.mutation,m,v.mutation.getFieldMask(),$t.now())):c.set(m.key,as.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((m,v)=>c.set(m,v)),t.forEach((m,v)=>{var T;return d.set(m,new qV(v,(T=c.get(m))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const s=Vc();let a=new Rt((c,d)=>c-d),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const m=t.get(p);if(m===null)return;let v=s.get(p)||as.empty();v=d.applyToLocalView(m,v),s.set(p,v);const T=(a.get(d.batchId)||qe()).add(p);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,v=p.value,T=dR();v.forEach(E=>{if(!l.has(E)){const R=vR(t.get(E),s.get(E));R!==null&&T.set(E,R),l=l.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,T))}return le.waitFor(c)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return function(c){return Ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):le.resolve(ro());let d=Qc,p=l;return c.next(m=>le.forEach(m,(v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(v)?le.resolve():this.remoteDocumentCache.getEntry(e,v).next(E=>{p=p.insert(v,E)}))).next(()=>this.populateOverlays(e,m,l)).next(()=>this.computeViews(e,p,m,qe())).next(v=>({batchId:d,changes:fR(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next(s=>{let a=Ic();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let c=Ic();return this.indexManager.getCollectionParents(e,l).next(d=>le.forEach(d,p=>{const m=function(T,E){return new hp(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,a).next(v=>{v.forEach((T,E)=>{c=c.insert(T,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a))).next(c=>{l.forEach((p,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,Rn.newInvalidDocument(v)))});let d=Ic();return c.forEach((p,m)=>{const v=l.get(p);v!==void 0&&jc(v.mutation,m,as.empty(),$t.now()),dp(t,m)&&(d=d.insert(p,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return le.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:_i(a.createTime)}}(t)),le.resolve()}getNamedQuery(e,t){return le.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(a){return{name:a.name,query:MV(a.bundledQuery),readTime:_i(a.readTime)}}(t)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this.overlays=new Rt(Ce.comparator),this.Qr=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ro();return le.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.bt(e,t,l)}),le.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.Qr.get(s);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(s)),le.resolve()}getOverlaysForCollection(e,t,s){const a=ro(),l=t.length+1,c=new Ce(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&p.largestBatchId>s&&a.set(p.getKey(),p)}return le.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Rt((m,v)=>m-v);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=ro(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=ro(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,v)=>d.set(m,v)),!(d.size()>=a)););return le.resolve(d)}bt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(s.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new fV(t,s));let l=this.Qr.get(t);l===void 0&&(l=qe(),this.Qr.set(t,l)),this.Qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(){this.$r=new Kt(an.Ur),this.Kr=new Kt(an.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const s=new an(e,t);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.zr(new an(e,t))}jr(e,t){e.forEach(s=>this.removeReference(s,t))}Hr(e){const t=new Ce(new kt([])),s=new an(t,e),a=new an(t,e+1),l=[];return this.Kr.forEachInRange([s,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Ce(new kt([])),s=new an(t,e),a=new an(t,e+1);let l=qe();return this.Kr.forEachInRange([s,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new an(e,0),s=this.$r.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class an{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Ce.comparator(e.key,t.key)||Ve(e.Zr,t.Zr)}static Wr(e,t){return Ve(e.Zr,t.Zr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Kt(an.Ur)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new hV(l,t,s,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new an(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,t){return le.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ti(s),l=a<0?0:a;return le.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?jy:this.nr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new an(t,0),a=new an(t,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([s,a],c=>{const d=this.ei(c.Zr);l.push(d)}),le.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Kt(Ve);return t.forEach(a=>{const l=new an(a,0),c=new an(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{s=s.add(d.Zr)})}),le.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Ce.isDocumentKey(l)||(l=l.child(""));const c=new an(new Ce(l),0);let d=new Kt(Ve);return this.Xr.forEachWhile(p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===a&&(d=d.add(p.Zr)),!0)},c),le.resolve(this.ni(d))}ni(e){const t=[];return e.forEach(s=>{const a=this.ei(s);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){it(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return le.forEach(t.mutations,a=>{const l=new an(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,t){const s=new an(t,0),a=this.Xr.firstAfterOrEqual(s);return le.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.ii=e,this.docs=function(){return new Rt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,c=this.ii(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return le.resolve(s?s.document.mutableCopy():Rn.newInvalidDocument(t))}getEntries(e,t){let s=cr();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():Rn.newInvalidDocument(a))}),le.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=cr();const c=t.path,d=new Ce(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||w4(b4(v),s)<=0||(a.has(v.key)||dp(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return le.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Ne(9500)}si(e,t){return le.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new XV(this)}getSize(e){return le.resolve(this.size)}}class XV extends HV{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Br.addEntry(e,a)):this.Br.removeEntry(s)}),le.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.persistence=e,this.oi=new bo(t=>zy(t),Hy),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this._i=0,this.ai=new Yy,this.targetCount=0,this.ui=Bl.cr()}forEachTarget(e,t){return this.oi.forEach((s,a)=>t(a)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this._i&&(this._i=t),le.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Bl(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Tr(t),le.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),le.waitFor(l).next(()=>a)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const s=this.oi.get(t)||null;return le.resolve(s)}addMatchingKeys(e,t,s){return this.ai.Gr(t,s),le.resolve()}removeMatchingKeys(e,t,s){this.ai.jr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),le.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ai.Yr(t);return le.resolve(s)}containsKey(e,t){return le.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,t){this.ci={},this.overlays={},this.li=new lp(0),this.hi=!1,this.hi=!0,this.Pi=new KV,this.referenceDelegate=e(this),this.Ti=new ZV(this),this.indexManager=new LV,this.remoteDocumentCache=function(a){return new QV(a)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new PV(t),this.Ei=new WV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $V,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ci[e.toKey()];return s||(s=new YV(t,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,s){ye("MemoryPersistence","Starting transaction:",e);const a=new JV(this.li.next());return this.referenceDelegate.di(),s(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(e,t){return le.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,t)))}}class JV extends A4{constructor(e){super(),this.currentSequenceNumber=e}}class Qy{constructor(e){this.persistence=e,this.Vi=new Yy,this.mi=null}static fi(e){return new Qy(e)}get gi(){if(this.mi)return this.mi;throw Ne(60996)}addReference(e,t,s){return this.Vi.addReference(s,t),this.gi.delete(s.toString()),le.resolve()}removeReference(e,t,s){return this.Vi.removeReference(s,t),this.gi.add(s.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(a=>this.gi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.gi,s=>{const a=Ce.fromPath(s);return this.pi(e,a).next(l=>{l||t.removeEntry(a,ke.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(s=>{s?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return le.or([()=>le.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Hd{constructor(e,t){this.persistence=e,this.yi=new bo(s=>x4(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=zV(this,t)}static fi(e,t){return new Hd(e,t)}di(){}Ai(e){return le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Sr(e){let t=0;return this.yr(e,s=>{t++}).next(()=>t)}yr(e,t){return le.forEach(this.yi,(s,a)=>this.Dr(e,s,a).next(l=>l?le.resolve():t(a)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(e,c=>this.Dr(e,c,t).next(d=>{d||(s++,l.removeEntry(c,ke.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),le.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),le.resolve()}removeReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),le.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=fd(e.data.value)),t}Dr(e,t,s){return le.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.yi.get(t);return le.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.ds=s,this.As=a}static Rs(e,t){let s=qe(),a=qe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Xy(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return zO()?8:R4(xn())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ws(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.Ss(e,t,a,s).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new ej;return this.bs(e,t,c).next(d=>{if(l.result=d,this.fs)return this.Ds(e,t,c,d.size)})}).next(()=>l.result)}Ds(e,t,s,a){return s.documentReadCount<this.gs?(Tl()<=ze.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",El(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),le.resolve()):(Tl()<=ze.DEBUG&&ye("QueryEngine","Query:",El(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ps*a?(Tl()<=ze.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",El(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(t))):le.resolve())}ws(e,t){if(Ab(t))return le.resolve(null);let s=mi(t);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=k_(t,null,"F"),s=mi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const c=qe(...l);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,s).next(p=>{const m=this.vs(t,d);return this.Cs(t,m,c,p.readTime)?this.ws(e,k_(t,null,"F")):this.Fs(e,m,t,p)}))})))}Ss(e,t,s,a){return Ab(t)||a.isEqual(ke.min())?le.resolve(null):this.ys.getDocuments(e,s).next(l=>{const c=this.vs(t,l);return this.Cs(t,c,s,a)?le.resolve(null):(Tl()<=ze.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),El(t)),this.Fs(e,c,t,S4(a,Qc)).next(d=>d))})}vs(e,t){let s=new Kt(cR(e));return t.forEach((a,l)=>{dp(e,l)&&(s=s.add(l))}),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}bs(e,t,s){return Tl()<=ze.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",El(t)),this.ys.getDocumentsMatchingQuery(e,t,ra.min(),s)}Fs(e,t,s,a){return this.ys.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="LocalStore",nj=3e8;class sj{constructor(e,t,s,a){this.persistence=e,this.Ms=t,this.serializer=a,this.xs=new Rt(Ve),this.Os=new bo(l=>zy(l),Hy),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GV(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function ij(n,e,t,s){return new sj(n,e,t,s)}async function PR(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.Ls(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const c=[],d=[];let p=qe();for(const m of a){c.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next(m=>({ks:m,removedBatchIds:c,addedBatchIds:d}))})})}function rj(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Bs.newChangeBuffer({trackRemovals:!0});return function(d,p,m,v){const T=m.batch,E=T.keys();let R=le.resolve();return E.forEach(A=>{R=R.next(()=>v.getEntry(p,A)).next(j=>{const D=m.docVersions.get(A);it(D!==null,48541),j.version.compareTo(D)<0&&(T.applyToRemoteDocument(j,m),j.isValidDocument()&&(j.setReadTime(m.commitVersion),v.addEntry(j)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(p,T))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(d){let p=qe();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function MR(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function aj(n,e){const t=Oe(n),s=e.snapshotVersion;let a=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});a=t.xs;const d=[];e.targetChanges.forEach((v,T)=>{const E=a.get(T);if(!E)return;d.push(t.Ti.removeMatchingKeys(l,v.removedDocuments,T).next(()=>t.Ti.addMatchingKeys(l,v.addedDocuments,T)));let R=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(yn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,s)),a=a.insert(T,R),function(j,D,M){return j.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=nj?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(E,R,v)&&d.push(t.Ti.updateTargetData(l,R))});let p=cr(),m=qe();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),d.push(oj(l,c,e.documentUpdates).next(v=>{p=v.qs,m=v.Qs})),!s.isEqual(ke.min())){const v=t.Ti.getLastRemoteSnapshotVersion(l).next(T=>t.Ti.setTargetsMetadata(l,l.currentSequenceNumber,s));d.push(v)}return le.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,m)).next(()=>p)}).then(l=>(t.xs=a,l))}function oj(n,e,t){let s=qe(),a=qe();return t.forEach(l=>s=s.add(l)),e.getEntries(n,s).next(l=>{let c=cr();return t.forEach((d,p)=>{const m=l.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(ke.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ye(Zy,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)}),{qs:c,Qs:a}})}function lj(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=jy),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function uj(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Ti.getTargetData(s,e).next(l=>l?(a=l,le.resolve(a)):t.Ti.allocateTargetId(s).next(c=>(a=new Qr(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Ti.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.xs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.xs=t.xs.insert(s.targetId,s),t.Os.set(e,s.targetId)),s})}async function L_(n,e,t){const s=Oe(n),a=s.xs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,c=>s.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Jl(c))throw c;ye(Zy,`Failed to update sequence numbers for target ${e}: ${c}`)}s.xs=s.xs.remove(e),s.Os.delete(a.target)}function jb(n,e,t){const s=Oe(n);let a=ke.min(),l=qe();return s.persistence.runTransaction("Execute query","readwrite",c=>function(p,m,v){const T=Oe(p),E=T.Os.get(v);return E!==void 0?le.resolve(T.xs.get(E)):T.Ti.getTargetData(m,v)}(s,c,mi(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(c,d.targetId).next(p=>{l=p})}).next(()=>s.Ms.getDocumentsMatchingQuery(c,e,t?a:ke.min(),t?l:qe())).next(d=>(cj(s,Y4(e),d),{documents:d,$s:l})))}function cj(n,e,t){let s=n.Ns.get(e)||ke.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),n.Ns.set(e,s)}class Bb{constructor(){this.activeTargetIds=tV()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hj{constructor(){this.xo=new Bb,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,s){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Bb,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="ConnectivityMonitor";class zb{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ye(Fb,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ye(Fb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zf=null;function U_(){return Zf===null?Zf=function(){return 268435456+Math.round(2147483648*Math.random())}():Zf++,"0x"+Zf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="RestConnection",dj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pj{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${s}/databases/${a}`,this.Go=this.databaseId.database===Ld?`project_id=${s}`:`project_id=${s}&database_id=${a}`}zo(e,t,s,a,l){const c=U_(),d=this.jo(e,t.toUriEncodedString());ye(Kg,`Sending RPC '${e}' ${c}:`,d,s);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,a,l);const{host:m}=new URL(d),v=To(m);return this.Jo(e,d,p,s,v).then(T=>(ye(Kg,`Received RPC '${e}' ${c}: `,T),T),T=>{throw Ml(Kg,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",s),T})}Yo(e,t,s,a,l,c){return this.zo(e,t,s,a,l)}Ho(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}jo(e,t){const s=dj[e];return`${this.Ko}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class gj extends pj{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const c=U_();return new Promise((d,p)=>{const m=new VA;m.setWithCredentials(!0),m.listenOnce(jA.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case hd.NO_ERROR:const T=m.getResponseJson();ye(Sn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case hd.TIMEOUT:ye(Sn,`RPC '${e}' ${c} timed out`),p(new be(he.DEADLINE_EXCEEDED,"Request time out"));break;case hd.HTTP_ERROR:const E=m.getStatus();if(ye(Sn,`RPC '${e}' ${c} failed with status:`,E,"response text:",m.getResponseText()),E>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const A=R==null?void 0:R.error;if(A&&A.status&&A.message){const j=function(M){const z=M.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(z)>=0?z:he.UNKNOWN}(A.status);p(new be(j,A.message))}else p(new be(he.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new be(he.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{ye(Sn,`RPC '${e}' ${c} completed.`)}});const v=JSON.stringify(a);ye(Sn,`RPC '${e}' ${c} sending request:`,a),m.send(t,"POST",v,s,15)})}T_(e,t,s){const a=U_(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=zA(),d=FA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");ye(Sn,`Creating RPC '${e}' stream ${a}: ${v}`,p);const T=c.createWebChannel(v,p);let E=!1,R=!1;const A=new mj({Zo:D=>{R?ye(Sn,`Not sending because RPC '${e}' stream ${a} is closed:`,D):(E||(ye(Sn,`Opening RPC '${e}' stream ${a} transport.`),T.open(),E=!0),ye(Sn,`RPC '${e}' stream ${a} sending:`,D),T.send(D))},Xo:()=>T.close()}),j=(D,M,z)=>{D.listen(M,q=>{try{z(q)}catch(ne){setTimeout(()=>{throw ne},0)}})};return j(T,Rc.EventType.OPEN,()=>{R||(ye(Sn,`RPC '${e}' stream ${a} transport opened.`),A.__())}),j(T,Rc.EventType.CLOSE,()=>{R||(R=!0,ye(Sn,`RPC '${e}' stream ${a} transport closed`),A.u_())}),j(T,Rc.EventType.ERROR,D=>{R||(R=!0,Ml(Sn,`RPC '${e}' stream ${a} transport errored. Name:`,D.name,"Message:",D.message),A.u_(new be(he.UNAVAILABLE,"The operation could not be completed")))}),j(T,Rc.EventType.MESSAGE,D=>{var M;if(!R){const z=D.data[0];it(!!z,16349);const q=z,ne=(q==null?void 0:q.error)||((M=q[0])===null||M===void 0?void 0:M.error);if(ne){ye(Sn,`RPC '${e}' stream ${a} received error:`,ne);const ue=ne.status;let ee=function(N){const V=Bt[N];if(V!==void 0)return SR(V)}(ue),O=ne.message;ee===void 0&&(ee=he.INTERNAL,O="Unknown error status: "+ue+" with message "+ne.message),R=!0,A.u_(new be(ee,O)),T.close()}else ye(Sn,`RPC '${e}' stream ${a} received:`,z),A.c_(z)}}),j(d,BA.STAT_EVENT,D=>{D.stat===C_.PROXY?ye(Sn,`RPC '${e}' stream ${a} detected buffering proxy`):D.stat===C_.NOPROXY&&ye(Sn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{A.a_()},0),A}}function Yg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(n){return new TV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t,s=1e3,a=1.5,l=6e4){this.xi=e,this.timerId=t,this.I_=s,this.E_=a,this.d_=l,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),s=Math.max(0,Date.now()-this.V_),a=Math.max(0,t-s);a>0&&ye("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="PersistentStream";class UR{constructor(e,t,s,a,l,c,d,p){this.xi=e,this.y_=s,this.w_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new LR(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.S_===t&&this.K_(s,a)},s=>{e(()=>{const a=new be(he.UNKNOWN,"Fetching auth token failed: "+s.message);return this.W_(a)})})}K_(e,t){const s=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{s(()=>this.W_(a))}),this.stream.onMessage(a=>{s(()=>++this.v_==1?this.z_(a):this.onNext(a))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return ye(Hb,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(ye(Hb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _j extends UR{constructor(e,t,s,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=bV(this.serializer,e),s=function(l){if(!("targetChange"in l))return ke.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ke.min():c.readTime?_i(c.readTime):ke.min()}(e);return this.listener.j_(t,s)}H_(e){const t={};t.database=M_(this.serializer),t.addTarget=function(l,c){let d;const p=c.target;if(d=N_(p)?{documents:AV(l,p)}:{query:RV(l,p).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=CR(l,c.resumeToken);const m=O_(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(ke.min())>0){d.readTime=zd(l,c.snapshotVersion.toTimestamp());const m=O_(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const s=xV(this.serializer,e);s&&(t.labels=s),this.L_(t)}J_(e){const t={};t.database=M_(this.serializer),t.removeTarget=e,this.L_(t)}}class yj extends UR{constructor(e,t,s,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=CV(e.writeResults,e.commitTime),s=_i(e.commitTime);return this.listener.ea(s,t)}ta(){const e={};e.database=M_(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>wV(this.serializer,s))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{}class Tj extends vj{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.na=!1}ra(){if(this.na)throw new be(he.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,s,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(e,D_(t,s),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new be(he.UNKNOWN,l.toString())})}Yo(e,t,s,a,l){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,D_(t,s),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(he.UNKNOWN,c.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class Ej{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(ur(t),this.oa=!1):ye("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="RemoteStore";class Sj{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=l,this.Ea.No(c=>{s.enqueueAndForget(async()=>{wo(this)&&(ye(mo,"Restarting streams for network reachability change."),await async function(p){const m=Oe(p);m.Ta.add(4),await _h(m),m.da.set("Unknown"),m.Ta.delete(4),await yp(m)}(this))})}),this.da=new Ej(s,a)}}async function yp(n){if(wo(n))for(const e of n.Ia)await e(!0)}async function _h(n){for(const e of n.Ia)await e(!1)}function VR(n,e){const t=Oe(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),nv(t)?tv(t):eu(t).M_()&&ev(t,e))}function Jy(n,e){const t=Oe(n),s=eu(t);t.Pa.delete(e),s.M_()&&jR(t,e),t.Pa.size===0&&(s.M_()?s.N_():wo(t)&&t.da.set("Unknown"))}function ev(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}eu(n).H_(e)}function jR(n,e){n.Aa.Ke(e),eu(n).J_(e)}function tv(n){n.Aa=new gV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),eu(n).start(),n.da._a()}function nv(n){return wo(n)&&!eu(n).F_()&&n.Pa.size>0}function wo(n){return Oe(n).Ta.size===0}function BR(n){n.Aa=void 0}async function bj(n){n.da.set("Online")}async function wj(n){n.Pa.forEach((e,t)=>{ev(n,e)})}async function Cj(n,e){BR(n),nv(n)?(n.da.ca(e),tv(n)):n.da.set("Unknown")}async function Aj(n,e,t){if(n.da.set("Online"),e instanceof wR&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Pa.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Pa.delete(d),a.Aa.removeTarget(d))}(n,e)}catch(s){ye(mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await qd(n,s)}else if(e instanceof md?n.Aa.Xe(e):e instanceof bR?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(ke.min()))try{const s=await MR(n.localStore);t.compareTo(s)>=0&&await function(l,c){const d=l.Aa.It(c);return d.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Pa.get(m);v&&l.Pa.set(m,v.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,m)=>{const v=l.Pa.get(p);if(!v)return;l.Pa.set(p,v.withResumeToken(yn.EMPTY_BYTE_STRING,v.snapshotVersion)),jR(l,p);const T=new Qr(v.target,p,m,v.sequenceNumber);ev(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(s){ye(mo,"Failed to raise snapshot:",s),await qd(n,s)}}async function qd(n,e,t){if(!Jl(e))throw e;n.Ta.add(1),await _h(n),n.da.set("Offline"),t||(t=()=>MR(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ye(mo,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await yp(n)})}function FR(n,e){return e().catch(t=>qd(n,t,e))}async function vp(n){const e=Oe(n),t=ua(e);let s=e.ha.length>0?e.ha[e.ha.length-1].batchId:jy;for(;Rj(e);)try{const a=await lj(e.localStore,s);if(a===null){e.ha.length===0&&t.N_();break}s=a.batchId,Ij(e,a)}catch(a){await qd(e,a)}zR(e)&&HR(e)}function Rj(n){return wo(n)&&n.ha.length<10}function Ij(n,e){n.ha.push(e);const t=ua(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function zR(n){return wo(n)&&!ua(n).F_()&&n.ha.length>0}function HR(n){ua(n).start()}async function xj(n){ua(n).ta()}async function Nj(n){const e=ua(n);for(const t of n.ha)e.Z_(t.mutations)}async function kj(n,e,t){const s=n.ha.shift(),a=Wy.from(s,e,t);await FR(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await vp(n)}async function Oj(n,e){e&&ua(n).Y_&&await async function(s,a){if(function(c){return pV(c)&&c!==he.ABORTED}(a.code)){const l=s.ha.shift();ua(s).O_(),await FR(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a)),await vp(s)}}(n,e),zR(n)&&HR(n)}async function qb(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),ye(mo,"RemoteStore received new credentials");const s=wo(t);t.Ta.add(3),await _h(t),s&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await yp(t)}async function Dj(n,e){const t=Oe(n);e?(t.Ta.delete(2),await yp(t)):e||(t.Ta.add(2),await _h(t),t.da.set("Unknown"))}function eu(n){return n.Ra||(n.Ra=function(t,s,a){const l=Oe(t);return l.ra(),new _j(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{e_:bj.bind(null,n),n_:wj.bind(null,n),i_:Cj.bind(null,n),j_:Aj.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),nv(n)?tv(n):n.da.set("Unknown")):(await n.Ra.stop(),BR(n))})),n.Ra}function ua(n){return n.Va||(n.Va=function(t,s,a){const l=Oe(t);return l.ra(),new yj(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:xj.bind(null,n),i_:Oj.bind(null,n),X_:Nj.bind(null,n),ea:kj.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await vp(n)):(await n.Va.stop(),n.ha.length>0&&(ye(mo,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const c=Date.now()+s,d=new sv(e,t,c,a,l);return d.start(s),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iv(n,e){if(ur("AsyncQueue",`${e}: ${n}`),Jl(n))return new be(he.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{static emptySet(e){return new kl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ce.comparator(t.key,s.key):(t,s)=>Ce.comparator(t.key,s.key),this.keyedMap=Ic(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof kl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new kl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.ma=new Rt(Ce.comparator)}track(e){const t=e.doc.key,s=this.ma.get(t);s?e.type!==0&&s.type===3?this.ma=this.ma.insert(t,e):e.type===3&&s.type!==1?this.ma=this.ma.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ma=this.ma.remove(t):e.type===1&&s.type===2?this.ma=this.ma.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):Ne(63341,{Vt:e,fa:s}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,s)=>{e.push(s)}),e}}class Fl{constructor(e,t,s,a,l,c,d,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new Fl(e,t,kl.emptySet(t),c,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class Mj{constructor(){this.queries=Wb(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,s){const a=Oe(t),l=a.queries;a.queries=Wb(),l.forEach((c,d)=>{for(const p of d.ya)p.onError(s)})})(this,new be(he.ABORTED,"Firestore shutting down"))}}function Wb(){return new bo(n=>uR(n),fp)}async function Lj(n,e){const t=Oe(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.wa()&&e.Sa()&&(s=2):(l=new Pj,s=e.Sa()?0:1);try{switch(s){case 0:l.pa=await t.onListen(a,!0);break;case 1:l.pa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=iv(c,`Initialization of query '${El(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ya.push(e),e.Da(t.onlineState),l.pa&&e.va(l.pa)&&rv(t)}async function Uj(n,e){const t=Oe(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const c=l.ya.indexOf(e);c>=0&&(l.ya.splice(c,1),l.ya.length===0?a=e.Sa()?0:1:!l.wa()&&e.Sa()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Vj(n,e){const t=Oe(n);let s=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ya)d.va(a)&&(s=!0);c.pa=a}}s&&rv(t)}function jj(n,e,t){const s=Oe(n),a=s.queries.get(e);if(a)for(const l of a.ya)l.onError(t);s.queries.delete(e)}function rv(n){n.ba.forEach(e=>{e.next()})}var V_,$b;($b=V_||(V_={})).Ca="default",$b.Cache="cache";class Bj{constructor(e,t,s){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=s||{}}va(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Fl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const s=t!=="Offline";return(!this.options.La||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=Fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==V_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.key=e}}class GR{constructor(e){this.key=e}}class Fj{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=qe(),this.mutatedKeys=qe(),this.Ha=cR(e),this.Ja=new kl(this.Ha)}get Ya(){return this.Ga}Za(e,t){const s=t?t.Xa:new Gb,a=t?t.Ja:this.Ja;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((v,T)=>{const E=a.get(v),R=dp(this.query,T)?T:null,A=!!E&&this.mutatedKeys.has(E.key),j=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let D=!1;E&&R?E.data.isEqual(R.data)?A!==j&&(s.track({type:3,doc:R}),D=!0):this.eu(E,R)||(s.track({type:2,doc:R}),D=!0,(p&&this.Ha(R,p)>0||m&&this.Ha(R,m)<0)&&(d=!0)):!E&&R?(s.track({type:0,doc:R}),D=!0):E&&!R&&(s.track({type:1,doc:E}),D=!0,(p||m)&&(d=!0)),D&&(R?(c=c.add(R),l=j?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{Ja:c,Xa:s,Cs:d,mutatedKeys:l}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const c=e.Xa.ga();c.sort((v,T)=>function(R,A){const j=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Vt:D})}};return j(R)-j(A)}(v.type,T.type)||this.Ha(v.doc,T.doc)),this.tu(s),a=a!=null&&a;const d=t&&!a?this.nu():[],p=this.ja.size===0&&this.current&&!a?1:0,m=p!==this.za;return this.za=p,c.length!==0||m?{snapshot:new Fl(this.query,e.Ja,l,c,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),ru:d}:{ru:d}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Gb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=qe(),this.Ja.forEach(s=>{this.iu(s.key)&&(this.ja=this.ja.add(s.key))});const t=[];return e.forEach(s=>{this.ja.has(s)||t.push(new GR(s))}),this.ja.forEach(s=>{e.has(s)||t.push(new qR(s))}),t}su(e){this.Ga=e.$s,this.ja=qe();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return Fl.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const av="SyncEngine";class zj{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Hj{constructor(e){this.key=e,this._u=!1}}class qj{constructor(e,t,s,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.au={},this.uu=new bo(d=>uR(d),fp),this.cu=new Map,this.lu=new Set,this.hu=new Rt(Ce.comparator),this.Pu=new Map,this.Tu=new Yy,this.Iu={},this.Eu=new Map,this.du=Bl.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function Gj(n,e,t=!0){const s=XR(n);let a;const l=s.uu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.ou()):a=await WR(s,e,t,!0),a}async function Wj(n,e){const t=XR(n);await WR(t,e,!0,!1)}async function WR(n,e,t,s){const a=await uj(n.localStore,mi(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await $j(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&VR(n.remoteStore,a),d}async function $j(n,e,t,s,a){n.Ru=(T,E,R)=>async function(j,D,M,z){let q=D.view.Za(M);q.Cs&&(q=await jb(j.localStore,D.query,!1).then(({documents:O})=>D.view.Za(O,q)));const ne=z&&z.targetChanges.get(D.targetId),ue=z&&z.targetMismatches.get(D.targetId)!=null,ee=D.view.applyChanges(q,j.isPrimaryClient,ne,ue);return Yb(j,D.targetId,ee.ru),ee.snapshot}(n,T,E,R);const l=await jb(n.localStore,e,!0),c=new Fj(e,l.$s),d=c.Za(l.documents),p=gh.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),m=c.applyChanges(d,n.isPrimaryClient,p);Yb(n,t,m.ru);const v=new zj(e,t,c);return n.uu.set(e,v),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),m.snapshot}async function Kj(n,e,t){const s=Oe(n),a=s.uu.get(e),l=s.cu.get(a.targetId);if(l.length>1)return s.cu.set(a.targetId,l.filter(c=>!fp(c,e))),void s.uu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await L_(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Jy(s.remoteStore,a.targetId),j_(s,a.targetId)}).catch(Zl)):(j_(s,a.targetId),await L_(s.localStore,a.targetId,!0))}async function Yj(n,e){const t=Oe(n),s=t.uu.get(e),a=t.cu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Jy(t.remoteStore,s.targetId))}async function Qj(n,e,t){const s=s6(n);try{const a=await function(c,d){const p=Oe(c),m=$t.now(),v=d.reduce((R,A)=>R.add(A.key),qe());let T,E;return p.persistence.runTransaction("Locally write mutations","readwrite",R=>{let A=cr(),j=qe();return p.Bs.getEntries(R,v).next(D=>{A=D,A.forEach((M,z)=>{z.isValidDocument()||(j=j.add(M))})}).next(()=>p.localDocuments.getOverlayedDocuments(R,A)).next(D=>{T=D;const M=[];for(const z of d){const q=uV(z,T.get(z.key).overlayedDocument);q!=null&&M.push(new _a(z.key,q,nR(q.value.mapValue),gi.exists(!0)))}return p.mutationQueue.addMutationBatch(R,m,M,d)}).next(D=>{E=D;const M=D.applyToLocalDocumentSet(T,j);return p.documentOverlayCache.saveOverlays(R,D.batchId,M)})}).then(()=>({batchId:E.batchId,changes:fR(T)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(c,d,p){let m=c.Iu[c.currentUser.toKey()];m||(m=new Rt(Ve)),m=m.insert(d,p),c.Iu[c.currentUser.toKey()]=m}(s,a.batchId,t),await yh(s,a.changes),await vp(s.remoteStore)}catch(a){const l=iv(a,"Failed to persist write");t.reject(l)}}async function $R(n,e){const t=Oe(n);try{const s=await aj(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Pu.get(l);c&&(it(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c._u=!0:a.modifiedDocuments.size>0?it(c._u,14607):a.removedDocuments.size>0&&(it(c._u,42227),c._u=!1))}),await yh(t,s,e)}catch(s){await Zl(s)}}function Kb(n,e,t){const s=Oe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.uu.forEach((l,c)=>{const d=c.view.Da(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const p=Oe(c);p.onlineState=d;let m=!1;p.queries.forEach((v,T)=>{for(const E of T.ya)E.Da(d)&&(m=!0)}),m&&rv(p)}(s.eventManager,e),a.length&&s.au.j_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Xj(n,e,t){const s=Oe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Pu.get(e),l=a&&a.key;if(l){let c=new Rt(Ce.comparator);c=c.insert(l,Rn.newNoDocument(l,ke.min()));const d=qe().add(l),p=new gp(ke.min(),new Map,new Rt(Ve),c,d);await $R(s,p),s.hu=s.hu.remove(l),s.Pu.delete(e),ov(s)}else await L_(s.localStore,e,!1).then(()=>j_(s,e,t)).catch(Zl)}async function Zj(n,e){const t=Oe(n),s=e.batch.batchId;try{const a=await rj(t.localStore,e);YR(t,s,null),KR(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await yh(t,a)}catch(a){await Zl(a)}}async function Jj(n,e,t){const s=Oe(n);try{const a=await function(c,d){const p=Oe(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return p.mutationQueue.lookupMutationBatch(m,d).next(T=>(it(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(m,T))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>p.localDocuments.getDocuments(m,v))})}(s.localStore,e);YR(s,e,t),KR(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await yh(s,a)}catch(a){await Zl(a)}}function KR(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function YR(n,e,t){const s=Oe(n);let a=s.Iu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Iu[s.currentUser.toKey()]=a}}function j_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.cu.get(e))n.uu.delete(s),t&&n.au.Vu(s,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(s=>{n.Tu.containsKey(s)||QR(n,s)})}function QR(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(Jy(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),ov(n))}function Yb(n,e,t){for(const s of t)s instanceof qR?(n.Tu.addReference(s.key,e),e6(n,s)):s instanceof GR?(ye(av,"Document no longer in limbo: "+s.key),n.Tu.removeReference(s.key,e),n.Tu.containsKey(s.key)||QR(n,s.key)):Ne(19791,{mu:s})}function e6(n,e){const t=e.key,s=t.path.canonicalString();n.hu.get(t)||n.lu.has(s)||(ye(av,"New document in limbo: "+t),n.lu.add(s),ov(n))}function ov(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new Ce(kt.fromString(e)),s=n.du.next();n.Pu.set(s,new Hj(t)),n.hu=n.hu.insert(t,s),VR(n.remoteStore,new Qr(mi(qy(t.path)),s,"TargetPurposeLimboResolution",lp.le))}}async function yh(n,e,t){const s=Oe(n),a=[],l=[],c=[];s.uu.isEmpty()||(s.uu.forEach((d,p)=>{c.push(s.Ru(p,e,t).then(m=>{var v;if((m||t)&&s.isPrimaryClient){const T=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(m){a.push(m);const T=Xy.Rs(p.targetId,m);l.push(T)}}))}),await Promise.all(c),s.au.j_(a),await async function(p,m){const v=Oe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>le.forEach(m,E=>le.forEach(E.ds,R=>v.persistence.referenceDelegate.addReference(T,E.targetId,R)).next(()=>le.forEach(E.As,R=>v.persistence.referenceDelegate.removeReference(T,E.targetId,R)))))}catch(T){if(!Jl(T))throw T;ye(Zy,"Failed to update sequence numbers: "+T)}for(const T of m){const E=T.targetId;if(!T.fromCache){const R=v.xs.get(E),A=R.snapshotVersion,j=R.withLastLimboFreeSnapshotVersion(A);v.xs=v.xs.insert(E,j)}}}(s.localStore,l))}async function t6(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){ye(av,"User change. New user:",e.toKey());const s=await PR(t.localStore,e);t.currentUser=e,function(l,c){l.Eu.forEach(d=>{d.forEach(p=>{p.reject(new be(he.CANCELLED,c))})}),l.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await yh(t,s.ks)}}function n6(n,e){const t=Oe(n),s=t.Pu.get(e);if(s&&s._u)return qe().add(s.key);{let a=qe();const l=t.cu.get(e);if(!l)return a;for(const c of l){const d=t.uu.get(c);a=a.unionWith(d.view.Ya)}return a}}function XR(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$R.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=n6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xj.bind(null,e),e.au.j_=Vj.bind(null,e.eventManager),e.au.Vu=jj.bind(null,e.eventManager),e}function s6(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jj.bind(null,e),e}class Gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_p(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return ij(this.persistence,new tj,e.initialUser,this.serializer)}yu(e){return new DR(Qy.fi,this.serializer)}pu(e){return new hj}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gd.provider={build:()=>new Gd};class i6 extends Gd{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){it(this.persistence.referenceDelegate instanceof Hd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new BV(s,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new DR(s=>Hd.fi(s,t),this.serializer)}}class B_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Kb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=t6.bind(null,this.syncEngine),await Dj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Mj}()}createDatastore(e){const t=_p(e.databaseInfo.databaseId),s=function(l){return new gj(l)}(e.databaseInfo);return function(l,c,d,p){return new Tj(l,c,d,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,a,l,c,d){return new Sj(s,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>Kb(this.syncEngine,t,0),function(){return zb.C()?new zb:new fj}())}createSyncEngine(e,t){return function(a,l,c,d,p,m,v){const T=new qj(a,l,c,d,p,m);return v&&(T.Au=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Oe(a);ye(mo,"RemoteStore shutting down."),l.Ta.add(5),await _h(l),l.Ea.shutdown(),l.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}B_.provider={build:()=>new B_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="FirestoreClient";class a6{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=wn.UNAUTHENTICATED,this.clientId=WA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async c=>{ye(ca,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(s,c=>(ye(ca,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=iv(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Qg(n,e){n.asyncQueue.verifyOperationInProgress(),ye(ca,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async a=>{s.isEqual(a)||(await PR(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Qb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await o6(n);ye(ca,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>qb(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,a)=>qb(e.remoteStore,a)),n._onlineComponents=e}async function o6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(ca,"Using user provided OfflineComponentProvider");try{await Qg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===he.FAILED_PRECONDITION||a.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Ml("Error using user provided cache. Falling back to memory cache: "+t),await Qg(n,new Gd)}}else ye(ca,"Using default OfflineComponentProvider"),await Qg(n,new i6(void 0));return n._offlineComponents}async function ZR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(ca,"Using user provided OnlineComponentProvider"),await Qb(n,n._uninitializedComponentsProvider._online)):(ye(ca,"Using default OnlineComponentProvider"),await Qb(n,new B_))),n._onlineComponents}function l6(n){return ZR(n).then(e=>e.syncEngine)}async function u6(n){const e=await ZR(n),t=e.eventManager;return t.onListen=Gj.bind(null,e.syncEngine),t.onUnlisten=Kj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Wj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Yj.bind(null,e.syncEngine),t}function c6(n,e,t={}){const s=new ta;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,p,m){const v=new r6({next:E=>{v.Cu(),c.enqueueAndForget(()=>Uj(l,T));const R=E.docs.has(d);!R&&E.fromCache?m.reject(new be(he.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&E.fromCache&&p&&p.source==="server"?m.reject(new be(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),T=new Bj(qy(d.path),v,{includeMetadataChanges:!0,La:!0});return Lj(l,T)}(await u6(n),n.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h6(n,e,t){if(!t)throw new be(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function f6(n,e,t,s){if(e===!0&&s===!0)throw new be(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Zb(n){if(!Ce.isDocumentKey(n))throw new be(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ne(12329,{type:typeof n})}function go(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lv(n);throw new be(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firestore.googleapis.com",Jb=!0;class ew{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new be(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=e1,this.ssl=Jb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Jb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VV)throw new be(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JR((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new be(he.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new be(he.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new be(he.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uv{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ew({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ew(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new d4;switch(s.type){case"firstParty":return new _4(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new be(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=Xb.get(t);s&&(ye("ComponentProvider","Removing Datastore"),Xb.delete(t),s.terminate())}(this),Promise.resolve()}}function d6(n,e,t,s={}){var a;n=go(n,uv);const l=To(e),c=n._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(ey(`https://${p}`),ty("Firestore",!0)),c.host!==e1&&c.host!==p&&Ml("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:s});if(!na(m,d)&&(n._setSettings(m),s.mockUserToken)){let v,T;if(typeof s.mockUserToken=="string")v=s.mockUserToken,T=wn.MOCK_USER;else{v=Bw(s.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new be(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new wn(E)}n._authCredentials=new p4(new qA(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new cv(this.firestore,e,this._query)}}class us{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new th(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new us(this.firestore,e,this._key)}}class th extends cv{constructor(e,t,s){super(e,t,qy(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new us(this.firestore,null,new Ce(e))}withConverter(e){return new th(this.firestore,e,this._path)}}function Kn(n,e,...t){if(n=bt(n),arguments.length===1&&(e=WA.newId()),h6("doc","path",e),n instanceof uv){const s=kt.fromString(e,...t);return Zb(s),new us(n,null,new Ce(s))}{if(!(n instanceof us||n instanceof th))throw new be(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(kt.fromString(e,...t));return Zb(s),new us(n.firestore,n instanceof th?n.converter:null,new Ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="AsyncQueue";class nw{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new LR(this,"async_queue_retry"),this.ec=()=>{const s=Yg();s&&ye(tw,"Visibility state changed to "+s.visibilityState),this.C_.p_()},this.tc=e;const t=Yg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=Yg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new ta;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Jl(e))throw e;ye(tw,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(s=>{throw this.Ju=s,this.Yu=!1,ur("INTERNAL UNHANDLED ERROR: ",sw(s)),s}).then(s=>(this.Yu=!1,s))));return this.tc=t,t}enqueueAfterDelay(e,t,s){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const a=sv.createAndSchedule(this,e,t,s,l=>this.oc(l));return this.Hu.push(a),a}nc(){this.Ju&&Ne(47125,{_c:sw(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function sw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Tp extends uv{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new nw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nw(e),this._firestoreClient=void 0,await e}}}function p6(n,e){const t=typeof n=="object"?n:ry(),s=typeof n=="string"?n:Ld,a=Jd(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=Uw("firestore");l&&d6(a,...l)}return a}function t1(n){if(n._terminated)throw new be(he.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||m6(n),n._firestoreClient}function m6(n){var e,t,s;const a=n._freezeSettings(),l=function(d,p,m,v){return new O4(d,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,JR(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new a6(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zl(yn.fromBase64String(e))}catch(t){throw new be(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zl(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=/^__.*__$/;class _6{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new _a(e,this.data,this.fieldMask,t,this.fieldTransforms):new mh(e,this.data,t,this.fieldTransforms)}}class n1{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new _a(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function s1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{hc:n})}}class bp{constructor(e,t,s,a,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Pc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new bp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Tc({path:s,Ec:!1});return a.dc(e),a}Ac(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Tc({path:s,Ec:!1});return a.Pc(),a}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Wd(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(s1(this.hc)&&g6.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class y6{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||_p(e)}gc(e,t,s,a=!1){return new bp({hc:e,methodName:t,fc:s,path:_n.emptyPath(),Ec:!1,mc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function i1(n){const e=n._freezeSettings(),t=_p(n._databaseId);return new y6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function v6(n,e,t,s,a,l={}){const c=n.gc(l.merge||l.mergeFields?2:0,e,t,a);pv("Data must be an object, but it was:",c,s);const d=r1(s,c);let p,m;if(l.merge)p=new as(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const E=F_(e,T,t);if(!c.contains(E))throw new be(he.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);o1(v,E)||v.push(E)}p=new as(v),m=c.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,m=c.fieldTransforms;return new _6(new $n(d),p,m)}class wp extends Sp{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wp}}function T6(n,e,t){return new bp({hc:3,fc:e.settings.fc,methodName:n._methodName,Ec:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dv extends Sp{constructor(e,t){super(e),this.yc=t}_toFieldTransform(e){const t=T6(this,e,!0),s=this.yc.map(l=>vh(l,t)),a=new jl(s);return new rV(e.path,a)}isEqual(e){return e instanceof dv&&na(this.yc,e.yc)}}function E6(n,e,t,s){const a=n.gc(1,e,t);pv("Data must be an object, but it was:",a,s);const l=[],c=$n.empty();ga(s,(p,m)=>{const v=mv(e,p,t);m=bt(m);const T=a.Ac(v);if(m instanceof wp)l.push(v);else{const E=vh(m,T);E!=null&&(l.push(v),c.set(v,E))}});const d=new as(l);return new n1(c,d,a.fieldTransforms)}function S6(n,e,t,s,a,l){const c=n.gc(1,e,t),d=[F_(e,s,t)],p=[a];if(l.length%2!=0)throw new be(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)d.push(F_(e,l[E])),p.push(l[E+1]);const m=[],v=$n.empty();for(let E=d.length-1;E>=0;--E)if(!o1(m,d[E])){const R=d[E];let A=p[E];A=bt(A);const j=c.Ac(R);if(A instanceof wp)m.push(R);else{const D=vh(A,j);D!=null&&(m.push(R),v.set(R,D))}}const T=new as(m);return new n1(v,T,c.fieldTransforms)}function vh(n,e){if(a1(n=bt(n)))return pv("Unsupported field value:",e,n),r1(n,e);if(n instanceof Sp)return function(s,a){if(!s1(a.hc))throw a.Vc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Vc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(s,a){const l=[];let c=0;for(const d of s){let p=vh(d,a.Rc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(n,e)}return function(s,a){if((s=bt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return nV(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=$t.fromDate(s);return{timestampValue:zd(a.serializer,l)}}if(s instanceof $t){const l=new $t(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:zd(a.serializer,l)}}if(s instanceof hv)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof zl)return{bytesValue:CR(a.serializer,s._byteString)};if(s instanceof us){const l=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw a.Vc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ky(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof fv)return function(c,d){return{mapValue:{fields:{[eR]:{stringValue:tR},[Ud]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw d.Vc("VectorValues must only contain numeric values.");return Gy(d.serializer,m)})}}}}}}(s,a);throw a.Vc(`Unsupported field value: ${lv(s)}`)}(n,e)}function r1(n,e){const t={};return KA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ga(n,(s,a)=>{const l=vh(a,e.Ic(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function a1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $t||n instanceof hv||n instanceof zl||n instanceof us||n instanceof Sp||n instanceof fv)}function pv(n,e,t){if(!a1(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const s=lv(t);throw s==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+s)}}function F_(n,e,t){if((e=bt(e))instanceof Ep)return e._internalPath;if(typeof e=="string")return mv(n,e);throw Wd("Field path arguments must be of type string or ",n,!1,void 0,t)}const b6=new RegExp("[~\\*/\\[\\]]");function mv(n,e,t){if(e.search(b6)>=0)throw Wd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ep(...e.split("."))._internalPath}catch{throw Wd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wd(n,e,t,s,a){const l=s&&!s.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${a}`),p+=")"),new be(he.INVALID_ARGUMENT,d+n+p)}function o1(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new us(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new w6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(u1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class w6 extends l1{data(){return super.data()}}function u1(n,e){return typeof e=="string"?mv(n,e):e instanceof Ep?e._internalPath:e._delegate._internalPath}class C6{convertValue(e,t="none"){switch(la(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ga(e,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,a;const l=(a=(s=(t=e.fields)===null||t===void 0?void 0:t[Ud].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(c=>Mt(c.doubleValue));return new fv(l)}convertGeoPoint(e){return new hv(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=cp(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const t=aa(e);return new $t(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=kt.fromString(e);it(kR(s),9688,{name:e});const a=new Zc(s.get(1),s.get(3)),l=new Ce(s.popFirst(5));return a.isEqual(t)||ur(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(n,e,t){let s;return s=n?n.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class c1 extends l1{constructor(e,t,s,a,l,c){super(e,t,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new I6(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(u1("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class I6 extends c1{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(n){n=go(n,us);const e=go(n.firestore,Tp);return c6(t1(e),n._key).then(t=>N6(e,n,t))}class x6 extends C6{constructor(e){super(),this.firestore=e}convertBytes(e){return new zl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new us(this.firestore,null,t)}}function iw(n,e,t){n=go(n,us);const s=go(n.firestore,Tp),a=A6(n.converter,e);return h1(s,[v6(i1(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,gi.none())])}function ha(n,e,t,...s){n=go(n,us);const a=go(n.firestore,Tp),l=i1(a);let c;return c=typeof(e=bt(e))=="string"||e instanceof Ep?S6(l,"updateDoc",n._key,e,t,s):E6(l,"updateDoc",n._key,e),h1(a,[c.toMutation(n._key,gi.exists(!0))])}function h1(n,e){return function(s,a){const l=new ta;return s.asyncQueue.enqueueAndForget(async()=>Qj(await l6(s),a,l)),l.promise}(t1(n),e)}function N6(n,e,t){const s=t.docs.get(e._key),a=new x6(n);return new c1(n,a,e._key,s,new R6(t.hasPendingWrites,t.fromCache),e.converter)}function k6(...n){return new dv("arrayUnion",n)}(function(e,t=!0){(function(a){Xl=a})(fa),sa(new ar("firestore",(s,{instanceIdentifier:a,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new Tp(new m4(s.getProvider("auth-internal")),new y4(c,s.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new be(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zc(m.options.projectId,v)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),xs(ub,cb,e),xs(ub,cb,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="firebasestorage.googleapis.com",d1="storageBucket",O6=2*60*1e3,D6=10*60*1e3,P6=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It extends Si{constructor(e,t,s=0){super(Xg(e),`Firebase Storage: ${t} (${Xg(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,It.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vt||(vt={}));function Xg(n){return"storage/"+n}function gv(){const n="An unknown error occurred, please check the error payload for server response.";return new It(vt.UNKNOWN,n)}function M6(n){return new It(vt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function L6(n){return new It(vt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function U6(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new It(vt.UNAUTHENTICATED,n)}function V6(){return new It(vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function j6(n){return new It(vt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function p1(){return new It(vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function m1(){return new It(vt.CANCELED,"User canceled the upload/download.")}function B6(n){return new It(vt.INVALID_URL,"Invalid URL '"+n+"'.")}function F6(n){return new It(vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function z6(){return new It(vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+d1+"' property when initializing the app?")}function g1(){return new It(vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function H6(){return new It(vt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function q6(){return new It(vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function G6(n){return new It(vt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function z_(n){return new It(vt.INVALID_ARGUMENT,n)}function _1(){return new It(vt.APP_DELETED,"The Firebase app was deleted.")}function W6(n){return new It(vt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bc(n,e){return new It(vt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function vc(n){throw new It(vt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Bn.makeFromUrl(e,t)}catch{return new Bn(e,"")}if(s.path==="")return s;throw F6(e)}static makeFromUrl(e,t){let s=null;const a="([A-Za-z0-9.\\-_]+)";function l(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),p={bucket:1,path:3};function m(ne){ne.path_=decodeURIComponent(ne.path)}const v="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",R=new RegExp(`^https?://${T}/${v}/b/${a}/o${E}`,"i"),A={bucket:1,path:3},j=t===f1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,D="([^?#]*)",M=new RegExp(`^https?://${j}/${a}/${D}`,"i"),q=[{regex:d,indices:p,postModify:l},{regex:R,indices:A,postModify:m},{regex:M,indices:{bucket:1,path:2},postModify:m}];for(let ne=0;ne<q.length;ne++){const ue=q[ne],ee=ue.regex.exec(e);if(ee){const O=ee[ue.indices.bucket];let I=ee[ue.indices.path];I||(I=""),s=new Bn(O,I),ue.postModify(s);break}}if(s==null)throw B6(e);return s}}class $6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(n,e,t){let s=1,a=null,l=null,c=!1,d=0;function p(){return d===2}let m=!1;function v(...D){m||(m=!0,e.apply(null,D))}function T(D){a=setTimeout(()=>{a=null,n(R,p())},D)}function E(){l&&clearTimeout(l)}function R(D,...M){if(m){E();return}if(D){E(),v.call(null,D,...M);return}if(p()||c){E(),v.call(null,D,...M);return}s<64&&(s*=2);let q;d===1?(d=2,q=0):q=(s+Math.random())*1e3,T(q)}let A=!1;function j(D){A||(A=!0,E(),!m&&(a!==null?(D||(d=2),clearTimeout(a),T(0)):D||(d=1)))}return T(0),l=setTimeout(()=>{c=!0,j(!0)},t),j}function Y6(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(n){return n!==void 0}function X6(n){return typeof n=="function"}function Z6(n){return typeof n=="object"&&!Array.isArray(n)}function Ap(n){return typeof n=="string"||n instanceof String}function rw(n){return _v()&&n instanceof Blob}function _v(){return typeof Blob<"u"}function H_(n,e,t,s){if(s<e)throw z_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw z_(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function y1(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const a=e(s)+"="+e(n[s]);t=t+a+"&"}return t=t.slice(0,-1),t}var ao;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ao||(ao={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,t,s,a,l,c,d,p,m,v,T,E=!0,R=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=T,this.retry=E,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,j)=>{this.resolve_=A,this.reject_=j,this.start_()})}start_(){const e=(s,a)=>{if(a){s(!1,new Jf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const p=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===ao.NO_ERROR,p=l.getStatus();if(!d||v1(p,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===ao.ABORT;s(!1,new Jf(!1,null,v));return}const m=this.successCodes_.indexOf(p)!==-1;s(!0,new Jf(m,l))})},t=(s,a)=>{const l=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());Q6(p)?l(p):l()}catch(p){c(p)}else if(d!==null){const p=gv();p.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,p)):c(p)}else if(a.canceled){const p=this.appDelete_?_1():m1();c(p)}else{const p=p1();c(p)}};this.canceled_?t(!1,new Jf(!1,null,!0)):this.backoffId_=K6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Y6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Jf{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function e3(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function t3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function n3(n,e){e&&(n["X-Firebase-GMPID"]=e)}function s3(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function i3(n,e,t,s,a,l,c=!0,d=!1){const p=y1(n.urlParams),m=n.url+p,v=Object.assign({},n.headers);return n3(v,e),e3(v,t),t3(v,l),s3(v,s),new J6(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function a3(...n){const e=r3();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(_v())return new Blob(n);throw new It(vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function o3(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(n){if(typeof atob>"u")throw G6("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zg{constructor(e,t){this.data=e,this.contentType=t||null}}function u3(n,e){switch(n){case di.RAW:return new Zg(T1(e));case di.BASE64:case di.BASE64URL:return new Zg(E1(n,e));case di.DATA_URL:return new Zg(h3(e),f3(e))}throw gv()}function T1(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=s,c=n.charCodeAt(++t);s=65536|(l&1023)<<10|c&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function c3(n){let e;try{e=decodeURIComponent(n)}catch{throw Bc(di.DATA_URL,"Malformed data URL.")}return T1(e)}function E1(n,e){switch(n){case di.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw Bc(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case di.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw Bc(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=l3(e)}catch(a){throw a.message.includes("polyfill")?a:Bc(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}class S1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Bc(di.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=d3(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function h3(n){const e=new S1(n);return e.base64?E1(di.BASE64,e.rest):c3(e.rest)}function f3(n){return new S1(n).contentType}function d3(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t){let s=0,a="";rw(e)?(this.data_=e,s=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(rw(this.data_)){const s=this.data_,a=o3(s,e,t);return a===null?null:new Xi(a)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new Xi(s,!0)}}static getBlob(...e){if(_v()){const t=e.map(s=>s instanceof Xi?s.data_:s);return new Xi(a3.apply(null,t))}else{const t=e.map(c=>Ap(c)?u3(di.RAW,c).data:c.data_);let s=0;t.forEach(c=>{s+=c.byteLength});const a=new Uint8Array(s);let l=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)a[l++]=c[d]}),new Xi(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(n){let e;try{e=JSON.parse(n)}catch{return null}return Z6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function m3(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function b1(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(n,e){return e}class Ln{constructor(e,t,s,a){this.server=e,this.local=t||e,this.writable=!!s,this.xform=a||g3}}let ed=null;function _3(n){return!Ap(n)||n.length<2?n:b1(n)}function vv(){if(ed)return ed;const n=[];n.push(new Ln("bucket")),n.push(new Ln("generation")),n.push(new Ln("metageneration")),n.push(new Ln("name","fullPath",!0));function e(l,c){return _3(c)}const t=new Ln("name");t.xform=e,n.push(t);function s(l,c){return c!==void 0?Number(c):c}const a=new Ln("size");return a.xform=s,n.push(a),n.push(new Ln("timeCreated")),n.push(new Ln("updated")),n.push(new Ln("md5Hash",null,!0)),n.push(new Ln("cacheControl",null,!0)),n.push(new Ln("contentDisposition",null,!0)),n.push(new Ln("contentEncoding",null,!0)),n.push(new Ln("contentLanguage",null,!0)),n.push(new Ln("contentType",null,!0)),n.push(new Ln("metadata","customMetadata",!0)),ed=n,ed}function y3(n,e){function t(){const s=n.bucket,a=n.fullPath,l=new Bn(s,a);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function v3(n,e,t){const s={};s.type="file";const a=t.length;for(let l=0;l<a;l++){const c=t[l];s[c.local]=c.xform(s,e[c.server])}return y3(s,n),s}function w1(n,e,t){const s=yv(e);return s===null?null:v3(n,s,t)}function T3(n,e,t,s){const a=yv(e);if(a===null||!Ap(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(m=>{const v=n.bucket,T=n.fullPath,E="/b/"+c(v)+"/o/"+c(T),R=Co(E,t,s),A=y1({alt:"media",token:m});return R+A})[0]}function C1(n,e){const t={},s=e.length;for(let a=0;a<s;a++){const l=e[a];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="prefixes",ow="items";function E3(n,e,t){const s={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[aw])for(const a of t[aw]){const l=a.replace(/\/$/,""),c=n._makeStorageReference(new Bn(e,l));s.prefixes.push(c)}if(t[ow])for(const a of t[ow]){const l=n._makeStorageReference(new Bn(e,a.name));s.items.push(l)}return s}function S3(n,e,t){const s=yv(t);return s===null?null:E3(n,e,s)}class ya{constructor(e,t,s,a){this.url=e,this.method=t,this.handler=s,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(n){if(!n)throw gv()}function Tv(n,e){function t(s,a){const l=w1(n,a,e);return yi(l!==null),l}return t}function b3(n,e){function t(s,a){const l=S3(n,e,a);return yi(l!==null),l}return t}function w3(n,e){function t(s,a){const l=w1(n,a,e);return yi(l!==null),T3(l,a,n.host,n._protocol)}return t}function tu(n){function e(t,s){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=V6():a=U6():t.getStatus()===402?a=L6(n.bucket):t.getStatus()===403?a=j6(n.path):a=s,a.status=t.getStatus(),a.serverResponse=s.serverResponse,a}return e}function Ev(n){const e=tu(n);function t(s,a){let l=e(s,a);return s.getStatus()===404&&(l=M6(n.path)),l.serverResponse=a.serverResponse,l}return t}function C3(n,e,t){const s=e.fullServerUrl(),a=Co(s,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,d=new ya(a,l,Tv(n,t),c);return d.errorHandler=Ev(e),d}function A3(n,e,t,s,a){const l={};e.isRoot?l.prefix="":l.prefix=e.path+"/",t.length>0&&(l.delimiter=t),s&&(l.pageToken=s),a&&(l.maxResults=a);const c=e.bucketOnlyServerUrl(),d=Co(c,n.host,n._protocol),p="GET",m=n.maxOperationRetryTime,v=new ya(d,p,b3(n,e.bucket),m);return v.urlParams=l,v.errorHandler=tu(e),v}function R3(n,e,t){const s=e.fullServerUrl(),a=Co(s,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,d=new ya(a,l,w3(n,t),c);return d.errorHandler=Ev(e),d}function I3(n,e){const t=e.fullServerUrl(),s=Co(t,n.host,n._protocol),a="DELETE",l=n.maxOperationRetryTime;function c(p,m){}const d=new ya(s,a,c,l);return d.successCodes=[200,204],d.errorHandler=Ev(e),d}function x3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function A1(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=x3(null,e)),s}function R1(n,e,t,s,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let q="";for(let ne=0;ne<2;ne++)q=q+Math.random().toString().slice(2);return q}const p=d();c["Content-Type"]="multipart/related; boundary="+p;const m=A1(e,s,a),v=C1(m,t),T="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+m.contentType+`\r
\r
`,E=`\r
--`+p+"--",R=Xi.getBlob(T,s,E);if(R===null)throw g1();const A={name:m.fullPath},j=Co(l,n.host,n._protocol),D="POST",M=n.maxUploadRetryTime,z=new ya(j,D,Tv(n,t),M);return z.urlParams=A,z.headers=c,z.body=R.uploadData(),z.errorHandler=tu(e),z}class $d{constructor(e,t,s,a){this.current=e,this.total=t,this.finalized=!!s,this.metadata=a||null}}function Sv(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{yi(!1)}return yi(!!t&&(e||["active"]).indexOf(t)!==-1),t}function N3(n,e,t,s,a){const l=e.bucketOnlyServerUrl(),c=A1(e,s,a),d={name:c.fullPath},p=Co(l,n.host,n._protocol),m="POST",v={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},T=C1(c,t),E=n.maxUploadRetryTime;function R(j){Sv(j);let D;try{D=j.getResponseHeader("X-Goog-Upload-URL")}catch{yi(!1)}return yi(Ap(D)),D}const A=new ya(p,m,R,E);return A.urlParams=d,A.headers=v,A.body=T,A.errorHandler=tu(e),A}function k3(n,e,t,s){const a={"X-Goog-Upload-Command":"query"};function l(m){const v=Sv(m,["active","final"]);let T=null;try{T=m.getResponseHeader("X-Goog-Upload-Size-Received")}catch{yi(!1)}T||yi(!1);const E=Number(T);return yi(!isNaN(E)),new $d(E,s.size(),v==="final")}const c="POST",d=n.maxUploadRetryTime,p=new ya(t,c,l,d);return p.headers=a,p.errorHandler=tu(e),p}const lw=256*1024;function O3(n,e,t,s,a,l,c,d){const p=new $d(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=s.size()),s.size()!==p.total)throw H6();const m=p.total-p.current;let v=m;a>0&&(v=Math.min(v,a));const T=p.current,E=T+v;let R="";v===0?R="finalize":m===v?R="upload, finalize":R="upload";const A={"X-Goog-Upload-Command":R,"X-Goog-Upload-Offset":`${p.current}`},j=s.slice(T,E);if(j===null)throw g1();function D(ne,ue){const ee=Sv(ne,["active","final"]),O=p.current+v,I=s.size();let N;return ee==="final"?N=Tv(e,l)(ne,ue):N=null,new $d(O,I,ee==="final",N)}const M="POST",z=e.maxUploadRetryTime,q=new ya(t,M,D,z);return q.headers=A,q.body=j.uploadData(),q.progressCallback=d||null,q.errorHandler=tu(n),q}const Wn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Jg(n){switch(n){case"running":case"pausing":case"canceling":return Wn.RUNNING;case"paused":return Wn.PAUSED;case"success":return Wn.SUCCESS;case"canceled":return Wn.CANCELED;case"error":return Wn.ERROR;default:return Wn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,t,s){if(X6(e)||t!=null||s!=null)this.next=e,this.error=t??void 0,this.complete=s??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class P3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ao.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ao.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ao.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,a,l){if(this.sent_)throw vc("cannot .send() more than once");if(To(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class M3 extends P3{initXhr(){this.xhr_.responseType="text"}}function Zi(){return new M3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=s,this._mappings=vv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(vt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(v1(a.status,[]))if(l)a=p1();else{this.sleepTime=Math.max(this.sleepTime*2,P6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(vt.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,l)=>{this._resolve=a,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,s])=>{switch(this._state){case"running":e(t,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const s=N3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(s,Zi,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,s)=>{const a=k3(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(a,Zi,t,s);this._request=l,l.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=lw*this._chunkMultiplier,t=new $d(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((a,l)=>{let c;try{c=O3(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){this._error=p,this._transition("error");return}const d=this._ref.storage._makeRequest(c,Zi,a,l,!1);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){lw*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const s=C3(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(s,Zi,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const s=R1(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(s,Zi,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=m1(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Jg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,s,a){const l=new D3(t||void 0,s||void 0,a||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Jg(this._state)){case Wn.SUCCESS:_l(this._resolve.bind(null,this.snapshot))();break;case Wn.CANCELED:case Wn.ERROR:const t=this._reject;_l(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Jg(this._state)){case Wn.RUNNING:case Wn.PAUSED:e.next&&_l(e.next.bind(e,this.snapshot))();break;case Wn.SUCCESS:e.complete&&_l(e.complete.bind(e))();break;case Wn.CANCELED:case Wn.ERROR:e.error&&_l(e.error.bind(e,this._error))();break;default:e.error&&_l(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t){this._service=e,t instanceof Bn?this._location=t:this._location=Bn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _o(e,t)}get root(){const e=new Bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return b1(this._location.path)}get storage(){return this._service}get parent(){const e=p3(this._location.path);if(e===null)return null;const t=new Bn(this._location.bucket,e);return new _o(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw W6(e)}}function U3(n,e,t){n._throwIfRoot("uploadBytes");const s=R1(n.storage,n._location,vv(),new Xi(e,!0),t);return n.storage.makeRequestWithTokens(s,Zi).then(a=>({metadata:a,ref:n}))}function V3(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new L3(n,new Xi(e),t)}function j3(n){const e={prefixes:[],items:[]};return I1(n,e).then(()=>e)}async function I1(n,e,t){const a=await B3(n,{pageToken:t});e.prefixes.push(...a.prefixes),e.items.push(...a.items),a.nextPageToken!=null&&await I1(n,e,a.nextPageToken)}function B3(n,e){e!=null&&typeof e.maxResults=="number"&&H_("options.maxResults",1,1e3,e.maxResults);const t=e||{},s=A3(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(s,Zi)}function F3(n){n._throwIfRoot("getDownloadURL");const e=R3(n.storage,n._location,vv());return n.storage.makeRequestWithTokens(e,Zi).then(t=>{if(t===null)throw q6();return t})}function z3(n){n._throwIfRoot("deleteObject");const e=I3(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Zi)}function H3(n,e){const t=m3(n._location.path,e),s=new Bn(n._location.bucket,t);return new _o(n.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(n){return/^[A-Za-z]+:\/\//.test(n)}function G3(n,e){return new _o(n,e)}function x1(n,e){if(n instanceof bv){const t=n;if(t._bucket==null)throw z6();const s=new _o(t,t._bucket);return e!=null?x1(s,e):s}else return e!==void 0?H3(n,e):n}function W3(n,e){if(e&&q3(e)){if(n instanceof bv)return G3(n,e);throw z_("To use ref(service, url), the first argument must be a Storage instance.")}else return x1(n,e)}function uw(n,e){const t=e==null?void 0:e[d1];return t==null?null:Bn.makeFromBucketSpec(t,n)}function $3(n,e,t,s={}){n.host=`${e}:${t}`;const a=To(e);a&&(ey(`https://${n.host}`),ty("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=s;l&&(n._overrideAuthToken=typeof l=="string"?l:Bw(l,n.app.options.projectId))}class bv{constructor(e,t,s,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=f1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=O6,this._maxUploadRetryTime=D6,this._requests=new Set,a!=null?this._bucket=Bn.makeFromBucketSpec(a,this._host):this._bucket=uw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bn.makeFromBucketSpec(this._url,e):this._bucket=uw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){H_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){H_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _o(this,e)}_makeRequest(e,t,s,a,l=!0){if(this._deleted)return new $6(_1());{const c=i3(e,this._appId,s,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,a).getPromise()}}const cw="@firebase/storage",hw="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="storage";function K3(n,e,t){return n=bt(n),U3(n,e,t)}function Y3(n,e,t){return n=bt(n),V3(n,e,t)}function Q3(n){return n=bt(n),j3(n)}function q_(n){return n=bt(n),F3(n)}function k1(n){return n=bt(n),z3(n)}function Fc(n,e){return n=bt(n),W3(n,e)}function X3(n=ry(),e){n=bt(n);const s=Jd(n,N1).getImmediate({identifier:e}),a=Uw("storage");return a&&Z3(s,...a),s}function Z3(n,e,t,s={}){$3(n,e,t,s)}function J3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new bv(t,s,a,e,fa)}function eB(){sa(new ar(N1,J3,"PUBLIC").setMultipleInstances(!0)),xs(cw,hw,""),xs(cw,hw,"esm2017")}eB();const tB={apiKey:"AIzaSyDWN5GCnrhUqKZlOt8Rxb0n748lhPf9B58",authDomain:"to-do-list-9cf11.firebaseapp.com",databaseURL:"https://to-do-list-9cf11-default-rtdb.firebaseio.com",projectId:"to-do-list-9cf11",storageBucket:"to-do-list-9cf11.firebasestorage.app",messagingSenderId:"44862500438",appId:"1:44862500438:web:ccb0f012d9c8e7cfe215f7",measurementId:"G-HB8NT8L1FD"},nB={apiKey:"AIzaSyC_SdildU9oD7BID8i4GdReOYM0_qlguN0",authDomain:"databased-react.firebaseapp.com",databaseURL:"https://databased-react-default-rtdb.firebaseio.com",projectId:"databased-react",storageBucket:"databased-react.appspot.com",messagingSenderId:"82890993147",appId:"1:82890993147:web:77b68d26108894eeeaef5e",measurementId:"G-Y0JTK4KL1P"},O1=iy(tB,"FIRST_APP"),Yn=p6(O1),ln=h4(O1),sB=iy(nB,"SECOND_APP"),zc=X3(sB),iB=()=>{const{saveChanges:n,setSaveChanges:e,user:t,setHideSideBar:s,setLoading:a,setChanges:l,setTasksCache:c}=x.useContext(Fn),{setNumberOfChanges:d,numberOfChanges:p,backUpNavigation:m}=x.useContext(Os),{setTasks:v}=x.useContext(Os),T=async()=>{var R;let E=JSON.parse(localStorage.getItem("Changes"));if(E){console.log(p),E=[...E[p]],E=E.map(D=>({...D,isChecked:!1}));const A=(R=t==null?void 0:t.uid)==null?void 0:R.toString(),j=Kn(Yn,`Users/${A}`);a(!0);try{await ha(j,{tasks:E}),d(null),v([...E]),l(null),localStorage.removeItem("Changes"),c([...E]),m()}catch(D){e(!1),console.log("Error writing task:",D)}a(!1),s(!0)}};if(n)return y.jsx("div",{className:pc.Changes_Wrapper,children:y.jsxs("div",{className:pc.Changes_Box,children:[y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),className:pc.closeButton,func:()=>{e(!1)}}),y.jsxs("div",{className:pc.Top,children:[y.jsx("i",{className:"fa fa-warning"}),y.jsx("h3",{children:"Would You Save Your Previous Changes?"})]}),y.jsxs("div",{className:pc.Options,children:[y.jsx(_e,{content:"No",func:()=>{e(!1),localStorage.removeItem("Changes"),window.location.reload()}}),y.jsx(_e,{content:"Yes",func:()=>{e(!1),T()}})]})]})})},rB="_tasksWrapper_8kb66_13",aB="_tasksEditor_8kb66_33",oB="_searchWrapper_8kb66_103",Tc={tasksWrapper:rB,tasksEditor:aB,searchWrapper:oB},Os=x.createContext(),D1=()=>{const n=JSON.parse(localStorage.getItem("Changes")),e=ql(),{user:t,setShowMakeUserSignIn:s,setPages:a,setLoading:l,changes:c,setChanges:d,setTasksCache:p,tasksCache:m,prevPage:v,pagination:T}=x.useContext(Fn),E=x.useRef(),[R,A]=x.useState(!1),[j,D]=x.useState(!1),[M,z]=x.useState(!1),[q,ne]=x.useState(!1),[ue,ee]=x.useState(!1),[O,I]=x.useState(!1),[N,V]=x.useState(!1),[L,F]=x.useState(!1),[k,Pe]=x.useState("Pending"),[De,J]=x.useState(n?n.length-1:null),[ce,pe]=x.useState([]),[ve,U]=x.useState(ce.length!=0?[...ce]:[]),[te,B]=x.useState([]),[$,X]=x.useState([]),[ie,fe]=x.useState({}),[Ee,ge]=x.useState([{type:"Pending",ind:!0},{type:"Finished",ind:!1},{type:"All Tasks",ind:!1}]),[wt,Nn]=x.useState([{description:"Newest to Oldest",state:!1},{description:"Oldest to Newest",state:!1},{description:"From A-Z",state:!1},{description:"From Z-A",state:!1}]),vn=async He=>{var Je;let Me=[...ce];const dt=(Je=t.uid)==null?void 0:Je.toString(),Tt=Kn(Yn,"Users",dt);let cs="qwertyuiopasdfghjklzxcvbnm",hs="";for(let Yt=0;Yt<10;Yt++){let Qt=Math.floor(Math.random()*cs.length);hs=hs.concat(cs[Qt])}let rt={id:hs,task:He,dateCreated:{fullDate:new Date,time:Date.now()},selected:!1,style:"default",cName:[JSON.stringify(Vn.col),JSON.stringify(Vn.br),JSON.stringify(Vn.fs),JSON.stringify(Vn.bgC),JSON.stringify(Vn.fW)],isChecked:!1,type:"pending"};Me.unshift(rt);try{await ha(Tt,{tasks:k6(rt)}),A(!1),pe([...Me])}catch(Yt){console.log("Error writing task:",Yt)}},kn=()=>{let He=ce,Me=te;ue?(Me=Me.map(dt=>({...dt,isChecked:!1})),Qn(null)):(He=He.map(dt=>({...dt,isChecked:!1})),Qn(null)),pe(dt=>dt.map(Tt=>({...Tt,isChecked:!1}))),ue&&B([...Me])};function Qn(He){X(He==null?[]:[...He])}function Ds(He,Me,dt){const Tt=JSON.parse(localStorage.getItem("Changes"))!=null?JSON.parse(localStorage.getItem("Changes")):[];Tt.length==0&&Tt.push(ce),Tt.length>=1&&Tt.push(Me),localStorage.setItem("Changes",JSON.stringify(Tt)),d([...Tt]),J(Tt.length-1);let cs=[],hs=[];for(let rt in Me)Me[rt].isChecked?cs.push(Me[rt]):hs.push(Me[rt]);$.length>=1&&(ue&&B([...He]),pe([...cs,...hs]),p([...cs,...hs]))}function bi(){E.current.value==""?(ee(!1),B(null)):(ee(!0),B(ce.filter(He=>He.task.toLowerCase().includes(E.current.value.toLowerCase()))),console.log(ce.filter(He=>He.task.toLowerCase().includes(E.current.value.toLowerCase()))),I(!1))}function Ta(){let He=wt;for(let Me=0;Me<wt.length;Me++)if(He[Me].state==!0){I(!0);break}else Me==wt.length-1&&wt[Me].state==!1&&I(!1)}function un(){switch(e(v),v){case"/AcadComponent/":T(0);break;case"/AcadComponent/Tasks":T(1);break;case"/AcadComponent/Folders":T(2);break;case"/AcadComponent/Contacts":T(3);break}}async function dr(){const He=t==null?void 0:t.uid.toString(),Me=Kn(Yn,`Users/${He}`);l(!0);let dt=JSON.parse(localStorage.getItem("Changes"));dt=[...dt[De]],dt=dt.map(Tt=>({...Tt,isChecked:!1}));try{await ha(Me,{tasks:dt}),J(null),pe([...dt]),kn(),localStorage.removeItem("Changes"),d(null)}catch{alert("Failed to Save Changes. Please Try Again.")}l(!1)}x.useEffect(()=>{c!=null?(console.log(c[c.length-1]),pe([...c[c.length-1]])):t!=null&&t.uid&&(m==null?void 0:m.length)==0?(s(!1),a(Me=>Me.map(dt=>dt.name==="Tasks"?{...dt,ind:!0}:{...dt})),(async()=>{try{const Me=Kn(Yn,"Users",t==null?void 0:t.uid);let Tt=(await Cp(Me)).data().tasks;pe([...Tt]),p([...Tt])}catch(Me){console.log(Me)}})()):(m==null?void 0:m.length)>1?pe(m):s(!0)},[t]),x.useEffect(()=>{E.current.value==""?(ee(!1),B(null)):(ee(!0),B(ce.filter(He=>He.task.toLowerCase().includes(E.current.value.toLowerCase()))),console.log(ce.filter(He=>He.task.toLowerCase().includes(E.current.value.toLowerCase()))),I(!1))},[ce]),x.useEffect(()=>{a(He=>He.map(Me=>Me.name==="Tasks"?{...Me,ind:!0}:{...Me,ind:!1}))},[]);const Ws={writeTaskPrompt:R,setWriteTaskPrompt:A,editTaskPrompt:j,setEditTaskPrompt:D,sortTaskPrompt:M,setSortTaskPrompt:z,sortingTypeBar:q,setSortingTypeBar:ne,type:k,setType:Pe,searching:ue,setSearching:ee,sorting:O,setSorting:I,selecting:N,setSelecting:V,editing:L,setEditing:F,numberOfChanges:De,setNumberOfChanges:J,tasks:ce,setTasks:pe,filteredTasks:te,setFilteredTasks:B,tasksOnType:ve,setTasksOnType:U,selectedTasks:$,setSelectedTasks:X,changes:c,setChanges:d,sortingTypes:Ee,setSortingTypes:ge,type:k,setType:Pe,sortOptions:wt,setSortOptions:Nn,openedTask:ie,setOpenedTask:fe,unselectAll:kn,handleSelectedTasks:Qn,handleMarking:Ds,saveToDataBase:dr,backUpNavigation:()=>{un()},writeTask:He=>vn(He)};return y.jsx(y.Fragment,{children:y.jsx(Os.Provider,{value:Ws,children:y.jsx("div",{className:Tc.tasksWrapper,children:y.jsxs("div",{className:Tc.tasksEditor,children:[y.jsxs("h2",{className:Tc.titleWrapper,children:["Tasks",y.jsx("i",{className:"fa fa-bars",onClick:()=>{ne(!q)}}),y.jsx(kk,{})]}),y.jsx(pO,{}),y.jsx("div",{className:Tc.searchWrapper,children:y.jsxs("div",{children:[y.jsx("label",{htmlFor:"searchBar",children:y.jsx("i",{className:"fa fa-search"})}),y.jsx("input",{id:"search-bar",type:"text",ref:E,placeholder:"Type Task...",onChange:()=>{bi(),Ta()}}),y.jsx(_e,{content:"Search",className:Tc.Search_button})]})}),y.jsx(vk,{}),y.jsx(Xk,{}),y.jsx(TO,{setWriteTaskPrompt:A}),y.jsx(Ck,{}),y.jsx(iB,{}),y.jsx(jk,{})]})})})})},lB="_foldersWrapper_6ppdx_17",uB="_foldersBottomNav_6ppdx_139",cB="_foldersBox_6ppdx_199",hB="_folderPathWrapper_6ppdx_217",fB="_hideFolderInput_6ppdx_247",dB="_folderInput_6ppdx_255",pB="_close_6ppdx_255",mB="_folder_6ppdx_17",gB="_file_6ppdx_265",_B="_open_6ppdx_321",yB="_selected_6ppdx_385",Un={foldersWrapper:lB,foldersBottomNav:uB,foldersBox:cB,folderPathWrapper:hB,hideFolderInput:fB,folderInput:dB,close:pB,folder:mB,file:gB,open:_B,selected:yB},vB="_foldersBottomNav_aarnu_1",TB="_left_aarnu_15",EB="_uncheck_aarnu_15",SB="_right_aarnu_33",bB="_fullContent_aarnu_63",qr={foldersBottomNav:vB,left:TB,uncheck:EB,right:SB,fullContent:bB},wB=({deleteSelectedFolder:n,setSelecting:e,handleSelectingAll:t})=>y.jsxs("div",{className:qr.foldersBottomNav,children:[y.jsxs("div",{className:qr.left,children:[y.jsxs("button",{onClick:()=>{t(!0)},children:[y.jsx("i",{className:"fa fa-check"}),y.jsx("span",{className:qr.fullContent,children:"Select All"})]}),y.jsxs("button",{onClick:()=>{t(!1)},children:[y.jsx("i",{className:`fa fa-check-square ${qr.uncheck}`}),y.jsx("span",{className:qr.fullContent,children:"Unselect All"})]})]}),y.jsxs("div",{className:qr.right,children:[y.jsxs("button",{onClick:()=>{n()},children:[y.jsx("i",{className:"fa fa-trash"}),y.jsx("span",{className:qr.fullContent,children:"Delete"})]}),y.jsxs("button",{onClick:()=>{e(!1),t(!1)},children:[y.jsx("i",{className:"fa fa-close"}),y.jsx("span",{className:qr.fullContent,children:"Cancel"})]})]})]}),CB="_foldersNav_ae1hy_1",AB="_horizontalLine_ae1hy_19",RB="_right_ae1hy_47",IB="_uploadWrapper_ae1hy_65",td={foldersNav:CB,horizontalLine:AB,right:RB,uploadWrapper:IB},xB="_uploaderWrapper_4m571_1",NB="_progressBarWrapper_4m571_27",kB="_hidesProgressBarWrapper_4m571_27",OB="_showProgressButton_4m571_77",DB="_progressBarBox_4m571_111",PB="_uploadingFile_4m571_139",MB="_wrapNameAndBar_4m571_201",LB="_bar_4m571_217",UB="_barColor_4m571_233",VB="_wrapNameAndProgress_4m571_247",jB="_uploaderBox_4m571_271",BB="_uploaderBoxLabel_4m571_297",FB="_closeButton_4m571_327",bn={uploaderWrapper:xB,progressBarWrapper:NB,hidesProgressBarWrapper:kB,showProgressButton:OB,progressBarBox:DB,uploadingFile:PB,wrapNameAndBar:MB,bar:LB,barColor:UB,wrapNameAndProgress:VB,uploaderBox:jB,uploaderBoxLabel:BB,closeButton:FB},zB=({uploaderPrompt:n,setUploaderPrompt:e})=>{const t=x.useRef(),{user:s,setLoading:a,setFoldersCache:l}=x.useContext(Fn),{folderPath:c,setFilesAndFolders:d,filesAndFolders:p}=x.useContext(P1),[m,v]=x.useState(!1),[T,E]=x.useState(!0),[R,A]=x.useState([]),[j,D]=x.useState([]),M=async z=>{var ue,ee;a(!0);const q=z;v(!0);for(let O=0;O<q.length;O++)A(I=>[...I,{prog:0,name:q[O].name}]);D([...q]);for(let O=0;O<q.length;O++){let I="qwertyuiopasdfghjklzxcvbnm",N="";for(let F=0;F<15;F++){let k=Math.floor(Math.random()*I.length);N=N.concat(I[k])}const V=Fc(zc,`${(ue=ln.currentUser)==null?void 0:ue.uid}/${c}/${N+"_"+q[O].name}`),L=Kn(Yn,"Users",(ee=ln.currentUser)==null?void 0:ee.uid);try{if(q[O]){var ne=p;const F=Y3(V,q[O]);F.on("state_changed",k=>{const Pe=Math.floor(k.bytesTransferred/k.totalBytes*100);A(De=>De.map((J,ce)=>J.name==q[O].name?{...J,prog:Pe}:{...J}))},k=>{console.log(k)},()=>{q_(F.snapshot.ref).then(k=>{d(Pe=>[{name:q[O].name,fileType:q[O].type,fullName:N+"_"+q[O].name,url:k,dateCreated:Date.now(),isSelected:!1,id:Math.random()*1,type:"file",path:c},...Pe]),ne.push({name:q[O].name,fileType:q[O].type,fullName:N+"_"+q[O].name,url:k,dateCreated:Date.now(),isSelected:!1,id:Math.random()*1,type:"file",path:c}),l([...ne]),ha(L,{folders:p})})})}}catch{console.log("No file selected."),a(!1)}}a(!1)};if(n)return y.jsxs("div",{className:bn.uploaderWrapper,children:[y.jsx("input",{type:"file",id:"fileUploader",accept:"*",ref:t,onChange:z=>{M(z.target.files)},multiple:!0}),y.jsxs("div",{className:m?bn.progressBarWrapper:bn.hidesProgressBarWrapper,children:[y.jsx(_e,{icon:m?y.jsx("i",{className:"fa fa-arrow-up"}):y.jsx("i",{className:"fa fa-arrow-down"}),content:m?"Hide Progress Bar":"Show Progress Bar",func:()=>{v(!m)},className:bn.showProgressButton}),y.jsx("h3",{children:"Progress Bar"}),y.jsxs("div",{className:bn.progressBarBox,children:[y.jsx("h4",{children:"Files:"}),j==null?void 0:j.map((z,q)=>{var ne,ue,ee;return y.jsxs("div",{className:bn.uploadingFile,children:[z.type.includes("image")?y.jsx("img",{src:URL.createObjectURL(z)}):y.jsx("i",{className:"fa fa-file"}),y.jsxs("div",{className:bn.wrapNameAndBar,children:[y.jsx("div",{className:bn.bar,children:y.jsx("div",{className:bn.barColor,style:{width:`${(ne=R[q])==null?void 0:ne.prog}%`}})}),y.jsxs("div",{className:bn.wrapNameAndProgress,children:[y.jsx("span",{className:bn.name,children:(ue=R[q])==null?void 0:ue.name}),y.jsxs("span",{className:bn.progress,children:[(ee=R[q])==null?void 0:ee.prog,"%"]})]})]})]},z==null?void 0:z.lastModified)})]})]}),y.jsxs("div",{className:T?bn.uploaderBox:bn.hideUploaderBox,children:[y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),className:bn.closeButton,func:()=>{e(!1)}}),y.jsxs("label",{className:bn.uploaderBoxLabel,htmlFor:"fileUploader",onDragOver:z=>{z.preventDefault()},onDrop:z=>{z.preventDefault(),M(z.dataTransfer.files)},children:[y.jsx("img",{src:"./Folder/cloudUpload.png",alt:""}),y.jsx("p",{children:"Click to Upload"}),y.jsx("p",{children:"or Drop Files to Upload"})]})]})]})},HB=({setShowFolderInput:n})=>{const[e,t]=x.useState(!0);return y.jsxs("div",{className:td.foldersNav,children:[y.jsx("h1",{children:"Folders"}),y.jsxs("div",{className:td.right,children:[y.jsx("button",{children:"Create"}),y.jsxs("div",{className:td.uploadWrapper,children:[y.jsxs("button",{onClick:()=>{t(!0)},children:[y.jsx("i",{className:"fa fa-file"}),y.jsx("span",{children:"Upload File"})]}),y.jsxs("button",{onClick:()=>{n(!0)},children:[y.jsx("i",{className:"	fa fa-folder"}),y.jsx("label",{htmlFor:"folderInput",children:"Create Folder"})]})]})]}),y.jsx("span",{className:td.horizontalLine}),y.jsx(zB,{uploaderPrompt:e,setUploaderPrompt:s=>{t(s)}})]})},P1=x.createContext(),M1=()=>{const{user:n,setLoading:e,foldersCache:t,setFoldersCache:s}=x.useContext(Fn),{setPages:a,imageContent:l,setImageContent:c}=x.useContext(Fn),d=x.useRef(null),[p,m]=x.useState(null),[v,T]=x.useState(null),[E,R]=x.useState(!1),[A,j]=x.useState(!1),[D,M]=x.useState(!1),[z,q]=x.useState("Folders/"),[ne,ue]=x.useState(t),[ee,O]=x.useState([]),[I,N]=x.useState([{name:"Folders",path:"Folders/"}]),[V,L]=x.useState([]);function F(B){let $=ne,X=[];for(let ie in $)B.id==$[ie].id&&($[ie].isSelected=!$[ie].isSelected);for(let ie in ne)ne[ie].isSelected&&X.push(ne[ie]);console.log(),L([...X]),ue([...$])}function k(B){O(ie=>ie.map(fe=>({...fe,isSelected:!!B})));let $=ne,X=[];for(let ie in $)$[ie].isSelected=!!B,B&&X.push($[ie].id);L([...X])}function Pe(B){console.log(z);const $={name:B.target.value,dateCreated:Date.now(),isSelected:!1,id:Math.floor(Math.random()*1e6),type:"folder",path:z},X=B.target.value;if(B.key=="Enter"){if(X!=""){let fe=[$,...ne];ve(fe),ue(Ee=>[$,...Ee])}else M(!1);M(!1),B.target.value=""}}function De(B,$){const X=B.target.value,ie=B.key;let fe=ne;console.log($.name),ie=="Enter"&&(X!=""?(fe=fe.map(Ee=>$.name==Ee.name?{...Ee,name:X}:{...Ee}),ve(fe),ue(Ee=>Ee.map(ge=>$.name==ge.name?{...ge,name:X}:{...ge}))):T(null),m(null))}function J(B){let $=[],X=I;if(console.log(X.length),X.length!=1){for(let ie in $)$[ie].path==z&&$.push($[ie]);for(let ie in I)if(I[ie].path==B.path){for(let fe=I.length-1;fe!=ie;fe--)X.splice(fe,1);break}N([...X]),O([...$])}}function ce(B){if(B.type=="folder"){B!=null&&B.name&&q(z+(B==null?void 0:B.name)+"/"),N(X=>[...X,{name:B==null?void 0:B.name,path:(B==null?void 0:B.path)+(B==null?void 0:B.name)+"/"}]);let $=[];for(let X in $)$[X].path==z&&$.push($[X]);O([...$])}else R(!0)}const pe=async()=>{var $;let B=ne;e(!0);try{for(let X in V)for(let ie in B)V[X].id==B[ie].id&&(V[X].type=="folder"||await k1(Fc(zc,`/${($=ln.currentUser)==null?void 0:$.uid}/${z}/${V[X].fullName}`)),B.splice(ie,1));await ha(Kn(Yn,"Users",n.uid),{folders:B})}catch(X){console.log(X)}L([]),ue([...B]),e(!1)},ve=async B=>{const $=Kn(Yn,"Users",n==null?void 0:n.uid);console.log(B),B&&s([...B]);try{await ha($,{folders:B||ne})}catch(X){console.log(X)}};x.useEffect(()=>{if(z!=""){let B=[],$=[],X=[];for(let ie in ne)ne[ie].path===z&&B.push(ne[ie]);for(let ie in B)B[ie].type=="folders"?X.push(B[ie]):$.push(B[ie]);console.log(B),O([...X,...$])}},[z,ne]),x.useEffect(()=>{if(t.length==0&&n){const B=async $=>{var X;e(!0);try{const ie=Kn(Yn,"Users",$),Ee=(X=(await Cp(ie)).data())==null?void 0:X.folders;console.log(Ee),Ee&&(ue([...Ee]),s([...Ee]))}catch(ie){console.log(ie)}e(!1)};n!=null&&n.uid&&B(n.uid)}},[t,n]),x.useEffect(()=>{a(B=>B.map($=>$.name==="Folders"?{...$,ind:!0}:{...$,ind:!1}))},[]);const U={openFile:E,setOpenFile:R,imageContent:l,setImageContent:c,folderPath:z,setFilesAndFolders:ue,filesAndFolders:ne,folderInputRef:d,saveToDatabase:()=>{ve()}},te=({folder:B})=>y.jsx(y.Fragment,{children:B.fileType.includes("image")?y.jsx("input",{type:"image",src:B.url,width:"16px",style:{marginRight:"1rem"}}):y.jsx("i",{className:"fa fa-file"})});return y.jsx(P1.Provider,{value:U,children:y.jsxs("div",{className:Un.foldersWrapper,children:[y.jsx(HB,{createFolder:Pe,setShowFolderInput:M}),A?y.jsx(wB,{selecting:A,setSelecting:j,handleSelectingAll:k,deleteSelectedFolder:pe}):y.jsx("div",{className:Un.foldersBottomNav,children:y.jsx("button",{onClick:()=>{j(!0)},children:"Select Folders"})}),y.jsxs("div",{className:Un.foldersBox,children:[y.jsx("div",{className:Un.folderPathWrapper,children:y.jsx("h3",{children:I.map(B=>B.path=="Folders/"?y.jsx("span",{children:y.jsxs("span",{onClick:()=>{q(B.path),J(B)},children:[B.name," "]})},B.name+B.path):y.jsxs("span",{children:["/ ",y.jsxs("span",{onClick:()=>{q(B.path),J(B)},children:[B.name," "]})]},B.name+B.path))})}),y.jsxs("div",{className:D?Un.folderInput:Un.hideFolderInput,children:[y.jsx("i",{className:"fa fa-folder"}),y.jsx("input",{type:"text",ref:d,id:"folderInput",onBlur:()=>{M(!1),d.current.value=""},onKeyDown:B=>{Pe(B)}}),y.jsx(_e,{className:`fa fa-close ${Un.close}`,content:"Cancel",func:()=>{M(!1)}})]}),ee==null?void 0:ee.map((B,$)=>y.jsxs("label",{htmlFor:p!=null?B.id:null,className:B.type=="folder"?B.isSelected?`${Un.selected} ${Un.folder}`:`${Un.folder}`:B.isSelected?`${Un.selected} ${Un.file}`:`${Un.file}`,onDoubleClick:()=>{A||(m(B.name),T(B.id))},children:[y.jsx("input",{type:"checkbox",style:A?{display:"block"}:{display:"none"},checked:!!B.isSelected,onChange:()=>{A&&F(B)}}),B.type=="folder"?y.jsx("i",{className:"fa fa-folder"}):y.jsx(te,{folder:B}),p!=null&&v==B.id?y.jsx("input",{id:B.id,type:"text",value:p,onKeyDown:X=>{De(X,B)},onBlur:()=>[m(null),T(null)],onChange:X=>{m(X.target.value)}}):y.jsx("span",{children:B.name}),B.type=="folder"?y.jsx("button",{className:Un.open,onClick:()=>{ce(B)},children:"Open"}):y.jsx("a",{className:Un.open,href:B.url,children:"Open"})]},B.dateCreated))]})]})})},L1=()=>y.jsx("div",{children:"Contacts"}),qB="_dashboardWrapper_xgkre_1",GB="_navBar_xgkre_14",WB="_dashboardBox_xgkre_31",$B="_left_xgkre_48",KB="_right_xgkre_60",Gr={dashboardWrapper:qB,navBar:GB,dashboardBox:WB,left:$B,right:KB},YB="_dashboardNavbarWrapper_z7rvu_1",QB="_editButt_z7rvu_7",XB="_Hide_Prompt_Button_z7rvu_30",nd={dashboardNavbarWrapper:YB,editButt:QB,Hide_Prompt_Button:XB},ZB=()=>{const{editAccount:n,setEditAccount:e,saveAccountChanges:t,setShowChanges:s}=x.useContext(va),{prevPage:a}=x.useContext(Fn),l=ql();function c(){n?s(!0):(l(a),e(!1))}const d=()=>n?y.jsx(y.Fragment,{children:y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-save"}),content:"SaveChanges",className:nd.editButt,func:()=>{t(),e(!1)}})}):y.jsx(y.Fragment,{children:y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-edit"}),content:"Edit Information",className:nd.editButt,func:()=>{e(!0)}})});return y.jsxs("div",{className:nd.dashboardNavbarWrapper,children:[y.jsx(d,{}),y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),className:nd.Hide_Prompt_Button,func:()=>{c()}})]})},JB="_profileImgWrapper_rep40_1",e9="_profPic_rep40_9",t9="_uploadPictureWrapper_rep40_20",n9="_showUploadedPictures_rep40_45",s9="_hideUploadedPictures_rep40_45",i9="_uploadedPicBox_rep40_64",r9="_bottom_rep40_95",a9="_clearButt_rep40_104",o9="_hidePromptButt_rep40_148",l9="_pictureWrapper_rep40_168",u9="_pictureBox_rep40_181",As={profileImgWrapper:JB,profPic:e9,uploadPictureWrapper:t9,showUploadedPictures:n9,hideUploadedPictures:s9,uploadedPicBox:i9,bottom:r9,clearButt:a9,hidePromptButt:o9,pictureWrapper:l9,pictureBox:u9},c9=()=>{const{userData:n,editAccount:e,user:t,setLoading:s}=x.useContext(va),a=x.useRef(),[l,c]=x.useState(null),[d,p]=x.useState(!1),[m,v]=x.useState([]),T=async()=>{var D;s(!0);try{let M=[];const z=await Q3(Fc(zc,`${(D=ln.currentUser)==null?void 0:D.uid}/Uploaded_Profile_Pictures`));for(let q in z.items){const ne=await q_(z.items[q]);M.unshift({img:ne,id:Math.random()*1,fileName:z.items[q].name})}v([...M])}catch(M){console.log(M)}s(!1)},E=async D=>{s(!0);const M=D;if(M){let z="qwertyuiopasdfghjklzxcvbnm",q="";for(let ue=0;ue<15;ue++){let ee=Math.floor(Math.random()*z.length);q=q.concat(z[ee])}const ne=Fc(zc,ln.currentUser.uid+`/Uploaded_Profile_Pictures/${M.name+"_"+q}`);await K3(ne,M),q_(ne).then(ue=>{v(ee=>[{img:ue,id:Math.random()*1,fileName:M.name+"_"+q},...ee])})}else console.log("No file selected.");s(!1)},R=async D=>{var M;s(!0);try{await ha(Kn(Yn,"Users",(M=ln.currentUser)==null?void 0:M.uid),{profPic:D}),a.current.style.backgroundImage=`url(${D})`}catch(z){console.log(z)}s(!1)},A=async D=>{var M;s(!0);try{await k1(Fc(zc,`/${(M=ln.currentUser)==null?void 0:M.uid}/Uploaded_Profile_Pictures/${D}`)),T()}catch(z){console.log(z)}s(!1)};x.useEffect(()=>{T()},[t]);const j=()=>{if(l)return y.jsx("div",{className:As.pictureWrapper,children:y.jsxs("div",{className:As.pictureBox,children:[y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),className:As.hidePromptButt,func:()=>{c(!1)}}),y.jsx("img",{src:l})]})})};return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:As.profileImgWrapper,children:[y.jsx("div",{ref:a,className:As.profPic,style:n!=null&&n.profPic?{backgroundImage:`url(${n.profPic})`}:{backgroundImage:"url(./blue-circle-with-white-user.png)"},onClick:()=>{c(n.profPic)}}),y.jsxs("div",{className:As.uploadPictureWrapper,children:[e?y.jsx(_e,{content:"Change Profile",func:()=>{p(!d)}}):y.jsx("h2",{children:"Profile Picture"}),y.jsx("div",{className:d?As.showUploadedPictures:As.hideUploadedPictures,children:y.jsxs("div",{className:As.uploadedPicBox,children:[y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),className:As.hidePromptButt,func:()=>{p(!1)}}),y.jsx("h2",{children:"Upload Task"}),y.jsxs("div",{className:As.bottom,children:[y.jsx("label",{htmlFor:"imgInput",children:y.jsx("i",{className:"fa fa-plus"})}),y.jsx("input",{type:"file",accept:"image/*",id:"imgInput",onChange:D=>{E(D.target.files[0])},style:{display:"none"}}),m==null?void 0:m.map(D=>y.jsxs("div",{children:[y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),className:As.clearButt,func:()=>A(D==null?void 0:D.fileName)}),y.jsx("div",{style:{backgroundImage:`url(${D.img})`},onClick:()=>{R(D==null?void 0:D.img)}})]},D==null?void 0:D.id))]})]})})]})]}),y.jsx(j,{})]})},h9="_contactsWrapper_18k80_1",f9="_contactsBox_18k80_14",fw={contactsWrapper:h9,contactsBox:f9},d9=()=>{const{contacts:n,setContacts:e,editAccount:t}=x.useContext(va),[s,a]=x.useState(null),[l,c]=x.useState(null),[d,p]=x.useState(n);function m(v,T){T.key!="Enter"?(a(v),c(T.target.value),p(E=>E.map((R,A)=>A==v?{...R,content:T.target.value}:{...R}))):(a(null),e([...d]))}return x.useEffect(()=>{p(n),console.log(n)},[n]),y.jsxs("div",{className:fw.contactsWrapper,children:[y.jsx("h3",{children:"Contacts:"}),y.jsx("div",{className:fw.contactsBox,children:n==null?void 0:n.map((v,T)=>y.jsxs("li",{children:[y.jsx("i",{className:"material-icons",children:v.icon}),y.jsx("input",{rows:1,type:"text",value:T==s?l:v.content,style:t?{borderBottom:".2rem solid #EAAE2C"}:{borderBottom:"none"},contentEditable:!!t,onFocus:E=>{c(E.target.value),a(T),e([...d])},onChange:E=>{t&&m(T,E)},onBlur:E=>{c(E.target.value),a(T),e([...d])}},v.content)]},v.content))})]})},p9="_skillsWrapper_8ovn6_1",m9="_addSkillsWrapper_8ovn6_10",g9="_skillsBox_8ovn6_28",_9="_hideInput_8ovn6_68",y9="_showInput_8ovn6_72",yl={skillsWrapper:p9,addSkillsWrapper:m9,skillsBox:g9,hideInput:_9,showInput:y9},v9=()=>{const{skills:n,addSkill:e,editAccount:t,setSkills:s,skillRef:a}=x.useContext(va),[l,c]=x.useState(!1);function d(){var m;((m=n==null?void 0:n.current)==null?void 0:m.value)==""||e(),c(!1),a.current.value=""}function p(m){let v=n;for(let T in v)m==T&&v.splice(T,1);s([...v])}return y.jsxs("form",{className:yl.skillsWrapper,onSubmit:m=>{m.preventDefault()},children:[y.jsxs("div",{className:yl.addSkillsWrapper,children:[y.jsx("h3",{children:"Skills:"}),y.jsx("label",{htmlFor:"blankSkill",style:t?{display:"flex"}:{display:"none"},onClick:()=>c(!0),children:y.jsx("i",{className:"fa fa-plus"})})]}),y.jsxs("div",{className:yl.skillsBox,children:[n==null?void 0:n.map((m,v)=>y.jsxs("li",{children:[y.jsx("span",{children:y.jsx("input",{type:"text",value:m,readOnly:!0})}),t?y.jsx(_e,{icon:y.jsx("i",{className:"fa fa-close"}),className:yl.hidePromptButton,func:()=>{p(v)}}):null]},m)),y.jsxs("div",{className:l?yl.showInput:yl.hideInput,children:[y.jsx("input",{type:"text",id:"blankSkill",ref:a}),y.jsx(_e,{content:"Submit",func:()=>{d()}})]})]})]})},T9="_formsWrapper_ok147_1",E9="_accountInfoWrapper_ok147_8",S9="_inputWrapper_ok147_15",Rs={formsWrapper:T9,accountInfoWrapper:E9,inputWrapper:S9},b9=()=>{const{editAccount:n,uName:e,setUName:t,school:s,setSchool:a,pBirth:l,setPBirth:c,age:d,setAge:p,bDay:m,setBDay:v,gender:T,setGender:E,hobbies:R,setHobbies:A,grSec:j,setGrSec:D}=x.useContext(va);return y.jsxs("div",{className:Rs.formsWrapper,children:[y.jsxs("div",{className:Rs.accountInfoWrapper,children:[y.jsxs("div",{className:Rs.inputWrapper,children:[y.jsx("h4",{children:"Username:"}),y.jsx("input",{onChange:M=>{n&&t(M.target.value)},type:"text",placeholder:"Ex. Peter M. Dela Cruz",value:e||""})]}),y.jsxs("div",{className:Rs.inputWrapper,children:[y.jsx("h4",{children:"School:"}),y.jsx("input",{onChange:M=>{n&&a(M.target.value)},type:"text",placeholder:"Ex. Lolomboy National High School",value:s||""})]}),y.jsxs("div",{className:Rs.inputWrapper,children:[y.jsx("h4",{children:"Gr/Section:"}),y.jsx("input",{onChange:M=>{n&&D(M.target.value)},type:"text",placeholder:"Ex. 10-Rizal",value:j||""})]})]}),y.jsxs("div",{className:Rs.accountInfoWrapper,children:[y.jsxs("div",{className:Rs.inputWrapper,children:[y.jsx("h4",{children:"Place of Birth:"}),y.jsx("input",{onChange:M=>{n&&c(M.target.value)},type:"text",placeholder:"Ex. Marilao, Bulacan",value:l||""})]}),y.jsxs("div",{className:Rs.inputWrapper,children:[y.jsx("h4",{children:"Age:"}),y.jsx("input",{onChange:M=>{n&&p(M.target.value)},type:"text",placeholder:"Ex. 26",value:d||""})]}),y.jsxs("div",{className:Rs.inputWrapper,children:[y.jsx("h4",{children:"Birthday:"}),y.jsx("input",{onChange:M=>{n&&v(M.target.value)},type:"text",placeholder:"Ex. December 31, 2007",value:m||""})]})]}),y.jsxs("div",{className:Rs.accountInfoWrapper,children:[y.jsxs("div",{className:Rs.inputWrapper,children:[y.jsx("h4",{children:"Gender:"}),y.jsx("input",{onChange:M=>{n&&E(M.target.value)},type:"text",placeholder:"Ex. Male",value:T||""})]}),y.jsxs("div",{className:Rs.inputWrapper,children:[y.jsx("h4",{children:"Hobbies:"}),y.jsx("input",{onChange:M=>{n&&A(M.target.value)},type:"text",placeholder:"Ex. Eating, Coding",value:R||""})]})]})]})},w9="_Selections_Wrapper_1xl4a_1",C9="_top_1xl4a_7",A9="_Subjects_Wrapper_1xl4a_41",R9="_makeSubjectButt_1xl4a_48",I9="_IndicatedButt_1xl4a_62",x9="_notIndicatedButt_1xl4a_67",N9="_hideMakeSubjectButt_1xl4a_72",k9="_bottom_1xl4a_86",ui={Selections_Wrapper:w9,top:C9,Subjects_Wrapper:A9,makeSubjectButt:R9,IndicatedButt:I9,notIndicatedButt:x9,hideMakeSubjectButt:N9,bottom:k9},O9=()=>{const{userData:n,editAccount:e,setFavSubjects:t,purpose:s,setPurpose:a,usingAs:l,setUsingAs:c}=x.useContext(va),d=x.useRef(),[p,m]=x.useState(null),[v,T]=x.useState(!1),[E,R]=x.useState(0);function A(M){const z=M==null?void 0:M.target;(z==null?void 0:z.value)!=""&&(M==null?void 0:M.key)=="Enter"&&E==0?(R(q=>q+1),T(!1),m(q=>{var ne;return[{content:(ne=d.current)==null?void 0:ne.value,testClass:!0},...q]})):(z==null?void 0:z.value)==""&&(M==null?void 0:M.key)=="Enter"&&(z.value="",T(!1))}function j(M){m(z=>z.map((q,ne)=>ne==M?{...q,testClass:q.testClass!=!0}:{...q}))}function D(){let M=p,z=[];for(let q in p)M[q].testClass==!0&&z.push(M[q]);m([...z])}return x.useEffect(()=>{p&&t([...p])},[p]),x.useEffect(()=>{n!=null&&n.favSubjects&&m([...n.favSubjects])},[n]),y.jsxs("div",{className:ui.Selections_Wrapper,children:[y.jsxs("div",{className:ui.top,children:[y.jsxs("h3",{children:[y.jsx("span",{children:"Favourite Subjects"}),y.jsxs("label",{htmlFor:v?"makesubject":"",style:e?{display:"flex"}:{display:"none"},children:[y.jsx("i",{className:"fa fa-plus",onClick:()=>{T(!0),R(0),d.current.value=""}}),y.jsx("i",{className:"fa fa-trash",onClick:()=>{D()}})]})]}),y.jsxs("div",{className:ui.Subjects_Wrapper,children:[y.jsx(_e,{element:y.jsx("input",{type:"text",id:"makesubject",ref:d,onKeyDown:M=>{A(M)},onBlur:M=>{d.current.value!=""&&(console.log(d.current.value),m(z=>z.filter(q=>q.content.toLowerCase()!==d.current.value.toLowerCase())),m(z=>{var q;return[{content:(q=d.current)==null?void 0:q.value,testClass:!0},...z]}),R(z=>z+1)),T(!1)}}),className:v?ui.makeSubjectButt:ui.hideMakeSubjectButt}),p==null?void 0:p.map((M,z)=>y.jsx(_e,{func:()=>{e&&j(z)},className:M.testClass==!0?ui.IndicatedButt:ui.notIndicatedButt,content:p[z].content},M+z.toString()))]})]}),y.jsxs("div",{className:ui.bottom,children:[y.jsxs("div",{className:ui.Purpose_Wrapper,children:[y.jsx("h3",{children:y.jsx("span",{children:"Using As:"})}),e?y.jsx("textarea",{type:"text",contentEditable:!!e,onChange:M=>{c(M.target.value)},rows:"1",value:l}):y.jsx("p",{children:l})]}),y.jsxs("div",{className:ui.Using_As_Wrapper,children:[y.jsx("h3",{children:y.jsx("span",{children:"Purpose"})}),e?y.jsx("textarea",{type:"text",contentEditable:!!e,onChange:M=>{a(M.target.value)},value:s}):y.jsx("p",{children:s})]})]})]})},D9="_bioWrapper_q9y6o_1",P9={bioWrapper:D9},M9=()=>{const{editAccount:n,desc:e,setDesc:t}=x.useContext(va);return y.jsxs("div",{className:P9.bioWrapper,children:[y.jsx("h3",{children:y.jsx("span",{children:"Bio"})}),n?y.jsx("textarea",{rows:4,contentEditable:!!n,onChange:s=>{t(s.target.value)},value:e}):y.jsx("p",{children:e})]})},L9="_Changes_Wrapper_weq0z_1",U9="_Changes_Box_weq0z_15",V9="_Top_weq0z_29",j9="_Options_weq0z_55",sd={Changes_Wrapper:L9,Changes_Box:U9,Top:V9,Options:j9},B9=({showChanges:n,setShowChanges:e,saveAccountChanges:t,setEditAccount:s})=>{if(n)return y.jsx("div",{className:sd.Changes_Wrapper,children:y.jsxs("div",{className:sd.Changes_Box,children:[y.jsxs("div",{className:sd.Top,children:[y.jsx("i",{className:"fa fa-warning"}),y.jsx("h3",{children:"Would You Save Your Previous Changes?"})]}),y.jsxs("div",{className:sd.Options,children:[y.jsx(_e,{content:"No",func:()=>{window.location.reload()}}),y.jsx(_e,{content:"Yes",func:()=>{e(!1),t(),s(!1)}})]})]})})},va=x.createContext(),F9=()=>{const{userData:n,user:e,setLoading:t,getDataFromFireStore:s}=x.useContext(Fn),a=x.useRef(),[l,c]=x.useState(),[d,p]=x.useState(),[m,v]=x.useState(),[T,E]=x.useState(),[R,A]=x.useState(),[j,D]=x.useState(),[M,z]=x.useState(),[q,ne]=x.useState(),[ue,ee]=x.useState(),[O,I]=x.useState(),[N,V]=x.useState(),[L,F]=x.useState(!1),[k,Pe]=x.useState(!1),[De,J]=x.useState([]),[ce,pe]=x.useState([]),[ve,U]=x.useState([]);function te(){var X;((X=a.current)==null?void 0:X.value)!=""&&J(ie=>{var fe;return[...ie,(fe=a.current)==null?void 0:fe.value]})}const B=async()=>{t(!0);try{await ha(Kn(Yn,"Users",e==null?void 0:e.uid),{perInfo:{school:d,name:l,grSec:q,age:T,bDay:R,gender:j,hobbies:M,placeOfBirth:m,purpose:ue},usingAs:O,favSubjects:ve,description:N,contacts:ce,skills:De}),s(e)}catch(X){console.log(X)}t(!1)},$={userData:n,user:e,setLoading:t,uName:l,setUName:c,school:d,setSchool:p,pBirth:m,setPBirth:v,age:T,setAge:E,bDay:R,setBDay:A,gender:j,setGender:D,hobbies:M,setHobbies:z,grSec:q,setGrSec:ne,purpose:ue,setPurpose:ee,usingAs:O,setUsingAs:I,desc:N,setDesc:V,editAccount:L,setEditAccount:F,showChanges:k,setShowChanges:Pe,skills:De,setSkills:J,contacts:ce,setContacts:pe,favSubjects:ve,setFavSubjects:U,addSkill:te,saveAccountChanges:B};return x.useEffect(()=>{var X,ie,fe,Ee,ge,wt,Nn,vn,kn;n&&(c((X=n.perInfo)==null?void 0:X.name),p((ie=n.perInfo)==null?void 0:ie.school),v((fe=n.perInfo)==null?void 0:fe.placeOfBirth),E((Ee=n.perInfo)==null?void 0:Ee.age),A((ge=n.perInfo)==null?void 0:ge.bDay),D((wt=n.perInfo)==null?void 0:wt.gender),z((Nn=n.perInfo)==null?void 0:Nn.hobbies),ne((vn=n.perInfo)==null?void 0:vn.grSec),I(n==null?void 0:n.usingAs),ee((kn=n==null?void 0:n.perInfo)==null?void 0:kn.purpose),V(n==null?void 0:n.description),pe(n!=null&&n.contacts?n==null?void 0:n.contacts:[]),J(n!=null&&n.skills?n==null?void 0:n.skills:[]))},[n]),y.jsx(y.Fragment,{children:y.jsxs(va.Provider,{value:$,children:[y.jsxs("div",{className:Gr.dashboardWrapper,children:[y.jsxs("nav",{className:Gr.navBar,children:[y.jsx("h1",{children:"PERSONAL INFORMATIONS"}),y.jsx(ZB,{editAccount:L,setEditAccount:X=>F(X),saveAccountChanges:()=>B(),setShowPersonalInformation:X=>setShowPersonalInformation(X),setShowChanges:X=>Pe(X)})]}),y.jsxs("div",{className:Gr.dashboardBox,children:[y.jsxs("div",{className:Gr.left,children:[y.jsx(c9,{}),y.jsx(v9,{}),y.jsx(d9,{})]}),y.jsxs("div",{className:Gr.right,children:[y.jsx("div",{className:Gr.top,children:y.jsx(b9,{})}),y.jsx("div",{className:Gr.mid,children:y.jsx(O9,{})}),y.jsx("div",{className:Gr.bottom,children:y.jsx(M9,{})})]})]})]}),y.jsx(B9,{editAccount:L,setEditAccount:X=>F(X),saveAccountChanges:()=>B(),showChanges:k,setShowChanges:X=>Pe(X)})]})})},z9="_signInWrapper_1gazs_10",H9="_Link_1gazs_27",q9="_goToStartingPage_1gazs_32",G9="_topArc_1gazs_44",W9="_form_1gazs_57",$9="_userNameCon_1gazs_64",K9="_passwordCon_1gazs_65",Y9="_moreActions_1gazs_72",Q9="_signInButton_1gazs_128",X9="_otherPlatformsWrapper_1gazs_144",Z9="_iconsWrapper_1gazs_155",J9="_wrapper_1gazs_161",nn={signInWrapper:z9,Link:H9,goToStartingPage:q9,topArc:G9,form:W9,userNameCon:$9,passwordCon:K9,moreActions:Y9,signInButton:Q9,otherPlatformsWrapper:X9,iconsWrapper:Z9,wrapper:J9};function e5(){const{setUser:n,setShowSignInPrompt:e,setShowSignUpPrompt:t,setLoading:s,setContinueAs:a,setHideNavBar:l,prevPage:c}=x.useContext(Fn),d=ql(),[p,m]=x.useState(!1),[v,T]=x.useState(),E=x.useRef(null),R=x.useRef(null),A=x.useRef(null),j=x.useRef(null),D=()=>{const ee=A==null?void 0:A.current.value,O=j==null?void 0:j.current.value,I=E.current,N=R.current;return{email:ee,pass:O,warning1:I,warning2:N}},M=()=>{const ee=D();ee.email&&(ee.email=""),ee.pass&&(ee.pass=""),ee.warning1.innerText="",ee.warning2.innerText=""},z=ee=>{const O=D();return(ee==null?void 0:ee.target.value)==""||O.email==""?E.current.textContent="The input field is blank!":E.current.textContent="",!1},q=ee=>{const O=D();return(ee==null?void 0:ee.target.value)==""||O.pass==""?R.current.textContent="The input field is blank!":R.current.textContent="",!1},ne=async()=>{z(),q();{s(!0);try{await QL(ln,A.current.value,j.current.value),M(),n(ln.currentUser),a(!0),d(c)}catch(ee){console.log(ee),ee.code=="auth/invalid-email"&&(E.current.textContent="Invalid email/Email doesn't exist."),ee.code=="auth/invalid-credential"&&(R.current.textContent="Password does not match."),ee.code=="auth/network-request-failed"&&alert("Network Error, unable to sign in. Please try again.")}s(!1)}},ue=async()=>{var O;const ee=new Qi;s(!0);try{await TU(ln,ee),M(),n(ln.currentUser);const I=Kn(Yn,"Users",(O=ln.currentUser)==null?void 0:O.uid);(await Cp(I)).exists()?e(!1):t(!0),a(!0),d(c)}catch(I){console.log(I)}s(!1)};return y.jsx(y.Fragment,{children:y.jsxs("div",{className:nn.signInWrapper,children:[y.jsx(os,{to:c!=""?c:"/AcadComponent/",className:nn.Link,children:y.jsx(_e,{func:()=>{M()},content:"X",className:nn.goToStartingPage})}),y.jsx("div",{className:nn.topArc,children:"SIGN IN"}),y.jsxs("div",{className:nn.form,children:[y.jsxs("div",{className:nn.userNameCon,children:[y.jsx("h3",{children:"Username :"}),y.jsx("input",{className:"emailInput",ref:A,onInput:ee=>{z(ee)}}),y.jsx("span",{ref:E})]}),y.jsxs("div",{className:nn.passwordCon,children:[y.jsx("h3",{children:"Password :"}),y.jsx("input",{type:p?"text":"password",ref:j,onInput:ee=>{q(ee)},className:nn.Password}),y.jsx("span",{ref:R}),y.jsx("img",{src:p?"./password/visible.png":"./password/unsee.png",className:nn.seePassword,onClick:()=>{m(!p)}})]}),y.jsxs("div",{className:nn.moreActions,children:[y.jsx("span",{className:nn.forgotPass,children:"Forgot Password"}),y.jsx(os,{className:nn.createAcc,to:"/AcadComponent/SignUp",children:"Doesn't Have An Account?"})]}),y.jsx(_e,{className:nn.signInButton,func:()=>{ne()},content:"SIGN IN"})]}),y.jsxs("div",{className:nn.otherPlatformsWrapper,children:[y.jsxs("div",{className:nn.iconsWrapper,children:[y.jsx("div",{className:nn.wrapper,onClick:()=>{ue()},children:y.jsx("img",{src:"./platforms/GG.png "})}),y.jsx("div",{className:nn.wrapper,children:y.jsx("img",{src:"./platforms/facebook.png"})}),y.jsx("div",{className:nn.wrapper,children:y.jsx("img",{src:"./platforms/Instagram.png"})})]}),y.jsx("h3",{children:"SIGN IN WITH DIFFERENT PLATFORMS"})]})]})})}const t5="_hide_1h5us_1",n5="_formOne_1h5us_4",eo={hide:t5,formOne:n5},s5=()=>{const{indicated:n,show:e,showConfirm:t,setShowConfirm:s,setShow:a,passwordInput:l,confirmPasswordInput:c,emailInput:d,passWarning:p,confirmWarning:m,emailWarning:v}=x.useContext(Th);return y.jsxs("div",{className:n==0?eo.formOne:eo.hide,children:[y.jsxs("div",{className:eo.email,children:[y.jsx("h4",{children:"Email"}),y.jsx("input",{type:"text",ref:d}),y.jsx("span",{ref:v})]}),y.jsxs("div",{className:eo.password,children:[y.jsx("h4",{children:"Password"}),y.jsx("input",{type:e?"text":"password",ref:l}),y.jsx("img",{src:e?"./password/visible.png":"./password/unsee.png",className:eo.see_password,onClick:()=>{a(!e)}}),y.jsx("span",{ref:p})]}),y.jsxs("div",{className:eo.confirm,children:[y.jsx("h4",{children:"Confirm Password"}),y.jsx("input",{type:t?"text":"password",ref:c}),y.jsx("img",{src:t?"./password/visible.png":"./password/unsee.png",className:eo.see_confirm,onClick:()=>{s(!t)}}),y.jsx("span",{ref:m})]})]})},i5="_hide_p08ld_1",r5="_formTwo_p08ld_6",a5="_top_p08ld_16",o5="_notIndicated_p08ld_41",l5="_indicated_p08ld_46",Ec={hide:i5,formTwo:r5,top:a5,notIndicated:o5,indicated:l5},u5=()=>{const{indicated:n,usageOptions:e,handleUsageOptions:t,usingAsInput:s}=x.useContext(Th);return y.jsxs("div",{className:n==1?Ec.formTwo:Ec.hide,children:[y.jsx("h3",{children:"I am using the Web Application as?"}),y.jsx("div",{children:y.jsxs("div",{className:Ec.top,children:[e.map((a,l)=>y.jsx(_e,{content:a.content,className:a.isIndicated?Ec.indicated:Ec.notIndicated,func:()=>{t(l)}},a.content)),y.jsx("h3",{children:"What is your purpose?"}),y.jsx("textarea",{type:"text",placeholder:"Other reason...",ref:s})]})})]})},c5="_hide_a52m3_1",h5="_formThree_a52m3_5",Sc={hide:c5,formThree:h5},f5=()=>{const{indicated:n,schoolInput:e,schoolWarning:t,grSecInput:s,grSecWarning:a,nickNameInput:l,nameWarning:c}=x.useContext(Th);return y.jsxs("div",{className:n==2?Sc.formThree:Sc.hide,children:[y.jsxs("div",{className:Sc.username,children:[y.jsx("h4",{children:"Name"}),y.jsx("input",{type:"text",ref:l}),y.jsx("span",{ref:c})]}),y.jsxs("div",{className:Sc.password,children:[y.jsx("h4",{children:"School"}),y.jsx("input",{type:"text",ref:e}),y.jsx("span",{ref:t})]}),y.jsxs("div",{className:Sc.confirm,children:[y.jsx("h4",{children:"Grade & Section"}),y.jsx("input",{type:"text",ref:s}),y.jsx("span",{ref:a})]})]})},d5="_hide_z324w_8",p5="_formFour_z324w_12",m5="_wrapper_z324w_43",g5="_IndicatedButt_z324w_63",_5="_notIndicatedButt_z324w_73",vl={hide:d5,formFour:p5,wrapper:m5,IndicatedButt:g5,notIndicatedButt:_5},y5=()=>{const{indicated:n,subjects:e,handleSubjects:t}=x.useContext(Th);if(e!=null)return y.jsx("div",{className:n==3?vl.formFour:vl.hide,children:y.jsxs("div",{className:vl.wrapper,children:[y.jsx("h4",{children:"What is your favorite subject?"}),y.jsx("div",{className:vl.buttons,children:e.map((s,a)=>y.jsx(_e,{func:()=>{t(a)},className:s.testClass==!0?vl.IndicatedButt:vl.notIndicatedButt,content:e[a].content},s+a.toString()))})]})})},v5="_signUpWrapper_8b39y_12",T5="_Link_8b39y_32",E5="_forms_8b39y_38",S5="_toBottom_8b39y_49",b5="_bottom_8b39y_68",w5="_buttons_8b39y_74",C5="_indicator_8b39y_96",A5="_indicated_8b39y_110",R5="_notIndicated_8b39y_114",I5="_goToStartingPage_8b39y_146",sn={signUpWrapper:v5,Link:T5,forms:E5,toBottom:S5,bottom:b5,buttons:w5,indicator:C5,indicated:A5,notIndicated:R5,goToStartingPage:I5},Th=x.createContext(),x5=()=>{const{setLoading:n,setContinueAs:e,setUser:t,prevPage:s}=x.useContext(Fn),a=ql(),l=x.useRef(null),c=x.useRef(null),d=x.useRef(null),p=x.useRef(null),m=x.useRef(null),v=x.useRef(null),T=x.useRef(null),E=x.useRef(null),R=x.useRef(null),A=x.useRef(null),j=x.useRef(null),D=x.useRef(null),M=x.useRef(null),[z,q]=x.useState(!1),[ne,ue]=x.useState(!1),[ee,O]=x.useState(0),[I,N]=x.useState([]),[V,L]=x.useState([]),[F,k]=x.useState([{content:"As a Student",isIndicated:!1},{content:"As a Teacher",isIndicated:!1},{content:"As a Employee",isIndicated:!1},{content:"I Am Just Using It.",isIndicated:!1}]),[Pe,De]=x.useState([{content:"TLE",testClass:!1},{content:"Mathematics",testClass:!1},{content:"Science",testClass:!1},{content:"English",testClass:!1},{content:"Colloquium",testClass:!1},{content:"Filipino",testClass:!1},{content:"Mapeh",testClass:!1},{content:"AP",testClass:!1},{content:"ESP",testClass:!1}]),J=()=>{var un,dr,Ws,He,Me,dt;const X=(un=d.current)==null?void 0:un.value,ie=(dr=l.current)==null?void 0:dr.value,fe=(Ws=m.current)==null?void 0:Ws.value,Ee=(He=T.current)==null?void 0:He.value,ge=(Me=R.current)==null?void 0:Me.value,wt=(dt=j.current)==null?void 0:dt.value,Nn=p.current,vn=c.current,kn=v.current,Qn=E.current,Ds=A.current,bi=D.current;return[[X,ie,fe,Ee,ge,wt],[Nn,vn,kn,Qn,Ds,bi]]},ce=async X=>{var Ee;const ie=J();let fe;if(ee==0){if(fe=pe(ie[0],ie[1],ee),!fe){n(!0);try{await YL(ln,ie[0][0],ie[0][1]),t(ln.currentUser),await iw(Kn(Yn,"Users",(Ee=ln.currentUser)==null?void 0:Ee.uid),{email:ie[0][0]}),O(ee+1)}catch(ge){console.log(ge),ge.code=="auth/email-already-in-use"&&(ie[1][0].innerText="Email is already taken.")}n(!1)}}else ee==1||ee==2?fe=pe(ie[0],ie[1],ee):ee==3&&X=="Submit"&&te(ie[0]);X=="next"&&ee!=3&&!fe?O(ee+1):X=="back"&&ee!=1&&O(ee-1)},pe=(X,ie,fe)=>{let Ee=!1;for(let ge in X)fe==0&&ge<3?(X[ge]==""&&(ie[ge].innerText="The input field is blank.",Ee=!0),ge==0?X[ge].includes("@gmail.com")||X[ge].includes("@email.com")?ie[ge].innerText="":(ie[ge].innerText="This is not an email!",Ee=!0):ge==1?X[ge].length<=7?(ie[ge].innerText="The password is too short(maximum of 8 characters).",Ee=!0):ie[ge].innerText="":ge==2&&(X[ge]!=X[ge-1]?(ie[ge].innerText="The password isn't match.",Ee=!0):ie[ge].innerText="")):fe==2&&ge>2&&(X[ge]==""?(ie[ge].innerText="The input field is blank.",Ee=!0):(ie[ge].innerText="",Ee=!1));return!!Ee},ve=X=>{let ie=F;for(let fe in ie)if(fe==X){ie=ie[X].content;break}N(ie),k(fe=>fe.map((Ee,ge)=>X==ge?{...Ee,isIndicated:!0}:{...Ee,isIndicated:!1}))},U=X=>{let ie=Pe,fe=[];ie=ie.map((Ee,ge)=>X==ge?{...Ee,testClass:Ee.testClass!=!0}:{...Ee});for(let Ee in ie)ie[Ee].testClass==!0&&fe.push(ie[Ee]);L([...fe]),De(Ee=>Ee.map((ge,wt)=>X==wt?{...ge,testClass:ge.testClass!=!0}:{...ge}))},te=async X=>{n(!0);try{const ie=ln.currentUser;await iw(Kn(Yn,"Users",ie.uid),{favSubjects:V,usingAs:I,perInfo:{school:X[4],name:X[3],grSec:X[5],age:"",bDay:"",gender:"",hobbies:"",placeOfBirth:"",skills:"",contacts:{gMail:"",number:"",faceBook:""},purpose:M==null?void 0:M.current.value}}),a(s),B(),e(!0)}catch(ie){console.log(ie.message)}n(!1)};function B(){l.current.value="",c.current.value="",d.current.value="",p.current.value="",m.current.value="",v.current.value="",T.current.value="",E.current.value="",R.current.value="",A.current.value="",j.current.value="",D.current.value="",M.current.value="",De(X=>X.map(ie=>({...ie,testClass:!1}))),k(X=>X.map(ie=>({...ie,isIndicated:!1}))),N(null),L([]),O(0)}const $={passwordInput:l,passWarning:c,emailInput:d,emailWarning:p,confirmPasswordInput:m,confirmWarning:v,nickNameInput:T,nameWarning:E,schoolInput:R,schoolWarning:A,grSecInput:j,grSecWarning:D,usingAsInput:M,show:z,setShow:q,showConfirm:ne,setShowConfirm:ue,indicated:ee,setIndication:O,usage:I,setUsage:N,selectedSubjects:V,setSelectedSubjects:L,usageOptions:F,setUsageOptions:k,subjects:Pe,setSubjects:De,handleUsageOptions:ve,handleSubjects:U};return y.jsx(y.Fragment,{children:y.jsx(Th.Provider,{value:$,children:y.jsxs("div",{className:sn.signUpWrapper,children:[y.jsx(os,{to:s!=""?s:"/AcadComponent/",className:sn.Link,children:y.jsx(_e,{func:()=>{B()},content:"X",className:sn.goToStartingPage})}),y.jsxs("form",{onSubmit:X=>{X.preventDefault()},className:sn.forms,children:[y.jsx("header",{children:"SIGN UP"}),y.jsxs("div",{className:sn.toBottom,children:[y.jsx(s5,{}),y.jsx(u5,{}),y.jsx(f5,{}),y.jsx(y5,{}),y.jsxs("div",{className:sn.bottom,children:[y.jsxs("div",{className:sn.buttons,children:[y.jsx(_e,{content:"BACK",func:()=>{ce("back")}}),y.jsx(_e,{content:ee==3||ee==0?"SUBMIT":"NEXT",func:()=>{ee==3||ee==0?ce("Submit"):ce("next")}})]}),y.jsxs("div",{className:sn.indicator,children:[y.jsx("div",{className:ee==0?sn.indicated:sn.notIndicated}),y.jsx("div",{className:ee==1?sn.indicated:sn.notIndicated}),y.jsx("div",{className:ee==2?sn.indicated:sn.notIndicated}),y.jsx("div",{className:ee==3?sn.indicated:sn.notIndicated})]}),y.jsx("h4",{id:sn.SignUp,onClick:()=>{B()},children:y.jsx(os,{to:"/AcadComponent/SignIn",className:sn.linkBottom,children:"Already Have An Account?"})})]})]})]})]})})})},N5="_loadingWrapper_c5yrr_15",k5="_loadingBar_c5yrr_49",dw={loadingWrapper:N5,loadingBar:k5},O5=()=>{const{loading:n}=x.useContext(Fn);if(n)return y.jsxs("div",{className:dw.loadingWrapper,children:[y.jsx("div",{className:dw.loadingBar}),"Loading..."]})},D5=()=>y.jsx("div",{children:"PageNotFound"}),P5="_Signing_Out_Wrapper_1ge6g_3",M5="_Hide_Signing_Out_Wrapper_1ge6g_3",L5="_Signing_Out_Box_1ge6g_24",U5="_Top_1ge6g_38",V5="_Options_1ge6g_83",bc={Signing_Out_Wrapper:P5,Hide_Signing_Out_Wrapper:M5,Signing_Out_Box:L5,Top:U5,Options:V5},j5=()=>{const{isSigningOut:n,setIsSigningOut:e,setLoading:t,user:s,setUser:a,userData:l}=x.useContext(Fn),c=async()=>{t(!0);try{await eU(ln),a(null),t(!1),e(!1)}catch(d){t(!1),e(!1),console.log(d)}};if(n)return y.jsx("div",{className:n?bc.Signing_Out_Wrapper:bc.Hide_Signing_Out_Wrapper,children:y.jsxs("div",{className:bc.Signing_Out_Box,children:[y.jsxs("div",{className:bc.Top,children:[l!=null&&l.profPic?y.jsx("div",{style:{backgroundImage:`url(${l.profPic})`}}):y.jsx("i",{className:"fa fa-user"}),y.jsx("h3",{children:"Would You Like To Sign Out?"})]}),y.jsxs("div",{className:bc.Options,children:[y.jsx(_e,{content:"No",func:()=>{e(!1)}}),y.jsx(_e,{content:"Yes",func:()=>{c()}})]})]})})},B5="_makeUserSignInWrapper_k8p8e_1",F5="_hideMakeUserSignInWrapper_k8p8e_2",z5="_makeUserSignInBox_k8p8e_23",H5="_Images_k8p8e_48",q5="_Buttons_k8p8e_82",G5="_hidePromptButton_k8p8e_105",Wr={makeUserSignInWrapper:B5,hideMakeUserSignInWrapper:F5,makeUserSignInBox:z5,Images:H5,Buttons:q5,hidePromptButton:G5},W5=()=>{const{showMakeUserSignIn:n,setShowMakeUserSignIn:e,setPage:t,user:s}=x.useContext(Fn);function a(){e(!1),t(1);let l=window.location.href;l.toLowerCase();let c=l.search("/Acad/");l=l.slice(0,c+6).concat("#Home"),window.location.href=l}return y.jsx(y.Fragment,{children:y.jsx("div",{className:n&&!s?Wr.makeUserSignInWrapper:Wr.hideMakeUserSignInWrapper,children:y.jsxs("div",{className:Wr.makeUserSignInBox,children:[y.jsx(os,{className:Wr.hidePromptButton,to:"/AcadComponent/",onClick:()=>{a()},children:y.jsx("i",{className:"fa fa-close"})}),y.jsxs("div",{className:Wr.Images,children:[y.jsx("img",{src:"./cat.png"}),y.jsx("img",{src:"./!.png"})]}),y.jsx("h1",{children:"You're not Signed In !"}),y.jsx("p",{children:"Create an account, log in and get free access to the advanced To-Do List Web Application"}),y.jsxs("div",{className:Wr.Buttons,children:[y.jsx(os,{className:Wr.Links,to:"/AcadComponent/SignUp",onClick:()=>{e(!1)},children:"Sign Up"}),y.jsx(os,{className:Wr.Links,to:"/AcadComponent/SignIn",onClick:()=>{e(!1)},children:"Sign In"})]})]})})})},e_=[{path:"/AcadComponent/",element:y.jsx(kw,{})},{path:"/AcadComponent/Tasks",element:y.jsx(D1,{})},{path:"/AcadComponent/Folders",element:y.jsx(M1,{})},{path:"/AcadComponent/Contacts",element:y.jsx(L1,{})},{path:"/AcadComponent/Dashboard",element:y.jsx(F9,{})},{path:"/AcadComponent/SignIn",element:y.jsx(e5,{})},{path:"/AcadComponent/SignUp",element:y.jsx(x5,{})},{path:"*",element:y.jsx(D5,{})}],Fn=x.createContext();function $5(){const[n,e]=x.useState(!1),[t,s]=x.useState(!1),[a,l]=x.useState(!1),[c,d]=x.useState(!0),[p,m]=x.useState(!1),[v,T]=x.useState(!1),[E,R]=x.useState(!1),[A,j]=x.useState(!1),[D,M]=x.useState(!1),[z,q]=x.useState("/AcadComponent/"),[ne,ue]=x.useState(null),[ee,O]=x.useState(),[I,N]=x.useState({}),[V,L]=x.useState([]),[F,k]=x.useState([]),[Pe,De]=x.useState(JSON.parse(localStorage.getItem("Changes"))),[J,ce]=x.useState([{name:"Home",ind:!1,icon:y.jsx("span",{className:"material-icons",children:"home"}),page:y.jsx(kw,{}),path:"/AcadComponent/"},{name:"Tasks",ind:!1,icon:y.jsx("span",{className:"fa fa-book"}),page:y.jsx(D1,{}),path:"/AcadComponent/Tasks"},{name:"Folders",ind:!1,icon:y.jsx("span",{className:"material-icons",children:"folder"}),page:y.jsx(M1,{}),path:"/AcadComponent/Folders"},{name:"Contacts",ind:!1,icon:y.jsx("span",{className:"material-icons",children:"phone"}),page:y.jsx(L1,{}),path:"/AcadComponent/Contacts"}]);ee!=null&&ee.uid||JL(ln,te=>{(te==null?void 0:te.uid)!=null&&(O(te),pe(te.uid))});async function pe(te){const B=Kn(Yn,"Users",te);try{const X=(await Cp(B)).data();N(X)}catch($){console.log($.code)}}const ve={showSignUp:n,setShowSignUp:e,showLogin:t,setShowLogin:s,showMakeUserSignIn:a,setShowMakeUserSignIn:l,hideSideBar:c,setHideSideBar:d,hideSaveChanges:p,setHideSaveChanges:m,loading:v,setLoading:T,isSigningOut:E,setIsSigningOut:R,continueAs:A,setContinueAs:j,saveChanges:D,setSaveChanges:M,prevPage:z,setPrevPage:q,imageContent:ne,setImageContent:ue,user:ee,setUser:O,userData:I,setUserData:N,tasksCache:V,setTasksCache:L,pages:J,setPages:ce,changes:Pe,setChanges:De,foldersCache:F,setFoldersCache:k,pagination:te=>{U(te)},getDataFromFireStore:te=>{pe(te==null?void 0:te.uid)}};function U(te){console.log(te),ce((B,$)=>B.map((X,ie)=>te==ie?{...X,ind:!0}:{...X,ind:!1}))}return y.jsx(y.Fragment,{children:y.jsx(Fn.Provider,{value:ve,children:y.jsxs(KN,{children:[y.jsx(ik,{}),y.jsx(wN,{children:e_==null?void 0:e_.map(te=>y.jsx(Cw,{path:te.path,element:te.element},te.path))}),y.jsx(j5,{}),y.jsx(W5,{}),y.jsx(O5,{})]})})})}gx.createRoot(document.getElementById("root")).render(y.jsx(x.StrictMode,{children:y.jsx($5,{})}));
