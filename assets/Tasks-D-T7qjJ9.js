import{r as a,j as e,B as d,c as Ne,d as ce,a as de,g as Pe,u as he,b as Se}from"./index-HKKtdzrQ.js";const ye="_bottomOptionsWrapper_9abog_1",Be="_left_9abog_71",be="_uncheck_9abog_71",ve="_right_9abog_89",Oe="_fullContent_9abog_143",w={bottomOptionsWrapper:ye,left:Be,uncheck:be,right:ve,fullContent:Oe},We=()=>{const{handleSelectedTasks:o,selectedTasks:_,unselectAll:r,tasks:p,searching:g,setTasks:i,filteredTasks:j,setFilteredTasks:c,handleMarking:t,selecting:s,setSelecting:l}=a.useContext(D),f=()=>{let u=p,h=j,F=[],b=[];if(g){h=h.map(T=>({...T,isChecked:!0}));for(let T=0;T<h.length;T++)h[T].isChecked&&b.push({id:h[T].id,index:T});o([...b])}else{u=u.map(T=>({...T,isChecked:!0}));for(let T=0;T<u.length;T++)u[T].isChecked&&F.push({id:u[T].id,index:T});o([...F])}g?c([...h]):i(T=>T.map(H=>({...H,isChecked:!0})))};function $(){let u=p,h=j;for(let F in h)for(let b in _)h[F].id===_[b].id&&h.splice(F,1);for(let F in p)for(let b in _)u[F].id===_[b].id&&u.splice(F,1);t(h,[...u]),o(null)}const C=()=>{if(s==!0)return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:w.left,children:[e.jsx(d,{element:e.jsx("span",{className:w.fullContent,children:"Select All"}),icon:e.jsx("i",{className:"fa fa-check"}),className:w.SelectAllButton,func:()=>{f()}}),e.jsx(d,{element:e.jsx("span",{className:w.fullContent,children:"Unselect"}),icon:e.jsx("i",{className:`fas fa fa-check ${w.uncheck}`}),className:w.UnselectAllButton,func:()=>{r()}})]}),e.jsxs("div",{className:w.right,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-trash"}),element:e.jsx("span",{className:w.fullContent,children:"Delete"}),func:()=>{_?$():console.log("No update")}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),element:e.jsx("span",{className:w.fullContent,children:"Cancel"}),func:()=>{l(!1),r()}})]})]})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:w.bottomOptionsWrapper,children:s?e.jsx(C,{}):e.jsx(d,{element:e.jsx("span",{className:w.fullContent,children:"Select"}),icon:e.jsx("i",{className:"fa fa-hand-o-up"}),className:w.SelectButton,func:()=>l(!0)})})})},$e="_editTaskPrompt_1qqsx_1",Fe="_hideEditTaskPrompt_1qqsx_19",we="_nav_1qqsx_57",Ie="_content_1qqsx_127",He="_submitButton_1qqsx_173",ee={editTaskPrompt:$e,hideEditTaskPrompt:Fe,nav:we,content:Ie,submitButton:He},Ee=()=>{const{openedTask:o,setOpenedTask:_,tasks:r,filteredTasks:p,setEditing:g,editing:i,handleMarking:j}=a.useContext(D),c=a.useRef(null);function t(){let s=[...r],l=p;for(let f in s)s[f].id===o.id&&(s[f].task=c.current.innerText);for(let f in l)l[f].id===o.id&&(l[f].task=c.current.innerText);j(l,[...s])}if((o==null?void 0:o.id)!=null)return e.jsxs("div",{className:i?ee.editTaskPrompt:ee.hideEditTaskPrompt,children:[e.jsxs("div",{className:ee.nav,children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit"})," ",e.jsx("span",{children:"Edit Task"})]}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-times"}),func:()=>{_({index:null,isOpened:!1}),g(!1)}})]}),e.jsx("div",{className:ee.content,children:e.jsx("p",{ref:c,contentEditable:i,children:r.map((s,l)=>{if(s.id===o.id)return s.task})})}),e.jsx(d,{content:"Save Changes",className:ee.submitButton,func:()=>{t(),g(!1)}})]})},De="_sortTypeBar_1i2uf_1",Je="_hideSortTypeBar_1i2uf_1",qe="_sortTypeBarBox_1i2uf_27",Ae="_notIndicated_1i2uf_63",Ue="_indicated_1i2uf_73",se={sortTypeBar:De,hideSortTypeBar:Je,sortTypeBarBox:qe,notIndicated:Ae,indicated:Ue},Me=()=>{const{sortingTypeBar:o,setSortingTypeBar:_,sortingTypes:r,setSortingTypes:p,unselectAll:g,setType:i,type:j}=a.useContext(D);return a.useEffect(()=>{p(c=>c.map(t=>j==t.type?{...t,ind:!0}:{...t,ind:!1}))},[j]),e.jsx(e.Fragment,{children:e.jsx("div",{className:o?se.sortTypeBar:se.hideSortTypeBar,onClick:()=>{_(!1)},children:e.jsx("ul",{className:se.sortTypeBarBox,children:r==null?void 0:r.map((c,t)=>e.jsx("li",{className:c.ind?se.indicated:se.notIndicated,onClick:()=>{g(),i(c.type),p(s=>s.map(l=>s[t].type==l.type?{...l,ind:!0}:{...l,ind:!1}))},children:c.type},c.type))})})})},Re="_sortTaskPrompt_1n6vz_17",Ge="_hideSortTaskPrompt_1n6vz_19",Le="_sortBox_1n6vz_51",ze="_Hide_Sort_Box_Button_1n6vz_75",Ve="_sortOptions_1n6vz_105",Ze="_checked_1n6vz_151",Ke="_unchecked_1n6vz_151",M={sortTaskPrompt:Re,hideSortTaskPrompt:Ge,sortBox:Le,Hide_Sort_Box_Button:ze,sortOptions:Ve,checked:Ze,unchecked:Ke},Qe=()=>{const{setSortTaskPrompt:o,sortTaskPrompt:_,sortingTypes:r,setSortingTypes:p,setSorting:g,sortOptions:i,setSortOptions:j}=a.useContext(D);function c(t){let s=i;s=s.map((l,f)=>s[f]===s[t]?{...l,state:!l.state}:{...l,state:!1});for(let l in s){if(s[l].state==!0){g(!0);break}l==s.length-1&&!s[l].state&&g(!1)}console.log(s),j([...s])}return e.jsx("div",{className:_?M.sortTaskPrompt:M.hideSortTaskPrompt,children:e.jsxs("div",{className:_?M.sortBox:M.Hide_Sort_Box,children:[e.jsx("h2",{children:"Sort Settings"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:M.Hide_Sort_Box_Button,func:()=>{o(!1)}}),e.jsx("div",{className:M.sortOptions,children:i==null?void 0:i.map((t,s)=>e.jsx(d,{icon:e.jsx("i",{className:`fa fa-check-square ${t.state==!0?M.checked:M.unchecked}`}),content:t.description,func:()=>{c(s)}},t.description))})]})})},Xe="_tasksContainer_gj5si_1",Ye="_tasks_gj5si_1",es="_Finished_gj5si_73",ss="_unchecked_gj5si_115",ts="_checked_gj5si_123",ns="_col_gj5si_131",as="_br_gj5si_139",os="_fs_gj5si_147",ls="_bgC_gj5si_155",rs="_fW_gj5si_163",B={tasksContainer:Xe,tasks:Ye,Finished:es,unchecked:ss,checked:ts,col:ns,br:as,fs:os,bgC:ls,fW:rs},q=({task:o,i:_})=>{const{selecting:r,searching:p,tasks:g,setTasks:i,setFilteredTask:j,handleSelectedTasks:c}=a.useContext(fe),{setOpenedTask:t,setEditing:s}=a.useContext(D);function l(f){let $=[],C=g;C=C.map(u=>u.id===f?{...u,isChecked:!u.isChecked}:{...u});for(let u=0;u<C.length;u++)C[u].isChecked&&$.push({id:C[u].id,index:u}),u==C.length-1&&(c($),console.log($));i(u=>u.map(h=>h.id===f?{...h,isChecked:!h.isChecked}:{...h})),p&&j(u=>u.map(h=>h.id===f?{...h,isChecked:!h.isChecked}:{...h}))}return e.jsxs("label",{htmlFor:"task"+o.id,style:o.style!="default"?{...o.style}:null,className:o.type=="pending"?`${B.Pending} ${o.cName.map(f=>JSON.parse(f)).join(" ")} ${B.tasks}`:`${B.Finished} ${o.cName.map(f=>JSON.parse(f)).join(" ")} ${B.tasks}`,onDoubleClick:()=>{s(!0),t({id:o.id,isOpened:!0})},children:[e.jsx("i",{style:r==!1?{display:"none"}:{display:"block"},className:`fa fa-check-square ${o.isChecked===!0?B.checked:B.unchecked}`}),e.jsx("input",{style:{display:"none"},type:"checkbox",id:"task"+o.id,onChange:()=>{r&&l(o.id)}}),e.jsx("span",{children:o.task})]},o.id)},is=()=>{const{tasks:o,sortOptions:_,searching:r,filteredTasks:p}=a.useContext(D),{sorting:g,type:i,taskCheckboxes:j,selecting:c}=a.useContext(fe);if(r&&p!=null)return console.log("searching && filteredTask"),e.jsx("div",{className:B.tasksContainer,children:p.map((t,s)=>{if(t.type==="pending"&&i==="Pending")return e.jsx(q,{task:t,i:s,selecting:c,chechTask:()=>checkTask()},t.id);if(t.type==="finished"&&i==="Finished")return e.jsx(q,{task:t,i:s,selecting:c,chechTask:()=>checkTask()},t.id);if(i==="All Tasks")return e.jsx(q,{task:t,i:s,selecting:c,chechTask:()=>checkTask()},t.id)})},"Task_Container");if(g&&!r){let t=o;for(let s in _)s==0&&_[s].state==!0?t=t.sort((l,f)=>f.dateCreated.time-l.dateCreated.time):s==1&&_[s].state==!0?t=t.sort((l,f)=>l.dateCreated.time-f.dateCreated.time):s==2&&_[s].state==!0?t=t.sort((l,f)=>l.task.localeCompare(f.task)):s==3&&_[s].state==!0&&(t=t.sort((l,f)=>f.task.localeCompare(l.task)));return e.jsx("div",{className:B.tasksContainer,children:t.map((s,l)=>{if(s.type==="pending"&&i==="Pending")return e.jsx(q,{task:s,i:l,selecting:c,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&i==="Finished")return e.jsx(q,{task:s,i:l,selecting:c,chechTask:()=>checkTask()},s.id);if(i==="All Tasks")return e.jsx(q,{task:s,i:l,selecting:c,chechTask:()=>checkTask()},s.id)})})}else if(!g&&!r)return console.log("!sorting && !searching"),e.jsx("div",{className:B.tasksContainer,children:j==null?void 0:j.map((t,s)=>{if(t.type==="pending"&&i==="Pending")return e.jsx(q,{task:t,i:s,selecting:c,chechTask:()=>checkTask()},t.id);if(t.type==="finished"&&i==="Finished")return e.jsx(q,{task:t,i:s,selecting:c,chechTask:()=>checkTask()},t.id);if(i==="All Tasks")return e.jsx(q,{task:t,i:s,selecting:c,chechTask:()=>checkTask()},t.id)})})},fe=a.createContext(),cs=()=>{const{searching:o,setSearching:_,tasks:r,setTasks:p,filteredTasks:g,setFilteredTasks:i,sorting:j,setSorting:c,type:t,selecting:s,setSelecting:l,handleSelectedTasks:f}=a.useContext(D),[$,C]=a.useState(r.length!=0?[...r]:[]),u={searching:o,setSearching:_,tasks:r,setTasks:p,filteredTasks:g,setFilteredTasks:i,sorting:j,setSorting:c,type:t,selecting:s,setSelecting:l,taskCheckboxes:$,setTaskCheckboxes:C,handleSelectedTasks:f};return a.useEffect(()=>{C([...r])},[r]),e.jsx(fe.Provider,{value:u,children:e.jsx(is,{})})},ds="_Prompt_Box_1ice6_1",fs="_Close_Button_1ice6_43",us="_colorPicker_1ice6_125",hs="_Hide_BG_Color_Prompt_1ice6_157",ps="_Hide_Color_Prompt_1ice6_159",ms="_Hide_Border_Color_Prompt_1ice6_161",_s="_Hide_Font_Weight_Prompt_1ice6_163",gs="_Hide_Italic_Prompt_1ice6_165",xs="_BG_Color_Prompt_1ice6_173",ks="_Color_Prompt_1ice6_175",js="_Border_Color_Prompt_1ice6_177",Cs="_Font_Weight_Prompt_1ice6_179",Ts="_Italic_Prompt_1ice6_181",Ns="_topOptionsWrapper_1ice6_189",Ps="_topOptionsBox_1ice6_209",Ss="_notWorking_1ice6_347",n={Prompt_Box:ds,Close_Button:fs,colorPicker:us,Hide_BG_Color_Prompt:hs,Hide_Color_Prompt:ps,Hide_Border_Color_Prompt:ms,Hide_Font_Weight_Prompt:_s,Hide_Italic_Prompt:gs,BG_Color_Prompt:xs,Color_Prompt:ks,Border_Color_Prompt:js,Font_Weight_Prompt:Cs,Italic_Prompt:Ts,topOptionsWrapper:Ns,topOptionsBox:Ps,notWorking:Ss},ys=()=>{var I;const{tasks:o,setTasks:_,selectedTasks:r,numberOfChanges:p,setNumberOfChanges:g,handleMarking:i,filteredTasks:j,searching:c,saveToDataBase:t,setType:s,setWriteTaskPrompt:l,setSortTaskPrompt:f}=a.useContext(D),[$,C]=a.useState(!1),[u,h]=a.useState(!1),[F,b]=a.useState(!1),[T,H]=a.useState(!1),[re,A]=a.useState(!1);function O(m,W,X,R,E,G){if(r.length>=1){let z=[],V=o,k=j,J=[];m=="finished"?s("Finished"):m=="pending"&&s("Pending");for(let U in r)if(c)for(let N in k)k[N].id==r[U].id?(k[N].lastUpdate={fullDate:new Date,time:Date.now()},m!=!1?(k[r[U].index].type=m,J.push(k[r[U].index])):((k[N].style=="default"||k[N].style==null)&&(k[N].style={color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}),W&&(k[N].style.color=W,J.push(k[N])),X&&(k[N].style.backgroundColor=X,J.push(k[N])),R&&(k[N].style.fontWeight=R,J.push(k[N])),E&&(k[N].style.fontStyle=E,J.push(k[N])),G&&(k[N].style.borderColor=G,J.push(k[N])))):J.push(k[r[U].index]);for(let U in r)V=V.map(N=>{if(r[U].id==N.id){let P={...N};return P.style=P.style==="default"?{color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}:{...P.style},P.isChecked&&(z.push(P),P.lastUpdate={fullDate:new Date,time:Date.now()}),m!==!1&&(P.type=m),W&&(P.style={...P.style,color:W}),X&&(P.style={...P.style,backgroundColor:X}),R&&(P.style={...P.style,fontWeight:R}),E&&(P.style={...P.style,fontStyle:E}),G&&(P.style={...P.style,borderColor:G}),P.isChecked=!0,P}else return{...N}});c?i([...k],[...V],[...z]):i(k,[...V],[...z])}}function ae(){let m=p+1,W=JSON.parse(localStorage.getItem("Changes"));W=W[m],_([...W]),g(m),console.log(JSON.parse(localStorage.getItem("Changes")))}function oe(){let m=p-1,W=JSON.parse(localStorage.getItem("Changes"));W=W[m],_([...W]),g(m),console.log(JSON.parse(localStorage.getItem("Changes")))}const Q=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:$?`${n.BG_Color_Prompt} ${n.Prompt_Box}`:`${n.Hide_BG_Color_Prompt} ${n.Prompt_Box}`,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${n.Close_Button}`,func:()=>{C(!1)}}),e.jsx("h1",{children:"Change BG Color"}),e.jsxs("label",{htmlFor:"colorPicker",className:n.colorPicker,children:[e.jsx("input",{type:"color",id:"colorPicker",onBlur:m=>{O(!1,!1,m.target.value,!1,!1)}}),e.jsx("span",{children:"Choose BG Color"})]}),e.jsx(d,{content:"Default",func:()=>{O(!1,!1,"#f09c2e",!1,!1)}})]}),e.jsxs("div",{className:u?`${n.Color_Prompt} ${n.Prompt_Box}`:`${n.Hide_Color_Prompt} ${n.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Font Color"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${n.Close_Button}`,func:()=>{h(!1)}}),e.jsxs("label",{htmlFor:"bgColorPicker",className:`${n.bgColorPicker} ${n.colorPicker}`,children:[e.jsx("input",{type:"color",id:"bgColorPicker",onBlur:m=>{O(!1,m.target.value,!1,!1,!1)}}),e.jsx("span",{children:"Choose Font Color"})]}),e.jsx(d,{content:"Default",func:()=>{O(!1,"white",!1,!1,!1)}})]}),e.jsxs("div",{className:F?`${n.Border_Color_Prompt} ${n.Prompt_Box}`:`${n.Hide_Border_Color_Prompt} ${n.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Border Color"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${n.Close_Button}`,func:()=>{b(!1)}}),e.jsxs("label",{htmlFor:"borderColorPicker",className:`${n.borderColorPicker} ${n.colorPicker}`,children:[e.jsx("input",{type:"color",id:"borderColorPicker",onBlur:m=>{O(!1,!1,!1,!1,!1,m.target.value)}}),e.jsx("span",{children:"Choose Border Color"})]}),e.jsx(d,{content:"Default",func:()=>{O(!1,!1,!1,!1,!1,"#d16c06")}})]}),e.jsxs("div",{className:T?`${n.Font_Weight_Prompt} ${n.Prompt_Box}`:`${n.Hide_Font_Weight_Prompt} ${n.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Font Weight"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${n.Close_Button}`,func:()=>{H(!1)}}),e.jsx(d,{content:"Normal",func:()=>{O(!1,!1,!1,"Normal",!1,!1)}}),e.jsx(d,{content:"Bold",func:()=>{O(!1,!1,!1,"Bold",!1,!1)}}),e.jsx(d,{content:"Bolder",func:()=>{O(!1,!1,!1,"Bolder",!1,!1)}})]}),e.jsxs("div",{className:re?`${n.Italic_Prompt} ${n.Prompt_Box}`:`${n.Hide_Italic_Prompt} ${n.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Italization"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${n.Close_Button}`,func:()=>{A(!1)}}),e.jsx(d,{content:"Normal",func:()=>{O(!1,!1,!1,!1,"Normal",!1)}}),e.jsx(d,{content:"Italic",func:()=>{O(!1,!1,!1,!1,"Italic",!1)}})]})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:n.topOptionsWrapper,children:[e.jsx(Q,{}),e.jsxs("div",{className:n.topOptionsBox,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-save"}),content:"Save Changes",className:p==null?`${n.notWorking}`:null,func:()=>{p!=null&&t()}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"undo"}),content:"Undo",className:p==null||p==0?`${n.notWorking}`:null,func:()=>{p>0&&oe()}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"redo"}),content:"Redo",className:p<((I=JSON.parse(localStorage.getItem("Changes")))==null?void 0:I.length)-1&&p!=null?null:`${n.notWorking}`,func:()=>{var m;p<((m=JSON.parse(localStorage.getItem("Changes")))==null?void 0:m.length)-1&&p!=null&&ae()}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-plus"}),content:e.jsx("span",{children:" Create New Task"}),func:()=>{l(!0)}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-edit"}),content:e.jsx("span",{children:" Mark As Finished"}),className:r.length!=0?n.working:n.notWorking,func:()=>{O("finished","white","#51af0f",!1,!1,"rgb(8, 97, 20)")}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-edit"}),content:e.jsx("span",{children:" Mark As Pending"}),className:r.length!=0?n.working:n.notWorking,func:()=>{O("pending","white","#f09c2e",!1,!1,"rgb(209, 108, 6)")}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-sort"}),content:e.jsx("span",{children:" Sort"}),func:()=>{f(!0)}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"format_color_fill"}),content:e.jsx("span",{children:" BG Color "}),className:r.length!=0?n.working:n.notWorking,func:()=>{C(!0),h(!1),b(!1),H(!1),A(!1)}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"format_color_text"}),content:e.jsx("span",{children:" Font Color"}),className:r.length!=0?n.working:n.notWorking,func:()=>{h(!0),C(!1),b(!1),H(!1,A(!1))}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"border_color"}),content:e.jsx("span",{children:" Border Color"}),className:r.length!=0?n.working:n.notWorking,func:()=>{b(!0),C(!1),h(!1),H(!1),A(!1)}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-bold"}),content:" Bold",className:r.length!=0?n.working:n.notWorking,func:()=>{b(!1),C(!1),h(!1),H(!0),A(!1)}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-italic"}),content:" Italic",className:r.length!=0?n.working:n.notWorking,func:()=>{b(!1),C(!1),h(!1),H(!1),A(!0)}})]})]})})},Bs="_writeTaskPrompt_cl8qy_1",bs="_hideWriteTaskPrompt_cl8qy_1",vs="_nav_cl8qy_45",Os="_content_cl8qy_115",Ws="_submitButton_cl8qy_161",te={writeTaskPrompt:Bs,hideWriteTaskPrompt:bs,nav:vs,content:Os,submitButton:Ws},$s=({setWriteTaskPrompt:o})=>{const{writeTaskPrompt:_,writeTask:r,setShowNavbar:p}=a.useContext(D),g=a.useRef(null),i=a.useRef(null),[j,c]=a.useState(!1);function t(){c(Math.random()*1)}function s(){r(i.current.innerText)}function l(){i.current.innerHTML="<br>",f()}function f(){i.current.innerText==`
`||i.current.innerHTML=="<br>"?g.current.style.display="block":g.current.style.display="none"}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:_?te.writeTaskPrompt:te.hideWriteTaskPrompt,children:[e.jsxs("div",{className:te.nav,children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit"})," ",e.jsx("span",{children:"Task Prompt"})]}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-times"}),func:()=>{o(!1),l()}})]}),e.jsxs("div",{className:te.content,children:[e.jsx("span",{ref:g,children:"Type Any Task..."}),e.jsx("p",{ref:i,contentEditable:"true",onInput:()=>{t(),f()}})]}),e.jsx(d,{content:"Submit",className:te.submitButton,func:()=>{s(),l(),o(!1)}})]})})},Fs="_tasksWrapper_8kb66_13",ws="_tasksEditor_8kb66_33",Is="_searchWrapper_8kb66_103",ne={tasksWrapper:Fs,tasksEditor:ws,searchWrapper:Is},D=a.createContext(),Es=()=>{const{user:o,setHideNavBar:_,setHideSideBar:r,setPages:p,setLoading:g}=a.useContext(Ne),i=a.useRef(),[j,c]=a.useState(!1),[t,s]=a.useState(!1),[l,f]=a.useState(!1),[$,C]=a.useState(!1),[u,h]=a.useState(!1),[F,b]=a.useState(!1),[T,H]=a.useState(!1),[re,A]=a.useState(!1),[O,ae]=a.useState("Pending"),[oe,Q]=a.useState(null),[I,m]=a.useState([]),[W,X]=a.useState(I.length!=0?[...I]:[]),[R,E]=a.useState([]),[G,z]=a.useState([]),[V,k]=a.useState([]),[J,U]=a.useState({}),[N,P]=a.useState([{type:"Pending",ind:!0},{type:"Finished",ind:!1},{type:"All Tasks",ind:!1}]),[Y,pe]=a.useState([{description:"Newest to Oldest",state:!1},{description:"Oldest to Newest",state:!1},{description:"From A-Z",state:!1},{description:"From Z-A",state:!1}]),me=async S=>{var ue;let x=[...I];const y=(ue=o.uid)==null?void 0:ue.toString(),v=ce(de,"Users",y);let L="qwertyuiopasdfghjklzxcvbnm",Z="";for(let le=0;le<10;le++){let Te=Math.floor(Math.random()*L.length);Z=Z.concat(L[Te])}let K={id:Z,task:S,dateCreated:{fullDate:new Date,time:Date.now()},selected:!1,style:"default",cName:[JSON.stringify(B.col),JSON.stringify(B.br),JSON.stringify(B.fs),JSON.stringify(B.bgC),JSON.stringify(B.fW)],isChecked:!1,type:"pending"};x.unshift(K);try{await he(v,{tasks:Se(K)}),c(!1),m([...x])}catch(le){console.log("Error writing task:",le)}},_e=()=>{let S=I,x=R;u?(x=x.map(y=>({...y,isChecked:!1})),ie(null)):(S=S.map(y=>({...y,isChecked:!1})),ie(null)),m(y=>y.map(v=>({...v,isChecked:!1}))),u&&E([...x])};function ie(S){z(S==null?[]:[...S])}function ge(S,x,y){const v=JSON.parse(localStorage.getItem("Changes"))!=null?JSON.parse(localStorage.getItem("Changes")):[];v.length==0&&v.push(I),v.length>=1&&v.push(x),localStorage.setItem("Changes",JSON.stringify(v)),Q(v.length-1);let L=[],Z=[];for(let K in x)x[K].isChecked?L.push(x[K]):Z.push(x[K]);G.length>=1&&(u&&E([...S]),m([...L,...Z]))}function xe(){i.current.value==""?(h(!1),E(null)):(h(!0),E(I.filter(S=>S.task.toLowerCase().includes(i.current.value.toLowerCase()))),console.log(I.filter(S=>S.task.toLowerCase().includes(i.current.value.toLowerCase()))),b(!1))}function ke(){let S=Y;for(let x=0;x<Y.length;x++)if(S[x].state==!0){b(!0);break}else x==Y.length-1&&Y[x].state==!1&&b(!1)}async function je(){const S=o==null?void 0:o.uid.toString(),x=ce(de,`Users/${S}`);g(!0);let y=JSON.parse(localStorage.getItem("Changes"));y=[...y[oe]],y=y.map(v=>({...v,isChecked:!1}));try{await he(x,{tasks:y}),Q(null),m([...y]),localStorage.removeItem("Changes")}catch(v){alert(v.message)}g(!1)}a.useEffect(()=>{p(x=>x.map(y=>y.name==="Tasks"?{...y,ind:!0}:{...y})),(async()=>{try{const x=ce(de,"Users",o==null?void 0:o.uid);let v=(await Pe(x)).data().tasks;for(let L in v)v[L].cName=[JSON.stringify(B.col),JSON.stringify(B.br),JSON.stringify(B.fs),JSON.stringify(B.bgC),JSON.stringify(B.fW)];m([...v])}catch(x){console.log(x)}})()},[o]);const Ce={writeTaskPrompt:j,setWriteTaskPrompt:c,editTaskPrompt:t,setEditTaskPrompt:s,sortTaskPrompt:l,setSortTaskPrompt:f,sortingTypeBar:$,setSortingTypeBar:C,type:O,setType:ae,searching:u,setSearching:h,sorting:F,setSorting:b,selecting:T,setSelecting:H,editing:re,setEditing:A,numberOfChanges:oe,setNumberOfChanges:Q,tasks:I,setTasks:m,filteredTasks:R,setFilteredTasks:E,selectedTasks:G,setSelectedTasks:z,changes:V,setChanges:k,sortingTypes:N,setSortingTypes:P,type:O,setType:ae,sortOptions:Y,setSortOptions:pe,openedTask:J,setOpenedTask:U,unselectAll:_e,handleSelectedTasks:ie,handleMarking:ge,saveToDataBase:je,writeTask:S=>me(S)};return e.jsx(e.Fragment,{children:e.jsx(D.Provider,{value:Ce,children:e.jsx("div",{className:ne.tasksWrapper,children:e.jsxs("div",{className:ne.tasksEditor,children:[e.jsxs("h2",{className:ne.titleWrapper,children:["Tasks",e.jsx("i",{className:"fa fa-bars",onClick:()=>{C(!$)}}),e.jsx(Me,{})]}),e.jsx(ys,{}),e.jsx("div",{className:ne.searchWrapper,children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"searchBar",children:e.jsx("i",{className:"fa fa-search"})}),e.jsx("input",{id:"search-bar",type:"text",ref:i,placeholder:"Type Task...",onChange:()=>{xe(),ke()}}),e.jsx(d,{content:"Search",className:ne.Search_button})]})}),e.jsx(We,{}),e.jsx(cs,{}),e.jsx($s,{setWriteTaskPrompt:c}),e.jsx(Ee,{}),e.jsx(Qe,{})]})})})})};export{Es as default,D as tasksContext};
