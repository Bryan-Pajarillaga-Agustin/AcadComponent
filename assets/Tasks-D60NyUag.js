import{r as n,j as e,B as c,c as Ce,d as ie,a as ce,g as Ne,u as he,b as Pe}from"./index-Pmddd25O.js";const ye="_bottomOptionsWrapper_9abog_1",Se="_left_9abog_71",Be="_uncheck_9abog_71",be="_right_9abog_89",ve="_fullContent_9abog_143",D={bottomOptionsWrapper:ye,left:Se,uncheck:Be,right:be,fullContent:ve},Oe=()=>{const{handleSelectedTasks:a,selectedTasks:_,unselectAll:o,tasks:p,searching:f,setTasks:k,filteredTasks:g,setFilteredTasks:h,handleMarking:i,selecting:l,setSelecting:d,tasksOnType:s,setTasksOnType:r}=n.useContext(A),m=()=>{let W=s,B=g,E=[],F=[];if(f){B=B.map(P=>({...P,isChecked:!0}));for(let P=0;P<B.length;P++)B[P].isChecked&&F.push({id:B[P].id,index:P});a([...F])}else{W=W.map(P=>({...P,isChecked:!0}));for(let P=0;P<W.length;P++)W[P].isChecked&&E.push({id:W[P].id,index:P});a([...E])}f?h([...B]):r(P=>P.map(q=>({...q,isChecked:!0})))};function u(){let W=p,B=g;for(let E in B)for(let F in _)B[E].id===_[F].id&&B.splice(E,1);for(let E in p)for(let F in _)W[E].id===_[F].id&&W.splice(E,1);i(B,[...W]),a(null)}const S=()=>{if(l==!0)return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:D.left,children:[e.jsx(c,{element:e.jsx("span",{className:D.fullContent,children:"Select All"}),icon:e.jsx("i",{className:"fa fa-check"}),className:D.SelectAllButton,func:()=>{m()}}),e.jsx(c,{element:e.jsx("span",{className:D.fullContent,children:"Unselect"}),icon:e.jsx("i",{className:`fas fa fa-check ${D.uncheck}`}),className:D.UnselectAllButton,func:()=>{o()}})]}),e.jsxs("div",{className:D.right,children:[e.jsx(c,{icon:e.jsx("i",{className:"fa fa-trash"}),element:e.jsx("span",{className:D.fullContent,children:"Delete"}),func:()=>{_?u():console.log("No update")}}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-close"}),element:e.jsx("span",{className:D.fullContent,children:"Cancel"}),func:()=>{d(!1),o()}})]})]})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:D.bottomOptionsWrapper,children:l?e.jsx(S,{}):e.jsx(c,{element:e.jsx("span",{className:D.fullContent,children:"Select"}),icon:e.jsx("i",{className:"fa fa-hand-o-up"}),className:D.SelectButton,func:()=>d(!0)})})})},We="_editTaskPrompt_1qqsx_1",$e="_hideEditTaskPrompt_1qqsx_19",Fe="_nav_1qqsx_57",we="_content_1qqsx_127",Ie="_submitButton_1qqsx_173",se={editTaskPrompt:We,hideEditTaskPrompt:$e,nav:Fe,content:we,submitButton:Ie},Ee=()=>{const{openedTask:a,setOpenedTask:_,tasks:o,filteredTasks:p,setEditing:f,editing:k,handleMarking:g}=n.useContext(A),h=n.useRef(null);function i(){let l=[...o],d=p;for(let s in l)l[s].id===a.id&&(l[s].task=h.current.innerText);for(let s in d)d[s].id===a.id&&(d[s].task=h.current.innerText);g(d,[...l])}if((a==null?void 0:a.id)!=null)return e.jsxs("div",{className:k?se.editTaskPrompt:se.hideEditTaskPrompt,children:[e.jsxs("div",{className:se.nav,children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit"})," ",e.jsx("span",{children:"Edit Task"})]}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-times"}),func:()=>{_({index:null,isOpened:!1}),f(!1)}})]}),e.jsx("div",{className:se.content,children:e.jsx("p",{ref:h,contentEditable:k,children:o.map((l,d)=>{if(l.id===a.id)return l.task})})}),e.jsx(c,{content:"Save Changes",className:se.submitButton,func:()=>{i(),f(!1)}})]})},He="_sortTypeBar_1i2uf_1",De="_hideSortTypeBar_1i2uf_1",Je="_sortTypeBarBox_1i2uf_27",qe="_notIndicated_1i2uf_63",Ae="_indicated_1i2uf_73",te={sortTypeBar:He,hideSortTypeBar:De,sortTypeBarBox:Je,notIndicated:qe,indicated:Ae},Ue=()=>{const{sortingTypeBar:a,setSortingTypeBar:_,sortingTypes:o,setSortingTypes:p,unselectAll:f,setType:k,type:g,setTasksOnType:h,tasks:i}=n.useContext(A);return n.useEffect(()=>{p(d=>d.map(s=>g==s.type?{...s,ind:!0}:{...s,ind:!1})),console.log(g);let l=[];if(g=="Pending"||g=="Finished"){for(let d in i)i[d].type.toLowerCase()==g.toLowerCase()&&l.push(i[d]);h([...l])}else h([...i])},[g,i]),e.jsx(e.Fragment,{children:e.jsx("div",{className:a?te.sortTypeBar:te.hideSortTypeBar,onClick:()=>{_(!1)},children:e.jsx("ul",{className:te.sortTypeBarBox,children:o==null?void 0:o.map((l,d)=>e.jsx("li",{className:l.ind?te.indicated:te.notIndicated,onClick:()=>{f(),k(l.type),p(s=>s.map(r=>s[d].type==r.type?{...r,ind:!0}:{...r,ind:!1}))},children:l.type},l.type))})})})},Me="_sortTaskPrompt_1n6vz_17",Le="_hideSortTaskPrompt_1n6vz_19",Re="_sortBox_1n6vz_51",Ge="_Hide_Sort_Box_Button_1n6vz_75",ze="_sortOptions_1n6vz_105",Ve="_checked_1n6vz_151",Ze="_unchecked_1n6vz_151",R={sortTaskPrompt:Me,hideSortTaskPrompt:Le,sortBox:Re,Hide_Sort_Box_Button:Ge,sortOptions:ze,checked:Ve,unchecked:Ze},Ke=()=>{const{setSortTaskPrompt:a,sortTaskPrompt:_,sortingTypes:o,setSortingTypes:p,setSorting:f,sortOptions:k,setSortOptions:g}=n.useContext(A);function h(i){let l=k;l=l.map((d,s)=>l[s]===l[i]?{...d,state:!d.state}:{...d,state:!1});for(let d in l){if(l[d].state==!0){f(!0);break}d==l.length-1&&!l[d].state&&f(!1)}console.log(l),g([...l])}return e.jsx("div",{className:_?R.sortTaskPrompt:R.hideSortTaskPrompt,children:e.jsxs("div",{className:_?R.sortBox:R.Hide_Sort_Box,children:[e.jsx("h2",{children:"Sort Settings"}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-close"}),className:R.Hide_Sort_Box_Button,func:()=>{a(!1)}}),e.jsx("div",{className:R.sortOptions,children:k==null?void 0:k.map((i,l)=>e.jsx(c,{icon:e.jsx("i",{className:`fa fa-check-square ${i.state==!0?R.checked:R.unchecked}`}),content:i.description,func:()=>{h(l)}},i.description))})]})})},Qe="_tasksContainer_gj5si_1",Xe="_tasks_gj5si_1",Ye="_Finished_gj5si_73",es="_unchecked_gj5si_115",ss="_checked_gj5si_123",ts="_col_gj5si_131",ns="_br_gj5si_139",as="_fs_gj5si_147",os="_bgC_gj5si_155",ls="_fW_gj5si_163",v={tasksContainer:Qe,tasks:Xe,Finished:Ye,unchecked:es,checked:ss,col:ts,br:ns,fs:as,bgC:os,fW:ls},J=({task:a,i:_})=>{const{selecting:o,searching:p,tasks:f,setTasks:k,setFilteredTasks:g,handleSelectedTasks:h}=n.useContext(de),{setOpenedTask:i,setEditing:l}=n.useContext(A);function d(s){let r=[],m=f;m=m.map(u=>u.id===s?{...u,isChecked:!u.isChecked}:{...u});for(let u=0;u<m.length;u++)m[u].isChecked&&r.push({id:m[u].id,index:u}),u==m.length-1&&(h(r),console.log(r));k(u=>u.map(S=>S.id===s?{...S,isChecked:!S.isChecked}:{...S})),p&&g(u=>u.map(S=>S.id===s?{...S,isChecked:!S.isChecked}:{...S}))}return e.jsxs("label",{htmlFor:"task"+a.id,style:a.style!="default"?{...a.style}:null,className:a.type=="pending"?`${v.Pending} ${a.cName.map(s=>JSON.parse(s)).join(" ")} ${v.tasks}`:`${v.Finished} ${a.cName.map(s=>JSON.parse(s)).join(" ")} ${v.tasks}`,onDoubleClick:()=>{l(!0),i({id:a.id,isOpened:!0})},children:[e.jsx("i",{style:o==!1?{display:"none"}:{display:"block"},className:`fa fa-check-square ${a.isChecked===!0?v.checked:v.unchecked}`}),e.jsx("input",{style:{display:"none"},type:"checkbox",id:"task"+a.id,onChange:()=>{o&&d(a.id)}}),e.jsx("span",{children:a.task})]},a.id)},rs=()=>{const{tasks:a,sortOptions:_,searching:o,filteredTasks:p,tasksOnType:f,setTasksOnType:k}=n.useContext(A),{sorting:g,type:h,selecting:i}=n.useContext(de),[l,d]=n.useState([]);if(n.useEffect(()=>{let s=o?p:f;for(let r in _)r==0&&_[r].state==!0?s=s.sort((m,u)=>u.dateCreated.time-m.dateCreated.time):r==1&&_[r].state==!0?s=s.sort((m,u)=>m.dateCreated.time-u.dateCreated.time):r==2&&_[r].state==!0?s=s.sort((m,u)=>m.task.localeCompare(u.task)):r==3&&_[r].state==!0&&(s=s.sort((m,u)=>u.task.localeCompare(m.task)));d([...s])},[_,f,p]),o&&g)return console.log("searching && filteredTask"),e.jsx("div",{className:v.tasksContainer,children:l.map((s,r)=>{if(s.type==="pending"&&h==="Pending")return e.jsx(J,{task:s,i:r,selecting:i,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&h==="Finished")return e.jsx(J,{task:s,i:r,selecting:i,chechTask:()=>checkTask()},s.id);if(h==="All Tasks")return e.jsx(J,{task:s,i:r,selecting:i,chechTask:()=>checkTask()},s.id)})},"Task_Container");if(o&&!g)return e.jsx("div",{className:v.tasksContainer,children:p.map((s,r)=>{if(s.type==="pending"&&h==="Pending")return e.jsx(J,{task:s,i:r,selecting:i,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&h==="Finished")return e.jsx(J,{task:s,i:r,selecting:i,chechTask:()=>checkTask()},s.id);if(h==="All Tasks")return e.jsx(J,{task:s,i:r,selecting:i,chechTask:()=>checkTask()},s.id)})},"Task_Container");if(g&&!o)return e.jsx("div",{className:v.tasksContainer,children:l.map((s,r)=>{if(s.type==="pending"&&h==="Pending")return e.jsx(J,{task:s,i:r,selecting:i,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&h==="Finished")return e.jsx(J,{task:s,i:r,selecting:i,chechTask:()=>checkTask()},s.id);if(h==="All Tasks")return e.jsx(J,{task:s,i:r,selecting:i,chechTask:()=>checkTask()},s.id)})});if(!g&&!o)return console.log("!sorting && !searching"),e.jsx("div",{className:v.tasksContainer,children:f==null?void 0:f.map((s,r)=>{if(s.type==="pending"&&h==="Pending")return e.jsx(J,{task:s,i:r,selecting:i,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&h==="Finished")return e.jsx(J,{task:s,i:r,selecting:i,chechTask:()=>checkTask()},s.id);if(h==="All Tasks")return e.jsx(J,{task:s,i:r,selecting:i,chechTask:()=>checkTask()},s.id)})})},de=n.createContext(),is=()=>{const{searching:a,setSearching:_,tasks:o,setTasks:p,filteredTasks:f,setFilteredTasks:k,sorting:g,setSorting:h,type:i,selecting:l,setSelecting:d,handleSelectedTasks:s}=n.useContext(A),[r,m]=n.useState(o.length!=0?[...o]:[]),u={searching:a,setSearching:_,tasks:o,setTasks:p,filteredTasks:f,setFilteredTasks:k,sorting:g,setSorting:h,type:i,selecting:l,setSelecting:d,taskCheckboxes:r,setTaskCheckboxes:m,handleSelectedTasks:s};return n.useEffect(()=>{m([...o])},[o]),e.jsx(de.Provider,{value:u,children:e.jsx(rs,{})})},cs="_Prompt_Box_1ice6_1",ds="_Close_Button_1ice6_43",fs="_colorPicker_1ice6_125",us="_Hide_BG_Color_Prompt_1ice6_157",hs="_Hide_Color_Prompt_1ice6_159",ps="_Hide_Border_Color_Prompt_1ice6_161",ms="_Hide_Font_Weight_Prompt_1ice6_163",_s="_Hide_Italic_Prompt_1ice6_165",gs="_BG_Color_Prompt_1ice6_173",ks="_Color_Prompt_1ice6_175",xs="_Border_Color_Prompt_1ice6_177",js="_Font_Weight_Prompt_1ice6_179",Ts="_Italic_Prompt_1ice6_181",Cs="_topOptionsWrapper_1ice6_189",Ns="_topOptionsBox_1ice6_209",Ps="_notWorking_1ice6_347",t={Prompt_Box:cs,Close_Button:ds,colorPicker:fs,Hide_BG_Color_Prompt:us,Hide_Color_Prompt:hs,Hide_Border_Color_Prompt:ps,Hide_Font_Weight_Prompt:ms,Hide_Italic_Prompt:_s,BG_Color_Prompt:gs,Color_Prompt:ks,Border_Color_Prompt:xs,Font_Weight_Prompt:js,Italic_Prompt:Ts,topOptionsWrapper:Cs,topOptionsBox:Ns,notWorking:Ps},ys=()=>{var U;const{tasks:a,setTasks:_,selectedTasks:o,numberOfChanges:p,setNumberOfChanges:f,handleMarking:k,filteredTasks:g,searching:h,saveToDataBase:i,setType:l,setWriteTaskPrompt:d,setSortTaskPrompt:s}=n.useContext(A),[r,m]=n.useState(!1),[u,S]=n.useState(!1),[W,B]=n.useState(!1),[E,F]=n.useState(!1),[P,q]=n.useState(!1);function $(C,w,G,H,z,V){if(o.length>=1){let ee=[],K=a,N=g,M=[];C=="finished"?l("Finished"):C=="pending"&&l("Pending");for(let L in o)if(h)for(let y in N)N[y].id==o[L].id?(N[y].lastUpdate={fullDate:new Date,time:Date.now()},C!=!1?(N[o[L].index].type=C,M.push(N[o[L].index])):((N[y].style=="default"||N[y].style==null)&&(N[y].style={color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}),w&&(N[y].style.color=w,M.push(N[y])),G&&(N[y].style.backgroundColor=G,M.push(N[y])),H&&(N[y].style.fontWeight=H,M.push(N[y])),z&&(N[y].style.fontStyle=z,M.push(N[y])),V&&(N[y].style.borderColor=V,M.push(N[y])))):M.push(N[o[L].index]);for(let L in o)K=K.map(y=>{if(o[L].id==y.id){let j={...y};return j.style=j.style==="default"?{color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}:{...j.style},j.isChecked&&(ee.push(j),j.lastUpdate={fullDate:new Date,time:Date.now()}),C!==!1&&(j.type=C),w&&(j.style={...j.style,color:w}),G&&(j.style={...j.style,backgroundColor:G}),H&&(j.style={...j.style,fontWeight:H}),z&&(j.style={...j.style,fontStyle:z}),V&&(j.style={...j.style,borderColor:V}),j.isChecked=!0,j}else return{...y}});h?k([...N],[...K],[...ee]):k(N,[...K],[...ee])}}function oe(){let C=p+1,w=JSON.parse(localStorage.getItem("Changes"));w=w[C],_([...w]),f(C),console.log(JSON.parse(localStorage.getItem("Changes")))}function Y(){let C=p-1,w=JSON.parse(localStorage.getItem("Changes"));w=w[C],_([...w]),f(C),console.log(JSON.parse(localStorage.getItem("Changes")))}const I=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:r?`${t.BG_Color_Prompt} ${t.Prompt_Box}`:`${t.Hide_BG_Color_Prompt} ${t.Prompt_Box}`,children:[e.jsx(c,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${t.Close_Button}`,func:()=>{m(!1)}}),e.jsx("h1",{children:"Change BG Color"}),e.jsxs("label",{htmlFor:"colorPicker",className:t.colorPicker,children:[e.jsx("input",{type:"color",id:"colorPicker",onBlur:C=>{$(!1,!1,C.target.value,!1,!1)}}),e.jsx("span",{children:"Choose BG Color"})]}),e.jsx(c,{content:"Default",func:()=>{$(!1,!1,"#f09c2e",!1,!1)}})]}),e.jsxs("div",{className:u?`${t.Color_Prompt} ${t.Prompt_Box}`:`${t.Hide_Color_Prompt} ${t.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Font Color"}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${t.Close_Button}`,func:()=>{S(!1)}}),e.jsxs("label",{htmlFor:"bgColorPicker",className:`${t.bgColorPicker} ${t.colorPicker}`,children:[e.jsx("input",{type:"color",id:"bgColorPicker",onBlur:C=>{$(!1,C.target.value,!1,!1,!1)}}),e.jsx("span",{children:"Choose Font Color"})]}),e.jsx(c,{content:"Default",func:()=>{$(!1,"white",!1,!1,!1)}})]}),e.jsxs("div",{className:W?`${t.Border_Color_Prompt} ${t.Prompt_Box}`:`${t.Hide_Border_Color_Prompt} ${t.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Border Color"}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${t.Close_Button}`,func:()=>{B(!1)}}),e.jsxs("label",{htmlFor:"borderColorPicker",className:`${t.borderColorPicker} ${t.colorPicker}`,children:[e.jsx("input",{type:"color",id:"borderColorPicker",onBlur:C=>{$(!1,!1,!1,!1,!1,C.target.value)}}),e.jsx("span",{children:"Choose Border Color"})]}),e.jsx(c,{content:"Default",func:()=>{$(!1,!1,!1,!1,!1,"#d16c06")}})]}),e.jsxs("div",{className:E?`${t.Font_Weight_Prompt} ${t.Prompt_Box}`:`${t.Hide_Font_Weight_Prompt} ${t.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Font Weight"}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${t.Close_Button}`,func:()=>{F(!1)}}),e.jsx(c,{content:"Normal",func:()=>{$(!1,!1,!1,"Normal",!1,!1)}}),e.jsx(c,{content:"Bold",func:()=>{$(!1,!1,!1,"Bold",!1,!1)}}),e.jsx(c,{content:"Bolder",func:()=>{$(!1,!1,!1,"Bolder",!1,!1)}})]}),e.jsxs("div",{className:P?`${t.Italic_Prompt} ${t.Prompt_Box}`:`${t.Hide_Italic_Prompt} ${t.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Italization"}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${t.Close_Button}`,func:()=>{q(!1)}}),e.jsx(c,{content:"Normal",func:()=>{$(!1,!1,!1,!1,"Normal",!1)}}),e.jsx(c,{content:"Italic",func:()=>{$(!1,!1,!1,!1,"Italic",!1)}})]})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.topOptionsWrapper,children:[e.jsx(I,{}),e.jsxs("div",{className:t.topOptionsBox,children:[e.jsx(c,{icon:e.jsx("i",{className:"fa fa-save"}),content:"Save Changes",className:p==null?`${t.notWorking}`:null,func:()=>{p!=null&&i()}}),e.jsx(c,{icon:e.jsx("i",{className:"material-icons",children:"undo"}),content:"Undo",className:p==null||p==0?`${t.notWorking}`:null,func:()=>{p>0&&Y()}}),e.jsx(c,{icon:e.jsx("i",{className:"material-icons",children:"redo"}),content:"Redo",className:p<((U=JSON.parse(localStorage.getItem("Changes")))==null?void 0:U.length)-1&&p!=null?null:`${t.notWorking}`,func:()=>{var C;p<((C=JSON.parse(localStorage.getItem("Changes")))==null?void 0:C.length)-1&&p!=null&&oe()}}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-plus"}),content:e.jsx("span",{children:" Create New Task"}),func:()=>{d(!0)}}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-edit"}),content:e.jsx("span",{children:" Mark As Finished"}),className:o.length!=0?t.working:t.notWorking,func:()=>{$("finished","white","#51af0f",!1,!1,"rgb(8, 97, 20)")}}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-edit"}),content:e.jsx("span",{children:" Mark As Pending"}),className:o.length!=0?t.working:t.notWorking,func:()=>{$("pending","white","#f09c2e",!1,!1,"rgb(209, 108, 6)")}}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-sort"}),content:e.jsx("span",{children:" Sort"}),func:()=>{s(!0)}}),e.jsx(c,{icon:e.jsx("i",{className:"material-icons",children:"format_color_fill"}),content:e.jsx("span",{children:" BG Color "}),className:o.length!=0?t.working:t.notWorking,func:()=>{m(!0),S(!1),B(!1),F(!1),q(!1)}}),e.jsx(c,{icon:e.jsx("i",{className:"material-icons",children:"format_color_text"}),content:e.jsx("span",{children:" Font Color"}),className:o.length!=0?t.working:t.notWorking,func:()=>{S(!0),m(!1),B(!1),F(!1,q(!1))}}),e.jsx(c,{icon:e.jsx("i",{className:"material-icons",children:"border_color"}),content:e.jsx("span",{children:" Border Color"}),className:o.length!=0?t.working:t.notWorking,func:()=>{B(!0),m(!1),S(!1),F(!1),q(!1)}}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-bold"}),content:" Bold",className:o.length!=0?t.working:t.notWorking,func:()=>{B(!1),m(!1),S(!1),F(!0),q(!1)}}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-italic"}),content:" Italic",className:o.length!=0?t.working:t.notWorking,func:()=>{B(!1),m(!1),S(!1),F(!1),q(!0)}})]})]})})},Ss="_writeTaskPrompt_cl8qy_1",Bs="_hideWriteTaskPrompt_cl8qy_1",bs="_nav_cl8qy_45",vs="_content_cl8qy_115",Os="_submitButton_cl8qy_161",ne={writeTaskPrompt:Ss,hideWriteTaskPrompt:Bs,nav:bs,content:vs,submitButton:Os},Ws=({setWriteTaskPrompt:a})=>{const{writeTaskPrompt:_,writeTask:o,setShowNavbar:p}=n.useContext(A),f=n.useRef(null),k=n.useRef(null),[g,h]=n.useState(!1);function i(){h(Math.random()*1)}function l(){o(k.current.innerText)}function d(){k.current.innerHTML="<br>",s()}function s(){k.current.innerText==`
`||k.current.innerHTML=="<br>"?f.current.style.display="block":f.current.style.display="none"}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:_?ne.writeTaskPrompt:ne.hideWriteTaskPrompt,children:[e.jsxs("div",{className:ne.nav,children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit"})," ",e.jsx("span",{children:"Task Prompt"})]}),e.jsx(c,{icon:e.jsx("i",{className:"fa fa-times"}),func:()=>{a(!1),d()}})]}),e.jsxs("div",{className:ne.content,children:[e.jsx("span",{ref:f,children:"Type Any Task..."}),e.jsx("p",{ref:k,contentEditable:"true",onInput:()=>{i(),s()}})]}),e.jsx(c,{content:"Submit",className:ne.submitButton,func:()=>{l(),d(),a(!1)}})]})})},$s="_tasksWrapper_8kb66_13",Fs="_tasksEditor_8kb66_33",ws="_searchWrapper_8kb66_103",ae={tasksWrapper:$s,tasksEditor:Fs,searchWrapper:ws},A=n.createContext(),Es=()=>{const{user:a,setShowMakeUserSignIn:_,setPages:o,setLoading:p}=n.useContext(Ce),f=n.useRef(),[k,g]=n.useState(!1),[h,i]=n.useState(!1),[l,d]=n.useState(!1),[s,r]=n.useState(!1),[m,u]=n.useState(!1),[S,W]=n.useState(!1),[B,E]=n.useState(!1),[F,P]=n.useState(!1),[q,$]=n.useState("Pending"),[oe,Y]=n.useState(null),[I,U]=n.useState([]),[C,w]=n.useState(I.length!=0?[...I]:[]),[G,H]=n.useState([]),[z,V]=n.useState([]),[ee,K]=n.useState([]),[N,M]=n.useState({}),[L,y]=n.useState([{type:"Pending",ind:!0},{type:"Finished",ind:!1},{type:"All Tasks",ind:!1}]),[j,pe]=n.useState([{description:"Newest to Oldest",state:!1},{description:"Oldest to Newest",state:!1},{description:"From A-Z",state:!1},{description:"From Z-A",state:!1}]),me=async T=>{var ue;let x=[...I];const b=(ue=a.uid)==null?void 0:ue.toString(),O=ie(ce,"Users",b);let Z="qwertyuiopasdfghjklzxcvbnm",Q="";for(let le=0;le<10;le++){let Te=Math.floor(Math.random()*Z.length);Q=Q.concat(Z[Te])}let X={id:Q,task:T,dateCreated:{fullDate:new Date,time:Date.now()},selected:!1,style:"default",cName:[JSON.stringify(v.col),JSON.stringify(v.br),JSON.stringify(v.fs),JSON.stringify(v.bgC),JSON.stringify(v.fW)],isChecked:!1,type:"pending"};x.unshift(X);try{await he(O,{tasks:Pe(X)}),g(!1),U([...x])}catch(le){console.log("Error writing task:",le)}},fe=()=>{let T=I,x=G;m?(x=x.map(b=>({...b,isChecked:!1})),re(null)):(T=T.map(b=>({...b,isChecked:!1})),re(null)),U(b=>b.map(O=>({...O,isChecked:!1}))),m&&H([...x])};function re(T){V(T==null?[]:[...T])}function _e(T,x,b){const O=JSON.parse(localStorage.getItem("Changes"))!=null?JSON.parse(localStorage.getItem("Changes")):[];O.length==0&&O.push(I),O.length>=1&&O.push(x),localStorage.setItem("Changes",JSON.stringify(O)),Y(O.length-1);let Z=[],Q=[];for(let X in x)x[X].isChecked?Z.push(x[X]):Q.push(x[X]);z.length>=1&&(m&&H([...T]),U([...Z,...Q]))}function ge(){f.current.value==""?(u(!1),H(null)):(u(!0),H(I.filter(T=>T.task.toLowerCase().includes(f.current.value.toLowerCase()))),console.log(I.filter(T=>T.task.toLowerCase().includes(f.current.value.toLowerCase()))),W(!1))}function ke(){let T=j;for(let x=0;x<j.length;x++)if(T[x].state==!0){W(!0);break}else x==j.length-1&&j[x].state==!1&&W(!1)}async function xe(){const T=a==null?void 0:a.uid.toString(),x=ie(ce,`Users/${T}`);p(!0);let b=JSON.parse(localStorage.getItem("Changes"));b=[...b[oe]],b=b.map(O=>({...O,isChecked:!1}));try{await he(x,{tasks:b}),Y(null),U([...b]),fe(),localStorage.removeItem("Changes")}catch(O){alert(O.message)}p(!1)}n.useEffect(()=>{a!=null&&a.uid?(_(!1),o(x=>x.map(b=>b.name==="Tasks"?{...b,ind:!0}:{...b})),(async()=>{try{const x=ie(ce,"Users",a==null?void 0:a.uid);let O=(await Ne(x)).data().tasks;for(let Z in O)O[Z].cName=[JSON.stringify(v.col),JSON.stringify(v.br),JSON.stringify(v.fs),JSON.stringify(v.bgC),JSON.stringify(v.fW)];U([...O])}catch(x){console.log(x)}})()):_(!0)},[a]);const je={writeTaskPrompt:k,setWriteTaskPrompt:g,editTaskPrompt:h,setEditTaskPrompt:i,sortTaskPrompt:l,setSortTaskPrompt:d,sortingTypeBar:s,setSortingTypeBar:r,type:q,setType:$,searching:m,setSearching:u,sorting:S,setSorting:W,selecting:B,setSelecting:E,editing:F,setEditing:P,numberOfChanges:oe,setNumberOfChanges:Y,tasks:I,setTasks:U,filteredTasks:G,setFilteredTasks:H,tasksOnType:C,setTasksOnType:w,selectedTasks:z,setSelectedTasks:V,changes:ee,setChanges:K,sortingTypes:L,setSortingTypes:y,type:q,setType:$,sortOptions:j,setSortOptions:pe,openedTask:N,setOpenedTask:M,unselectAll:fe,handleSelectedTasks:re,handleMarking:_e,saveToDataBase:xe,writeTask:T=>me(T)};return n.useEffect(()=>{f.current.value==""?(u(!1),H(null)):(u(!0),H(I.filter(T=>T.task.toLowerCase().includes(f.current.value.toLowerCase()))),console.log(I.filter(T=>T.task.toLowerCase().includes(f.current.value.toLowerCase()))),W(!1))},[I]),e.jsx(e.Fragment,{children:e.jsx(A.Provider,{value:je,children:e.jsx("div",{className:ae.tasksWrapper,children:e.jsxs("div",{className:ae.tasksEditor,children:[e.jsxs("h2",{className:ae.titleWrapper,children:["Tasks",e.jsx("i",{className:"fa fa-bars",onClick:()=>{r(!s)}}),e.jsx(Ue,{})]}),e.jsx(ys,{}),e.jsx("div",{className:ae.searchWrapper,children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"searchBar",children:e.jsx("i",{className:"fa fa-search"})}),e.jsx("input",{id:"search-bar",type:"text",ref:f,placeholder:"Type Task...",onChange:()=>{ge(),ke()}}),e.jsx(c,{content:"Search",className:ae.Search_button})]})}),e.jsx(Oe,{}),e.jsx(is,{}),e.jsx(Ws,{setWriteTaskPrompt:g}),e.jsx(Ee,{}),e.jsx(Ke,{})]})})})})};export{Es as default,A as tasksContext};
