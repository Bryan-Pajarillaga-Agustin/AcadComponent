import{r as n,j as e,B as d,c as _e,u as Be,d as le,a as re,b as ue,g as ve,e as be}from"./index-DlXNYuRd.js";const Oe="_bottomOptionsWrapper_9abog_1",We="_left_9abog_71",$e="_uncheck_9abog_71",we="_right_9abog_89",Fe="_fullContent_9abog_143",J={bottomOptionsWrapper:Oe,left:We,uncheck:$e,right:we,fullContent:Fe},Ie=()=>{const{handleSelectedTasks:c,selectedTasks:r,unselectAll:a,tasks:h,searching:p,setTasks:m,filteredTasks:x,setFilteredTasks:f,handleMarking:l,selecting:t,setSelecting:u,tasksOnType:s,setTasksOnType:i}=n.useContext(A),g=()=>{let E=s,P=x,$=[],b=[];if(p){P=P.map(S=>({...S,isChecked:!0}));for(let S=0;S<P.length;S++)P[S].isChecked&&b.push({id:P[S].id,index:S});c([...b])}else{E=E.map(S=>({...S,isChecked:!0}));for(let S=0;S<E.length;S++)E[S].isChecked&&$.push({id:E[S].id,index:S});c([...$])}p?f([...P]):i(S=>S.map(H=>({...H,isChecked:!0})))};function _(){let E=h,P=x;for(let $ in P)for(let b in r)P[$].id===r[b].id&&P.splice($,1);for(let $ in h)for(let b in r)E[$].id===r[b].id&&E.splice($,1);l(P,[...E]),c(null)}const T=()=>{if(t==!0)return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:J.left,children:[e.jsx(d,{element:e.jsx("span",{className:J.fullContent,children:"Select All"}),icon:e.jsx("i",{className:"fa fa-check"}),className:J.SelectAllButton,func:()=>{g()}}),e.jsx(d,{element:e.jsx("span",{className:J.fullContent,children:"Unselect"}),icon:e.jsx("i",{className:`fas fa fa-check ${J.uncheck}`}),className:J.UnselectAllButton,func:()=>{a()}})]}),e.jsxs("div",{className:J.right,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-trash"}),element:e.jsx("span",{className:J.fullContent,children:"Delete"}),func:()=>{r?_():console.log("No update")}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),element:e.jsx("span",{className:J.fullContent,children:"Cancel"}),func:()=>{u(!1),a()}})]})]})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:J.bottomOptionsWrapper,children:t?e.jsx(T,{}):e.jsx(d,{element:e.jsx("span",{className:J.fullContent,children:"Select"}),icon:e.jsx("i",{className:"fa fa-hand-o-up"}),className:J.SelectButton,func:()=>u(!0)})})})},Ee="_editTaskPrompt_1qqsx_1",He="_hideEditTaskPrompt_1qqsx_19",De="_nav_1qqsx_57",Je="_content_1qqsx_127",qe="_submitButton_1qqsx_173",ee={editTaskPrompt:Ee,hideEditTaskPrompt:He,nav:De,content:Je,submitButton:qe},Ae=()=>{const{openedTask:c,setOpenedTask:r,tasks:a,filteredTasks:h,setEditing:p,editing:m,handleMarking:x}=n.useContext(A),f=n.useRef(null);function l(){let t=[...a],u=h;for(let s in t)t[s].id===c.id&&(t[s].task=f.current.innerText);for(let s in u)u[s].id===c.id&&(u[s].task=f.current.innerText);x(u,[...t])}if((c==null?void 0:c.id)!=null)return e.jsxs("div",{className:m?ee.editTaskPrompt:ee.hideEditTaskPrompt,children:[e.jsxs("div",{className:ee.nav,children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit"})," ",e.jsx("span",{children:"Edit Task"})]}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-times"}),func:()=>{r({index:null,isOpened:!1}),p(!1)}})]}),e.jsx("div",{className:ee.content,children:e.jsx("p",{ref:f,contentEditable:m,children:a.map((t,u)=>{if(t.id===c.id)return t.task})})}),e.jsx(d,{content:"Save Changes",className:ee.submitButton,func:()=>{l(),p(!1)}})]})},Ue="_sortTypeBar_1i2uf_1",Le="_hideSortTypeBar_1i2uf_1",Me="_sortTypeBarBox_1i2uf_27",Re="_notIndicated_1i2uf_63",Ge="_indicated_1i2uf_73",se={sortTypeBar:Ue,hideSortTypeBar:Le,sortTypeBarBox:Me,notIndicated:Re,indicated:Ge},ze=()=>{const{sortingTypeBar:c,setSortingTypeBar:r,sortingTypes:a,setSortingTypes:h,unselectAll:p,setType:m,type:x,setTasksOnType:f,tasks:l}=n.useContext(A);return n.useEffect(()=>{h(u=>u.map(s=>x==s.type?{...s,ind:!0}:{...s,ind:!1})),console.log(x);let t=[];if(x=="Pending"||x=="Finished"){for(let u in l)l[u].type.toLowerCase()==x.toLowerCase()&&t.push(l[u]);f([...t])}else f([...l])},[x,l]),e.jsx(e.Fragment,{children:e.jsx("div",{className:c?se.sortTypeBar:se.hideSortTypeBar,onClick:()=>{r(!1)},children:e.jsx("ul",{className:se.sortTypeBarBox,children:a==null?void 0:a.map((t,u)=>e.jsx("li",{className:t.ind?se.indicated:se.notIndicated,onClick:()=>{p(),m(t.type),h(s=>s.map(i=>s[u].type==i.type?{...i,ind:!0}:{...i,ind:!1}))},children:t.type},t.type))})})})},Ye="_sortTaskPrompt_1n6vz_17",Ve="_hideSortTaskPrompt_1n6vz_19",Ze="_sortBox_1n6vz_51",Ke="_Hide_Sort_Box_Button_1n6vz_75",Qe="_sortOptions_1n6vz_105",Xe="_checked_1n6vz_151",es="_unchecked_1n6vz_151",R={sortTaskPrompt:Ye,hideSortTaskPrompt:Ve,sortBox:Ze,Hide_Sort_Box_Button:Ke,sortOptions:Qe,checked:Xe,unchecked:es},ss=()=>{const{setSortTaskPrompt:c,sortTaskPrompt:r,sortingTypes:a,setSortingTypes:h,setSorting:p,sortOptions:m,setSortOptions:x}=n.useContext(A);function f(l){let t=m;t=t.map((u,s)=>t[s]===t[l]?{...u,state:!u.state}:{...u,state:!1});for(let u in t){if(t[u].state==!0){p(!0);break}u==t.length-1&&!t[u].state&&p(!1)}console.log(t),x([...t])}return e.jsx("div",{className:r?R.sortTaskPrompt:R.hideSortTaskPrompt,children:e.jsxs("div",{className:r?R.sortBox:R.Hide_Sort_Box,children:[e.jsx("h2",{children:"Sort Settings"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:R.Hide_Sort_Box_Button,func:()=>{c(!1)}}),e.jsx("div",{className:R.sortOptions,children:m==null?void 0:m.map((l,t)=>e.jsx(d,{icon:e.jsx("i",{className:`fa fa-check-square ${l.state==!0?R.checked:R.unchecked}`}),content:l.description,func:()=>{f(t)}},l.description))})]})})},ts="_tasksContainer_gj5si_1",ns="_tasks_gj5si_1",as="_Finished_gj5si_73",os="_unchecked_gj5si_115",ls="_checked_gj5si_123",rs="_col_gj5si_131",is="_br_gj5si_139",cs="_fs_gj5si_147",ds="_bgC_gj5si_155",fs="_fW_gj5si_163",I={tasksContainer:ts,tasks:ns,Finished:as,unchecked:os,checked:ls,col:rs,br:is,fs:cs,bgC:ds,fW:fs},q=({task:c,i:r})=>{const{selecting:a,searching:h,tasks:p,setTasks:m,setFilteredTasks:x,handleSelectedTasks:f}=n.useContext(he),{setOpenedTask:l,setEditing:t}=n.useContext(A);function u(s){let i=[],g=p;g=g.map(_=>_.id===s?{..._,isChecked:!_.isChecked}:{..._});for(let _=0;_<g.length;_++)g[_].isChecked&&i.push({id:g[_].id,index:_}),_==g.length-1&&(f(i),console.log(i));m(_=>_.map(T=>T.id===s?{...T,isChecked:!T.isChecked}:{...T})),h&&x(_=>_.map(T=>T.id===s?{...T,isChecked:!T.isChecked}:{...T}))}return e.jsxs("label",{htmlFor:"task"+c.id,style:c.style!="default"?{...c.style}:null,className:c.type=="pending"?`${I.Pending} ${c.cName.map(s=>JSON.parse(s)).join(" ")} ${I.tasks}`:`${I.Finished} ${c.cName.map(s=>JSON.parse(s)).join(" ")} ${I.tasks}`,onDoubleClick:()=>{t(!0),l({id:c.id,isOpened:!0})},children:[e.jsx("i",{style:a==!1?{display:"none"}:{display:"block"},className:`fa fa-check-square ${c.isChecked===!0?I.checked:I.unchecked}`}),e.jsx("input",{style:{display:"none"},type:"checkbox",id:"task"+c.id,onChange:()=>{a&&u(c.id)}}),e.jsx("span",{children:c.task})]},c.id)},us=()=>{const{tasks:c,sortOptions:r,searching:a,filteredTasks:h,tasksOnType:p,setTasksOnType:m}=n.useContext(A),{sorting:x,type:f,selecting:l}=n.useContext(he),[t,u]=n.useState([]);if(n.useEffect(()=>{let s=a?h:p;for(let i in r)i==0&&r[i].state==!0?s=s.sort((g,_)=>_.dateCreated.time-g.dateCreated.time):i==1&&r[i].state==!0?s=s.sort((g,_)=>g.dateCreated.time-_.dateCreated.time):i==2&&r[i].state==!0?s=s.sort((g,_)=>g.task.localeCompare(_.task)):i==3&&r[i].state==!0&&(s=s.sort((g,_)=>_.task.localeCompare(g.task)));u([...s])},[r,p,h]),a&&x)return e.jsx("div",{className:I.tasksContainer,children:t.map((s,i)=>{if(s.type==="pending"&&f==="Pending")return e.jsx(q,{task:s,i,selecting:l,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&f==="Finished")return e.jsx(q,{task:s,i,selecting:l,chechTask:()=>checkTask()},s.id);if(f==="All Tasks")return e.jsx(q,{task:s,i,selecting:l,chechTask:()=>checkTask()},s.id)})},"Task_Container");if(a&&!x)return e.jsx("div",{className:I.tasksContainer,children:h.map((s,i)=>{if(s.type==="pending"&&f==="Pending")return e.jsx(q,{task:s,i,selecting:l,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&f==="Finished")return e.jsx(q,{task:s,i,selecting:l,chechTask:()=>checkTask()},s.id);if(f==="All Tasks")return e.jsx(q,{task:s,i,selecting:l,chechTask:()=>checkTask()},s.id)})},"Task_Container");if(x&&!a)return e.jsx("div",{className:I.tasksContainer,children:t.map((s,i)=>{if(s.type==="pending"&&f==="Pending")return e.jsx(q,{task:s,i,selecting:l,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&f==="Finished")return e.jsx(q,{task:s,i,selecting:l,chechTask:()=>checkTask()},s.id);if(f==="All Tasks")return e.jsx(q,{task:s,i,selecting:l,chechTask:()=>checkTask()},s.id)})});if(!x&&!a)return e.jsx("div",{className:I.tasksContainer,children:p==null?void 0:p.map((s,i)=>{if(s.type==="pending"&&f==="Pending")return e.jsx(q,{task:s,i,selecting:l,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&f==="Finished")return e.jsx(q,{task:s,i,selecting:l,chechTask:()=>checkTask()},s.id);if(f==="All Tasks")return e.jsx(q,{task:s,i,selecting:l,chechTask:()=>checkTask()},s.id)})})},he=n.createContext(),hs=()=>{const{searching:c,setSearching:r,tasks:a,setTasks:h,filteredTasks:p,setFilteredTasks:m,sorting:x,setSorting:f,type:l,selecting:t,setSelecting:u,handleSelectedTasks:s}=n.useContext(A),[i,g]=n.useState(a.length!=0?[...a]:[]),_={searching:c,setSearching:r,tasks:a,setTasks:h,filteredTasks:p,setFilteredTasks:m,sorting:x,setSorting:f,type:l,selecting:t,setSelecting:u,taskCheckboxes:i,setTaskCheckboxes:g,handleSelectedTasks:s};return n.useEffect(()=>{g([...a])},[a]),e.jsx(he.Provider,{value:_,children:e.jsx(us,{})})},ps="_Prompt_Box_1ice6_1",ms="_Close_Button_1ice6_43",_s="_colorPicker_1ice6_125",gs="_Hide_BG_Color_Prompt_1ice6_157",xs="_Hide_Color_Prompt_1ice6_159",ks="_Hide_Border_Color_Prompt_1ice6_161",js="_Hide_Font_Weight_Prompt_1ice6_163",Cs="_Hide_Italic_Prompt_1ice6_165",Ts="_BG_Color_Prompt_1ice6_173",Ns="_Color_Prompt_1ice6_175",Ps="_Border_Color_Prompt_1ice6_177",Ss="_Font_Weight_Prompt_1ice6_179",ys="_Italic_Prompt_1ice6_181",Bs="_topOptionsWrapper_1ice6_189",vs="_topOptionsBox_1ice6_209",bs="_notWorking_1ice6_347",o={Prompt_Box:ps,Close_Button:ms,colorPicker:_s,Hide_BG_Color_Prompt:gs,Hide_Color_Prompt:xs,Hide_Border_Color_Prompt:ks,Hide_Font_Weight_Prompt:js,Hide_Italic_Prompt:Cs,BG_Color_Prompt:Ts,Color_Prompt:Ns,Border_Color_Prompt:Ps,Font_Weight_Prompt:Ss,Italic_Prompt:ys,topOptionsWrapper:Bs,topOptionsBox:vs,notWorking:bs},Os=()=>{var K;const{tasks:c,setTasks:r,selectedTasks:a,numberOfChanges:h,setNumberOfChanges:p,handleMarking:m,filteredTasks:x,searching:f,saveToDataBase:l,setType:t,setWriteTaskPrompt:u,setSortTaskPrompt:s}=n.useContext(A),[i,g]=n.useState(!1),[_,T]=n.useState(!1),[E,P]=n.useState(!1),[$,b]=n.useState(!1),[S,H]=n.useState(!1);function w(N,F,M,W,D,Y){if(a.length>=1){let Q=[],G=c,k=x,U=[];N=="finished"?t("Finished"):N=="pending"&&t("Pending");for(let L in a)if(f)for(let y in k)k[y].id==a[L].id?(k[y].lastUpdate={fullDate:new Date,time:Date.now()},N!=!1?(k[a[L].index].type=N,U.push(k[a[L].index])):((k[y].style=="default"||k[y].style==null)&&(k[y].style={color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}),F&&(k[y].style.color=F,U.push(k[y])),M&&(k[y].style.backgroundColor=M,U.push(k[y])),W&&(k[y].style.fontWeight=W,U.push(k[y])),D&&(k[y].style.fontStyle=D,U.push(k[y])),Y&&(k[y].style.borderColor=Y,U.push(k[y])))):U.push(k[a[L].index]);for(let L in a)G=G.map(y=>{if(a[L].id==y.id){let B={...y};return B.style=B.style==="default"?{color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}:{...B.style},B.isChecked&&(Q.push(B),B.lastUpdate={fullDate:new Date,time:Date.now()}),N!==!1&&(B.type=N),F&&(B.style={...B.style,color:F}),M&&(B.style={...B.style,backgroundColor:M}),W&&(B.style={...B.style,fontWeight:W}),D&&(B.style={...B.style,fontStyle:D}),Y&&(B.style={...B.style,borderColor:Y}),B.isChecked=!0,B}else return{...y}});f?m([...k],[...G],[...Q]):m(k,[...G],[...Q])}}function ie(){let N=h+1,F=JSON.parse(localStorage.getItem("Changes"));F=F[N],r([...F]),p(N),console.log(JSON.parse(localStorage.getItem("Changes")))}function ce(){let N=h-1,F=JSON.parse(localStorage.getItem("Changes"));F=F[N],r([...F]),p(N),console.log(JSON.parse(localStorage.getItem("Changes")))}const de=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:i?`${o.BG_Color_Prompt} ${o.Prompt_Box}`:`${o.Hide_BG_Color_Prompt} ${o.Prompt_Box}`,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{g(!1)}}),e.jsx("h1",{children:"Change BG Color"}),e.jsxs("label",{htmlFor:"colorPicker",className:o.colorPicker,children:[e.jsx("input",{type:"color",id:"colorPicker",onBlur:N=>{w(!1,!1,N.target.value,!1,!1)}}),e.jsx("span",{children:"Choose BG Color"})]}),e.jsx(d,{content:"Default",func:()=>{w(!1,!1,"#f09c2e",!1,!1)}})]}),e.jsxs("div",{className:_?`${o.Color_Prompt} ${o.Prompt_Box}`:`${o.Hide_Color_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Font Color"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{T(!1)}}),e.jsxs("label",{htmlFor:"bgColorPicker",className:`${o.bgColorPicker} ${o.colorPicker}`,children:[e.jsx("input",{type:"color",id:"bgColorPicker",onBlur:N=>{w(!1,N.target.value,!1,!1,!1)}}),e.jsx("span",{children:"Choose Font Color"})]}),e.jsx(d,{content:"Default",func:()=>{w(!1,"white",!1,!1,!1)}})]}),e.jsxs("div",{className:E?`${o.Border_Color_Prompt} ${o.Prompt_Box}`:`${o.Hide_Border_Color_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Border Color"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{P(!1)}}),e.jsxs("label",{htmlFor:"borderColorPicker",className:`${o.borderColorPicker} ${o.colorPicker}`,children:[e.jsx("input",{type:"color",id:"borderColorPicker",onBlur:N=>{w(!1,!1,!1,!1,!1,N.target.value)}}),e.jsx("span",{children:"Choose Border Color"})]}),e.jsx(d,{content:"Default",func:()=>{w(!1,!1,!1,!1,!1,"#d16c06")}})]}),e.jsxs("div",{className:$?`${o.Font_Weight_Prompt} ${o.Prompt_Box}`:`${o.Hide_Font_Weight_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Font Weight"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{b(!1)}}),e.jsx(d,{content:"Normal",func:()=>{w(!1,!1,!1,"Normal",!1,!1)}}),e.jsx(d,{content:"Bold",func:()=>{w(!1,!1,!1,"Bold",!1,!1)}}),e.jsx(d,{content:"Bolder",func:()=>{w(!1,!1,!1,"Bolder",!1,!1)}})]}),e.jsxs("div",{className:S?`${o.Italic_Prompt} ${o.Prompt_Box}`:`${o.Hide_Italic_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Italization"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{H(!1)}}),e.jsx(d,{content:"Normal",func:()=>{w(!1,!1,!1,!1,"Normal",!1)}}),e.jsx(d,{content:"Italic",func:()=>{w(!1,!1,!1,!1,"Italic",!1)}})]})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:o.topOptionsWrapper,children:[e.jsx(de,{}),e.jsxs("div",{className:o.topOptionsBox,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-save"}),content:"Save Changes",className:h==null?`${o.notWorking}`:null,func:()=>{h!=null&&l()}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"undo"}),content:"Undo",className:h==null||h==0?`${o.notWorking}`:null,func:()=>{h>0&&ce()}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"redo"}),content:"Redo",className:h<((K=JSON.parse(localStorage.getItem("Changes")))==null?void 0:K.length)-1&&h!=null?null:`${o.notWorking}`,func:()=>{var N;h<((N=JSON.parse(localStorage.getItem("Changes")))==null?void 0:N.length)-1&&h!=null&&ie()}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-plus"}),content:e.jsx("span",{children:" Create New Task"}),func:()=>{u(!0)}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-edit"}),content:e.jsx("span",{children:" Mark As Finished"}),className:a.length!=0?o.working:o.notWorking,func:()=>{w("finished","white","#51af0f",!1,!1,"rgb(8, 97, 20)")}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-edit"}),content:e.jsx("span",{children:" Mark As Pending"}),className:a.length!=0?o.working:o.notWorking,func:()=>{w("pending","white","#f09c2e",!1,!1,"rgb(209, 108, 6)")}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-sort"}),content:e.jsx("span",{children:" Sort"}),func:()=>{s(!0)}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"format_color_fill"}),content:e.jsx("span",{children:" BG Color "}),className:a.length!=0?o.working:o.notWorking,func:()=>{g(!0),T(!1),P(!1),b(!1),H(!1)}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"format_color_text"}),content:e.jsx("span",{children:" Font Color"}),className:a.length!=0?o.working:o.notWorking,func:()=>{T(!0),g(!1),P(!1),b(!1,H(!1))}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"border_color"}),content:e.jsx("span",{children:" Border Color"}),className:a.length!=0?o.working:o.notWorking,func:()=>{P(!0),g(!1),T(!1),b(!1),H(!1)}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-bold"}),content:" Bold",className:a.length!=0?o.working:o.notWorking,func:()=>{P(!1),g(!1),T(!1),b(!0),H(!1)}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-italic"}),content:" Italic",className:a.length!=0?o.working:o.notWorking,func:()=>{P(!1),g(!1),T(!1),b(!1),H(!0)}})]})]})})},Ws="_writeTaskPrompt_cl8qy_1",$s="_hideWriteTaskPrompt_cl8qy_1",ws="_nav_cl8qy_45",Fs="_content_cl8qy_115",Is="_submitButton_cl8qy_161",te={writeTaskPrompt:Ws,hideWriteTaskPrompt:$s,nav:ws,content:Fs,submitButton:Is},Es=({setWriteTaskPrompt:c})=>{const{writeTaskPrompt:r,writeTask:a,setShowNavbar:h}=n.useContext(A),p=n.useRef(null),m=n.useRef(null),[x,f]=n.useState(!1);function l(){f(Math.random()*1)}function t(){a(m.current.innerText)}function u(){m.current.innerHTML="<br>",s()}function s(){m.current.innerText==`
`||m.current.innerHTML=="<br>"?p.current.style.display="block":p.current.style.display="none"}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:r?te.writeTaskPrompt:te.hideWriteTaskPrompt,children:[e.jsxs("div",{className:te.nav,children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit"})," ",e.jsx("span",{children:"Task Prompt"})]}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-times"}),func:()=>{c(!1),u()}})]}),e.jsxs("div",{className:te.content,children:[e.jsx("span",{ref:p,children:"Type Any Task..."}),e.jsx("p",{ref:m,contentEditable:"true",onInput:()=>{l(),s()}})]}),e.jsx(d,{content:"Submit",className:te.submitButton,func:()=>{t(),u(),c(!1)}})]})})},Hs="_Changes_Wrapper_hvebf_1",Ds="_Changes_Box_hvebf_15",Js="_closeButton_hvebf_29",qs="_Top_hvebf_45",As="_Options_hvebf_71",ne={Changes_Wrapper:Hs,Changes_Box:Ds,closeButton:Js,Top:qs,Options:As},Us=()=>{const{saveChanges:c,setSaveChanges:r,user:a,setHideSideBar:h,setLoading:p,prevPage:m}=n.useContext(_e),{setNumberOfChanges:x,numberOfChanges:f}=n.useContext(A),{setTasks:l}=n.useContext(A),t=Be(),u=async()=>{var i;let s=JSON.parse(localStorage.getItem("Changes"));if(s){console.log(f),s=[...s[f]],s=s.map(T=>({...T,isChecked:!1}));const g=(i=a==null?void 0:a.uid)==null?void 0:i.toString(),_=le(re,`Users/${g}`);p(!0);try{await ue(_,{tasks:s}),x(null),l([...s]),localStorage.removeItem("Changes"),t(m)}catch(T){alert("Error Saving Your Changes"),r(!1),console.log("Error writing task:",T)}p(!1),h(!0)}};if(c)return e.jsx("div",{className:ne.Changes_Wrapper,children:e.jsxs("div",{className:ne.Changes_Box,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:ne.closeButton,func:()=>{r(!1)}}),e.jsxs("div",{className:ne.Top,children:[e.jsx("i",{className:"fa fa-warning"}),e.jsx("h3",{children:"Would You Save Your Previous Changes?"})]}),e.jsxs("div",{className:ne.Options,children:[e.jsx(d,{content:"No",func:()=>{r(!1),localStorage.removeItem("Changes"),window.location.reload()}}),e.jsx(d,{content:"Yes",func:()=>{r(!1),u()}})]})]})})},Ls="_tasksWrapper_8kb66_13",Ms="_tasksEditor_8kb66_33",Rs="_searchWrapper_8kb66_103",ae={tasksWrapper:Ls,tasksEditor:Ms,searchWrapper:Rs},A=n.createContext(),zs=()=>{const c=JSON.parse(localStorage.getItem("Changes")),{user:r,setShowMakeUserSignIn:a,setPages:h,setLoading:p,changes:m,setChanges:x,setTasksCache:f,tasksCache:l}=n.useContext(_e),t=n.useRef(),[u,s]=n.useState(!1),[i,g]=n.useState(!1),[_,T]=n.useState(!1),[E,P]=n.useState(!1),[$,b]=n.useState(!1),[S,H]=n.useState(!1),[w,ie]=n.useState(!1),[ce,de]=n.useState(!1),[K,N]=n.useState("Pending"),[F,M]=n.useState(c?c.length-1:null),[W,D]=n.useState([]),[Y,Q]=n.useState(W.length!=0?[...W]:[]),[G,k]=n.useState([]),[U,L]=n.useState([]),[y,B]=n.useState({}),[ge,xe]=n.useState([{type:"Pending",ind:!0},{type:"Finished",ind:!1},{type:"All Tasks",ind:!1}]),[X,ke]=n.useState([{description:"Newest to Oldest",state:!1},{description:"Oldest to Newest",state:!1},{description:"From A-Z",state:!1},{description:"From Z-A",state:!1}]),je=async j=>{var me;let C=[...W];const v=(me=r.uid)==null?void 0:me.toString(),O=le(re,"Users",v);let V="qwertyuiopasdfghjklzxcvbnm",z="";for(let oe=0;oe<10;oe++){let ye=Math.floor(Math.random()*V.length);z=z.concat(V[ye])}let Z={id:z,task:j,dateCreated:{fullDate:new Date,time:Date.now()},selected:!1,style:"default",cName:[JSON.stringify(I.col),JSON.stringify(I.br),JSON.stringify(I.fs),JSON.stringify(I.bgC),JSON.stringify(I.fW)],isChecked:!1,type:"pending"};C.unshift(Z);try{await ue(O,{tasks:be(Z)}),s(!1),D([...C])}catch(oe){console.log("Error writing task:",oe)}},pe=()=>{let j=W,C=G;$?(C=C.map(v=>({...v,isChecked:!1})),fe(null)):(j=j.map(v=>({...v,isChecked:!1})),fe(null)),D(v=>v.map(O=>({...O,isChecked:!1}))),$&&k([...C])};function fe(j){L(j==null?[]:[...j])}function Ce(j,C,v){const O=JSON.parse(localStorage.getItem("Changes"))!=null?JSON.parse(localStorage.getItem("Changes")):[];O.length==0&&O.push(W),O.length>=1&&O.push(C),localStorage.setItem("Changes",JSON.stringify(O)),M(O.length-1);let V=[],z=[];for(let Z in C)C[Z].isChecked?V.push(C[Z]):z.push(C[Z]);U.length>=1&&($&&k([...j]),D([...V,...z]),f([...V,...z]))}function Te(){t.current.value==""?(b(!1),k(null)):(b(!0),k(W.filter(j=>j.task.toLowerCase().includes(t.current.value.toLowerCase()))),console.log(W.filter(j=>j.task.toLowerCase().includes(t.current.value.toLowerCase()))),H(!1))}function Ne(){let j=X;for(let C=0;C<X.length;C++)if(j[C].state==!0){H(!0);break}else C==X.length-1&&X[C].state==!1&&H(!1)}async function Pe(){const j=r==null?void 0:r.uid.toString(),C=le(re,`Users/${j}`);p(!0);let v=JSON.parse(localStorage.getItem("Changes"));v=[...v[F]],v=v.map(O=>({...O,isChecked:!1}));try{await ue(C,{tasks:v}),M(null),D([...v]),pe(),localStorage.removeItem("Changes")}catch(O){alert(O.message)}p(!1)}n.useEffect(()=>{r!=null&&r.uid&&(l==null?void 0:l.length)==0?(a(!1),h(C=>C.map(v=>v.name==="Tasks"?{...v,ind:!0}:{...v})),(async()=>{try{const C=le(re,"Users",r==null?void 0:r.uid);let O=(await ve(C)).data().tasks;D([...O]),f([...O])}catch(C){console.log(C)}})()):a(!0)},[r]);const Se={writeTaskPrompt:u,setWriteTaskPrompt:s,editTaskPrompt:i,setEditTaskPrompt:g,sortTaskPrompt:_,setSortTaskPrompt:T,sortingTypeBar:E,setSortingTypeBar:P,type:K,setType:N,searching:$,setSearching:b,sorting:S,setSorting:H,selecting:w,setSelecting:ie,editing:ce,setEditing:de,numberOfChanges:F,setNumberOfChanges:M,tasks:W,setTasks:D,filteredTasks:G,setFilteredTasks:k,tasksOnType:Y,setTasksOnType:Q,selectedTasks:U,setSelectedTasks:L,changes:m,setChanges:x,sortingTypes:ge,setSortingTypes:xe,type:K,setType:N,sortOptions:X,setSortOptions:ke,openedTask:y,setOpenedTask:B,unselectAll:pe,handleSelectedTasks:fe,handleMarking:Ce,saveToDataBase:Pe,writeTask:j=>je(j)};return n.useEffect(()=>{t.current.value==""?(b(!1),k(null)):(b(!0),k(W.filter(j=>j.task.toLowerCase().includes(t.current.value.toLowerCase()))),console.log(W.filter(j=>j.task.toLowerCase().includes(t.current.value.toLowerCase()))),H(!1))},[W]),n.useEffect(()=>{if((m==null?void 0:m.length)!=0){let j=m;j!=null&&D(j?[...j[j.length-1]]:null)}l&&(console.log(l),D(l))},[m,l]),e.jsx(e.Fragment,{children:e.jsx(A.Provider,{value:Se,children:e.jsx("div",{className:ae.tasksWrapper,children:e.jsxs("div",{className:ae.tasksEditor,children:[e.jsxs("h2",{className:ae.titleWrapper,children:["Tasks",e.jsx("i",{className:"fa fa-bars",onClick:()=>{P(!E)}}),e.jsx(ze,{})]}),e.jsx(Os,{}),e.jsx("div",{className:ae.searchWrapper,children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"searchBar",children:e.jsx("i",{className:"fa fa-search"})}),e.jsx("input",{id:"search-bar",type:"text",ref:t,placeholder:"Type Task...",onChange:()=>{Te(),Ne()}}),e.jsx(d,{content:"Search",className:ae.Search_button})]})}),e.jsx(Ie,{}),e.jsx(hs,{}),e.jsx(Es,{setWriteTaskPrompt:s}),e.jsx(Ae,{}),e.jsx(Us,{}),e.jsx(ss,{})]})})})})};export{zs as default,A as tasksContext};
