import{r as c,c as K,j as t}from"./index-B09V2yuk.js";const w="_foldersWrapper_161kt_17",z="_foldersNav_161kt_75",L="_horizontalLine_161kt_93",A="_right_161kt_121",M="_foldersBottomNav_161kt_139",V="_left_161kt_153",q="_uncheck_161kt_153",G="_foldersBox_161kt_199",H="_folderPathWrapper_161kt_211",T="_hideFolderInput_161kt_241",U="_folderInput_161kt_249",J="_close_161kt_249",Q="_folder_161kt_17",X="_open_161kt_291",Y="_selected_161kt_355",Z="_fullContent_161kt_375",n={foldersWrapper:w,foldersNav:z,horizontalLine:L,right:A,foldersBottomNav:M,left:V,uncheck:q,foldersBox:G,folderPathWrapper:H,hideFolderInput:T,folderInput:U,close:J,folder:Q,open:X,selected:Y,fullContent:Z},ne=()=>{const{setPages:u}=c.useContext(K),x=c.useRef(null),[d,j]=c.useState(null),[B,_]=c.useState(null),[se,W]=c.useState(!1),[h,v]=c.useState(!1),[O,p]=c.useState(!1),[i,k]=c.useState("Folders/"),[o,f]=c.useState([{name:"School Works",dateCreated:null,isSelected:!1,id:839259432,type:"folder",path:"Folders/"},{name:"Office Works",dateCreated:null,isSelected:!1,id:395732794,type:"folder",path:"Folders/"},{name:"Home Works",dateCreated:null,isSelected:!1,id:328584320,type:"folder",path:"Folders/"},{name:"Mga kakupalan",dateCreated:null,isSelected:!1,id:324325343,type:"folder",path:"Folders/School Works/"}]),[F,N]=c.useState([]),[m,g]=c.useState([{name:"Folders",path:"Folders/"}]),[y,S]=c.useState([]);function P(e){let s=o,l=[];for(let a in s)e.id==s[a].id&&(s[a].isSelected=!s[a].isSelected);for(let a in o)o[a].isSelected&&l.push(o[a].id);console.log(),S([...l]),f([...s])}function E(e){f(a=>a.map(r=>({...r,isSelected:!!e})));let s=o,l=[];for(let a in s)s[a].isSelected=!!e,e&&l.push(s[a].id);S([...l])}function I(e){console.log(i);const s={name:e.target.value,dateCreated:null,isSelected:!1,id:Math.floor(Math.random()*1e6),type:"folder",path:i},l=e.target.value;e.key=="Enter"&&(l!=""?f(r=>[s,...r]):p(!1),p(!1),e.target.value="")}function R(){let e=o;for(let s in y)for(let l in e)y[s]==e[l].id&&e.splice(l,1);S([]),f([...e])}function $(e,s){const l=e.target.value,a=e.key;console.log(s.name),a=="Enter"&&(l!=""?f(r=>r.map(C=>s.name==C.name?{...C,name:l}:{...C})):_(null),j(null))}function b(e){let s=[],l=m;for(let a in o)o[a].path==i&&s.push(o[a]);for(let a in m)if(m[a].path==e.path){for(let r=m.length-1;r!=a;r--)l.splice(r,1);break}g([...l]),N([...s])}function D(e){e!=null&&e.name&&k(i+(e==null?void 0:e.name)+"/"),g(l=>[...l,{name:e==null?void 0:e.name,path:(e==null?void 0:e.path)+(e==null?void 0:e.name)+"/"}]);let s=[];for(let l in o)o[l].path==i&&s.push(o[l]);N([...s])}return c.useEffect(()=>{if(i!=""){let e=[];for(let s in o)o[s].path===i&&e.push(o[s]);console.log(o),N([...e])}},[i,o]),c.useEffect(()=>{u(e=>e.map(s=>s.name==="Folders"?{...s,ind:!0}:{...s}))},[]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:n.foldersWrapper,children:[t.jsx(ee,{createFolder:I,setShowFolderInput:p}),h?t.jsx(te,{selecting:h,setSelecting:v,handleSelectingAll:E,deleteSelectedFolder:R}):t.jsx("div",{className:n.foldersBottomNav,children:t.jsx("button",{onClick:()=>{v(!0)},children:"Select Folders"})}),t.jsxs("div",{className:n.foldersBox,children:[t.jsx("div",{className:n.folderPathWrapper,children:t.jsx("h3",{children:m.map(e=>e.path=="Folders/"?t.jsx("span",{children:t.jsxs("span",{onClick:()=>{k(e.path),b(e)},children:[e.name," "]})},e.name+e.path):t.jsxs("span",{children:["/ ",t.jsxs("span",{onClick:()=>{k(e.path),b(e)},children:[e.name," "]})]},e.name+e.path))})}),t.jsxs("div",{className:O?n.folderInput:n.hideFolderInput,children:[t.jsx("i",{className:"fa fa-folder"}),t.jsx("input",{type:"text",ref:x,id:"folderInput",onBlur:()=>{p(!1),x.current.value=""},onKeyDown:e=>{I(e)}}),t.jsx("i",{className:`fa fa-close ${n.close}`,onClick:()=>{p(!1)}})]}),F==null?void 0:F.map((e,s)=>t.jsxs("label",{htmlFor:d!=null?e.id:null,className:e.isSelected?`${n.selected} ${n.folder}`:`${n.folder}`,onDoubleClick:()=>{h||(j(e.name),_(e.id))},children:[t.jsx("input",{type:"checkbox",style:h?{display:"block"}:{display:"none"},checked:!!e.isSelected,onChange:()=>{h&&P(e)}}),t.jsx("i",{className:"fa fa-folder"}),d!=null&&B==e.id?t.jsx("input",{id:e.id,type:"text",value:d,onKeyDown:l=>{$(l,e)},onBlur:()=>[j(null),_(null)],onChange:l=>{j(l.target.value)}}):t.jsx("span",{children:e.name}),t.jsx("button",{className:n.open,onClick:()=>{e.type==="folder"?D(e):W(!0)},children:"Open"})]},e.name))]})]})})},ee=({setShowFolderInput:u})=>t.jsxs("div",{className:n.foldersNav,children:[t.jsx("h1",{children:"Folders"}),t.jsx("div",{className:n.right,children:t.jsx("button",{onClick:()=>{u(!0)},children:t.jsx("label",{htmlFor:"folderInput",children:"Create"})})}),t.jsx("span",{className:n.horizontalLine})]}),te=({deleteSelectedFolder:u,setSelecting:x,handleSelectingAll:d})=>t.jsxs("div",{className:n.foldersBottomNav,children:[t.jsxs("div",{className:n.left,children:[t.jsxs("button",{onClick:()=>{d(!0)},children:[t.jsx("i",{className:"fa fa-check"}),t.jsx("span",{className:n.fullContent,children:"Select All"})]}),t.jsxs("button",{onClick:()=>{d(!1)},children:[t.jsx("i",{className:`fa fa-check-square ${n.uncheck}`}),t.jsx("span",{className:n.fullContent,children:"Unselect All"})]})]}),t.jsxs("div",{className:n.right,children:[t.jsxs("button",{onClick:()=>{u()},children:[t.jsx("i",{className:"fa fa-trash"}),t.jsx("span",{className:n.fullContent,children:"Delete"})]}),t.jsxs("button",{onClick:()=>{x(!1),d(!1)},children:[t.jsx("i",{className:"fa fa-close"}),t.jsx("span",{className:n.fullContent,children:"Cancel"})]})]})]});export{ne as default};
